var bM=Object.defineProperty;var bw=e=>{throw TypeError(e)};var SM=(e,t,n)=>t in e?bM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Sw=(e,t,n)=>SM(e,typeof t!="symbol"?t+"":t,n),lp=(e,t,n)=>t.has(e)||bw("Cannot "+n);var J=(e,t,n)=>(lp(e,t,"read from private field"),n?n.call(e):t.get(e)),Xe=(e,t,n)=>t.has(e)?bw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ee=(e,t,n,r)=>(lp(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),yt=(e,t,n)=>(lp(e,t,"access private method"),n);var Id=(e,t,n,r)=>({set _(s){Ee(e,t,s,n)},get _(){return J(e,t,r)}});function NM(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const kM="modulepreload",CM=function(e){return"/MotionAG/"+e},Nw={},lu=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=CM(u),u in Nw)return;Nw[u]=!0;const h=u.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":kM,h||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),h)return new Promise((g,v)=>{f.addEventListener("load",g),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};var cS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uS={exports:{}},zf={},dS={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu=Symbol.for("react.element"),jM=Symbol.for("react.portal"),EM=Symbol.for("react.fragment"),TM=Symbol.for("react.strict_mode"),PM=Symbol.for("react.profiler"),MM=Symbol.for("react.provider"),IM=Symbol.for("react.context"),RM=Symbol.for("react.forward_ref"),LM=Symbol.for("react.suspense"),AM=Symbol.for("react.memo"),OM=Symbol.for("react.lazy"),kw=Symbol.iterator;function DM(e){return e===null||typeof e!="object"?null:(e=kw&&e[kw]||e["@@iterator"],typeof e=="function"?e:null)}var hS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fS=Object.assign,mS={};function nc(e,t,n){this.props=e,this.context=t,this.refs=mS,this.updater=n||hS}nc.prototype.isReactComponent={};nc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pS(){}pS.prototype=nc.prototype;function jy(e,t,n){this.props=e,this.context=t,this.refs=mS,this.updater=n||hS}var Ey=jy.prototype=new pS;Ey.constructor=jy;fS(Ey,nc.prototype);Ey.isPureReactComponent=!0;var Cw=Array.isArray,gS=Object.prototype.hasOwnProperty,Ty={current:null},vS={key:!0,ref:!0,__self:!0,__source:!0};function yS(e,t,n){var r,s={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)gS.call(t,r)&&!vS.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:qu,type:e,key:i,ref:l,props:s,_owner:Ty.current}}function $M(e,t){return{$$typeof:qu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Py(e){return typeof e=="object"&&e!==null&&e.$$typeof===qu}function zM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jw=/\/+/g;function cp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zM(""+e.key):t.toString(36)}function dh(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case qu:case jM:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+cp(l,0):r,Cw(s)?(n="",e!=null&&(n=e.replace(jw,"$&/")+"/"),dh(s,t,n,"",function(h){return h})):s!=null&&(Py(s)&&(s=$M(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(jw,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",Cw(e))for(var c=0;c<e.length;c++){i=e[c];var u=r+cp(i,c);l+=dh(i,t,n,u,s)}else if(u=DM(e),typeof u=="function")for(e=u.call(e),c=0;!(i=e.next()).done;)i=i.value,u=r+cp(i,c++),l+=dh(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Rd(e,t,n){if(e==null)return e;var r=[],s=0;return dh(e,r,"","",function(i){return t.call(n,i,s++)}),r}function BM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ir={current:null},hh={transition:null},FM={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:hh,ReactCurrentOwner:Ty};function xS(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:Rd,forEach:function(e,t,n){Rd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rd(e,function(){t++}),t},toArray:function(e){return Rd(e,function(t){return t})||[]},only:function(e){if(!Py(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gt.Component=nc;gt.Fragment=EM;gt.Profiler=PM;gt.PureComponent=jy;gt.StrictMode=TM;gt.Suspense=LM;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FM;gt.act=xS;gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fS({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Ty.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)gS.call(t,u)&&!vS.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:qu,type:e.type,key:s,ref:i,props:r,_owner:l}};gt.createContext=function(e){return e={$$typeof:IM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MM,_context:e},e.Consumer=e};gt.createElement=yS;gt.createFactory=function(e){var t=yS.bind(null,e);return t.type=e,t};gt.createRef=function(){return{current:null}};gt.forwardRef=function(e){return{$$typeof:RM,render:e}};gt.isValidElement=Py;gt.lazy=function(e){return{$$typeof:OM,_payload:{_status:-1,_result:e},_init:BM}};gt.memo=function(e,t){return{$$typeof:AM,type:e,compare:t===void 0?null:t}};gt.startTransition=function(e){var t=hh.transition;hh.transition={};try{e()}finally{hh.transition=t}};gt.unstable_act=xS;gt.useCallback=function(e,t){return ir.current.useCallback(e,t)};gt.useContext=function(e){return ir.current.useContext(e)};gt.useDebugValue=function(){};gt.useDeferredValue=function(e){return ir.current.useDeferredValue(e)};gt.useEffect=function(e,t){return ir.current.useEffect(e,t)};gt.useId=function(){return ir.current.useId()};gt.useImperativeHandle=function(e,t,n){return ir.current.useImperativeHandle(e,t,n)};gt.useInsertionEffect=function(e,t){return ir.current.useInsertionEffect(e,t)};gt.useLayoutEffect=function(e,t){return ir.current.useLayoutEffect(e,t)};gt.useMemo=function(e,t){return ir.current.useMemo(e,t)};gt.useReducer=function(e,t,n){return ir.current.useReducer(e,t,n)};gt.useRef=function(e){return ir.current.useRef(e)};gt.useState=function(e){return ir.current.useState(e)};gt.useSyncExternalStore=function(e,t,n){return ir.current.useSyncExternalStore(e,t,n)};gt.useTransition=function(){return ir.current.useTransition()};gt.version="18.3.1";dS.exports=gt;var p=dS.exports;const be=Cy(p),My=NM({__proto__:null,default:be},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UM=p,WM=Symbol.for("react.element"),HM=Symbol.for("react.fragment"),VM=Object.prototype.hasOwnProperty,GM=UM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZM={key:!0,ref:!0,__self:!0,__source:!0};function wS(e,t,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)VM.call(t,r)&&!ZM.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:WM,type:e,key:i,ref:l,props:s,_owner:GM.current}}zf.Fragment=HM;zf.jsx=wS;zf.jsxs=wS;uS.exports=zf;var a=uS.exports,_S={exports:{}},Or={},bS={exports:{}},SS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,O){var F=I.length;I.push(O);e:for(;0<F;){var X=F-1>>>1,re=I[X];if(0<s(re,O))I[X]=O,I[F]=re,F=X;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var O=I[0],F=I.pop();if(F!==O){I[0]=F;e:for(var X=0,re=I.length,ae=re>>>1;X<ae;){var ie=2*(X+1)-1,oe=I[ie],ge=ie+1,ce=I[ge];if(0>s(oe,F))ge<re&&0>s(ce,oe)?(I[X]=ce,I[ge]=F,X=ge):(I[X]=oe,I[ie]=F,X=ie);else if(ge<re&&0>s(ce,F))I[X]=ce,I[ge]=F,X=ge;else break e}}return O}function s(I,O){var F=I.sortIndex-O.sortIndex;return F!==0?F:I.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var u=[],h=[],m=1,f=null,g=3,v=!1,_=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(I){for(var O=n(h);O!==null;){if(O.callback===null)r(h);else if(O.startTime<=I)r(h),O.sortIndex=O.expirationTime,t(u,O);else break;O=n(h)}}function j(I){if(x=!1,k(I),!_)if(n(u)!==null)_=!0,$(T);else{var O=n(h);O!==null&&U(j,O.startTime-I)}}function T(I,O){_=!1,x&&(x=!1,w(B),B=-1),v=!0;var F=g;try{for(k(O),f=n(u);f!==null&&(!(f.expirationTime>O)||I&&!te());){var X=f.callback;if(typeof X=="function"){f.callback=null,g=f.priorityLevel;var re=X(f.expirationTime<=O);O=e.unstable_now(),typeof re=="function"?f.callback=re:f===n(u)&&r(u),k(O)}else r(u);f=n(u)}if(f!==null)var ae=!0;else{var ie=n(h);ie!==null&&U(j,ie.startTime-O),ae=!1}return ae}finally{f=null,g=F,v=!1}}var R=!1,E=null,B=-1,q=5,Y=-1;function te(){return!(e.unstable_now()-Y<q)}function A(){if(E!==null){var I=e.unstable_now();Y=I;var O=!0;try{O=E(!0,I)}finally{O?W():(R=!1,E=null)}}else R=!1}var W;if(typeof S=="function")W=function(){S(A)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Z=P.port2;P.port1.onmessage=A,W=function(){Z.postMessage(null)}}else W=function(){b(A,0)};function $(I){E=I,R||(R=!0,W())}function U(I,O){B=b(function(){I(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){_||v||(_=!0,$(T))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(I){switch(g){case 1:case 2:case 3:var O=3;break;default:O=g}var F=g;g=O;try{return I()}finally{g=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,O){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var F=g;g=I;try{return O()}finally{g=F}},e.unstable_scheduleCallback=function(I,O,F){var X=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,I){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=F+re,I={id:m++,callback:O,priorityLevel:I,startTime:F,expirationTime:re,sortIndex:-1},F>X?(I.sortIndex=F,t(h,I),n(u)===null&&I===n(h)&&(x?(w(B),B=-1):x=!0,U(j,F-X))):(I.sortIndex=re,t(u,I),_||v||(_=!0,$(T))),I},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(I){var O=g;return function(){var F=g;g=O;try{return I.apply(this,arguments)}finally{g=F}}}})(SS);bS.exports=SS;var qM=bS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM=p,Lr=qM;function xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var NS=new Set,cu={};function ka(e,t){Dl(e,t),Dl(e+"Capture",t)}function Dl(e,t){for(cu[e]=t,e=0;e<t.length;e++)NS.add(t[e])}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_g=Object.prototype.hasOwnProperty,YM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ew={},Tw={};function JM(e){return _g.call(Tw,e)?!0:_g.call(Ew,e)?!1:YM.test(e)?Tw[e]=!0:(Ew[e]=!0,!1)}function XM(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function QM(e,t,n,r){if(t===null||typeof t>"u"||XM(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function or(e,t,n,r,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bn[e]=new or(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bn[t]=new or(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bn[e]=new or(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bn[e]=new or(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bn[e]=new or(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bn[e]=new or(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bn[e]=new or(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bn[e]=new or(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bn[e]=new or(e,5,!1,e.toLowerCase(),null,!1,!1)});var Iy=/[\-:]([a-z])/g;function Ry(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Iy,Ry);Bn[t]=new or(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Iy,Ry);Bn[t]=new or(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Iy,Ry);Bn[t]=new or(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bn[e]=new or(e,1,!1,e.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bn[e]=new or(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ly(e,t,n,r){var s=Bn.hasOwnProperty(t)?Bn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(QM(t,n,s,r)&&(n=null),r||s===null?JM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Pi=KM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ld=Symbol.for("react.element"),Qa=Symbol.for("react.portal"),el=Symbol.for("react.fragment"),Ay=Symbol.for("react.strict_mode"),bg=Symbol.for("react.profiler"),kS=Symbol.for("react.provider"),CS=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),Sg=Symbol.for("react.suspense"),Ng=Symbol.for("react.suspense_list"),Dy=Symbol.for("react.memo"),Fi=Symbol.for("react.lazy"),jS=Symbol.for("react.offscreen"),Pw=Symbol.iterator;function jc(e){return e===null||typeof e!="object"?null:(e=Pw&&e[Pw]||e["@@iterator"],typeof e=="function"?e:null)}var nn=Object.assign,up;function Uc(e){if(up===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);up=t&&t[1]||""}return`
`+up+e}var dp=!1;function hp(e,t){if(!e||dp)return"";dp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,c=i.length-1;1<=l&&0<=c&&s[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(s[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||s[l]!==i[c]){var u=`
`+s[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=c);break}}}finally{dp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Uc(e):""}function eI(e){switch(e.tag){case 5:return Uc(e.type);case 16:return Uc("Lazy");case 13:return Uc("Suspense");case 19:return Uc("SuspenseList");case 0:case 2:case 15:return e=hp(e.type,!1),e;case 11:return e=hp(e.type.render,!1),e;case 1:return e=hp(e.type,!0),e;default:return""}}function kg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case el:return"Fragment";case Qa:return"Portal";case bg:return"Profiler";case Ay:return"StrictMode";case Sg:return"Suspense";case Ng:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CS:return(e.displayName||"Context")+".Consumer";case kS:return(e._context.displayName||"Context")+".Provider";case Oy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dy:return t=e.displayName||null,t!==null?t:kg(e.type)||"Memo";case Fi:t=e._payload,e=e._init;try{return kg(e(t))}catch{}}return null}function tI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kg(t);case 8:return t===Ay?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ES(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nI(e){var t=ES(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ad(e){e._valueTracker||(e._valueTracker=nI(e))}function TS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ES(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ah(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Cg(e,t){var n=t.checked;return nn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Mw(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PS(e,t){t=t.checked,t!=null&&Ly(e,"checked",t,!1)}function jg(e,t){PS(e,t);var n=yo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Eg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Eg(e,t.type,yo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Iw(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Eg(e,t,n){(t!=="number"||Ah(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wc=Array.isArray;function dl(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yo(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Tg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(xe(91));return nn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rw(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(xe(92));if(Wc(n)){if(1<n.length)throw Error(xe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yo(n)}}function MS(e,t){var n=yo(t.value),r=yo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Lw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function IS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?IS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Od,RS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Od=Od||document.createElement("div"),Od.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Od.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rI=["Webkit","ms","Moz","O"];Object.keys(Xc).forEach(function(e){rI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xc[t]=Xc[e]})});function LS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Xc.hasOwnProperty(e)&&Xc[e]?(""+t).trim():t+"px"}function AS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=LS(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var sI=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mg(e,t){if(t){if(sI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(xe(62))}}function Ig(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rg=null;function $y(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lg=null,hl=null,fl=null;function Aw(e){if(e=Ju(e)){if(typeof Lg!="function")throw Error(xe(280));var t=e.stateNode;t&&(t=Hf(t),Lg(e.stateNode,e.type,t))}}function OS(e){hl?fl?fl.push(e):fl=[e]:hl=e}function DS(){if(hl){var e=hl,t=fl;if(fl=hl=null,Aw(e),t)for(e=0;e<t.length;e++)Aw(t[e])}}function $S(e,t){return e(t)}function zS(){}var fp=!1;function BS(e,t,n){if(fp)return e(t,n);fp=!0;try{return $S(e,t,n)}finally{fp=!1,(hl!==null||fl!==null)&&(zS(),DS())}}function du(e,t){var n=e.stateNode;if(n===null)return null;var r=Hf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(xe(231,t,typeof n));return n}var Ag=!1;if(Si)try{var Ec={};Object.defineProperty(Ec,"passive",{get:function(){Ag=!0}}),window.addEventListener("test",Ec,Ec),window.removeEventListener("test",Ec,Ec)}catch{Ag=!1}function iI(e,t,n,r,s,i,l,c,u){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(m){this.onError(m)}}var Qc=!1,Oh=null,Dh=!1,Og=null,oI={onError:function(e){Qc=!0,Oh=e}};function aI(e,t,n,r,s,i,l,c,u){Qc=!1,Oh=null,iI.apply(oI,arguments)}function lI(e,t,n,r,s,i,l,c,u){if(aI.apply(this,arguments),Qc){if(Qc){var h=Oh;Qc=!1,Oh=null}else throw Error(xe(198));Dh||(Dh=!0,Og=h)}}function Ca(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function FS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ow(e){if(Ca(e)!==e)throw Error(xe(188))}function cI(e){var t=e.alternate;if(!t){if(t=Ca(e),t===null)throw Error(xe(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ow(s),e;if(i===r)return Ow(s),t;i=i.sibling}throw Error(xe(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,c=s.child;c;){if(c===n){l=!0,n=s,r=i;break}if(c===r){l=!0,r=s,n=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===n){l=!0,n=i,r=s;break}if(c===r){l=!0,r=i,n=s;break}c=c.sibling}if(!l)throw Error(xe(189))}}if(n.alternate!==r)throw Error(xe(190))}if(n.tag!==3)throw Error(xe(188));return n.stateNode.current===n?e:t}function US(e){return e=cI(e),e!==null?WS(e):null}function WS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=WS(e);if(t!==null)return t;e=e.sibling}return null}var HS=Lr.unstable_scheduleCallback,Dw=Lr.unstable_cancelCallback,uI=Lr.unstable_shouldYield,dI=Lr.unstable_requestPaint,hn=Lr.unstable_now,hI=Lr.unstable_getCurrentPriorityLevel,zy=Lr.unstable_ImmediatePriority,VS=Lr.unstable_UserBlockingPriority,$h=Lr.unstable_NormalPriority,fI=Lr.unstable_LowPriority,GS=Lr.unstable_IdlePriority,Bf=null,Vs=null;function mI(e){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(Bf,e,void 0,(e.current.flags&128)===128)}catch{}}var ws=Math.clz32?Math.clz32:vI,pI=Math.log,gI=Math.LN2;function vI(e){return e>>>=0,e===0?32:31-(pI(e)/gI|0)|0}var Dd=64,$d=4194304;function Hc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~s;c!==0?r=Hc(c):(i&=l,i!==0&&(r=Hc(i)))}else l=n&~s,l!==0?r=Hc(l):i!==0&&(r=Hc(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ws(t),s=1<<n,r|=e[n],t&=~s;return r}function yI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-ws(i),c=1<<l,u=s[l];u===-1?(!(c&n)||c&r)&&(s[l]=yI(c,t)):u<=t&&(e.expiredLanes|=c),i&=~c}}function Dg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ZS(){var e=Dd;return Dd<<=1,!(Dd&4194240)&&(Dd=64),e}function mp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ku(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ws(t),e[t]=n}function wI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ws(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function By(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ws(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var $t=0;function qS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var KS,Fy,YS,JS,XS,$g=!1,zd=[],ao=null,lo=null,co=null,hu=new Map,fu=new Map,Hi=[],_I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $w(e,t){switch(e){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":hu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(t.pointerId)}}function Tc(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ju(t),t!==null&&Fy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function bI(e,t,n,r,s){switch(t){case"focusin":return ao=Tc(ao,e,t,n,r,s),!0;case"dragenter":return lo=Tc(lo,e,t,n,r,s),!0;case"mouseover":return co=Tc(co,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return hu.set(i,Tc(hu.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,fu.set(i,Tc(fu.get(i)||null,e,t,n,r,s)),!0}return!1}function QS(e){var t=Go(e.target);if(t!==null){var n=Ca(t);if(n!==null){if(t=n.tag,t===13){if(t=FS(n),t!==null){e.blockedOn=t,XS(e.priority,function(){YS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Rg=r,n.target.dispatchEvent(r),Rg=null}else return t=Ju(n),t!==null&&Fy(t),e.blockedOn=n,!1;t.shift()}return!0}function zw(e,t,n){fh(e)&&n.delete(t)}function SI(){$g=!1,ao!==null&&fh(ao)&&(ao=null),lo!==null&&fh(lo)&&(lo=null),co!==null&&fh(co)&&(co=null),hu.forEach(zw),fu.forEach(zw)}function Pc(e,t){e.blockedOn===t&&(e.blockedOn=null,$g||($g=!0,Lr.unstable_scheduleCallback(Lr.unstable_NormalPriority,SI)))}function mu(e){function t(s){return Pc(s,e)}if(0<zd.length){Pc(zd[0],e);for(var n=1;n<zd.length;n++){var r=zd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ao!==null&&Pc(ao,e),lo!==null&&Pc(lo,e),co!==null&&Pc(co,e),hu.forEach(t),fu.forEach(t),n=0;n<Hi.length;n++)r=Hi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Hi.length&&(n=Hi[0],n.blockedOn===null);)QS(n),n.blockedOn===null&&Hi.shift()}var ml=Pi.ReactCurrentBatchConfig,Bh=!0;function NI(e,t,n,r){var s=$t,i=ml.transition;ml.transition=null;try{$t=1,Uy(e,t,n,r)}finally{$t=s,ml.transition=i}}function kI(e,t,n,r){var s=$t,i=ml.transition;ml.transition=null;try{$t=4,Uy(e,t,n,r)}finally{$t=s,ml.transition=i}}function Uy(e,t,n,r){if(Bh){var s=zg(e,t,n,r);if(s===null)Np(e,t,r,Fh,n),$w(e,r);else if(bI(s,e,t,n,r))r.stopPropagation();else if($w(e,r),t&4&&-1<_I.indexOf(e)){for(;s!==null;){var i=Ju(s);if(i!==null&&KS(i),i=zg(e,t,n,r),i===null&&Np(e,t,r,Fh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Np(e,t,r,null,n)}}var Fh=null;function zg(e,t,n,r){if(Fh=null,e=$y(r),e=Go(e),e!==null)if(t=Ca(e),t===null)e=null;else if(n=t.tag,n===13){if(e=FS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fh=e,null}function eN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hI()){case zy:return 1;case VS:return 4;case $h:case fI:return 16;case GS:return 536870912;default:return 16}default:return 16}}var so=null,Wy=null,mh=null;function tN(){if(mh)return mh;var e,t=Wy,n=t.length,r,s="value"in so?so.value:so.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[i-r];r++);return mh=s.slice(e,1<r?1-r:void 0)}function ph(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bd(){return!0}function Bw(){return!1}function Dr(e){function t(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bd:Bw,this.isPropagationStopped=Bw,this}return nn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bd)},persist:function(){},isPersistent:Bd}),t}var rc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hy=Dr(rc),Yu=nn({},rc,{view:0,detail:0}),CI=Dr(Yu),pp,gp,Mc,Ff=nn({},Yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mc&&(Mc&&e.type==="mousemove"?(pp=e.screenX-Mc.screenX,gp=e.screenY-Mc.screenY):gp=pp=0,Mc=e),pp)},movementY:function(e){return"movementY"in e?e.movementY:gp}}),Fw=Dr(Ff),jI=nn({},Ff,{dataTransfer:0}),EI=Dr(jI),TI=nn({},Yu,{relatedTarget:0}),vp=Dr(TI),PI=nn({},rc,{animationName:0,elapsedTime:0,pseudoElement:0}),MI=Dr(PI),II=nn({},rc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RI=Dr(II),LI=nn({},rc,{data:0}),Uw=Dr(LI),AI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $I(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DI[e])?!!t[e]:!1}function Vy(){return $I}var zI=nn({},Yu,{key:function(e){if(e.key){var t=AI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ph(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?OI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vy,charCode:function(e){return e.type==="keypress"?ph(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ph(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),BI=Dr(zI),FI=nn({},Ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ww=Dr(FI),UI=nn({},Yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vy}),WI=Dr(UI),HI=nn({},rc,{propertyName:0,elapsedTime:0,pseudoElement:0}),VI=Dr(HI),GI=nn({},Ff,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ZI=Dr(GI),qI=[9,13,27,32],Gy=Si&&"CompositionEvent"in window,eu=null;Si&&"documentMode"in document&&(eu=document.documentMode);var KI=Si&&"TextEvent"in window&&!eu,nN=Si&&(!Gy||eu&&8<eu&&11>=eu),Hw=" ",Vw=!1;function rN(e,t){switch(e){case"keyup":return qI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tl=!1;function YI(e,t){switch(e){case"compositionend":return sN(t);case"keypress":return t.which!==32?null:(Vw=!0,Hw);case"textInput":return e=t.data,e===Hw&&Vw?null:e;default:return null}}function JI(e,t){if(tl)return e==="compositionend"||!Gy&&rN(e,t)?(e=tN(),mh=Wy=so=null,tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nN&&t.locale!=="ko"?null:t.data;default:return null}}var XI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XI[e.type]:t==="textarea"}function iN(e,t,n,r){OS(r),t=Uh(t,"onChange"),0<t.length&&(n=new Hy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var tu=null,pu=null;function QI(e){gN(e,0)}function Uf(e){var t=sl(e);if(TS(t))return e}function eR(e,t){if(e==="change")return t}var oN=!1;if(Si){var yp;if(Si){var xp="oninput"in document;if(!xp){var Zw=document.createElement("div");Zw.setAttribute("oninput","return;"),xp=typeof Zw.oninput=="function"}yp=xp}else yp=!1;oN=yp&&(!document.documentMode||9<document.documentMode)}function qw(){tu&&(tu.detachEvent("onpropertychange",aN),pu=tu=null)}function aN(e){if(e.propertyName==="value"&&Uf(pu)){var t=[];iN(t,pu,e,$y(e)),BS(QI,t)}}function tR(e,t,n){e==="focusin"?(qw(),tu=t,pu=n,tu.attachEvent("onpropertychange",aN)):e==="focusout"&&qw()}function nR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Uf(pu)}function rR(e,t){if(e==="click")return Uf(t)}function sR(e,t){if(e==="input"||e==="change")return Uf(t)}function iR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bs=typeof Object.is=="function"?Object.is:iR;function gu(e,t){if(bs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_g.call(t,s)||!bs(e[s],t[s]))return!1}return!0}function Kw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yw(e,t){var n=Kw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kw(n)}}function lN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cN(){for(var e=window,t=Ah();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ah(e.document)}return t}function Zy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oR(e){var t=cN(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lN(n.ownerDocument.documentElement,n)){if(r!==null&&Zy(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Yw(n,i);var l=Yw(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var aR=Si&&"documentMode"in document&&11>=document.documentMode,nl=null,Bg=null,nu=null,Fg=!1;function Jw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fg||nl==null||nl!==Ah(r)||(r=nl,"selectionStart"in r&&Zy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nu&&gu(nu,r)||(nu=r,r=Uh(Bg,"onSelect"),0<r.length&&(t=new Hy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nl)))}function Fd(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var rl={animationend:Fd("Animation","AnimationEnd"),animationiteration:Fd("Animation","AnimationIteration"),animationstart:Fd("Animation","AnimationStart"),transitionend:Fd("Transition","TransitionEnd")},wp={},uN={};Si&&(uN=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Wf(e){if(wp[e])return wp[e];if(!rl[e])return e;var t=rl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uN)return wp[e]=t[n];return e}var dN=Wf("animationend"),hN=Wf("animationiteration"),fN=Wf("animationstart"),mN=Wf("transitionend"),pN=new Map,Xw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(e,t){pN.set(e,t),ka(t,[e])}for(var _p=0;_p<Xw.length;_p++){var bp=Xw[_p],lR=bp.toLowerCase(),cR=bp[0].toUpperCase()+bp.slice(1);So(lR,"on"+cR)}So(dN,"onAnimationEnd");So(hN,"onAnimationIteration");So(fN,"onAnimationStart");So("dblclick","onDoubleClick");So("focusin","onFocus");So("focusout","onBlur");So(mN,"onTransitionEnd");Dl("onMouseEnter",["mouseout","mouseover"]);Dl("onMouseLeave",["mouseout","mouseover"]);Dl("onPointerEnter",["pointerout","pointerover"]);Dl("onPointerLeave",["pointerout","pointerover"]);ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vc));function Qw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,lI(r,t,void 0,e),e.currentTarget=null}function gN(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Qw(s,c,h),i=u}else for(l=0;l<r.length;l++){if(c=r[l],u=c.instance,h=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Qw(s,c,h),i=u}}}if(Dh)throw e=Og,Dh=!1,Og=null,e}function Ht(e,t){var n=t[Gg];n===void 0&&(n=t[Gg]=new Set);var r=e+"__bubble";n.has(r)||(vN(t,e,2,!1),n.add(r))}function Sp(e,t,n){var r=0;t&&(r|=4),vN(n,e,r,t)}var Ud="_reactListening"+Math.random().toString(36).slice(2);function vu(e){if(!e[Ud]){e[Ud]=!0,NS.forEach(function(n){n!=="selectionchange"&&(uR.has(n)||Sp(n,!1,e),Sp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ud]||(t[Ud]=!0,Sp("selectionchange",!1,t))}}function vN(e,t,n,r){switch(eN(t)){case 1:var s=NI;break;case 4:s=kI;break;default:s=Uy}n=s.bind(null,t,n,e),s=void 0,!Ag||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Np(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;l=l.return}for(;c!==null;){if(l=Go(c),l===null)return;if(u=l.tag,u===5||u===6){r=i=l;continue e}c=c.parentNode}}r=r.return}BS(function(){var h=i,m=$y(n),f=[];e:{var g=pN.get(e);if(g!==void 0){var v=Hy,_=e;switch(e){case"keypress":if(ph(n)===0)break e;case"keydown":case"keyup":v=BI;break;case"focusin":_="focus",v=vp;break;case"focusout":_="blur",v=vp;break;case"beforeblur":case"afterblur":v=vp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Fw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=EI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=WI;break;case dN:case hN:case fN:v=MI;break;case mN:v=VI;break;case"scroll":v=CI;break;case"wheel":v=ZI;break;case"copy":case"cut":case"paste":v=RI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ww}var x=(t&4)!==0,b=!x&&e==="scroll",w=x?g!==null?g+"Capture":null:g;x=[];for(var S=h,k;S!==null;){k=S;var j=k.stateNode;if(k.tag===5&&j!==null&&(k=j,w!==null&&(j=du(S,w),j!=null&&x.push(yu(S,j,k)))),b)break;S=S.return}0<x.length&&(g=new v(g,_,null,n,m),f.push({event:g,listeners:x}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==Rg&&(_=n.relatedTarget||n.fromElement)&&(Go(_)||_[Ni]))break e;if((v||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=h,_=_?Go(_):null,_!==null&&(b=Ca(_),_!==b||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=h),v!==_)){if(x=Fw,j="onMouseLeave",w="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(x=Ww,j="onPointerLeave",w="onPointerEnter",S="pointer"),b=v==null?g:sl(v),k=_==null?g:sl(_),g=new x(j,S+"leave",v,n,m),g.target=b,g.relatedTarget=k,j=null,Go(m)===h&&(x=new x(w,S+"enter",_,n,m),x.target=k,x.relatedTarget=b,j=x),b=j,v&&_)t:{for(x=v,w=_,S=0,k=x;k;k=za(k))S++;for(k=0,j=w;j;j=za(j))k++;for(;0<S-k;)x=za(x),S--;for(;0<k-S;)w=za(w),k--;for(;S--;){if(x===w||w!==null&&x===w.alternate)break t;x=za(x),w=za(w)}x=null}else x=null;v!==null&&e_(f,g,v,x,!1),_!==null&&b!==null&&e_(f,b,_,x,!0)}}e:{if(g=h?sl(h):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var T=eR;else if(Gw(g))if(oN)T=sR;else{T=nR;var R=tR}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(T=rR);if(T&&(T=T(e,h))){iN(f,T,n,m);break e}R&&R(e,g,h),e==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&Eg(g,"number",g.value)}switch(R=h?sl(h):window,e){case"focusin":(Gw(R)||R.contentEditable==="true")&&(nl=R,Bg=h,nu=null);break;case"focusout":nu=Bg=nl=null;break;case"mousedown":Fg=!0;break;case"contextmenu":case"mouseup":case"dragend":Fg=!1,Jw(f,n,m);break;case"selectionchange":if(aR)break;case"keydown":case"keyup":Jw(f,n,m)}var E;if(Gy)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else tl?rN(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(nN&&n.locale!=="ko"&&(tl||B!=="onCompositionStart"?B==="onCompositionEnd"&&tl&&(E=tN()):(so=m,Wy="value"in so?so.value:so.textContent,tl=!0)),R=Uh(h,B),0<R.length&&(B=new Uw(B,e,null,n,m),f.push({event:B,listeners:R}),E?B.data=E:(E=sN(n),E!==null&&(B.data=E)))),(E=KI?YI(e,n):JI(e,n))&&(h=Uh(h,"onBeforeInput"),0<h.length&&(m=new Uw("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:h}),m.data=E))}gN(f,t)})}function yu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Uh(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=du(e,n),i!=null&&r.unshift(yu(e,i,s)),i=du(e,t),i!=null&&r.push(yu(e,i,s))),e=e.return}return r}function za(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function e_(e,t,n,r,s){for(var i=t._reactName,l=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,s?(u=du(n,i),u!=null&&l.unshift(yu(n,u,c))):s||(u=du(n,i),u!=null&&l.push(yu(n,u,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var dR=/\r\n?/g,hR=/\u0000|\uFFFD/g;function t_(e){return(typeof e=="string"?e:""+e).replace(dR,`
`).replace(hR,"")}function Wd(e,t,n){if(t=t_(t),t_(e)!==t&&n)throw Error(xe(425))}function Wh(){}var Ug=null,Wg=null;function Hg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vg=typeof setTimeout=="function"?setTimeout:void 0,fR=typeof clearTimeout=="function"?clearTimeout:void 0,n_=typeof Promise=="function"?Promise:void 0,mR=typeof queueMicrotask=="function"?queueMicrotask:typeof n_<"u"?function(e){return n_.resolve(null).then(e).catch(pR)}:Vg;function pR(e){setTimeout(function(){throw e})}function kp(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),mu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mu(t)}function uo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function r_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var sc=Math.random().toString(36).slice(2),Bs="__reactFiber$"+sc,xu="__reactProps$"+sc,Ni="__reactContainer$"+sc,Gg="__reactEvents$"+sc,gR="__reactListeners$"+sc,vR="__reactHandles$"+sc;function Go(e){var t=e[Bs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ni]||n[Bs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=r_(e);e!==null;){if(n=e[Bs])return n;e=r_(e)}return t}e=n,n=e.parentNode}return null}function Ju(e){return e=e[Bs]||e[Ni],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(xe(33))}function Hf(e){return e[xu]||null}var Zg=[],il=-1;function No(e){return{current:e}}function Zt(e){0>il||(e.current=Zg[il],Zg[il]=null,il--)}function Ft(e,t){il++,Zg[il]=e.current,e.current=t}var xo={},Kn=No(xo),vr=No(!1),ua=xo;function $l(e,t){var n=e.type.contextTypes;if(!n)return xo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function yr(e){return e=e.childContextTypes,e!=null}function Hh(){Zt(vr),Zt(Kn)}function s_(e,t,n){if(Kn.current!==xo)throw Error(xe(168));Ft(Kn,t),Ft(vr,n)}function yN(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(xe(108,tI(e)||"Unknown",s));return nn({},n,r)}function Vh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xo,ua=Kn.current,Ft(Kn,e),Ft(vr,vr.current),!0}function i_(e,t,n){var r=e.stateNode;if(!r)throw Error(xe(169));n?(e=yN(e,t,ua),r.__reactInternalMemoizedMergedChildContext=e,Zt(vr),Zt(Kn),Ft(Kn,e)):Zt(vr),Ft(vr,n)}var yi=null,Vf=!1,Cp=!1;function xN(e){yi===null?yi=[e]:yi.push(e)}function yR(e){Vf=!0,xN(e)}function ko(){if(!Cp&&yi!==null){Cp=!0;var e=0,t=$t;try{var n=yi;for($t=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}yi=null,Vf=!1}catch(s){throw yi!==null&&(yi=yi.slice(e+1)),HS(zy,ko),s}finally{$t=t,Cp=!1}}return null}var ol=[],al=0,Gh=null,Zh=0,Hr=[],Vr=0,da=null,wi=1,_i="";function $o(e,t){ol[al++]=Zh,ol[al++]=Gh,Gh=e,Zh=t}function wN(e,t,n){Hr[Vr++]=wi,Hr[Vr++]=_i,Hr[Vr++]=da,da=e;var r=wi;e=_i;var s=32-ws(r)-1;r&=~(1<<s),n+=1;var i=32-ws(t)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,wi=1<<32-ws(t)+s|n<<s|r,_i=i+e}else wi=1<<i|n<<s|r,_i=e}function qy(e){e.return!==null&&($o(e,1),wN(e,1,0))}function Ky(e){for(;e===Gh;)Gh=ol[--al],ol[al]=null,Zh=ol[--al],ol[al]=null;for(;e===da;)da=Hr[--Vr],Hr[Vr]=null,_i=Hr[--Vr],Hr[Vr]=null,wi=Hr[--Vr],Hr[Vr]=null}var Ir=null,Pr=null,Yt=!1,vs=null;function _N(e,t){var n=Kr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function o_(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ir=e,Pr=uo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ir=e,Pr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=da!==null?{id:wi,overflow:_i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ir=e,Pr=null,!0):!1;default:return!1}}function qg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Kg(e){if(Yt){var t=Pr;if(t){var n=t;if(!o_(e,t)){if(qg(e))throw Error(xe(418));t=uo(n.nextSibling);var r=Ir;t&&o_(e,t)?_N(r,n):(e.flags=e.flags&-4097|2,Yt=!1,Ir=e)}}else{if(qg(e))throw Error(xe(418));e.flags=e.flags&-4097|2,Yt=!1,Ir=e}}}function a_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ir=e}function Hd(e){if(e!==Ir)return!1;if(!Yt)return a_(e),Yt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hg(e.type,e.memoizedProps)),t&&(t=Pr)){if(qg(e))throw bN(),Error(xe(418));for(;t;)_N(e,t),t=uo(t.nextSibling)}if(a_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pr=uo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pr=null}}else Pr=Ir?uo(e.stateNode.nextSibling):null;return!0}function bN(){for(var e=Pr;e;)e=uo(e.nextSibling)}function zl(){Pr=Ir=null,Yt=!1}function Yy(e){vs===null?vs=[e]:vs.push(e)}var xR=Pi.ReactCurrentBatchConfig;function Ic(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(xe(309));var r=n.stateNode}if(!r)throw Error(xe(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var c=s.refs;l===null?delete c[i]:c[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(xe(284));if(!n._owner)throw Error(xe(290,e))}return e}function Vd(e,t){throw e=Object.prototype.toString.call(t),Error(xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function l_(e){var t=e._init;return t(e._payload)}function SN(e){function t(w,S){if(e){var k=w.deletions;k===null?(w.deletions=[S],w.flags|=16):k.push(S)}}function n(w,S){if(!e)return null;for(;S!==null;)t(w,S),S=S.sibling;return null}function r(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function s(w,S){return w=po(w,S),w.index=0,w.sibling=null,w}function i(w,S,k){return w.index=k,e?(k=w.alternate,k!==null?(k=k.index,k<S?(w.flags|=2,S):k):(w.flags|=2,S)):(w.flags|=1048576,S)}function l(w){return e&&w.alternate===null&&(w.flags|=2),w}function c(w,S,k,j){return S===null||S.tag!==6?(S=Rp(k,w.mode,j),S.return=w,S):(S=s(S,k),S.return=w,S)}function u(w,S,k,j){var T=k.type;return T===el?m(w,S,k.props.children,j,k.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Fi&&l_(T)===S.type)?(j=s(S,k.props),j.ref=Ic(w,S,k),j.return=w,j):(j=bh(k.type,k.key,k.props,null,w.mode,j),j.ref=Ic(w,S,k),j.return=w,j)}function h(w,S,k,j){return S===null||S.tag!==4||S.stateNode.containerInfo!==k.containerInfo||S.stateNode.implementation!==k.implementation?(S=Lp(k,w.mode,j),S.return=w,S):(S=s(S,k.children||[]),S.return=w,S)}function m(w,S,k,j,T){return S===null||S.tag!==7?(S=aa(k,w.mode,j,T),S.return=w,S):(S=s(S,k),S.return=w,S)}function f(w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Rp(""+S,w.mode,k),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ld:return k=bh(S.type,S.key,S.props,null,w.mode,k),k.ref=Ic(w,null,S),k.return=w,k;case Qa:return S=Lp(S,w.mode,k),S.return=w,S;case Fi:var j=S._init;return f(w,j(S._payload),k)}if(Wc(S)||jc(S))return S=aa(S,w.mode,k,null),S.return=w,S;Vd(w,S)}return null}function g(w,S,k,j){var T=S!==null?S.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return T!==null?null:c(w,S,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ld:return k.key===T?u(w,S,k,j):null;case Qa:return k.key===T?h(w,S,k,j):null;case Fi:return T=k._init,g(w,S,T(k._payload),j)}if(Wc(k)||jc(k))return T!==null?null:m(w,S,k,j,null);Vd(w,k)}return null}function v(w,S,k,j,T){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(k)||null,c(S,w,""+j,T);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ld:return w=w.get(j.key===null?k:j.key)||null,u(S,w,j,T);case Qa:return w=w.get(j.key===null?k:j.key)||null,h(S,w,j,T);case Fi:var R=j._init;return v(w,S,k,R(j._payload),T)}if(Wc(j)||jc(j))return w=w.get(k)||null,m(S,w,j,T,null);Vd(S,j)}return null}function _(w,S,k,j){for(var T=null,R=null,E=S,B=S=0,q=null;E!==null&&B<k.length;B++){E.index>B?(q=E,E=null):q=E.sibling;var Y=g(w,E,k[B],j);if(Y===null){E===null&&(E=q);break}e&&E&&Y.alternate===null&&t(w,E),S=i(Y,S,B),R===null?T=Y:R.sibling=Y,R=Y,E=q}if(B===k.length)return n(w,E),Yt&&$o(w,B),T;if(E===null){for(;B<k.length;B++)E=f(w,k[B],j),E!==null&&(S=i(E,S,B),R===null?T=E:R.sibling=E,R=E);return Yt&&$o(w,B),T}for(E=r(w,E);B<k.length;B++)q=v(E,w,B,k[B],j),q!==null&&(e&&q.alternate!==null&&E.delete(q.key===null?B:q.key),S=i(q,S,B),R===null?T=q:R.sibling=q,R=q);return e&&E.forEach(function(te){return t(w,te)}),Yt&&$o(w,B),T}function x(w,S,k,j){var T=jc(k);if(typeof T!="function")throw Error(xe(150));if(k=T.call(k),k==null)throw Error(xe(151));for(var R=T=null,E=S,B=S=0,q=null,Y=k.next();E!==null&&!Y.done;B++,Y=k.next()){E.index>B?(q=E,E=null):q=E.sibling;var te=g(w,E,Y.value,j);if(te===null){E===null&&(E=q);break}e&&E&&te.alternate===null&&t(w,E),S=i(te,S,B),R===null?T=te:R.sibling=te,R=te,E=q}if(Y.done)return n(w,E),Yt&&$o(w,B),T;if(E===null){for(;!Y.done;B++,Y=k.next())Y=f(w,Y.value,j),Y!==null&&(S=i(Y,S,B),R===null?T=Y:R.sibling=Y,R=Y);return Yt&&$o(w,B),T}for(E=r(w,E);!Y.done;B++,Y=k.next())Y=v(E,w,B,Y.value,j),Y!==null&&(e&&Y.alternate!==null&&E.delete(Y.key===null?B:Y.key),S=i(Y,S,B),R===null?T=Y:R.sibling=Y,R=Y);return e&&E.forEach(function(A){return t(w,A)}),Yt&&$o(w,B),T}function b(w,S,k,j){if(typeof k=="object"&&k!==null&&k.type===el&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Ld:e:{for(var T=k.key,R=S;R!==null;){if(R.key===T){if(T=k.type,T===el){if(R.tag===7){n(w,R.sibling),S=s(R,k.props.children),S.return=w,w=S;break e}}else if(R.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Fi&&l_(T)===R.type){n(w,R.sibling),S=s(R,k.props),S.ref=Ic(w,R,k),S.return=w,w=S;break e}n(w,R);break}else t(w,R);R=R.sibling}k.type===el?(S=aa(k.props.children,w.mode,j,k.key),S.return=w,w=S):(j=bh(k.type,k.key,k.props,null,w.mode,j),j.ref=Ic(w,S,k),j.return=w,w=j)}return l(w);case Qa:e:{for(R=k.key;S!==null;){if(S.key===R)if(S.tag===4&&S.stateNode.containerInfo===k.containerInfo&&S.stateNode.implementation===k.implementation){n(w,S.sibling),S=s(S,k.children||[]),S.return=w,w=S;break e}else{n(w,S);break}else t(w,S);S=S.sibling}S=Lp(k,w.mode,j),S.return=w,w=S}return l(w);case Fi:return R=k._init,b(w,S,R(k._payload),j)}if(Wc(k))return _(w,S,k,j);if(jc(k))return x(w,S,k,j);Vd(w,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,S!==null&&S.tag===6?(n(w,S.sibling),S=s(S,k),S.return=w,w=S):(n(w,S),S=Rp(k,w.mode,j),S.return=w,w=S),l(w)):n(w,S)}return b}var Bl=SN(!0),NN=SN(!1),qh=No(null),Kh=null,ll=null,Jy=null;function Xy(){Jy=ll=Kh=null}function Qy(e){var t=qh.current;Zt(qh),e._currentValue=t}function Yg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function pl(e,t){Kh=e,Jy=ll=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pr=!0),e.firstContext=null)}function Qr(e){var t=e._currentValue;if(Jy!==e)if(e={context:e,memoizedValue:t,next:null},ll===null){if(Kh===null)throw Error(xe(308));ll=e,Kh.dependencies={lanes:0,firstContext:e}}else ll=ll.next=e;return t}var Zo=null;function ex(e){Zo===null?Zo=[e]:Zo.push(e)}function kN(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ex(t)):(n.next=s.next,s.next=n),t.interleaved=n,ki(e,r)}function ki(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ui=!1;function tx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,jt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ki(e,n)}return s=r.interleaved,s===null?(t.next=t,ex(r)):(t.next=s.next,s.next=t),r.interleaved=t,ki(e,n)}function gh(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,By(e,n)}}function c_(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yh(e,t,n,r){var s=e.updateQueue;Ui=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,h=u.next;u.next=null,l===null?i=h:l.next=h,l=u;var m=e.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==l&&(c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;l=0,m=h=u=null,c=i;do{var g=c.lane,v=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var _=e,x=c;switch(g=t,v=n,x.tag){case 1:if(_=x.payload,typeof _=="function"){f=_.call(v,f,g);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,g=typeof _=="function"?_.call(v,f,g):_,g==null)break e;f=nn({},f,g);break e;case 2:Ui=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else v={eventTime:v,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(h=m=v,u=f):m=m.next=v,l|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=f),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);fa|=l,e.lanes=l,e.memoizedState=f}}function u_(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(xe(191,s));s.call(r)}}}var Xu={},Gs=No(Xu),wu=No(Xu),_u=No(Xu);function qo(e){if(e===Xu)throw Error(xe(174));return e}function nx(e,t){switch(Ft(_u,t),Ft(wu,e),Ft(Gs,Xu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pg(t,e)}Zt(Gs),Ft(Gs,t)}function Fl(){Zt(Gs),Zt(wu),Zt(_u)}function jN(e){qo(_u.current);var t=qo(Gs.current),n=Pg(t,e.type);t!==n&&(Ft(wu,e),Ft(Gs,n))}function rx(e){wu.current===e&&(Zt(Gs),Zt(wu))}var en=No(0);function Jh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jp=[];function sx(){for(var e=0;e<jp.length;e++)jp[e]._workInProgressVersionPrimary=null;jp.length=0}var vh=Pi.ReactCurrentDispatcher,Ep=Pi.ReactCurrentBatchConfig,ha=0,tn=null,kn=null,Pn=null,Xh=!1,ru=!1,bu=0,wR=0;function Un(){throw Error(xe(321))}function ix(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bs(e[n],t[n]))return!1;return!0}function ox(e,t,n,r,s,i){if(ha=i,tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vh.current=e===null||e.memoizedState===null?NR:kR,e=n(r,s),ru){i=0;do{if(ru=!1,bu=0,25<=i)throw Error(xe(301));i+=1,Pn=kn=null,t.updateQueue=null,vh.current=CR,e=n(r,s)}while(ru)}if(vh.current=Qh,t=kn!==null&&kn.next!==null,ha=0,Pn=kn=tn=null,Xh=!1,t)throw Error(xe(300));return e}function ax(){var e=bu!==0;return bu=0,e}function As(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?tn.memoizedState=Pn=e:Pn=Pn.next=e,Pn}function es(){if(kn===null){var e=tn.alternate;e=e!==null?e.memoizedState:null}else e=kn.next;var t=Pn===null?tn.memoizedState:Pn.next;if(t!==null)Pn=t,kn=e;else{if(e===null)throw Error(xe(310));kn=e,e={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Pn===null?tn.memoizedState=Pn=e:Pn=Pn.next=e}return Pn}function Su(e,t){return typeof t=="function"?t(e):t}function Tp(e){var t=es(),n=t.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=e;var r=kn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=l=null,u=null,h=i;do{var m=h.lane;if((ha&m)===m)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var f={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=f,l=r):u=u.next=f,tn.lanes|=m,fa|=m}h=h.next}while(h!==null&&h!==i);u===null?l=r:u.next=c,bs(r,t.memoizedState)||(pr=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,tn.lanes|=i,fa|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pp(e){var t=es(),n=t.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);bs(i,t.memoizedState)||(pr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function EN(){}function TN(e,t){var n=tn,r=es(),s=t(),i=!bs(r.memoizedState,s);if(i&&(r.memoizedState=s,pr=!0),r=r.queue,lx(IN.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Pn!==null&&Pn.memoizedState.tag&1){if(n.flags|=2048,Nu(9,MN.bind(null,n,r,s,t),void 0,null),Mn===null)throw Error(xe(349));ha&30||PN(n,t,s)}return s}function PN(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function MN(e,t,n,r){t.value=n,t.getSnapshot=r,RN(t)&&LN(e)}function IN(e,t,n){return n(function(){RN(t)&&LN(e)})}function RN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bs(e,n)}catch{return!0}}function LN(e){var t=ki(e,1);t!==null&&_s(t,e,1,-1)}function d_(e){var t=As();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:e},t.queue=e,e=e.dispatch=SR.bind(null,tn,e),[t.memoizedState,e]}function Nu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function AN(){return es().memoizedState}function yh(e,t,n,r){var s=As();tn.flags|=e,s.memoizedState=Nu(1|t,n,void 0,r===void 0?null:r)}function Gf(e,t,n,r){var s=es();r=r===void 0?null:r;var i=void 0;if(kn!==null){var l=kn.memoizedState;if(i=l.destroy,r!==null&&ix(r,l.deps)){s.memoizedState=Nu(t,n,i,r);return}}tn.flags|=e,s.memoizedState=Nu(1|t,n,i,r)}function h_(e,t){return yh(8390656,8,e,t)}function lx(e,t){return Gf(2048,8,e,t)}function ON(e,t){return Gf(4,2,e,t)}function DN(e,t){return Gf(4,4,e,t)}function $N(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zN(e,t,n){return n=n!=null?n.concat([e]):null,Gf(4,4,$N.bind(null,t,e),n)}function cx(){}function BN(e,t){var n=es();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ix(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function FN(e,t){var n=es();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ix(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function UN(e,t,n){return ha&21?(bs(n,t)||(n=ZS(),tn.lanes|=n,fa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pr=!0),e.memoizedState=n)}function _R(e,t){var n=$t;$t=n!==0&&4>n?n:4,e(!0);var r=Ep.transition;Ep.transition={};try{e(!1),t()}finally{$t=n,Ep.transition=r}}function WN(){return es().memoizedState}function bR(e,t,n){var r=mo(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},HN(e))VN(t,n);else if(n=kN(e,t,n,r),n!==null){var s=sr();_s(n,e,r,s),GN(n,t,r)}}function SR(e,t,n){var r=mo(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(HN(e))VN(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,c=i(l,n);if(s.hasEagerState=!0,s.eagerState=c,bs(c,l)){var u=t.interleaved;u===null?(s.next=s,ex(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=kN(e,t,s,r),n!==null&&(s=sr(),_s(n,e,r,s),GN(n,t,r))}}function HN(e){var t=e.alternate;return e===tn||t!==null&&t===tn}function VN(e,t){ru=Xh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function GN(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,By(e,n)}}var Qh={readContext:Qr,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},NR={readContext:Qr,useCallback:function(e,t){return As().memoizedState=[e,t===void 0?null:t],e},useContext:Qr,useEffect:h_,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yh(4194308,4,$N.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yh(4194308,4,e,t)},useInsertionEffect:function(e,t){return yh(4,2,e,t)},useMemo:function(e,t){var n=As();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=As();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=bR.bind(null,tn,e),[r.memoizedState,e]},useRef:function(e){var t=As();return e={current:e},t.memoizedState=e},useState:d_,useDebugValue:cx,useDeferredValue:function(e){return As().memoizedState=e},useTransition:function(){var e=d_(!1),t=e[0];return e=_R.bind(null,e[1]),As().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=tn,s=As();if(Yt){if(n===void 0)throw Error(xe(407));n=n()}else{if(n=t(),Mn===null)throw Error(xe(349));ha&30||PN(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,h_(IN.bind(null,r,i,e),[e]),r.flags|=2048,Nu(9,MN.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=As(),t=Mn.identifierPrefix;if(Yt){var n=_i,r=wi;n=(r&~(1<<32-ws(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=bu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wR++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kR={readContext:Qr,useCallback:BN,useContext:Qr,useEffect:lx,useImperativeHandle:zN,useInsertionEffect:ON,useLayoutEffect:DN,useMemo:FN,useReducer:Tp,useRef:AN,useState:function(){return Tp(Su)},useDebugValue:cx,useDeferredValue:function(e){var t=es();return UN(t,kn.memoizedState,e)},useTransition:function(){var e=Tp(Su)[0],t=es().memoizedState;return[e,t]},useMutableSource:EN,useSyncExternalStore:TN,useId:WN,unstable_isNewReconciler:!1},CR={readContext:Qr,useCallback:BN,useContext:Qr,useEffect:lx,useImperativeHandle:zN,useInsertionEffect:ON,useLayoutEffect:DN,useMemo:FN,useReducer:Pp,useRef:AN,useState:function(){return Pp(Su)},useDebugValue:cx,useDeferredValue:function(e){var t=es();return kn===null?t.memoizedState=e:UN(t,kn.memoizedState,e)},useTransition:function(){var e=Pp(Su)[0],t=es().memoizedState;return[e,t]},useMutableSource:EN,useSyncExternalStore:TN,useId:WN,unstable_isNewReconciler:!1};function ds(e,t){if(e&&e.defaultProps){t=nn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Jg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:nn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zf={isMounted:function(e){return(e=e._reactInternals)?Ca(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sr(),s=mo(e),i=bi(r,s);i.payload=t,n!=null&&(i.callback=n),t=ho(e,i,s),t!==null&&(_s(t,e,s,r),gh(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sr(),s=mo(e),i=bi(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ho(e,i,s),t!==null&&(_s(t,e,s,r),gh(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sr(),r=mo(e),s=bi(n,r);s.tag=2,t!=null&&(s.callback=t),t=ho(e,s,r),t!==null&&(_s(t,e,r,n),gh(t,e,r))}};function f_(e,t,n,r,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!gu(n,r)||!gu(s,i):!0}function ZN(e,t,n){var r=!1,s=xo,i=t.contextType;return typeof i=="object"&&i!==null?i=Qr(i):(s=yr(t)?ua:Kn.current,r=t.contextTypes,i=(r=r!=null)?$l(e,s):xo),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function m_(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zf.enqueueReplaceState(t,t.state,null)}function Xg(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},tx(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Qr(i):(i=yr(t)?ua:Kn.current,s.context=$l(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Jg(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Zf.enqueueReplaceState(s,s.state,null),Yh(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ul(e,t){try{var n="",r=t;do n+=eI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Mp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var jR=typeof WeakMap=="function"?WeakMap:Map;function qN(e,t,n){n=bi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){tf||(tf=!0,cv=r),Qg(e,t)},n}function KN(e,t,n){n=bi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Qg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qg(e,t),typeof r!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function p_(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new jR;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=FR.bind(null,e,t,n),t.then(e,e))}function g_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function v_(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bi(-1,1),t.tag=2,ho(n,t,1))),n.lanes|=1),e)}var ER=Pi.ReactCurrentOwner,pr=!1;function nr(e,t,n,r){t.child=e===null?NN(t,null,n,r):Bl(t,e.child,n,r)}function y_(e,t,n,r,s){n=n.render;var i=t.ref;return pl(t,s),r=ox(e,t,n,r,i,s),n=ax(),e!==null&&!pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ci(e,t,s)):(Yt&&n&&qy(t),t.flags|=1,nr(e,t,r,s),t.child)}function x_(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!vx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,YN(e,t,i,r,s)):(e=bh(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:gu,n(l,r)&&e.ref===t.ref)return Ci(e,t,s)}return t.flags|=1,e=po(i,r),e.ref=t.ref,e.return=t,t.child=e}function YN(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(gu(i,r)&&e.ref===t.ref)if(pr=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(pr=!0);else return t.lanes=e.lanes,Ci(e,t,s)}return ev(e,t,n,r,s)}function JN(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(ul,kr),kr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ft(ul,kr),kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ft(ul,kr),kr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ft(ul,kr),kr|=r;return nr(e,t,s,n),t.child}function XN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ev(e,t,n,r,s){var i=yr(n)?ua:Kn.current;return i=$l(t,i),pl(t,s),n=ox(e,t,n,r,i,s),r=ax(),e!==null&&!pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ci(e,t,s)):(Yt&&r&&qy(t),t.flags|=1,nr(e,t,n,s),t.child)}function w_(e,t,n,r,s){if(yr(n)){var i=!0;Vh(t)}else i=!1;if(pl(t,s),t.stateNode===null)xh(e,t),ZN(t,n,r),Xg(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var u=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=Qr(h):(h=yr(n)?ua:Kn.current,h=$l(t,h));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||u!==h)&&m_(t,l,r,h),Ui=!1;var g=t.memoizedState;l.state=g,Yh(t,r,l,s),u=t.memoizedState,c!==r||g!==u||vr.current||Ui?(typeof m=="function"&&(Jg(t,n,m,r),u=t.memoizedState),(c=Ui||f_(t,n,c,r,g,u,h))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=h,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,CN(e,t),c=t.memoizedProps,h=t.type===t.elementType?c:ds(t.type,c),l.props=h,f=t.pendingProps,g=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qr(u):(u=yr(n)?ua:Kn.current,u=$l(t,u));var v=n.getDerivedStateFromProps;(m=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==f||g!==u)&&m_(t,l,r,u),Ui=!1,g=t.memoizedState,l.state=g,Yh(t,r,l,s);var _=t.memoizedState;c!==f||g!==_||vr.current||Ui?(typeof v=="function"&&(Jg(t,n,v,r),_=t.memoizedState),(h=Ui||f_(t,n,h,r,g,_,u)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,_,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,_,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),l.props=r,l.state=_,l.context=u,r=h):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return tv(e,t,n,r,i,s)}function tv(e,t,n,r,s,i){XN(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&i_(t,n,!1),Ci(e,t,i);r=t.stateNode,ER.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Bl(t,e.child,null,i),t.child=Bl(t,null,c,i)):nr(e,t,c,i),t.memoizedState=r.state,s&&i_(t,n,!0),t.child}function QN(e){var t=e.stateNode;t.pendingContext?s_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&s_(e,t.context,!1),nx(e,t.containerInfo)}function __(e,t,n,r,s){return zl(),Yy(s),t.flags|=256,nr(e,t,n,r),t.child}var nv={dehydrated:null,treeContext:null,retryLane:0};function rv(e){return{baseLanes:e,cachePool:null,transitions:null}}function ek(e,t,n){var r=t.pendingProps,s=en.current,i=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ft(en,s&1),e===null)return Kg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Yf(l,r,0,null),e=aa(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=rv(n),t.memoizedState=nv,e):ux(t,l));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return TR(e,t,l,r,c,s,n);if(i){i=r.fallback,l=t.mode,s=e.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=po(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=po(c,i):(i=aa(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?rv(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=nv,r}return i=e.child,e=i.sibling,r=po(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ux(e,t){return t=Yf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gd(e,t,n,r){return r!==null&&Yy(r),Bl(t,e.child,null,n),e=ux(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TR(e,t,n,r,s,i,l){if(n)return t.flags&256?(t.flags&=-257,r=Mp(Error(xe(422))),Gd(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Yf({mode:"visible",children:r.children},s,0,null),i=aa(i,s,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Bl(t,e.child,null,l),t.child.memoizedState=rv(l),t.memoizedState=nv,i);if(!(t.mode&1))return Gd(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(xe(419)),r=Mp(i,r,void 0),Gd(e,t,l,r)}if(c=(l&e.childLanes)!==0,pr||c){if(r=Mn,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ki(e,s),_s(r,e,s,-1))}return gx(),r=Mp(Error(xe(421))),Gd(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=UR.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Pr=uo(s.nextSibling),Ir=t,Yt=!0,vs=null,e!==null&&(Hr[Vr++]=wi,Hr[Vr++]=_i,Hr[Vr++]=da,wi=e.id,_i=e.overflow,da=t),t=ux(t,r.children),t.flags|=4096,t)}function b_(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Yg(e.return,t,n)}function Ip(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tk(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(nr(e,t,r.children,n),r=en.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&b_(e,n,t);else if(e.tag===19)b_(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ft(en,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Jh(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ip(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Jh(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ip(t,!0,n,null,i);break;case"together":Ip(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(xe(153));if(t.child!==null){for(e=t.child,n=po(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=po(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function PR(e,t,n){switch(t.tag){case 3:QN(t),zl();break;case 5:jN(t);break;case 1:yr(t.type)&&Vh(t);break;case 4:nx(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ft(qh,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ft(en,en.current&1),t.flags|=128,null):n&t.child.childLanes?ek(e,t,n):(Ft(en,en.current&1),e=Ci(e,t,n),e!==null?e.sibling:null);Ft(en,en.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return tk(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ft(en,en.current),r)break;return null;case 22:case 23:return t.lanes=0,JN(e,t,n)}return Ci(e,t,n)}var nk,sv,rk,sk;nk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sv=function(){};rk=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,qo(Gs.current);var i=null;switch(n){case"input":s=Cg(e,s),r=Cg(e,r),i=[];break;case"select":s=nn({},s,{value:void 0}),r=nn({},r,{value:void 0}),i=[];break;case"textarea":s=Tg(e,s),r=Tg(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Wh)}Mg(n,r);var l;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(cu.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(cu.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ht("scroll",e),i||c===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};sk=function(e,t,n,r){n!==r&&(t.flags|=4)};function Rc(e,t){if(!Yt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function MR(e,t,n){var r=t.pendingProps;switch(Ky(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wn(t),null;case 1:return yr(t.type)&&Hh(),Wn(t),null;case 3:return r=t.stateNode,Fl(),Zt(vr),Zt(Kn),sx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vs!==null&&(hv(vs),vs=null))),sv(e,t),Wn(t),null;case 5:rx(t);var s=qo(_u.current);if(n=t.type,e!==null&&t.stateNode!=null)rk(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(xe(166));return Wn(t),null}if(e=qo(Gs.current),Hd(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Bs]=t,r[xu]=i,e=(t.mode&1)!==0,n){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(s=0;s<Vc.length;s++)Ht(Vc[s],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":Mw(r,i),Ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ht("invalid",r);break;case"textarea":Rw(r,i),Ht("invalid",r)}Mg(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Wd(r.textContent,c,e),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Wd(r.textContent,c,e),s=["children",""+c]):cu.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Ht("scroll",r)}switch(n){case"input":Ad(r),Iw(r,i,!0);break;case"textarea":Ad(r),Lw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wh)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=IS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Bs]=t,e[xu]=r,nk(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ig(n,r),n){case"dialog":Ht("cancel",e),Ht("close",e),s=r;break;case"iframe":case"object":case"embed":Ht("load",e),s=r;break;case"video":case"audio":for(s=0;s<Vc.length;s++)Ht(Vc[s],e);s=r;break;case"source":Ht("error",e),s=r;break;case"img":case"image":case"link":Ht("error",e),Ht("load",e),s=r;break;case"details":Ht("toggle",e),s=r;break;case"input":Mw(e,r),s=Cg(e,r),Ht("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=nn({},r,{value:void 0}),Ht("invalid",e);break;case"textarea":Rw(e,r),s=Tg(e,r),Ht("invalid",e);break;default:s=r}Mg(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?AS(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&RS(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&uu(e,u):typeof u=="number"&&uu(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cu.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ht("scroll",e):u!=null&&Ly(e,i,u,l))}switch(n){case"input":Ad(e),Iw(e,r,!1);break;case"textarea":Ad(e),Lw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yo(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?dl(e,!!r.multiple,i,!1):r.defaultValue!=null&&dl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Wh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wn(t),null;case 6:if(e&&t.stateNode!=null)sk(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(xe(166));if(n=qo(_u.current),qo(Gs.current),Hd(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bs]=t,(i=r.nodeValue!==n)&&(e=Ir,e!==null))switch(e.tag){case 3:Wd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wd(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bs]=t,t.stateNode=r}return Wn(t),null;case 13:if(Zt(en),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Yt&&Pr!==null&&t.mode&1&&!(t.flags&128))bN(),zl(),t.flags|=98560,i=!1;else if(i=Hd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(xe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(xe(317));i[Bs]=t}else zl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wn(t),i=!1}else vs!==null&&(hv(vs),vs=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||en.current&1?Cn===0&&(Cn=3):gx())),t.updateQueue!==null&&(t.flags|=4),Wn(t),null);case 4:return Fl(),sv(e,t),e===null&&vu(t.stateNode.containerInfo),Wn(t),null;case 10:return Qy(t.type._context),Wn(t),null;case 17:return yr(t.type)&&Hh(),Wn(t),null;case 19:if(Zt(en),i=t.memoizedState,i===null)return Wn(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)Rc(i,!1);else{if(Cn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Jh(e),l!==null){for(t.flags|=128,Rc(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ft(en,en.current&1|2),t.child}e=e.sibling}i.tail!==null&&hn()>Wl&&(t.flags|=128,r=!0,Rc(i,!1),t.lanes=4194304)}else{if(!r)if(e=Jh(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Rc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Yt)return Wn(t),null}else 2*hn()-i.renderingStartTime>Wl&&n!==1073741824&&(t.flags|=128,r=!0,Rc(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=hn(),t.sibling=null,n=en.current,Ft(en,r?n&1|2:n&1),t):(Wn(t),null);case 22:case 23:return px(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kr&1073741824&&(Wn(t),t.subtreeFlags&6&&(t.flags|=8192)):Wn(t),null;case 24:return null;case 25:return null}throw Error(xe(156,t.tag))}function IR(e,t){switch(Ky(t),t.tag){case 1:return yr(t.type)&&Hh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fl(),Zt(vr),Zt(Kn),sx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rx(t),null;case 13:if(Zt(en),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(xe(340));zl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zt(en),null;case 4:return Fl(),null;case 10:return Qy(t.type._context),null;case 22:case 23:return px(),null;case 24:return null;default:return null}}var Zd=!1,Gn=!1,RR=typeof WeakSet=="function"?WeakSet:Set,je=null;function cl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cn(e,t,r)}else n.current=null}function iv(e,t,n){try{n()}catch(r){cn(e,t,r)}}var S_=!1;function LR(e,t){if(Ug=Bh,e=cN(),Zy(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,c=-1,u=-1,h=0,m=0,f=e,g=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(c=l+s),f!==i||r!==0&&f.nodeType!==3||(u=l+r),f.nodeType===3&&(l+=f.nodeValue.length),(v=f.firstChild)!==null;)g=f,f=v;for(;;){if(f===e)break t;if(g===n&&++h===s&&(c=l),g===i&&++m===r&&(u=l),(v=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wg={focusedElem:e,selectionRange:n},Bh=!1,je=t;je!==null;)if(t=je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,je=e;else for(;je!==null;){t=je;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var x=_.memoizedProps,b=_.memoizedState,w=t.stateNode,S=w.getSnapshotBeforeUpdate(t.elementType===t.type?x:ds(t.type,x),b);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(j){cn(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,je=e;break}je=t.return}return _=S_,S_=!1,_}function su(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&iv(t,n,i)}s=s.next}while(s!==r)}}function qf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ov(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ik(e){var t=e.alternate;t!==null&&(e.alternate=null,ik(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bs],delete t[xu],delete t[Gg],delete t[gR],delete t[vR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ok(e){return e.tag===5||e.tag===3||e.tag===4}function N_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ok(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function av(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wh));else if(r!==4&&(e=e.child,e!==null))for(av(e,t,n),e=e.sibling;e!==null;)av(e,t,n),e=e.sibling}function lv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(lv(e,t,n),e=e.sibling;e!==null;)lv(e,t,n),e=e.sibling}var An=null,ps=!1;function Li(e,t,n){for(n=n.child;n!==null;)ak(e,t,n),n=n.sibling}function ak(e,t,n){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(Bf,n)}catch{}switch(n.tag){case 5:Gn||cl(n,t);case 6:var r=An,s=ps;An=null,Li(e,t,n),An=r,ps=s,An!==null&&(ps?(e=An,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):An.removeChild(n.stateNode));break;case 18:An!==null&&(ps?(e=An,n=n.stateNode,e.nodeType===8?kp(e.parentNode,n):e.nodeType===1&&kp(e,n),mu(e)):kp(An,n.stateNode));break;case 4:r=An,s=ps,An=n.stateNode.containerInfo,ps=!0,Li(e,t,n),An=r,ps=s;break;case 0:case 11:case 14:case 15:if(!Gn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&iv(n,t,l),s=s.next}while(s!==r)}Li(e,t,n);break;case 1:if(!Gn&&(cl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){cn(n,t,c)}Li(e,t,n);break;case 21:Li(e,t,n);break;case 22:n.mode&1?(Gn=(r=Gn)||n.memoizedState!==null,Li(e,t,n),Gn=r):Li(e,t,n);break;default:Li(e,t,n)}}function k_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new RR),t.forEach(function(r){var s=WR.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function as(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:An=c.stateNode,ps=!1;break e;case 3:An=c.stateNode.containerInfo,ps=!0;break e;case 4:An=c.stateNode.containerInfo,ps=!0;break e}c=c.return}if(An===null)throw Error(xe(160));ak(i,l,s),An=null,ps=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){cn(s,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lk(t,e),t=t.sibling}function lk(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(as(t,e),Ls(e),r&4){try{su(3,e,e.return),qf(3,e)}catch(x){cn(e,e.return,x)}try{su(5,e,e.return)}catch(x){cn(e,e.return,x)}}break;case 1:as(t,e),Ls(e),r&512&&n!==null&&cl(n,n.return);break;case 5:if(as(t,e),Ls(e),r&512&&n!==null&&cl(n,n.return),e.flags&32){var s=e.stateNode;try{uu(s,"")}catch(x){cn(e,e.return,x)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&PS(s,i),Ig(c,l);var h=Ig(c,i);for(l=0;l<u.length;l+=2){var m=u[l],f=u[l+1];m==="style"?AS(s,f):m==="dangerouslySetInnerHTML"?RS(s,f):m==="children"?uu(s,f):Ly(s,m,f,h)}switch(c){case"input":jg(s,i);break;case"textarea":MS(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?dl(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?dl(s,!!i.multiple,i.defaultValue,!0):dl(s,!!i.multiple,i.multiple?[]:"",!1))}s[xu]=i}catch(x){cn(e,e.return,x)}}break;case 6:if(as(t,e),Ls(e),r&4){if(e.stateNode===null)throw Error(xe(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){cn(e,e.return,x)}}break;case 3:if(as(t,e),Ls(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mu(t.containerInfo)}catch(x){cn(e,e.return,x)}break;case 4:as(t,e),Ls(e);break;case 13:as(t,e),Ls(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(fx=hn())),r&4&&k_(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(Gn=(h=Gn)||m,as(t,e),Gn=h):as(t,e),Ls(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!m&&e.mode&1)for(je=e,m=e.child;m!==null;){for(f=je=m;je!==null;){switch(g=je,v=g.child,g.tag){case 0:case 11:case 14:case 15:su(4,g,g.return);break;case 1:cl(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(x){cn(r,n,x)}}break;case 5:cl(g,g.return);break;case 22:if(g.memoizedState!==null){j_(f);continue}}v!==null?(v.return=g,je=v):j_(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{s=f.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=f.stateNode,u=f.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=LS("display",l))}catch(x){cn(e,e.return,x)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=h?"":f.memoizedProps}catch(x){cn(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:as(t,e),Ls(e),r&4&&k_(e);break;case 21:break;default:as(t,e),Ls(e)}}function Ls(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ok(n)){var r=n;break e}n=n.return}throw Error(xe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(uu(s,""),r.flags&=-33);var i=N_(e);lv(e,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,c=N_(e);av(e,c,l);break;default:throw Error(xe(161))}}catch(u){cn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function AR(e,t,n){je=e,ck(e)}function ck(e,t,n){for(var r=(e.mode&1)!==0;je!==null;){var s=je,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Zd;if(!l){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Gn;c=Zd;var h=Gn;if(Zd=l,(Gn=u)&&!h)for(je=s;je!==null;)l=je,u=l.child,l.tag===22&&l.memoizedState!==null?E_(s):u!==null?(u.return=l,je=u):E_(s);for(;i!==null;)je=i,ck(i),i=i.sibling;je=s,Zd=c,Gn=h}C_(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,je=i):C_(e)}}function C_(e){for(;je!==null;){var t=je;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gn||qf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Gn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ds(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&u_(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}u_(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&mu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}Gn||t.flags&512&&ov(t)}catch(g){cn(t,t.return,g)}}if(t===e){je=null;break}if(n=t.sibling,n!==null){n.return=t.return,je=n;break}je=t.return}}function j_(e){for(;je!==null;){var t=je;if(t===e){je=null;break}var n=t.sibling;if(n!==null){n.return=t.return,je=n;break}je=t.return}}function E_(e){for(;je!==null;){var t=je;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{qf(4,t)}catch(u){cn(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){cn(t,s,u)}}var i=t.return;try{ov(t)}catch(u){cn(t,i,u)}break;case 5:var l=t.return;try{ov(t)}catch(u){cn(t,l,u)}}}catch(u){cn(t,t.return,u)}if(t===e){je=null;break}var c=t.sibling;if(c!==null){c.return=t.return,je=c;break}je=t.return}}var OR=Math.ceil,ef=Pi.ReactCurrentDispatcher,dx=Pi.ReactCurrentOwner,Yr=Pi.ReactCurrentBatchConfig,jt=0,Mn=null,yn=null,zn=0,kr=0,ul=No(0),Cn=0,ku=null,fa=0,Kf=0,hx=0,iu=null,mr=null,fx=0,Wl=1/0,vi=null,tf=!1,cv=null,fo=null,qd=!1,io=null,nf=0,ou=0,uv=null,wh=-1,_h=0;function sr(){return jt&6?hn():wh!==-1?wh:wh=hn()}function mo(e){return e.mode&1?jt&2&&zn!==0?zn&-zn:xR.transition!==null?(_h===0&&(_h=ZS()),_h):(e=$t,e!==0||(e=window.event,e=e===void 0?16:eN(e.type)),e):1}function _s(e,t,n,r){if(50<ou)throw ou=0,uv=null,Error(xe(185));Ku(e,n,r),(!(jt&2)||e!==Mn)&&(e===Mn&&(!(jt&2)&&(Kf|=n),Cn===4&&Vi(e,zn)),xr(e,r),n===1&&jt===0&&!(t.mode&1)&&(Wl=hn()+500,Vf&&ko()))}function xr(e,t){var n=e.callbackNode;xI(e,t);var r=zh(e,e===Mn?zn:0);if(r===0)n!==null&&Dw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Dw(n),t===1)e.tag===0?yR(T_.bind(null,e)):xN(T_.bind(null,e)),mR(function(){!(jt&6)&&ko()}),n=null;else{switch(qS(r)){case 1:n=zy;break;case 4:n=VS;break;case 16:n=$h;break;case 536870912:n=GS;break;default:n=$h}n=vk(n,uk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uk(e,t){if(wh=-1,_h=0,jt&6)throw Error(xe(327));var n=e.callbackNode;if(gl()&&e.callbackNode!==n)return null;var r=zh(e,e===Mn?zn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=rf(e,r);else{t=r;var s=jt;jt|=2;var i=hk();(Mn!==e||zn!==t)&&(vi=null,Wl=hn()+500,oa(e,t));do try{zR();break}catch(c){dk(e,c)}while(!0);Xy(),ef.current=i,jt=s,yn!==null?t=0:(Mn=null,zn=0,t=Cn)}if(t!==0){if(t===2&&(s=Dg(e),s!==0&&(r=s,t=dv(e,s))),t===1)throw n=ku,oa(e,0),Vi(e,r),xr(e,hn()),n;if(t===6)Vi(e,r);else{if(s=e.current.alternate,!(r&30)&&!DR(s)&&(t=rf(e,r),t===2&&(i=Dg(e),i!==0&&(r=i,t=dv(e,i))),t===1))throw n=ku,oa(e,0),Vi(e,r),xr(e,hn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(xe(345));case 2:zo(e,mr,vi);break;case 3:if(Vi(e,r),(r&130023424)===r&&(t=fx+500-hn(),10<t)){if(zh(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){sr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Vg(zo.bind(null,e,mr,vi),t);break}zo(e,mr,vi);break;case 4:if(Vi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-ws(r);i=1<<l,l=t[l],l>s&&(s=l),r&=~i}if(r=s,r=hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OR(r/1960))-r,10<r){e.timeoutHandle=Vg(zo.bind(null,e,mr,vi),r);break}zo(e,mr,vi);break;case 5:zo(e,mr,vi);break;default:throw Error(xe(329))}}}return xr(e,hn()),e.callbackNode===n?uk.bind(null,e):null}function dv(e,t){var n=iu;return e.current.memoizedState.isDehydrated&&(oa(e,t).flags|=256),e=rf(e,t),e!==2&&(t=mr,mr=n,t!==null&&hv(t)),e}function hv(e){mr===null?mr=e:mr.push.apply(mr,e)}function DR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bs(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vi(e,t){for(t&=~hx,t&=~Kf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ws(t),r=1<<n;e[n]=-1,t&=~r}}function T_(e){if(jt&6)throw Error(xe(327));gl();var t=zh(e,0);if(!(t&1))return xr(e,hn()),null;var n=rf(e,t);if(e.tag!==0&&n===2){var r=Dg(e);r!==0&&(t=r,n=dv(e,r))}if(n===1)throw n=ku,oa(e,0),Vi(e,t),xr(e,hn()),n;if(n===6)throw Error(xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zo(e,mr,vi),xr(e,hn()),null}function mx(e,t){var n=jt;jt|=1;try{return e(t)}finally{jt=n,jt===0&&(Wl=hn()+500,Vf&&ko())}}function ma(e){io!==null&&io.tag===0&&!(jt&6)&&gl();var t=jt;jt|=1;var n=Yr.transition,r=$t;try{if(Yr.transition=null,$t=1,e)return e()}finally{$t=r,Yr.transition=n,jt=t,!(jt&6)&&ko()}}function px(){kr=ul.current,Zt(ul)}function oa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,fR(n)),yn!==null)for(n=yn.return;n!==null;){var r=n;switch(Ky(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hh();break;case 3:Fl(),Zt(vr),Zt(Kn),sx();break;case 5:rx(r);break;case 4:Fl();break;case 13:Zt(en);break;case 19:Zt(en);break;case 10:Qy(r.type._context);break;case 22:case 23:px()}n=n.return}if(Mn=e,yn=e=po(e.current,null),zn=kr=t,Cn=0,ku=null,hx=Kf=fa=0,mr=iu=null,Zo!==null){for(t=0;t<Zo.length;t++)if(n=Zo[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}Zo=null}return e}function dk(e,t){do{var n=yn;try{if(Xy(),vh.current=Qh,Xh){for(var r=tn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xh=!1}if(ha=0,Pn=kn=tn=null,ru=!1,bu=0,dx.current=null,n===null||n.return===null){Cn=1,ku=t,yn=null;break}e:{var i=e,l=n.return,c=n,u=t;if(t=zn,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,m=c,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var v=g_(l);if(v!==null){v.flags&=-257,v_(v,l,c,i,t),v.mode&1&&p_(i,h,t),t=v,u=h;var _=t.updateQueue;if(_===null){var x=new Set;x.add(u),t.updateQueue=x}else _.add(u);break e}else{if(!(t&1)){p_(i,h,t),gx();break e}u=Error(xe(426))}}else if(Yt&&c.mode&1){var b=g_(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),v_(b,l,c,i,t),Yy(Ul(u,c));break e}}i=u=Ul(u,c),Cn!==4&&(Cn=2),iu===null?iu=[i]:iu.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=qN(i,u,t);c_(i,w);break e;case 1:c=u;var S=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(fo===null||!fo.has(k)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=KN(i,c,t);c_(i,j);break e}}i=i.return}while(i!==null)}mk(n)}catch(T){t=T,yn===n&&n!==null&&(yn=n=n.return);continue}break}while(!0)}function hk(){var e=ef.current;return ef.current=Qh,e===null?Qh:e}function gx(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Mn===null||!(fa&268435455)&&!(Kf&268435455)||Vi(Mn,zn)}function rf(e,t){var n=jt;jt|=2;var r=hk();(Mn!==e||zn!==t)&&(vi=null,oa(e,t));do try{$R();break}catch(s){dk(e,s)}while(!0);if(Xy(),jt=n,ef.current=r,yn!==null)throw Error(xe(261));return Mn=null,zn=0,Cn}function $R(){for(;yn!==null;)fk(yn)}function zR(){for(;yn!==null&&!uI();)fk(yn)}function fk(e){var t=gk(e.alternate,e,kr);e.memoizedProps=e.pendingProps,t===null?mk(e):yn=t,dx.current=null}function mk(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=IR(n,t),n!==null){n.flags&=32767,yn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Cn=6,yn=null;return}}else if(n=MR(n,t,kr),n!==null){yn=n;return}if(t=t.sibling,t!==null){yn=t;return}yn=t=e}while(t!==null);Cn===0&&(Cn=5)}function zo(e,t,n){var r=$t,s=Yr.transition;try{Yr.transition=null,$t=1,BR(e,t,n,r)}finally{Yr.transition=s,$t=r}return null}function BR(e,t,n,r){do gl();while(io!==null);if(jt&6)throw Error(xe(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(xe(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(wI(e,i),e===Mn&&(yn=Mn=null,zn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qd||(qd=!0,vk($h,function(){return gl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yr.transition,Yr.transition=null;var l=$t;$t=1;var c=jt;jt|=4,dx.current=null,LR(e,n),lk(n,e),oR(Wg),Bh=!!Ug,Wg=Ug=null,e.current=n,AR(n),dI(),jt=c,$t=l,Yr.transition=i}else e.current=n;if(qd&&(qd=!1,io=e,nf=s),i=e.pendingLanes,i===0&&(fo=null),mI(n.stateNode),xr(e,hn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tf)throw tf=!1,e=cv,cv=null,e;return nf&1&&e.tag!==0&&gl(),i=e.pendingLanes,i&1?e===uv?ou++:(ou=0,uv=e):ou=0,ko(),null}function gl(){if(io!==null){var e=qS(nf),t=Yr.transition,n=$t;try{if(Yr.transition=null,$t=16>e?16:e,io===null)var r=!1;else{if(e=io,io=null,nf=0,jt&6)throw Error(xe(331));var s=jt;for(jt|=4,je=e.current;je!==null;){var i=je,l=i.child;if(je.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(je=h;je!==null;){var m=je;switch(m.tag){case 0:case 11:case 15:su(8,m,i)}var f=m.child;if(f!==null)f.return=m,je=f;else for(;je!==null;){m=je;var g=m.sibling,v=m.return;if(ik(m),m===h){je=null;break}if(g!==null){g.return=v,je=g;break}je=v}}}var _=i.alternate;if(_!==null){var x=_.child;if(x!==null){_.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}je=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,je=l;else e:for(;je!==null;){if(i=je,i.flags&2048)switch(i.tag){case 0:case 11:case 15:su(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,je=w;break e}je=i.return}}var S=e.current;for(je=S;je!==null;){l=je;var k=l.child;if(l.subtreeFlags&2064&&k!==null)k.return=l,je=k;else e:for(l=S;je!==null;){if(c=je,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:qf(9,c)}}catch(T){cn(c,c.return,T)}if(c===l){je=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,je=j;break e}je=c.return}}if(jt=s,ko(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(Bf,e)}catch{}r=!0}return r}finally{$t=n,Yr.transition=t}}return!1}function P_(e,t,n){t=Ul(n,t),t=qN(e,t,1),e=ho(e,t,1),t=sr(),e!==null&&(Ku(e,1,t),xr(e,t))}function cn(e,t,n){if(e.tag===3)P_(e,e,n);else for(;t!==null;){if(t.tag===3){P_(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fo===null||!fo.has(r))){e=Ul(n,e),e=KN(t,e,1),t=ho(t,e,1),e=sr(),t!==null&&(Ku(t,1,e),xr(t,e));break}}t=t.return}}function FR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=sr(),e.pingedLanes|=e.suspendedLanes&n,Mn===e&&(zn&n)===n&&(Cn===4||Cn===3&&(zn&130023424)===zn&&500>hn()-fx?oa(e,0):hx|=n),xr(e,t)}function pk(e,t){t===0&&(e.mode&1?(t=$d,$d<<=1,!($d&130023424)&&($d=4194304)):t=1);var n=sr();e=ki(e,t),e!==null&&(Ku(e,t,n),xr(e,n))}function UR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pk(e,n)}function WR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(xe(314))}r!==null&&r.delete(t),pk(e,n)}var gk;gk=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vr.current)pr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return pr=!1,PR(e,t,n);pr=!!(e.flags&131072)}else pr=!1,Yt&&t.flags&1048576&&wN(t,Zh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xh(e,t),e=t.pendingProps;var s=$l(t,Kn.current);pl(t,n),s=ox(null,t,r,e,s,n);var i=ax();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yr(r)?(i=!0,Vh(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tx(t),s.updater=Zf,t.stateNode=s,s._reactInternals=t,Xg(t,r,e,n),t=tv(null,t,r,!0,i,n)):(t.tag=0,Yt&&i&&qy(t),nr(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xh(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=VR(r),e=ds(r,e),s){case 0:t=ev(null,t,r,e,n);break e;case 1:t=w_(null,t,r,e,n);break e;case 11:t=y_(null,t,r,e,n);break e;case 14:t=x_(null,t,r,ds(r.type,e),n);break e}throw Error(xe(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ds(r,s),ev(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ds(r,s),w_(e,t,r,s,n);case 3:e:{if(QN(t),e===null)throw Error(xe(387));r=t.pendingProps,i=t.memoizedState,s=i.element,CN(e,t),Yh(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ul(Error(xe(423)),t),t=__(e,t,r,n,s);break e}else if(r!==s){s=Ul(Error(xe(424)),t),t=__(e,t,r,n,s);break e}else for(Pr=uo(t.stateNode.containerInfo.firstChild),Ir=t,Yt=!0,vs=null,n=NN(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zl(),r===s){t=Ci(e,t,n);break e}nr(e,t,r,n)}t=t.child}return t;case 5:return jN(t),e===null&&Kg(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,Hg(r,s)?l=null:i!==null&&Hg(r,i)&&(t.flags|=32),XN(e,t),nr(e,t,l,n),t.child;case 6:return e===null&&Kg(t),null;case 13:return ek(e,t,n);case 4:return nx(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Bl(t,null,r,n):nr(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ds(r,s),y_(e,t,r,s,n);case 7:return nr(e,t,t.pendingProps,n),t.child;case 8:return nr(e,t,t.pendingProps.children,n),t.child;case 12:return nr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,Ft(qh,r._currentValue),r._currentValue=l,i!==null)if(bs(i.value,l)){if(i.children===s.children&&!vr.current){t=Ci(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=bi(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?u.next=u:(u.next=m.next,m.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Yg(i.return,n,t),c.lanes|=n;break}u=u.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(xe(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Yg(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}nr(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,pl(t,n),s=Qr(s),r=r(s),t.flags|=1,nr(e,t,r,n),t.child;case 14:return r=t.type,s=ds(r,t.pendingProps),s=ds(r.type,s),x_(e,t,r,s,n);case 15:return YN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ds(r,s),xh(e,t),t.tag=1,yr(r)?(e=!0,Vh(t)):e=!1,pl(t,n),ZN(t,r,s),Xg(t,r,s,n),tv(null,t,r,!0,e,n);case 19:return tk(e,t,n);case 22:return JN(e,t,n)}throw Error(xe(156,t.tag))};function vk(e,t){return HS(e,t)}function HR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(e,t,n,r){return new HR(e,t,n,r)}function vx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function VR(e){if(typeof e=="function")return vx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oy)return 11;if(e===Dy)return 14}return 2}function po(e,t){var n=e.alternate;return n===null?(n=Kr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bh(e,t,n,r,s,i){var l=2;if(r=e,typeof e=="function")vx(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case el:return aa(n.children,s,i,t);case Ay:l=8,s|=8;break;case bg:return e=Kr(12,n,t,s|2),e.elementType=bg,e.lanes=i,e;case Sg:return e=Kr(13,n,t,s),e.elementType=Sg,e.lanes=i,e;case Ng:return e=Kr(19,n,t,s),e.elementType=Ng,e.lanes=i,e;case jS:return Yf(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kS:l=10;break e;case CS:l=9;break e;case Oy:l=11;break e;case Dy:l=14;break e;case Fi:l=16,r=null;break e}throw Error(xe(130,e==null?e:typeof e,""))}return t=Kr(l,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function aa(e,t,n,r){return e=Kr(7,e,r,t),e.lanes=n,e}function Yf(e,t,n,r){return e=Kr(22,e,r,t),e.elementType=jS,e.lanes=n,e.stateNode={isHidden:!1},e}function Rp(e,t,n){return e=Kr(6,e,null,t),e.lanes=n,e}function Lp(e,t,n){return t=Kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function GR(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mp(0),this.expirationTimes=mp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yx(e,t,n,r,s,i,l,c,u){return e=new GR(e,t,n,c,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tx(i),e}function ZR(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qa,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function yk(e){if(!e)return xo;e=e._reactInternals;e:{if(Ca(e)!==e||e.tag!==1)throw Error(xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(xe(171))}if(e.tag===1){var n=e.type;if(yr(n))return yN(e,n,t)}return t}function xk(e,t,n,r,s,i,l,c,u){return e=yx(n,r,!0,e,s,i,l,c,u),e.context=yk(null),n=e.current,r=sr(),s=mo(n),i=bi(r,s),i.callback=t??null,ho(n,i,s),e.current.lanes=s,Ku(e,s,r),xr(e,r),e}function Jf(e,t,n,r){var s=t.current,i=sr(),l=mo(s);return n=yk(n),t.context===null?t.context=n:t.pendingContext=n,t=bi(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ho(s,t,l),e!==null&&(_s(e,s,l,i),gh(e,s,l)),l}function sf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function M_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xx(e,t){M_(e,t),(e=e.alternate)&&M_(e,t)}function qR(){return null}var wk=typeof reportError=="function"?reportError:function(e){console.error(e)};function wx(e){this._internalRoot=e}Xf.prototype.render=wx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(xe(409));Jf(e,t,null,null)};Xf.prototype.unmount=wx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ma(function(){Jf(null,e,null,null)}),t[Ni]=null}};function Xf(e){this._internalRoot=e}Xf.prototype.unstable_scheduleHydration=function(e){if(e){var t=JS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hi.length&&t!==0&&t<Hi[n].priority;n++);Hi.splice(n,0,e),n===0&&QS(e)}};function _x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function I_(){}function KR(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=sf(l);i.call(h)}}var l=xk(t,r,e,0,null,!1,!1,"",I_);return e._reactRootContainer=l,e[Ni]=l.current,vu(e.nodeType===8?e.parentNode:e),ma(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=sf(u);c.call(h)}}var u=yx(e,0,!1,null,null,!1,!1,"",I_);return e._reactRootContainer=u,e[Ni]=u.current,vu(e.nodeType===8?e.parentNode:e),ma(function(){Jf(t,u,n,r)}),u}function em(e,t,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var c=s;s=function(){var u=sf(l);c.call(u)}}Jf(t,l,e,s)}else l=KR(n,t,e,s,r);return sf(l)}KS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hc(t.pendingLanes);n!==0&&(By(t,n|1),xr(t,hn()),!(jt&6)&&(Wl=hn()+500,ko()))}break;case 13:ma(function(){var r=ki(e,1);if(r!==null){var s=sr();_s(r,e,1,s)}}),xx(e,1)}};Fy=function(e){if(e.tag===13){var t=ki(e,134217728);if(t!==null){var n=sr();_s(t,e,134217728,n)}xx(e,134217728)}};YS=function(e){if(e.tag===13){var t=mo(e),n=ki(e,t);if(n!==null){var r=sr();_s(n,e,t,r)}xx(e,t)}};JS=function(){return $t};XS=function(e,t){var n=$t;try{return $t=e,t()}finally{$t=n}};Lg=function(e,t,n){switch(t){case"input":if(jg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Hf(r);if(!s)throw Error(xe(90));TS(r),jg(r,s)}}}break;case"textarea":MS(e,n);break;case"select":t=n.value,t!=null&&dl(e,!!n.multiple,t,!1)}};$S=mx;zS=ma;var YR={usingClientEntryPoint:!1,Events:[Ju,sl,Hf,OS,DS,mx]},Lc={findFiberByHostInstance:Go,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JR={bundleType:Lc.bundleType,version:Lc.version,rendererPackageName:Lc.rendererPackageName,rendererConfig:Lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=US(e),e===null?null:e.stateNode},findFiberByHostInstance:Lc.findFiberByHostInstance||qR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kd.isDisabled&&Kd.supportsFiber)try{Bf=Kd.inject(JR),Vs=Kd}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YR;Or.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_x(t))throw Error(xe(200));return ZR(e,t,null,n)};Or.createRoot=function(e,t){if(!_x(e))throw Error(xe(299));var n=!1,r="",s=wk;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yx(e,1,!1,null,null,n,!1,r,s),e[Ni]=t.current,vu(e.nodeType===8?e.parentNode:e),new wx(t)};Or.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(xe(188)):(e=Object.keys(e).join(","),Error(xe(268,e)));return e=US(t),e=e===null?null:e.stateNode,e};Or.flushSync=function(e){return ma(e)};Or.hydrate=function(e,t,n){if(!Qf(t))throw Error(xe(200));return em(null,e,t,!0,n)};Or.hydrateRoot=function(e,t,n){if(!_x(e))throw Error(xe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=wk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=xk(t,null,e,1,n??null,s,!1,i,l),e[Ni]=t.current,vu(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xf(t)};Or.render=function(e,t,n){if(!Qf(t))throw Error(xe(200));return em(null,e,t,!1,n)};Or.unmountComponentAtNode=function(e){if(!Qf(e))throw Error(xe(40));return e._reactRootContainer?(ma(function(){em(null,null,e,!1,function(){e._reactRootContainer=null,e[Ni]=null})}),!0):!1};Or.unstable_batchedUpdates=mx;Or.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qf(n))throw Error(xe(200));if(e==null||e._reactInternals===void 0)throw Error(xe(38));return em(e,t,n,!1,r)};Or.version="18.3.1-next-f1338f8080-20240426";function _k(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_k)}catch(e){console.error(e)}}_k(),_S.exports=Or;var ja=_S.exports;const bk=Cy(ja);var Sk,R_=ja;Sk=R_.createRoot,R_.hydrateRoot;const XR=1,QR=1e6;let Ap=0;function e3(){return Ap=(Ap+1)%Number.MAX_SAFE_INTEGER,Ap.toString()}const Op=new Map,L_=e=>{if(Op.has(e))return;const t=setTimeout(()=>{Op.delete(e),au({type:"REMOVE_TOAST",toastId:e})},QR);Op.set(e,t)},t3=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,XR)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?L_(n):e.toasts.forEach(r=>{L_(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Sh=[];let Nh={toasts:[]};function au(e){Nh=t3(Nh,e),Sh.forEach(t=>{t(Nh)})}function tt({...e}){const t=e3(),n=s=>au({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>au({type:"DISMISS_TOAST",toastId:t});return au({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function n3(){const[e,t]=p.useState(Nh);return p.useEffect(()=>(Sh.push(t),()=>{const n=Sh.indexOf(t);n>-1&&Sh.splice(n,1)}),[e]),{...e,toast:tt,dismiss:n=>au({type:"DISMISS_TOAST",toastId:n})}}function _e(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function A_(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function tm(...e){return t=>{let n=!1;const r=e.map(s=>{const i=A_(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():A_(e[s],null)}}}}function st(...e){return p.useCallback(tm(...e),e)}function _r(e,t=[]){let n=[];function r(i,l){const c=p.createContext(l),u=n.length;n=[...n,l];const h=f=>{var w;const{scope:g,children:v,..._}=f,x=((w=g==null?void 0:g[e])==null?void 0:w[u])||c,b=p.useMemo(()=>_,Object.values(_));return a.jsx(x.Provider,{value:b,children:v})};h.displayName=i+"Provider";function m(f,g){var x;const v=((x=g==null?void 0:g[e])==null?void 0:x[u])||c,_=p.useContext(v);if(_)return _;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[h,m]}const s=()=>{const i=n.map(l=>p.createContext(l));return function(c){const u=(c==null?void 0:c[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return s.scopeName=e,[r,r3(s,...t)]}function r3(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=r.reduce((c,{useScope:u,scopeName:h})=>{const f=u(i)[`__scope${h}`];return{...c,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function pa(e){const t=i3(e),n=p.forwardRef((r,s)=>{const{children:i,...l}=r,c=p.Children.toArray(i),u=c.find(a3);if(u){const h=u.props.children,m=c.map(f=>f===u?p.Children.count(h)>1?p.Children.only(null):p.isValidElement(h)?h.props.children:null:f);return a.jsx(t,{...l,ref:s,children:p.isValidElement(h)?p.cloneElement(h,void 0,m):null})}return a.jsx(t,{...l,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var s3=pa("Slot");function i3(e){const t=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const l=c3(s),c=l3(i,s.props);return s.type!==p.Fragment&&(c.ref=r?tm(r,l):l),p.cloneElement(s,c)}return p.Children.count(s)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Nk=Symbol("radix.slottable");function o3(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Nk,t}function a3(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Nk}function l3(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...c)=>{const u=i(...c);return s(...c),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function c3(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Qu(e){const t=e+"CollectionProvider",[n,r]=_r(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:b,children:w}=x,S=be.useRef(null),k=be.useRef(new Map).current;return a.jsx(s,{scope:b,itemMap:k,collectionRef:S,children:w})};l.displayName=t;const c=e+"CollectionSlot",u=pa(c),h=be.forwardRef((x,b)=>{const{scope:w,children:S}=x,k=i(c,w),j=st(b,k.collectionRef);return a.jsx(u,{ref:j,children:S})});h.displayName=c;const m=e+"CollectionItemSlot",f="data-radix-collection-item",g=pa(m),v=be.forwardRef((x,b)=>{const{scope:w,children:S,...k}=x,j=be.useRef(null),T=st(b,j),R=i(m,w);return be.useEffect(()=>(R.itemMap.set(j,{ref:j,...k}),()=>void R.itemMap.delete(j))),a.jsx(g,{[f]:"",ref:T,children:S})});v.displayName=m;function _(x){const b=i(e+"CollectionConsumer",x);return be.useCallback(()=>{const S=b.collectionRef.current;if(!S)return[];const k=Array.from(S.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((R,E)=>k.indexOf(R.ref.current)-k.indexOf(E.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:h,ItemSlot:v},_,r]}var u3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],De=u3.reduce((e,t)=>{const n=pa(`Primitive.${t}`),r=p.forwardRef((s,i)=>{const{asChild:l,...c}=s,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...c,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function bx(e,t){e&&ja.flushSync(()=>e.dispatchEvent(t))}function fn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function d3(e,t=globalThis==null?void 0:globalThis.document){const n=fn(e);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var h3="DismissableLayer",fv="dismissableLayer.update",f3="dismissableLayer.pointerDownOutside",m3="dismissableLayer.focusOutside",O_,kk=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ic=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:l,onDismiss:c,...u}=e,h=p.useContext(kk),[m,f]=p.useState(null),g=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=p.useState({}),_=st(t,E=>f(E)),x=Array.from(h.layers),[b]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(b),S=m?x.indexOf(m):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,j=S>=w,T=g3(E=>{const B=E.target,q=[...h.branches].some(Y=>Y.contains(B));!j||q||(s==null||s(E),l==null||l(E),E.defaultPrevented||c==null||c())},g),R=v3(E=>{const B=E.target;[...h.branches].some(Y=>Y.contains(B))||(i==null||i(E),l==null||l(E),E.defaultPrevented||c==null||c())},g);return d3(E=>{S===h.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},g),p.useEffect(()=>{if(m)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(O_=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),D_(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=O_)}},[m,g,n,h]),p.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),D_())},[m,h]),p.useEffect(()=>{const E=()=>v({});return document.addEventListener(fv,E),()=>document.removeEventListener(fv,E)},[]),a.jsx(De.div,{...u,ref:_,style:{pointerEvents:k?j?"auto":"none":void 0,...e.style},onFocusCapture:_e(e.onFocusCapture,R.onFocusCapture),onBlurCapture:_e(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:_e(e.onPointerDownCapture,T.onPointerDownCapture)})});ic.displayName=h3;var p3="DismissableLayerBranch",Ck=p.forwardRef((e,t)=>{const n=p.useContext(kk),r=p.useRef(null),s=st(t,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(De.div,{...e,ref:s})});Ck.displayName=p3;function g3(e,t=globalThis==null?void 0:globalThis.document){const n=fn(e),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let u=function(){jk(f3,n,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function v3(e,t=globalThis==null?void 0:globalThis.document){const n=fn(e),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&jk(m3,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function D_(){const e=new CustomEvent(fv);document.dispatchEvent(e)}function jk(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?bx(s,i):s.dispatchEvent(i)}var y3=ic,x3=Ck,jn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},w3="Portal",ed=p.forwardRef((e,t)=>{var c;const{container:n,...r}=e,[s,i]=p.useState(!1);jn(()=>i(!0),[]);const l=n||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?bk.createPortal(a.jsx(De.div,{...r,ref:t}),l):null});ed.displayName=w3;function _3(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var ar=e=>{const{present:t,children:n}=e,r=b3(t),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=st(r.ref,S3(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};ar.displayName="Presence";function b3(e){const[t,n]=p.useState(),r=p.useRef(null),s=p.useRef(e),i=p.useRef("none"),l=e?"mounted":"unmounted",[c,u]=_3(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const h=Yd(r.current);i.current=c==="mounted"?h:"none"},[c]),jn(()=>{const h=r.current,m=s.current;if(m!==e){const g=i.current,v=Yd(h);e?u("MOUNT"):v==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(m&&g!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),jn(()=>{if(t){let h;const m=t.ownerDocument.defaultView??window,f=v=>{const x=Yd(r.current).includes(v.animationName);if(v.target===t&&x&&(u("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",h=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},g=v=>{v.target===t&&(i.current=Yd(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{m.clearTimeout(h),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:p.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Yd(e){return(e==null?void 0:e.animationName)||"none"}function S3(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var N3=My[" useInsertionEffect ".trim().toString()]||jn;function Ss({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,l]=k3({defaultProp:t,onChange:n}),c=e!==void 0,u=c?e:s;{const m=p.useRef(e!==void 0);p.useEffect(()=>{const f=m.current;f!==c&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const h=p.useCallback(m=>{var f;if(c){const g=C3(m)?m(e):m;g!==e&&((f=l.current)==null||f.call(l,g))}else i(m)},[c,e,i,l]);return[u,h]}function k3({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),s=p.useRef(n),i=p.useRef(t);return N3(()=>{i.current=t},[t]),p.useEffect(()=>{var l;s.current!==n&&((l=i.current)==null||l.call(i,n),s.current=n)},[n,s]),[n,r,i]}function C3(e){return typeof e=="function"}var Ek=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),j3="VisuallyHidden",nm=p.forwardRef((e,t)=>a.jsx(De.span,{...e,ref:t,style:{...Ek,...e.style}}));nm.displayName=j3;var E3=nm,Sx="ToastProvider",[Nx,T3,P3]=Qu("Toast"),[Tk,TH]=_r("Toast",[P3]),[M3,rm]=Tk(Sx),Pk=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:l}=e,[c,u]=p.useState(null),[h,m]=p.useState(0),f=p.useRef(!1),g=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Sx}\`. Expected non-empty \`string\`.`),a.jsx(Nx.Provider,{scope:t,children:a.jsx(M3,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:h,viewport:c,onViewportChange:u,onToastAdd:p.useCallback(()=>m(v=>v+1),[]),onToastRemove:p.useCallback(()=>m(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:g,children:l})})};Pk.displayName=Sx;var Mk="ToastViewport",I3=["F8"],mv="toast.viewportPause",pv="toast.viewportResume",Ik=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=I3,label:s="Notifications ({hotkey})",...i}=e,l=rm(Mk,n),c=T3(n),u=p.useRef(null),h=p.useRef(null),m=p.useRef(null),f=p.useRef(null),g=st(t,f,l.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=l.toastCount>0;p.useEffect(()=>{const b=w=>{var k;r.length!==0&&r.every(j=>w[j]||w.code===j)&&((k=f.current)==null||k.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),p.useEffect(()=>{const b=u.current,w=f.current;if(_&&b&&w){const S=()=>{if(!l.isClosePausedRef.current){const R=new CustomEvent(mv);w.dispatchEvent(R),l.isClosePausedRef.current=!0}},k=()=>{if(l.isClosePausedRef.current){const R=new CustomEvent(pv);w.dispatchEvent(R),l.isClosePausedRef.current=!1}},j=R=>{!b.contains(R.relatedTarget)&&k()},T=()=>{b.contains(document.activeElement)||k()};return b.addEventListener("focusin",S),b.addEventListener("focusout",j),b.addEventListener("pointermove",S),b.addEventListener("pointerleave",T),window.addEventListener("blur",S),window.addEventListener("focus",k),()=>{b.removeEventListener("focusin",S),b.removeEventListener("focusout",j),b.removeEventListener("pointermove",S),b.removeEventListener("pointerleave",T),window.removeEventListener("blur",S),window.removeEventListener("focus",k)}}},[_,l.isClosePausedRef]);const x=p.useCallback(({tabbingDirection:b})=>{const S=c().map(k=>{const j=k.ref.current,T=[j,...V3(j)];return b==="forwards"?T:T.reverse()});return(b==="forwards"?S.reverse():S).flat()},[c]);return p.useEffect(()=>{const b=f.current;if(b){const w=S=>{var T,R,E;const k=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!k){const B=document.activeElement,q=S.shiftKey;if(S.target===b&&q){(T=h.current)==null||T.focus();return}const A=x({tabbingDirection:q?"backwards":"forwards"}),W=A.findIndex(P=>P===B);Dp(A.slice(W+1))?S.preventDefault():q?(R=h.current)==null||R.focus():(E=m.current)==null||E.focus()}};return b.addEventListener("keydown",w),()=>b.removeEventListener("keydown",w)}},[c,x]),a.jsxs(x3,{ref:u,role:"region","aria-label":s.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&a.jsx(gv,{ref:h,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"forwards"});Dp(b)}}),a.jsx(Nx.Slot,{scope:n,children:a.jsx(De.ol,{tabIndex:-1,...i,ref:g})}),_&&a.jsx(gv,{ref:m,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"backwards"});Dp(b)}})]})});Ik.displayName=Mk;var Rk="ToastFocusProxy",gv=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=rm(Rk,n);return a.jsx(nm,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:l=>{var h;const c=l.relatedTarget;!((h=i.viewport)!=null&&h.contains(c))&&r()}})});gv.displayName=Rk;var td="Toast",R3="toast.swipeStart",L3="toast.swipeMove",A3="toast.swipeCancel",O3="toast.swipeEnd",Lk=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...l}=e,[c,u]=Ss({prop:r,defaultProp:s??!0,onChange:i,caller:td});return a.jsx(ar,{present:n||c,children:a.jsx(z3,{open:c,...l,ref:t,onClose:()=>u(!1),onPause:fn(e.onPause),onResume:fn(e.onResume),onSwipeStart:_e(e.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:_e(e.onSwipeMove,h=>{const{x:m,y:f}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:_e(e.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:_e(e.onSwipeEnd,h=>{const{x:m,y:f}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),u(!1)})})})});Lk.displayName=td;var[D3,$3]=Tk(td,{onClose(){}}),z3=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:l,onEscapeKeyDown:c,onPause:u,onResume:h,onSwipeStart:m,onSwipeMove:f,onSwipeCancel:g,onSwipeEnd:v,..._}=e,x=rm(td,n),[b,w]=p.useState(null),S=st(t,P=>w(P)),k=p.useRef(null),j=p.useRef(null),T=s||x.duration,R=p.useRef(0),E=p.useRef(T),B=p.useRef(0),{onToastAdd:q,onToastRemove:Y}=x,te=fn(()=>{var Z;(b==null?void 0:b.contains(document.activeElement))&&((Z=x.viewport)==null||Z.focus()),l()}),A=p.useCallback(P=>{!P||P===1/0||(window.clearTimeout(B.current),R.current=new Date().getTime(),B.current=window.setTimeout(te,P))},[te]);p.useEffect(()=>{const P=x.viewport;if(P){const Z=()=>{A(E.current),h==null||h()},$=()=>{const U=new Date().getTime()-R.current;E.current=E.current-U,window.clearTimeout(B.current),u==null||u()};return P.addEventListener(mv,$),P.addEventListener(pv,Z),()=>{P.removeEventListener(mv,$),P.removeEventListener(pv,Z)}}},[x.viewport,T,u,h,A]),p.useEffect(()=>{i&&!x.isClosePausedRef.current&&A(T)},[i,T,x.isClosePausedRef,A]),p.useEffect(()=>(q(),()=>Y()),[q,Y]);const W=p.useMemo(()=>b?Fk(b):null,[b]);return x.viewport?a.jsxs(a.Fragment,{children:[W&&a.jsx(B3,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:W}),a.jsx(D3,{scope:n,onClose:te,children:ja.createPortal(a.jsx(Nx.ItemSlot,{scope:n,children:a.jsx(y3,{asChild:!0,onEscapeKeyDown:_e(c,()=>{x.isFocusedToastEscapeKeyDownRef.current||te(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(De.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,..._,ref:S,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:_e(e.onKeyDown,P=>{P.key==="Escape"&&(c==null||c(P.nativeEvent),P.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,te()))}),onPointerDown:_e(e.onPointerDown,P=>{P.button===0&&(k.current={x:P.clientX,y:P.clientY})}),onPointerMove:_e(e.onPointerMove,P=>{if(!k.current)return;const Z=P.clientX-k.current.x,$=P.clientY-k.current.y,U=!!j.current,I=["left","right"].includes(x.swipeDirection),O=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,F=I?O(0,Z):0,X=I?0:O(0,$),re=P.pointerType==="touch"?10:2,ae={x:F,y:X},ie={originalEvent:P,delta:ae};U?(j.current=ae,Jd(L3,f,ie,{discrete:!1})):$_(ae,x.swipeDirection,re)?(j.current=ae,Jd(R3,m,ie,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(Z)>re||Math.abs($)>re)&&(k.current=null)}),onPointerUp:_e(e.onPointerUp,P=>{const Z=j.current,$=P.target;if($.hasPointerCapture(P.pointerId)&&$.releasePointerCapture(P.pointerId),j.current=null,k.current=null,Z){const U=P.currentTarget,I={originalEvent:P,delta:Z};$_(Z,x.swipeDirection,x.swipeThreshold)?Jd(O3,v,I,{discrete:!0}):Jd(A3,g,I,{discrete:!0}),U.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),B3=e=>{const{__scopeToast:t,children:n,...r}=e,s=rm(td,t),[i,l]=p.useState(!1),[c,u]=p.useState(!1);return W3(()=>l(!0)),p.useEffect(()=>{const h=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(h)},[]),c?null:a.jsx(ed,{asChild:!0,children:a.jsx(nm,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},F3="ToastTitle",Ak=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(De.div,{...r,ref:t})});Ak.displayName=F3;var U3="ToastDescription",Ok=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return a.jsx(De.div,{...r,ref:t})});Ok.displayName=U3;var Dk="ToastAction",$k=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?a.jsx(Bk,{altText:n,asChild:!0,children:a.jsx(kx,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Dk}\`. Expected non-empty \`string\`.`),null)});$k.displayName=Dk;var zk="ToastClose",kx=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=$3(zk,n);return a.jsx(Bk,{asChild:!0,children:a.jsx(De.button,{type:"button",...r,ref:t,onClick:_e(e.onClick,s.onClose)})})});kx.displayName=zk;var Bk=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return a.jsx(De.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function Fk(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),H3(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const l=r.dataset.radixToastAnnounceAlt;l&&t.push(l)}else t.push(...Fk(r))}}),t}function Jd(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?bx(s,i):s.dispatchEvent(i)}var $_=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return t==="left"||t==="right"?i&&r>n:!i&&s>n};function W3(e=()=>{}){const t=fn(e);jn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function H3(e){return e.nodeType===e.ELEMENT_NODE}function V3(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Dp(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var G3=Pk,Uk=Ik,Wk=Lk,Hk=Ak,Vk=Ok,Gk=$k,Zk=kx;function qk(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=qk(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Kk(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=qk(e))&&(r&&(r+=" "),r+=t);return r}const z_=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,B_=Kk,sm=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return B_(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,l=Object.keys(s).map(h=>{const m=n==null?void 0:n[h],f=i==null?void 0:i[h];if(m===null)return null;const g=z_(m)||z_(f);return s[h][g]}),c=n&&Object.entries(n).reduce((h,m)=>{let[f,g]=m;return g===void 0||(h[f]=g),h},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:f,className:g,...v}=m;return Object.entries(v).every(_=>{let[x,b]=_;return Array.isArray(b)?b.includes({...i,...c}[x]):{...i,...c}[x]===b})?[...h,f,g]:h},[]);return B_(e,l,u,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yk=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:l,...c},u)=>p.createElement("svg",{ref:u,...q3,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Yk("lucide",s),...c},[...l.map(([h,m])=>p.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(e,t)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(K3,{ref:i,iconNode:t,className:Yk(`lucide-${Z3(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=Ne("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=Ne("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=Ne("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=Ne("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=Ne("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=Ne("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=Ne("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=Ne("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=Ne("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Ne("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Ne("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Ne("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=Ne("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Ne("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=Ne("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=Ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=Ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=Ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=Ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=Ne("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Ne("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=Ne("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=Ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=Ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=Ne("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=Ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=Ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=Ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=Ne("Focus",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Ne("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=Ne("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=Ne("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=Ne("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=Ne("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=Ne("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Ne("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Ne("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=Ne("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=Ne("MapPinned",[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Ne("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=Ne("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=Ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=Ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=Ne("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=Ne("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=Ne("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=Ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=Ne("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Ne("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=Ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Ne("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=Ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=Ne("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=Ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=Ne("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=Ne("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=Ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=Ne("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=Ne("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Ne("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Ne("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=Ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=Ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=Ne("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=Ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=Ne("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Ne("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=Ne("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Ne("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=Ne("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=Ne("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=Ne("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Tx="-",EL=e=>{const t=PL(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:l=>{const c=l.split(Tx);return c[0]===""&&c.length!==1&&c.shift(),sC(c,t)||TL(l)},getConflictingClassGroupIds:(l,c)=>{const u=n[l]||[];return c&&r[l]?[...u,...r[l]]:u}}},sC=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?sC(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Tx);return(l=t.validators.find(({validator:c})=>c(i)))==null?void 0:l.classGroupId},K_=/^\[(.+)\]$/,TL=e=>{if(K_.test(e)){const t=K_.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},PL=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return IL(Object.entries(e.classGroups),n).forEach(([i,l])=>{wv(l,r,i,t)}),r},wv=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:Y_(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(ML(s)){wv(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,l])=>{wv(l,Y_(t,i),n,r)})})},Y_=(e,t)=>{let n=e;return t.split(Tx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},ML=e=>e.isThemeGetter,IL=(e,t)=>t?e.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,c])=>[t+l,c])):i);return[n,s]}):e,RL=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,l)=>{n.set(i,l),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let l=n.get(i);if(l!==void 0)return l;if((l=r.get(i))!==void 0)return s(i,l),l},set(i,l){n.has(i)?n.set(i,l):s(i,l)}}},iC="!",LL=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],i=t.length,l=c=>{const u=[];let h=0,m=0,f;for(let b=0;b<c.length;b++){let w=c[b];if(h===0){if(w===s&&(r||c.slice(b,b+i)===t)){u.push(c.slice(m,b)),m=b+i;continue}if(w==="/"){f=b;continue}}w==="["?h++:w==="]"&&h--}const g=u.length===0?c:c.substring(m),v=g.startsWith(iC),_=v?g.substring(1):g,x=f&&f>m?f-m:void 0;return{modifiers:u,hasImportantModifier:v,baseClassName:_,maybePostfixModifierPosition:x}};return n?c=>n({className:c,parseClassName:l}):l},AL=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},OL=e=>({cache:RL(e.cacheSize),parseClassName:LL(e),...EL(e)}),DL=/\s+/,$L=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],l=e.trim().split(DL);let c="";for(let u=l.length-1;u>=0;u-=1){const h=l[u],{modifiers:m,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:v}=n(h);let _=!!v,x=r(_?g.substring(0,v):g);if(!x){if(!_){c=h+(c.length>0?" "+c:c);continue}if(x=r(g),!x){c=h+(c.length>0?" "+c:c);continue}_=!1}const b=AL(m).join(":"),w=f?b+iC:b,S=w+x;if(i.includes(S))continue;i.push(S);const k=s(x,_);for(let j=0;j<k.length;++j){const T=k[j];i.push(w+T)}c=h+(c.length>0?" "+c:c)}return c};function zL(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=oC(t))&&(r&&(r+=" "),r+=n);return r}const oC=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=oC(e[r]))&&(n&&(n+=" "),n+=t);return n};function BL(e,...t){let n,r,s,i=l;function l(u){const h=t.reduce((m,f)=>f(m),e());return n=OL(h),r=n.cache.get,s=n.cache.set,i=c,c(u)}function c(u){const h=r(u);if(h)return h;const m=$L(u,n);return s(u,m),m}return function(){return i(zL.apply(null,arguments))}}const Wt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},aC=/^\[(?:([a-z-]+):)?(.+)\]$/i,FL=/^\d+\/\d+$/,UL=new Set(["px","full","screen"]),WL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,HL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,GL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ZL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hi=e=>vl(e)||UL.has(e)||FL.test(e),Ai=e=>ac(e,"length",tA),vl=e=>!!e&&!Number.isNaN(Number(e)),Bp=e=>ac(e,"number",vl),Oc=e=>!!e&&Number.isInteger(Number(e)),qL=e=>e.endsWith("%")&&vl(e.slice(0,-1)),lt=e=>aC.test(e),Oi=e=>WL.test(e),KL=new Set(["length","size","percentage"]),YL=e=>ac(e,KL,lC),JL=e=>ac(e,"position",lC),XL=new Set(["image","url"]),QL=e=>ac(e,XL,rA),eA=e=>ac(e,"",nA),Dc=()=>!0,ac=(e,t,n)=>{const r=aC.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},tA=e=>HL.test(e)&&!VL.test(e),lC=()=>!1,nA=e=>GL.test(e),rA=e=>ZL.test(e),sA=()=>{const e=Wt("colors"),t=Wt("spacing"),n=Wt("blur"),r=Wt("brightness"),s=Wt("borderColor"),i=Wt("borderRadius"),l=Wt("borderSpacing"),c=Wt("borderWidth"),u=Wt("contrast"),h=Wt("grayscale"),m=Wt("hueRotate"),f=Wt("invert"),g=Wt("gap"),v=Wt("gradientColorStops"),_=Wt("gradientColorStopPositions"),x=Wt("inset"),b=Wt("margin"),w=Wt("opacity"),S=Wt("padding"),k=Wt("saturate"),j=Wt("scale"),T=Wt("sepia"),R=Wt("skew"),E=Wt("space"),B=Wt("translate"),q=()=>["auto","contain","none"],Y=()=>["auto","hidden","clip","visible","scroll"],te=()=>["auto",lt,t],A=()=>[lt,t],W=()=>["",hi,Ai],P=()=>["auto",vl,lt],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",lt],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[vl,lt];return{cacheSize:500,separator:":",theme:{colors:[Dc],spacing:[hi,Ai],blur:["none","",Oi,lt],brightness:X(),borderColor:[e],borderRadius:["none","","full",Oi,lt],borderSpacing:A(),borderWidth:W(),contrast:X(),grayscale:O(),hueRotate:X(),invert:O(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[qL,Ai],inset:te(),margin:te(),opacity:X(),padding:A(),saturate:X(),scale:X(),sepia:O(),skew:X(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",lt]}],container:["container"],columns:[{columns:[Oi]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),lt]}],overflow:[{overflow:Y()}],"overflow-x":[{"overflow-x":Y()}],"overflow-y":[{"overflow-y":Y()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oc,lt]}],basis:[{basis:te()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",lt]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",Oc,lt]}],"grid-cols":[{"grid-cols":[Dc]}],"col-start-end":[{col:["auto",{span:["full",Oc,lt]},lt]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Dc]}],"row-start-end":[{row:["auto",{span:[Oc,lt]},lt]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",lt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",lt]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",lt,t]}],"min-w":[{"min-w":[lt,t,"min","max","fit"]}],"max-w":[{"max-w":[lt,t,"none","full","min","max","fit","prose",{screen:[Oi]},Oi]}],h:[{h:[lt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[lt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[lt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[lt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Oi,Ai]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Bp]}],"font-family":[{font:[Dc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",lt]}],"line-clamp":[{"line-clamp":["none",vl,Bp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",hi,lt]}],"list-image":[{"list-image":["none",lt]}],"list-style-type":[{list:["none","disc","decimal",lt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",hi,Ai]}],"underline-offset":[{"underline-offset":["auto",hi,lt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",lt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",lt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),JL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",YL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},QL]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[hi,lt]}],"outline-w":[{outline:[hi,Ai]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[hi,Ai]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Oi,eA]}],"shadow-color":[{shadow:[Dc]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Oi,lt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[f]}],saturate:[{saturate:[k]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",lt]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",lt]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",lt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Oc,lt]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",lt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",lt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",lt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[hi,Ai,Bp]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},iA=BL(sA);function ye(...e){return iA(Kk(e))}const oA=G3,cC=p.forwardRef(({className:e,...t},n)=>a.jsx(Uk,{ref:n,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));cC.displayName=Uk.displayName;const aA=sm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),uC=p.forwardRef(({className:e,variant:t,...n},r)=>a.jsx(Wk,{ref:r,className:ye(aA({variant:t}),e),...n}));uC.displayName=Wk.displayName;const lA=p.forwardRef(({className:e,...t},n)=>a.jsx(Gk,{ref:n,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));lA.displayName=Gk.displayName;const dC=p.forwardRef(({className:e,...t},n)=>a.jsx(Zk,{ref:n,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:a.jsx(un,{className:"h-4 w-4"})}));dC.displayName=Zk.displayName;const hC=p.forwardRef(({className:e,...t},n)=>a.jsx(Hk,{ref:n,className:ye("text-sm font-semibold",e),...t}));hC.displayName=Hk.displayName;const fC=p.forwardRef(({className:e,...t},n)=>a.jsx(Vk,{ref:n,className:ye("text-sm opacity-90",e),...t}));fC.displayName=Vk.displayName;function cA(){const{toasts:e}=n3();return a.jsxs(oA,{children:[e.map(function({id:t,title:n,description:r,action:s,...i}){return a.jsxs(uC,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(hC,{children:n}),r&&a.jsx(fC,{children:r})]}),s,a.jsx(dC,{})]},t)}),a.jsx(cC,{})]})}var J_=["light","dark"],uA="(prefers-color-scheme: dark)",dA=p.createContext(void 0),hA={setTheme:e=>{},themes:[]},fA=()=>{var e;return(e=p.useContext(dA))!=null?e:hA};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:l,attrs:c,nonce:u})=>{let h=i==="system",m=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?J_.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",g=(_,x=!1,b=!0)=>{let w=l?l[_]:_,S=x?_+"|| ''":`'${w}'`,k="";return s&&b&&!x&&J_.includes(_)&&(k+=`d.style.colorScheme = '${_}';`),n==="class"?x||w?k+=`c.add(${S})`:k+="null":w&&(k+=`d[s](n,${S})`),k},v=e?`!function(){${m}${g(e)}}()`:r?`!function(){try{${m}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${h})){var t='${uA}',m=window.matchMedia(t);if(m.media!==t||m.matches){${g("dark")}}else{${g("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${g(l?"x[e]":"e",!0)}}${h?"":"else{"+g(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${t}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${g(l?"x[e]":"e",!0)}}else{${g(i,!1,!1)};}${f}}catch(t){}}();`;return p.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:v}})});var mA=e=>{switch(e){case"success":return vA;case"info":return xA;case"warning":return yA;case"error":return wA;default:return null}},pA=Array(12).fill(0),gA=({visible:e,className:t})=>be.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},be.createElement("div",{className:"sonner-spinner"},pA.map((n,r)=>be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),vA=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),yA=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),xA=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wA=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_A=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bA=()=>{let[e,t]=be.useState(document.hidden);return be.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},_v=1,SA=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:_v++,i=this.toasts.find(c=>c.id===s),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:n}),{...c,...e,id:s,dismissible:l,title:n}):c):this.addToast({title:n,...r,dismissible:l,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,i,l=r.then(async u=>{if(i=["resolve",u],be.isValidElement(u))s=!1,this.create({id:n,type:"default",message:u});else if(kA(u)&&!u.ok){s=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${u.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${u.status}`):t.description;this.create({id:n,type:"error",message:h,description:m})}else if(t.success!==void 0){s=!1;let h=typeof t.success=="function"?await t.success(u):t.success,m=typeof t.description=="function"?await t.description(u):t.description;this.create({id:n,type:"success",message:h,description:m})}}).catch(async u=>{if(i=["reject",u],t.error!==void 0){s=!1;let h=typeof t.error=="function"?await t.error(u):t.error,m=typeof t.description=="function"?await t.description(u):t.description;this.create({id:n,type:"error",message:h,description:m})}}).finally(()=>{var u;s&&(this.dismiss(n),n=void 0),(u=t.finally)==null||u.call(t)}),c=()=>new Promise((u,h)=>l.then(()=>i[0]==="reject"?h(i[1]):u(i[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||_v++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},hr=new SA,NA=(e,t)=>{let n=(t==null?void 0:t.id)||_v++;return hr.addToast({title:e,...t,id:n}),n},kA=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",CA=NA,jA=()=>hr.toasts,EA=()=>hr.getActiveToasts(),Gr=Object.assign(CA,{success:hr.success,info:hr.info,warning:hr.warning,error:hr.error,custom:hr.custom,message:hr.message,promise:hr.promise,dismiss:hr.dismiss,loading:hr.loading},{getHistory:jA,getToasts:EA});function TA(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}TA(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xd(e){return e.label!==void 0}var PA=3,MA="32px",IA="16px",X_=4e3,RA=356,LA=14,AA=20,OA=200;function ls(...e){return e.filter(Boolean).join(" ")}function DA(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var $A=e=>{var t,n,r,s,i,l,c,u,h,m,f;let{invert:g,toast:v,unstyled:_,interacting:x,setHeights:b,visibleToasts:w,heights:S,index:k,toasts:j,expanded:T,removeToast:R,defaultRichColors:E,closeButton:B,style:q,cancelButtonStyle:Y,actionButtonStyle:te,className:A="",descriptionClassName:W="",duration:P,position:Z,gap:$,loadingIcon:U,expandByDefault:I,classNames:O,icons:F,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:re}=e,[ae,ie]=be.useState(null),[oe,ge]=be.useState(null),[ce,ke]=be.useState(!1),[Oe,Pe]=be.useState(!1),[Te,We]=be.useState(!1),[wt,kt]=be.useState(!1),[ot,Q]=be.useState(!1),[he,me]=be.useState(0),[Ue,Ze]=be.useState(0),ze=be.useRef(v.duration||P||X_),_t=be.useRef(null),dt=be.useRef(null),En=k===0,Yn=k+1<=w,Rt=v.type,rn=v.dismissible!==!1,Jt=v.className||"",Et=v.descriptionClassName||"",bt=be.useMemo(()=>S.findIndex(Be=>Be.toastId===v.id)||0,[S,v.id]),Fn=be.useMemo(()=>{var Be;return(Be=v.closeButton)!=null?Be:B},[v.closeButton,B]),ue=be.useMemo(()=>v.duration||P||X_,[v.duration,P]),Ve=be.useRef(0),Ie=be.useRef(0),Fe=be.useRef(0),Ot=be.useRef(null),[Mt,_n]=Z.split("-"),Jn=be.useMemo(()=>S.reduce((Be,ct,ht)=>ht>=bt?Be:Be+ct.height,0),[S,bt]),Tt=bA(),sn=v.invert||g,bn=Rt==="loading";Ie.current=be.useMemo(()=>bt*$+Jn,[bt,Jn]),be.useEffect(()=>{ze.current=ue},[ue]),be.useEffect(()=>{ke(!0)},[]),be.useEffect(()=>{let Be=dt.current;if(Be){let ct=Be.getBoundingClientRect().height;return Ze(ct),b(ht=>[{toastId:v.id,height:ct,position:v.position},...ht]),()=>b(ht=>ht.filter(Lt=>Lt.toastId!==v.id))}},[b,v.id]),be.useLayoutEffect(()=>{if(!ce)return;let Be=dt.current,ct=Be.style.height;Be.style.height="auto";let ht=Be.getBoundingClientRect().height;Be.style.height=ct,Ze(ht),b(Lt=>Lt.find(Ct=>Ct.toastId===v.id)?Lt.map(Ct=>Ct.toastId===v.id?{...Ct,height:ht}:Ct):[{toastId:v.id,height:ht,position:v.position},...Lt])},[ce,v.title,v.description,b,v.id]);let mn=be.useCallback(()=>{Pe(!0),me(Ie.current),b(Be=>Be.filter(ct=>ct.toastId!==v.id)),setTimeout(()=>{R(v)},OA)},[v,R,b,Ie]);be.useEffect(()=>{if(v.promise&&Rt==="loading"||v.duration===1/0||v.type==="loading")return;let Be;return T||x||re&&Tt?(()=>{if(Fe.current<Ve.current){let ct=new Date().getTime()-Ve.current;ze.current=ze.current-ct}Fe.current=new Date().getTime()})():ze.current!==1/0&&(Ve.current=new Date().getTime(),Be=setTimeout(()=>{var ct;(ct=v.onAutoClose)==null||ct.call(v,v),mn()},ze.current)),()=>clearTimeout(Be)},[T,x,v,Rt,re,Tt,mn]),be.useEffect(()=>{v.delete&&mn()},[mn,v.delete]);function qe(){var Be,ct,ht;return F!=null&&F.loading?be.createElement("div",{className:ls(O==null?void 0:O.loader,(Be=v==null?void 0:v.classNames)==null?void 0:Be.loader,"sonner-loader"),"data-visible":Rt==="loading"},F.loading):U?be.createElement("div",{className:ls(O==null?void 0:O.loader,(ct=v==null?void 0:v.classNames)==null?void 0:ct.loader,"sonner-loader"),"data-visible":Rt==="loading"},U):be.createElement(gA,{className:ls(O==null?void 0:O.loader,(ht=v==null?void 0:v.classNames)==null?void 0:ht.loader),visible:Rt==="loading"})}return be.createElement("li",{tabIndex:0,ref:dt,className:ls(A,Jt,O==null?void 0:O.toast,(t=v==null?void 0:v.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[Rt],(n=v==null?void 0:v.classNames)==null?void 0:n[Rt]),"data-sonner-toast":"","data-rich-colors":(r=v.richColors)!=null?r:E,"data-styled":!(v.jsx||v.unstyled||_),"data-mounted":ce,"data-promise":!!v.promise,"data-swiped":ot,"data-removed":Oe,"data-visible":Yn,"data-y-position":Mt,"data-x-position":_n,"data-index":k,"data-front":En,"data-swiping":Te,"data-dismissible":rn,"data-type":Rt,"data-invert":sn,"data-swipe-out":wt,"data-swipe-direction":oe,"data-expanded":!!(T||I&&ce),style:{"--index":k,"--toasts-before":k,"--z-index":j.length-k,"--offset":`${Oe?he:Ie.current}px`,"--initial-height":I?"auto":`${Ue}px`,...q,...v.style},onDragEnd:()=>{We(!1),ie(null),Ot.current=null},onPointerDown:Be=>{bn||!rn||(_t.current=new Date,me(Ie.current),Be.target.setPointerCapture(Be.pointerId),Be.target.tagName!=="BUTTON"&&(We(!0),Ot.current={x:Be.clientX,y:Be.clientY}))},onPointerUp:()=>{var Be,ct,ht,Lt;if(wt||!rn)return;Ot.current=null;let Ct=Number(((Be=dt.current)==null?void 0:Be.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Xt=Number(((ct=dt.current)==null?void 0:ct.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),qt=new Date().getTime()-((ht=_t.current)==null?void 0:ht.getTime()),Kt=ae==="x"?Ct:Xt,Sn=Math.abs(Kt)/qt;if(Math.abs(Kt)>=AA||Sn>.11){me(Ie.current),(Lt=v.onDismiss)==null||Lt.call(v,v),ge(ae==="x"?Ct>0?"right":"left":Xt>0?"down":"up"),mn(),kt(!0),Q(!1);return}We(!1),ie(null)},onPointerMove:Be=>{var ct,ht,Lt,Ct;if(!Ot.current||!rn||((ct=window.getSelection())==null?void 0:ct.toString().length)>0)return;let Xt=Be.clientY-Ot.current.y,qt=Be.clientX-Ot.current.x,Kt=(ht=e.swipeDirections)!=null?ht:DA(Z);!ae&&(Math.abs(qt)>1||Math.abs(Xt)>1)&&ie(Math.abs(qt)>Math.abs(Xt)?"x":"y");let Sn={x:0,y:0};ae==="y"?(Kt.includes("top")||Kt.includes("bottom"))&&(Kt.includes("top")&&Xt<0||Kt.includes("bottom")&&Xt>0)&&(Sn.y=Xt):ae==="x"&&(Kt.includes("left")||Kt.includes("right"))&&(Kt.includes("left")&&qt<0||Kt.includes("right")&&qt>0)&&(Sn.x=qt),(Math.abs(Sn.x)>0||Math.abs(Sn.y)>0)&&Q(!0),(Lt=dt.current)==null||Lt.style.setProperty("--swipe-amount-x",`${Sn.x}px`),(Ct=dt.current)==null||Ct.style.setProperty("--swipe-amount-y",`${Sn.y}px`)}},Fn&&!v.jsx?be.createElement("button",{"aria-label":X,"data-disabled":bn,"data-close-button":!0,onClick:bn||!rn?()=>{}:()=>{var Be;mn(),(Be=v.onDismiss)==null||Be.call(v,v)},className:ls(O==null?void 0:O.closeButton,(s=v==null?void 0:v.classNames)==null?void 0:s.closeButton)},(i=F==null?void 0:F.close)!=null?i:_A):null,v.jsx||p.isValidElement(v.title)?v.jsx?v.jsx:typeof v.title=="function"?v.title():v.title:be.createElement(be.Fragment,null,Rt||v.icon||v.promise?be.createElement("div",{"data-icon":"",className:ls(O==null?void 0:O.icon,(l=v==null?void 0:v.classNames)==null?void 0:l.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||qe():null,v.type!=="loading"?v.icon||(F==null?void 0:F[Rt])||mA(Rt):null):null,be.createElement("div",{"data-content":"",className:ls(O==null?void 0:O.content,(c=v==null?void 0:v.classNames)==null?void 0:c.content)},be.createElement("div",{"data-title":"",className:ls(O==null?void 0:O.title,(u=v==null?void 0:v.classNames)==null?void 0:u.title)},typeof v.title=="function"?v.title():v.title),v.description?be.createElement("div",{"data-description":"",className:ls(W,Et,O==null?void 0:O.description,(h=v==null?void 0:v.classNames)==null?void 0:h.description)},typeof v.description=="function"?v.description():v.description):null),p.isValidElement(v.cancel)?v.cancel:v.cancel&&Xd(v.cancel)?be.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||Y,onClick:Be=>{var ct,ht;Xd(v.cancel)&&rn&&((ht=(ct=v.cancel).onClick)==null||ht.call(ct,Be),mn())},className:ls(O==null?void 0:O.cancelButton,(m=v==null?void 0:v.classNames)==null?void 0:m.cancelButton)},v.cancel.label):null,p.isValidElement(v.action)?v.action:v.action&&Xd(v.action)?be.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||te,onClick:Be=>{var ct,ht;Xd(v.action)&&((ht=(ct=v.action).onClick)==null||ht.call(ct,Be),!Be.defaultPrevented&&mn())},className:ls(O==null?void 0:O.actionButton,(f=v==null?void 0:v.classNames)==null?void 0:f.actionButton)},v.action.label):null))};function Q_(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function zA(e,t){let n={};return[e,t].forEach((r,s)=>{let i=s===1,l=i?"--mobile-offset":"--offset",c=i?IA:MA;function u(h){["top","right","bottom","left"].forEach(m=>{n[`${l}-${m}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${l}-${h}`]=c:n[`${l}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):u(c)}),n}var BA=p.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:l,className:c,offset:u,mobileOffset:h,theme:m="light",richColors:f,duration:g,style:v,visibleToasts:_=PA,toastOptions:x,dir:b=Q_(),gap:w=LA,loadingIcon:S,icons:k,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:T}=e,[R,E]=be.useState([]),B=be.useMemo(()=>Array.from(new Set([r].concat(R.filter(re=>re.position).map(re=>re.position)))),[R,r]),[q,Y]=be.useState([]),[te,A]=be.useState(!1),[W,P]=be.useState(!1),[Z,$]=be.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=be.useRef(null),I=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=be.useRef(null),F=be.useRef(!1),X=be.useCallback(re=>{E(ae=>{var ie;return(ie=ae.find(oe=>oe.id===re.id))!=null&&ie.delete||hr.dismiss(re.id),ae.filter(({id:oe})=>oe!==re.id)})},[]);return be.useEffect(()=>hr.subscribe(re=>{if(re.dismiss){E(ae=>ae.map(ie=>ie.id===re.id?{...ie,delete:!0}:ie));return}setTimeout(()=>{bk.flushSync(()=>{E(ae=>{let ie=ae.findIndex(oe=>oe.id===re.id);return ie!==-1?[...ae.slice(0,ie),{...ae[ie],...re},...ae.slice(ie+1)]:[re,...ae]})})})}),[]),be.useEffect(()=>{if(m!=="system"){$(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let re=window.matchMedia("(prefers-color-scheme: dark)");try{re.addEventListener("change",({matches:ae})=>{$(ae?"dark":"light")})}catch{re.addListener(({matches:ie})=>{try{$(ie?"dark":"light")}catch(oe){console.error(oe)}})}},[m]),be.useEffect(()=>{R.length<=1&&A(!1)},[R]),be.useEffect(()=>{let re=ae=>{var ie,oe;s.every(ge=>ae[ge]||ae.code===ge)&&(A(!0),(ie=U.current)==null||ie.focus()),ae.code==="Escape"&&(document.activeElement===U.current||(oe=U.current)!=null&&oe.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[s]),be.useEffect(()=>{if(U.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,F.current=!1)}},[U.current]),be.createElement("section",{ref:t,"aria-label":`${j} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},B.map((re,ae)=>{var ie;let[oe,ge]=re.split("-");return R.length?be.createElement("ol",{key:re,dir:b==="auto"?Q_():b,tabIndex:-1,ref:U,className:c,"data-sonner-toaster":!0,"data-theme":Z,"data-y-position":oe,"data-lifted":te&&R.length>1&&!i,"data-x-position":ge,style:{"--front-toast-height":`${((ie=q[0])==null?void 0:ie.height)||0}px`,"--width":`${RA}px`,"--gap":`${w}px`,...v,...zA(u,h)},onBlur:ce=>{F.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(F.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||F.current||(F.current=!0,O.current=ce.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{W||A(!1)},onDragEnd:()=>A(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},R.filter(ce=>!ce.position&&ae===0||ce.position===re).map((ce,ke)=>{var Oe,Pe;return be.createElement($A,{key:ce.id,icons:k,index:ke,toast:ce,defaultRichColors:f,duration:(Oe=x==null?void 0:x.duration)!=null?Oe:g,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:n,visibleToasts:_,closeButton:(Pe=x==null?void 0:x.closeButton)!=null?Pe:l,interacting:W,position:re,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:X,toasts:R.filter(Te=>Te.position==ce.position),heights:q.filter(Te=>Te.position==ce.position),setHeights:Y,expandByDefault:i,gap:w,loadingIcon:S,expanded:te,pauseWhenPageIsHidden:T,swipeDirections:e.swipeDirections})})):null}))});const eb=({...e})=>{const{theme:t="system"}=fA();return a.jsx(BA,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var FA=My[" useId ".trim().toString()]||(()=>{}),UA=0;function Ks(e){const[t,n]=p.useState(FA());return jn(()=>{e||n(r=>r??String(UA++))},[e]),e||(t?`radix-${t}`:"")}const WA=["top","right","bottom","left"],wo=Math.min,Cr=Math.max,df=Math.round,Qd=Math.floor,Zs=e=>({x:e,y:e}),HA={left:"right",right:"left",bottom:"top",top:"bottom"},VA={start:"end",end:"start"};function bv(e,t,n){return Cr(e,wo(t,n))}function Ei(e,t){return typeof e=="function"?e(t):e}function Ti(e){return e.split("-")[0]}function lc(e){return e.split("-")[1]}function Px(e){return e==="x"?"y":"x"}function Mx(e){return e==="y"?"height":"width"}const GA=new Set(["top","bottom"]);function Hs(e){return GA.has(Ti(e))?"y":"x"}function Ix(e){return Px(Hs(e))}function ZA(e,t,n){n===void 0&&(n=!1);const r=lc(e),s=Ix(e),i=Mx(s);let l=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=hf(l)),[l,hf(l)]}function qA(e){const t=hf(e);return[Sv(e),t,Sv(t)]}function Sv(e){return e.replace(/start|end/g,t=>VA[t])}const tb=["left","right"],nb=["right","left"],KA=["top","bottom"],YA=["bottom","top"];function JA(e,t,n){switch(e){case"top":case"bottom":return n?t?nb:tb:t?tb:nb;case"left":case"right":return t?KA:YA;default:return[]}}function XA(e,t,n,r){const s=lc(e);let i=JA(Ti(e),n==="start",r);return s&&(i=i.map(l=>l+"-"+s),t&&(i=i.concat(i.map(Sv)))),i}function hf(e){return e.replace(/left|right|bottom|top/g,t=>HA[t])}function QA(e){return{top:0,right:0,bottom:0,left:0,...e}}function mC(e){return typeof e!="number"?QA(e):{top:e,right:e,bottom:e,left:e}}function ff(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function rb(e,t,n){let{reference:r,floating:s}=e;const i=Hs(t),l=Ix(t),c=Mx(l),u=Ti(t),h=i==="y",m=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,g=r[c]/2-s[c]/2;let v;switch(u){case"top":v={x:m,y:r.y-s.height};break;case"bottom":v={x:m,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-s.width,y:f};break;default:v={x:r.x,y:r.y}}switch(lc(t)){case"start":v[l]-=g*(n&&h?-1:1);break;case"end":v[l]+=g*(n&&h?-1:1);break}return v}const eO=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:l}=n,c=i.filter(Boolean),u=await(l.isRTL==null?void 0:l.isRTL(t));let h=await l.getElementRects({reference:e,floating:t,strategy:s}),{x:m,y:f}=rb(h,r,u),g=r,v={},_=0;for(let x=0;x<c.length;x++){const{name:b,fn:w}=c[x],{x:S,y:k,data:j,reset:T}=await w({x:m,y:f,initialPlacement:r,placement:g,strategy:s,middlewareData:v,rects:h,platform:l,elements:{reference:e,floating:t}});m=S??m,f=k??f,v={...v,[b]:{...v[b],...j}},T&&_<=50&&(_++,typeof T=="object"&&(T.placement&&(g=T.placement),T.rects&&(h=T.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:s}):T.rects),{x:m,y:f}=rb(h,g,u)),x=-1)}return{x:m,y:f,placement:g,strategy:s,middlewareData:v}};async function Cu(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:l,elements:c,strategy:u}=e,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:g=!1,padding:v=0}=Ei(t,e),_=mC(v),b=c[g?f==="floating"?"reference":"floating":f],w=ff(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:h,rootBoundary:m,strategy:u})),S=f==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),j=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},T=ff(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:S,offsetParent:k,strategy:u}):S);return{top:(w.top-T.top+_.top)/j.y,bottom:(T.bottom-w.bottom+_.bottom)/j.y,left:(w.left-T.left+_.left)/j.x,right:(T.right-w.right+_.right)/j.x}}const tO=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:l,elements:c,middlewareData:u}=t,{element:h,padding:m=0}=Ei(e,t)||{};if(h==null)return{};const f=mC(m),g={x:n,y:r},v=Ix(s),_=Mx(v),x=await l.getDimensions(h),b=v==="y",w=b?"top":"left",S=b?"bottom":"right",k=b?"clientHeight":"clientWidth",j=i.reference[_]+i.reference[v]-g[v]-i.floating[_],T=g[v]-i.reference[v],R=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let E=R?R[k]:0;(!E||!await(l.isElement==null?void 0:l.isElement(R)))&&(E=c.floating[k]||i.floating[_]);const B=j/2-T/2,q=E/2-x[_]/2-1,Y=wo(f[w],q),te=wo(f[S],q),A=Y,W=E-x[_]-te,P=E/2-x[_]/2+B,Z=bv(A,P,W),$=!u.arrow&&lc(s)!=null&&P!==Z&&i.reference[_]/2-(P<A?Y:te)-x[_]/2<0,U=$?P<A?P-A:P-W:0;return{[v]:g[v]+U,data:{[v]:Z,centerOffset:P-Z-U,...$&&{alignmentOffset:U}},reset:$}}}),nO=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:l,initialPlacement:c,platform:u,elements:h}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:x=!0,...b}=Ei(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=Ti(s),S=Hs(c),k=Ti(c)===c,j=await(u.isRTL==null?void 0:u.isRTL(h.floating)),T=g||(k||!x?[hf(c)]:qA(c)),R=_!=="none";!g&&R&&T.push(...XA(c,x,_,j));const E=[c,...T],B=await Cu(t,b),q=[];let Y=((r=i.flip)==null?void 0:r.overflows)||[];if(m&&q.push(B[w]),f){const P=ZA(s,l,j);q.push(B[P[0]],B[P[1]])}if(Y=[...Y,{placement:s,overflows:q}],!q.every(P=>P<=0)){var te,A;const P=(((te=i.flip)==null?void 0:te.index)||0)+1,Z=E[P];if(Z&&(!(f==="alignment"?S!==Hs(Z):!1)||Y.every(I=>I.overflows[0]>0&&Hs(I.placement)===S)))return{data:{index:P,overflows:Y},reset:{placement:Z}};let $=(A=Y.filter(U=>U.overflows[0]<=0).sort((U,I)=>U.overflows[1]-I.overflows[1])[0])==null?void 0:A.placement;if(!$)switch(v){case"bestFit":{var W;const U=(W=Y.filter(I=>{if(R){const O=Hs(I.placement);return O===S||O==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(O=>O>0).reduce((O,F)=>O+F,0)]).sort((I,O)=>I[1]-O[1])[0])==null?void 0:W[0];U&&($=U);break}case"initialPlacement":$=c;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function sb(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ib(e){return WA.some(t=>e[t]>=0)}const rO=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Ei(e,t);switch(r){case"referenceHidden":{const i=await Cu(t,{...s,elementContext:"reference"}),l=sb(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:ib(l)}}}case"escaped":{const i=await Cu(t,{...s,altBoundary:!0}),l=sb(i,n.floating);return{data:{escapedOffsets:l,escaped:ib(l)}}}default:return{}}}}},pC=new Set(["left","top"]);async function sO(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=Ti(n),c=lc(n),u=Hs(n)==="y",h=pC.has(l)?-1:1,m=i&&u?-1:1,f=Ei(t,e);let{mainAxis:g,crossAxis:v,alignmentAxis:_}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&typeof _=="number"&&(v=c==="end"?_*-1:_),u?{x:v*m,y:g*h}:{x:g*h,y:v*m}}const iO=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:l,middlewareData:c}=t,u=await sO(t,e);return l===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:l}}}}},oO=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:l=!1,limiter:c={fn:b=>{let{x:w,y:S}=b;return{x:w,y:S}}},...u}=Ei(e,t),h={x:n,y:r},m=await Cu(t,u),f=Hs(Ti(s)),g=Px(f);let v=h[g],_=h[f];if(i){const b=g==="y"?"top":"left",w=g==="y"?"bottom":"right",S=v+m[b],k=v-m[w];v=bv(S,v,k)}if(l){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",S=_+m[b],k=_-m[w];_=bv(S,_,k)}const x=c.fn({...t,[g]:v,[f]:_});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[g]:i,[f]:l}}}}}},aO=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:l}=t,{offset:c=0,mainAxis:u=!0,crossAxis:h=!0}=Ei(e,t),m={x:n,y:r},f=Hs(s),g=Px(f);let v=m[g],_=m[f];const x=Ei(c,t),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const k=g==="y"?"height":"width",j=i.reference[g]-i.floating[k]+b.mainAxis,T=i.reference[g]+i.reference[k]-b.mainAxis;v<j?v=j:v>T&&(v=T)}if(h){var w,S;const k=g==="y"?"width":"height",j=pC.has(Ti(s)),T=i.reference[f]-i.floating[k]+(j&&((w=l.offset)==null?void 0:w[f])||0)+(j?0:b.crossAxis),R=i.reference[f]+i.reference[k]+(j?0:((S=l.offset)==null?void 0:S[f])||0)-(j?b.crossAxis:0);_<T?_=T:_>R&&(_=R)}return{[g]:v,[f]:_}}}},lO=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:l,elements:c}=t,{apply:u=()=>{},...h}=Ei(e,t),m=await Cu(t,h),f=Ti(s),g=lc(s),v=Hs(s)==="y",{width:_,height:x}=i.floating;let b,w;f==="top"||f==="bottom"?(b=f,w=g===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(w=f,b=g==="end"?"top":"bottom");const S=x-m.top-m.bottom,k=_-m.left-m.right,j=wo(x-m[b],S),T=wo(_-m[w],k),R=!t.middlewareData.shift;let E=j,B=T;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(B=k),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=S),R&&!g){const Y=Cr(m.left,0),te=Cr(m.right,0),A=Cr(m.top,0),W=Cr(m.bottom,0);v?B=_-2*(Y!==0||te!==0?Y+te:Cr(m.left,m.right)):E=x-2*(A!==0||W!==0?A+W:Cr(m.top,m.bottom))}await u({...t,availableWidth:B,availableHeight:E});const q=await l.getDimensions(c.floating);return _!==q.width||x!==q.height?{reset:{rects:!0}}:{}}}};function im(){return typeof window<"u"}function cc(e){return gC(e)?(e.nodeName||"").toLowerCase():"#document"}function Rr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ei(e){var t;return(t=(gC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gC(e){return im()?e instanceof Node||e instanceof Rr(e).Node:!1}function Ns(e){return im()?e instanceof Element||e instanceof Rr(e).Element:!1}function Ys(e){return im()?e instanceof HTMLElement||e instanceof Rr(e).HTMLElement:!1}function ob(e){return!im()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Rr(e).ShadowRoot}const cO=new Set(["inline","contents"]);function nd(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=ks(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!cO.has(s)}const uO=new Set(["table","td","th"]);function dO(e){return uO.has(cc(e))}const hO=[":popover-open",":modal"];function om(e){return hO.some(t=>{try{return e.matches(t)}catch{return!1}})}const fO=["transform","translate","scale","rotate","perspective"],mO=["transform","translate","scale","rotate","perspective","filter"],pO=["paint","layout","strict","content"];function Rx(e){const t=Lx(),n=Ns(e)?ks(e):e;return fO.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||mO.some(r=>(n.willChange||"").includes(r))||pO.some(r=>(n.contain||"").includes(r))}function gO(e){let t=_o(e);for(;Ys(t)&&!Zl(t);){if(Rx(t))return t;if(om(t))return null;t=_o(t)}return null}function Lx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vO=new Set(["html","body","#document"]);function Zl(e){return vO.has(cc(e))}function ks(e){return Rr(e).getComputedStyle(e)}function am(e){return Ns(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _o(e){if(cc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ob(e)&&e.host||ei(e);return ob(t)?t.host:t}function vC(e){const t=_o(e);return Zl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ys(t)&&nd(t)?t:vC(t)}function ju(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=vC(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),l=Rr(s);if(i){const c=Nv(l);return t.concat(l,l.visualViewport||[],nd(s)?s:[],c&&n?ju(c):[])}return t.concat(s,ju(s,[],n))}function Nv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function yC(e){const t=ks(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ys(e),i=s?e.offsetWidth:n,l=s?e.offsetHeight:r,c=df(n)!==i||df(r)!==l;return c&&(n=i,r=l),{width:n,height:r,$:c}}function Ax(e){return Ns(e)?e:e.contextElement}function yl(e){const t=Ax(e);if(!Ys(t))return Zs(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=yC(t);let l=(i?df(n.width):n.width)/r,c=(i?df(n.height):n.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const yO=Zs(0);function xC(e){const t=Rr(e);return!Lx()||!t.visualViewport?yO:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function xO(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Rr(e)?!1:t}function va(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=Ax(e);let l=Zs(1);t&&(r?Ns(r)&&(l=yl(r)):l=yl(e));const c=xO(i,n,r)?xC(i):Zs(0);let u=(s.left+c.x)/l.x,h=(s.top+c.y)/l.y,m=s.width/l.x,f=s.height/l.y;if(i){const g=Rr(i),v=r&&Ns(r)?Rr(r):r;let _=g,x=Nv(_);for(;x&&r&&v!==_;){const b=yl(x),w=x.getBoundingClientRect(),S=ks(x),k=w.left+(x.clientLeft+parseFloat(S.paddingLeft))*b.x,j=w.top+(x.clientTop+parseFloat(S.paddingTop))*b.y;u*=b.x,h*=b.y,m*=b.x,f*=b.y,u+=k,h+=j,_=Rr(x),x=Nv(_)}}return ff({width:m,height:f,x:u,y:h})}function Ox(e,t){const n=am(e).scrollLeft;return t?t.left+n:va(ei(e)).left+n}function wC(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:Ox(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function wO(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",l=ei(r),c=t?om(t.floating):!1;if(r===l||c&&i)return n;let u={scrollLeft:0,scrollTop:0},h=Zs(1);const m=Zs(0),f=Ys(r);if((f||!f&&!i)&&((cc(r)!=="body"||nd(l))&&(u=am(r)),Ys(r))){const v=va(r);h=yl(r),m.x=v.x+r.clientLeft,m.y=v.y+r.clientTop}const g=l&&!f&&!i?wC(l,u,!0):Zs(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+m.x+g.x,y:n.y*h.y-u.scrollTop*h.y+m.y+g.y}}function _O(e){return Array.from(e.getClientRects())}function bO(e){const t=ei(e),n=am(e),r=e.ownerDocument.body,s=Cr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Cr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Ox(e);const c=-n.scrollTop;return ks(r).direction==="rtl"&&(l+=Cr(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:l,y:c}}function SO(e,t){const n=Rr(e),r=ei(e),s=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,c=0,u=0;if(s){i=s.width,l=s.height;const h=Lx();(!h||h&&t==="fixed")&&(c=s.offsetLeft,u=s.offsetTop)}return{width:i,height:l,x:c,y:u}}const NO=new Set(["absolute","fixed"]);function kO(e,t){const n=va(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Ys(e)?yl(e):Zs(1),l=e.clientWidth*i.x,c=e.clientHeight*i.y,u=s*i.x,h=r*i.y;return{width:l,height:c,x:u,y:h}}function ab(e,t,n){let r;if(t==="viewport")r=SO(e,n);else if(t==="document")r=bO(ei(e));else if(Ns(t))r=kO(t,n);else{const s=xC(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return ff(r)}function _C(e,t){const n=_o(e);return n===t||!Ns(n)||Zl(n)?!1:ks(n).position==="fixed"||_C(n,t)}function CO(e,t){const n=t.get(e);if(n)return n;let r=ju(e,[],!1).filter(c=>Ns(c)&&cc(c)!=="body"),s=null;const i=ks(e).position==="fixed";let l=i?_o(e):e;for(;Ns(l)&&!Zl(l);){const c=ks(l),u=Rx(l);!u&&c.position==="fixed"&&(s=null),(i?!u&&!s:!u&&c.position==="static"&&!!s&&NO.has(s.position)||nd(l)&&!u&&_C(e,l))?r=r.filter(m=>m!==l):s=c,l=_o(l)}return t.set(e,r),r}function jO(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const l=[...n==="clippingAncestors"?om(t)?[]:CO(t,this._c):[].concat(n),r],c=l[0],u=l.reduce((h,m)=>{const f=ab(t,m,s);return h.top=Cr(f.top,h.top),h.right=wo(f.right,h.right),h.bottom=wo(f.bottom,h.bottom),h.left=Cr(f.left,h.left),h},ab(t,c,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function EO(e){const{width:t,height:n}=yC(e);return{width:t,height:n}}function TO(e,t,n){const r=Ys(t),s=ei(t),i=n==="fixed",l=va(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const u=Zs(0);function h(){u.x=Ox(s)}if(r||!r&&!i)if((cc(t)!=="body"||nd(s))&&(c=am(t)),r){const v=va(t,!0,i,t);u.x=v.x+t.clientLeft,u.y=v.y+t.clientTop}else s&&h();i&&!r&&s&&h();const m=s&&!r&&!i?wC(s,c):Zs(0),f=l.left+c.scrollLeft-u.x-m.x,g=l.top+c.scrollTop-u.y-m.y;return{x:f,y:g,width:l.width,height:l.height}}function Fp(e){return ks(e).position==="static"}function lb(e,t){if(!Ys(e)||ks(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ei(e)===n&&(n=n.ownerDocument.body),n}function bC(e,t){const n=Rr(e);if(om(e))return n;if(!Ys(e)){let s=_o(e);for(;s&&!Zl(s);){if(Ns(s)&&!Fp(s))return s;s=_o(s)}return n}let r=lb(e,t);for(;r&&dO(r)&&Fp(r);)r=lb(r,t);return r&&Zl(r)&&Fp(r)&&!Rx(r)?n:r||gO(e)||n}const PO=async function(e){const t=this.getOffsetParent||bC,n=this.getDimensions,r=await n(e.floating);return{reference:TO(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function MO(e){return ks(e).direction==="rtl"}const IO={convertOffsetParentRelativeRectToViewportRelativeRect:wO,getDocumentElement:ei,getClippingRect:jO,getOffsetParent:bC,getElementRects:PO,getClientRects:_O,getDimensions:EO,getScale:yl,isElement:Ns,isRTL:MO};function SC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function RO(e,t){let n=null,r;const s=ei(e);function i(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function l(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),i();const h=e.getBoundingClientRect(),{left:m,top:f,width:g,height:v}=h;if(c||t(),!g||!v)return;const _=Qd(f),x=Qd(s.clientWidth-(m+g)),b=Qd(s.clientHeight-(f+v)),w=Qd(m),k={rootMargin:-_+"px "+-x+"px "+-b+"px "+-w+"px",threshold:Cr(0,wo(1,u))||1};let j=!0;function T(R){const E=R[0].intersectionRatio;if(E!==u){if(!j)return l();E?l(!1,E):r=setTimeout(()=>{l(!1,1e-7)},1e3)}E===1&&!SC(h,e.getBoundingClientRect())&&l(),j=!1}try{n=new IntersectionObserver(T,{...k,root:s.ownerDocument})}catch{n=new IntersectionObserver(T,k)}n.observe(e)}return l(!0),i}function LO(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=Ax(e),m=s||i?[...h?ju(h):[],...ju(t)]:[];m.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const f=h&&c?RO(h,n):null;let g=-1,v=null;l&&(v=new ResizeObserver(w=>{let[S]=w;S&&S.target===h&&v&&(v.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var k;(k=v)==null||k.observe(t)})),n()}),h&&!u&&v.observe(h),v.observe(t));let _,x=u?va(e):null;u&&b();function b(){const w=va(e);x&&!SC(x,w)&&n(),x=w,_=requestAnimationFrame(b)}return n(),()=>{var w;m.forEach(S=>{s&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),f==null||f(),(w=v)==null||w.disconnect(),v=null,u&&cancelAnimationFrame(_)}}const AO=iO,OO=oO,DO=nO,$O=lO,zO=rO,cb=tO,BO=aO,FO=(e,t,n)=>{const r=new Map,s={platform:IO,...n},i={...s.platform,_c:r};return eO(e,t,{...s,platform:i})};var UO=typeof document<"u",WO=function(){},Ch=UO?p.useLayoutEffect:WO;function mf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!mf(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!mf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function NC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ub(e,t){const n=NC(e);return Math.round(t*n)/n}function Up(e){const t=p.useRef(e);return Ch(()=>{t.current=e}),t}function HO(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:l}={},transform:c=!0,whileElementsMounted:u,open:h}=e,[m,f]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,v]=p.useState(r);mf(g,r)||v(r);const[_,x]=p.useState(null),[b,w]=p.useState(null),S=p.useCallback(I=>{I!==R.current&&(R.current=I,x(I))},[]),k=p.useCallback(I=>{I!==E.current&&(E.current=I,w(I))},[]),j=i||_,T=l||b,R=p.useRef(null),E=p.useRef(null),B=p.useRef(m),q=u!=null,Y=Up(u),te=Up(s),A=Up(h),W=p.useCallback(()=>{if(!R.current||!E.current)return;const I={placement:t,strategy:n,middleware:g};te.current&&(I.platform=te.current),FO(R.current,E.current,I).then(O=>{const F={...O,isPositioned:A.current!==!1};P.current&&!mf(B.current,F)&&(B.current=F,ja.flushSync(()=>{f(F)}))})},[g,t,n,te,A]);Ch(()=>{h===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,f(I=>({...I,isPositioned:!1})))},[h]);const P=p.useRef(!1);Ch(()=>(P.current=!0,()=>{P.current=!1}),[]),Ch(()=>{if(j&&(R.current=j),T&&(E.current=T),j&&T){if(Y.current)return Y.current(j,T,W);W()}},[j,T,W,Y,q]);const Z=p.useMemo(()=>({reference:R,floating:E,setReference:S,setFloating:k}),[S,k]),$=p.useMemo(()=>({reference:j,floating:T}),[j,T]),U=p.useMemo(()=>{const I={position:n,left:0,top:0};if(!$.floating)return I;const O=ub($.floating,m.x),F=ub($.floating,m.y);return c?{...I,transform:"translate("+O+"px, "+F+"px)",...NC($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:F}},[n,c,$.floating,m.x,m.y]);return p.useMemo(()=>({...m,update:W,refs:Z,elements:$,floatingStyles:U}),[m,W,Z,$,U])}const VO=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?cb({element:r.current,padding:s}).fn(n):{}:r?cb({element:r,padding:s}).fn(n):{}}}},GO=(e,t)=>({...AO(e),options:[e,t]}),ZO=(e,t)=>({...OO(e),options:[e,t]}),qO=(e,t)=>({...BO(e),options:[e,t]}),KO=(e,t)=>({...DO(e),options:[e,t]}),YO=(e,t)=>({...$O(e),options:[e,t]}),JO=(e,t)=>({...zO(e),options:[e,t]}),XO=(e,t)=>({...VO(e),options:[e,t]});var QO="Arrow",kC=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return a.jsx(De.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});kC.displayName=QO;var e5=kC;function Dx(e){const[t,n]=p.useState(void 0);return jn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let l,c;if("borderBoxSize"in i){const u=i.borderBoxSize,h=Array.isArray(u)?u[0]:u;l=h.inlineSize,c=h.blockSize}else l=e.offsetWidth,c=e.offsetHeight;n({width:l,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var $x="Popper",[CC,jo]=_r($x),[t5,jC]=CC($x),EC=e=>{const{__scopePopper:t,children:n}=e,[r,s]=p.useState(null);return a.jsx(t5,{scope:t,anchor:r,onAnchorChange:s,children:n})};EC.displayName=$x;var TC="PopperAnchor",PC=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=jC(TC,n),l=p.useRef(null),c=st(t,l);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:a.jsx(De.div,{...s,ref:c})});PC.displayName=TC;var zx="PopperContent",[n5,r5]=CC(zx),MC=p.forwardRef((e,t)=>{var ce,ke,Oe,Pe,Te,We;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:m=0,sticky:f="partial",hideWhenDetached:g=!1,updatePositionStrategy:v="optimized",onPlaced:_,...x}=e,b=jC(zx,n),[w,S]=p.useState(null),k=st(t,wt=>S(wt)),[j,T]=p.useState(null),R=Dx(j),E=(R==null?void 0:R.width)??0,B=(R==null?void 0:R.height)??0,q=r+(i!=="center"?"-"+i:""),Y=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},te=Array.isArray(h)?h:[h],A=te.length>0,W={padding:Y,boundary:te.filter(i5),altBoundary:A},{refs:P,floatingStyles:Z,placement:$,isPositioned:U,middlewareData:I}=HO({strategy:"fixed",placement:q,whileElementsMounted:(...wt)=>LO(...wt,{animationFrame:v==="always"}),elements:{reference:b.anchor},middleware:[GO({mainAxis:s+B,alignmentAxis:l}),u&&ZO({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?qO():void 0,...W}),u&&KO({...W}),YO({...W,apply:({elements:wt,rects:kt,availableWidth:ot,availableHeight:Q})=>{const{width:he,height:me}=kt.reference,Ue=wt.floating.style;Ue.setProperty("--radix-popper-available-width",`${ot}px`),Ue.setProperty("--radix-popper-available-height",`${Q}px`),Ue.setProperty("--radix-popper-anchor-width",`${he}px`),Ue.setProperty("--radix-popper-anchor-height",`${me}px`)}}),j&&XO({element:j,padding:c}),o5({arrowWidth:E,arrowHeight:B}),g&&JO({strategy:"referenceHidden",...W})]}),[O,F]=LC($),X=fn(_);jn(()=>{U&&(X==null||X())},[U,X]);const re=(ce=I.arrow)==null?void 0:ce.x,ae=(ke=I.arrow)==null?void 0:ke.y,ie=((Oe=I.arrow)==null?void 0:Oe.centerOffset)!==0,[oe,ge]=p.useState();return jn(()=>{w&&ge(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:U?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(Pe=I.transformOrigin)==null?void 0:Pe.x,(Te=I.transformOrigin)==null?void 0:Te.y].join(" "),...((We=I.hide)==null?void 0:We.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(n5,{scope:n,placedSide:O,onArrowChange:T,arrowX:re,arrowY:ae,shouldHideArrow:ie,children:a.jsx(De.div,{"data-side":O,"data-align":F,...x,ref:k,style:{...x.style,animation:U?void 0:"none"}})})})});MC.displayName=zx;var IC="PopperArrow",s5={top:"bottom",right:"left",bottom:"top",left:"right"},RC=p.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=r5(IC,r),l=s5[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(e5,{...s,ref:n,style:{...s.style,display:"block"}})})});RC.displayName=IC;function i5(e){return e!==null}var o5=e=>({name:"transformOrigin",options:e,fn(t){var b,w,S;const{placement:n,rects:r,middlewareData:s}=t,l=((b=s.arrow)==null?void 0:b.centerOffset)!==0,c=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[h,m]=LC(n),f={start:"0%",center:"50%",end:"100%"}[m],g=(((w=s.arrow)==null?void 0:w.x)??0)+c/2,v=(((S=s.arrow)==null?void 0:S.y)??0)+u/2;let _="",x="";return h==="bottom"?(_=l?f:`${g}px`,x=`${-u}px`):h==="top"?(_=l?f:`${g}px`,x=`${r.floating.height+u}px`):h==="right"?(_=`${-u}px`,x=l?f:`${v}px`):h==="left"&&(_=`${r.floating.width+u}px`,x=l?f:`${v}px`),{data:{x:_,y:x}}}});function LC(e){const[t,n="center"]=e.split("-");return[t,n]}var lm=EC,rd=PC,cm=MC,um=RC,[dm,PH]=_r("Tooltip",[jo]),hm=jo(),AC="TooltipProvider",a5=700,kv="tooltip.open",[l5,Bx]=dm(AC),OC=e=>{const{__scopeTooltip:t,delayDuration:n=a5,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,l=p.useRef(!0),c=p.useRef(!1),u=p.useRef(0);return p.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),a.jsx(l5,{scope:t,isOpenDelayedRef:l,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(u.current),l.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:p.useCallback(h=>{c.current=h},[]),disableHoverableContent:s,children:i})};OC.displayName=AC;var Eu="Tooltip",[c5,fm]=dm(Eu),DC=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:l,delayDuration:c}=e,u=Bx(Eu,e.__scopeTooltip),h=hm(t),[m,f]=p.useState(null),g=Ks(),v=p.useRef(0),_=l??u.disableHoverableContent,x=c??u.delayDuration,b=p.useRef(!1),[w,S]=Ss({prop:r,defaultProp:s??!1,onChange:E=>{E?(u.onOpen(),document.dispatchEvent(new CustomEvent(kv))):u.onClose(),i==null||i(E)},caller:Eu}),k=p.useMemo(()=>w?b.current?"delayed-open":"instant-open":"closed",[w]),j=p.useCallback(()=>{window.clearTimeout(v.current),v.current=0,b.current=!1,S(!0)},[S]),T=p.useCallback(()=>{window.clearTimeout(v.current),v.current=0,S(!1)},[S]),R=p.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{b.current=!0,S(!0),v.current=0},x)},[x,S]);return p.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),a.jsx(lm,{...h,children:a.jsx(c5,{scope:t,contentId:g,open:w,stateAttribute:k,trigger:m,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{u.isOpenDelayedRef.current?R():j()},[u.isOpenDelayedRef,R,j]),onTriggerLeave:p.useCallback(()=>{_?T():(window.clearTimeout(v.current),v.current=0)},[T,_]),onOpen:j,onClose:T,disableHoverableContent:_,children:n})})};DC.displayName=Eu;var Cv="TooltipTrigger",$C=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=fm(Cv,n),i=Bx(Cv,n),l=hm(n),c=p.useRef(null),u=st(t,c,s.onTriggerChange),h=p.useRef(!1),m=p.useRef(!1),f=p.useCallback(()=>h.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(rd,{asChild:!0,...l,children:a.jsx(De.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:u,onPointerMove:_e(e.onPointerMove,g=>{g.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),m.current=!0)}),onPointerLeave:_e(e.onPointerLeave,()=>{s.onTriggerLeave(),m.current=!1}),onPointerDown:_e(e.onPointerDown,()=>{s.open&&s.onClose(),h.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:_e(e.onFocus,()=>{h.current||s.onOpen()}),onBlur:_e(e.onBlur,s.onClose),onClick:_e(e.onClick,s.onClose)})})});$C.displayName=Cv;var u5="TooltipPortal",[MH,d5]=dm(u5,{forceMount:void 0}),ql="TooltipContent",zC=p.forwardRef((e,t)=>{const n=d5(ql,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,l=fm(ql,e.__scopeTooltip);return a.jsx(ar,{present:r||l.open,children:l.disableHoverableContent?a.jsx(BC,{side:s,...i,ref:t}):a.jsx(h5,{side:s,...i,ref:t})})}),h5=p.forwardRef((e,t)=>{const n=fm(ql,e.__scopeTooltip),r=Bx(ql,e.__scopeTooltip),s=p.useRef(null),i=st(t,s),[l,c]=p.useState(null),{trigger:u,onClose:h}=n,m=s.current,{onPointerInTransitChange:f}=r,g=p.useCallback(()=>{c(null),f(!1)},[f]),v=p.useCallback((_,x)=>{const b=_.currentTarget,w={x:_.clientX,y:_.clientY},S=v5(w,b.getBoundingClientRect()),k=y5(w,S),j=x5(x.getBoundingClientRect()),T=_5([...k,...j]);c(T),f(!0)},[f]);return p.useEffect(()=>()=>g(),[g]),p.useEffect(()=>{if(u&&m){const _=b=>v(b,m),x=b=>v(b,u);return u.addEventListener("pointerleave",_),m.addEventListener("pointerleave",x),()=>{u.removeEventListener("pointerleave",_),m.removeEventListener("pointerleave",x)}}},[u,m,v,g]),p.useEffect(()=>{if(l){const _=x=>{const b=x.target,w={x:x.clientX,y:x.clientY},S=(u==null?void 0:u.contains(b))||(m==null?void 0:m.contains(b)),k=!w5(w,l);S?g():k&&(g(),h())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[u,m,l,h,g]),a.jsx(BC,{...e,ref:i})}),[f5,m5]=dm(Eu,{isInside:!1}),p5=o3("TooltipContent"),BC=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:l,...c}=e,u=fm(ql,n),h=hm(n),{onClose:m}=u;return p.useEffect(()=>(document.addEventListener(kv,m),()=>document.removeEventListener(kv,m)),[m]),p.useEffect(()=>{if(u.trigger){const f=g=>{const v=g.target;v!=null&&v.contains(u.trigger)&&m()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[u.trigger,m]),a.jsx(ic,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:f=>f.preventDefault(),onDismiss:m,children:a.jsxs(cm,{"data-state":u.stateAttribute,...h,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(p5,{children:r}),a.jsx(f5,{scope:n,isInside:!0,children:a.jsx(E3,{id:u.contentId,role:"tooltip",children:s||r})})]})})});zC.displayName=ql;var FC="TooltipArrow",g5=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=hm(n);return m5(FC,n).isInside?null:a.jsx(um,{...s,...r,ref:t})});g5.displayName=FC;function v5(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function y5(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function x5(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function w5(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const c=t[i],u=t[l],h=c.x,m=c.y,f=u.x,g=u.y;m>r!=g>r&&n<(f-h)*(r-m)/(g-m)+h&&(s=!s)}return s}function _5(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),b5(t)}function b5(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(s.y-l.y)>=(i.y-l.y)*(s.x-l.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var S5=OC,N5=DC,k5=$C,UC=zC;const Kl=S5,ya=N5,xa=k5,bo=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>a.jsx(UC,{ref:r,sideOffset:t,className:ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));bo.displayName=UC.displayName;var sd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wa=typeof window>"u"||"Deno"in globalThis;function fr(){}function C5(e,t){return typeof e=="function"?e(t):e}function jv(e){return typeof e=="number"&&e>=0&&e!==1/0}function WC(e,t){return Math.max(e+(t||0)-Date.now(),0)}function go(e,t){return typeof e=="function"?e(t):e}function Wr(e,t){return typeof e=="function"?e(t):e}function db(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:l,stale:c}=e;if(l){if(r){if(t.queryHash!==Fx(l,t.options))return!1}else if(!Pu(t.queryKey,l))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||s&&s!==t.state.fetchStatus||i&&!i(t))}function hb(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Tu(t.options.mutationKey)!==Tu(i))return!1}else if(!Pu(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Fx(e,t){return((t==null?void 0:t.queryKeyHashFn)||Tu)(e)}function Tu(e){return JSON.stringify(e,(t,n)=>Tv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Pu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Pu(e[n],t[n])):!1}function HC(e,t){if(e===t)return e;const n=fb(e)&&fb(t);if(n||Tv(e)&&Tv(t)){const r=n?e:Object.keys(e),s=r.length,i=n?t:Object.keys(t),l=i.length,c=n?[]:{},u=new Set(r);let h=0;for(let m=0;m<l;m++){const f=n?m:i[m];(!n&&u.has(f)||n)&&e[f]===void 0&&t[f]===void 0?(c[f]=void 0,h++):(c[f]=HC(e[f],t[f]),c[f]===e[f]&&e[f]!==void 0&&h++)}return s===l&&h===s?e:c}return t}function Ev(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function fb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Tv(e){if(!mb(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!mb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function mb(e){return Object.prototype.toString.call(e)==="[object Object]"}function j5(e){return new Promise(t=>{setTimeout(t,e)})}function Pv(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?HC(e,t):t}function E5(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function T5(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Ux=Symbol();function VC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ux?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function P5(e,t){return typeof e=="function"?e(...t):!!e}var Jo,Yi,kl,eS,M5=(eS=class extends sd{constructor(){super();Xe(this,Jo);Xe(this,Yi);Xe(this,kl);Ee(this,kl,t=>{if(!wa&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,Yi)||this.setEventListener(J(this,kl))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,Yi))==null||t.call(this),Ee(this,Yi,void 0))}setEventListener(t){var n;Ee(this,kl,t),(n=J(this,Yi))==null||n.call(this),Ee(this,Yi,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){J(this,Jo)!==t&&(Ee(this,Jo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof J(this,Jo)=="boolean"?J(this,Jo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Jo=new WeakMap,Yi=new WeakMap,kl=new WeakMap,eS),Wx=new M5,Cl,Ji,jl,tS,I5=(tS=class extends sd{constructor(){super();Xe(this,Cl,!0);Xe(this,Ji);Xe(this,jl);Ee(this,jl,t=>{if(!wa&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Ji)||this.setEventListener(J(this,jl))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,Ji))==null||t.call(this),Ee(this,Ji,void 0))}setEventListener(t){var n;Ee(this,jl,t),(n=J(this,Ji))==null||n.call(this),Ee(this,Ji,t(this.setOnline.bind(this)))}setOnline(t){J(this,Cl)!==t&&(Ee(this,Cl,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return J(this,Cl)}},Cl=new WeakMap,Ji=new WeakMap,jl=new WeakMap,tS),pf=new I5;function Mv(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function R5(e){return Math.min(1e3*2**e,3e4)}function GC(e){return(e??"online")==="online"?pf.isOnline():!0}var ZC=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Wp(e){return e instanceof ZC}function qC(e){let t=!1,n=0,r=!1,s;const i=Mv(),l=x=>{var b;r||(g(new ZC(x)),(b=e.abort)==null||b.call(e))},c=()=>{t=!0},u=()=>{t=!1},h=()=>Wx.isFocused()&&(e.networkMode==="always"||pf.isOnline())&&e.canRun(),m=()=>GC(e.networkMode)&&e.canRun(),f=x=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,x),s==null||s(),i.resolve(x))},g=x=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,x),s==null||s(),i.reject(x))},v=()=>new Promise(x=>{var b;s=w=>{(r||h())&&x(w)},(b=e.onPause)==null||b.call(e)}).then(()=>{var x;s=void 0,r||(x=e.onContinue)==null||x.call(e)}),_=()=>{if(r)return;let x;const b=n===0?e.initialPromise:void 0;try{x=b??e.fn()}catch(w){x=Promise.reject(w)}Promise.resolve(x).then(f).catch(w=>{var R;if(r)return;const S=e.retry??(wa?0:3),k=e.retryDelay??R5,j=typeof k=="function"?k(n,w):k,T=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,w);if(t||!T){g(w);return}n++,(R=e.onFail)==null||R.call(e,n,w),j5(j).then(()=>h()?void 0:v()).then(()=>{t?g(w):_()})})};return{promise:i,cancel:l,continue:()=>(s==null||s(),i),cancelRetry:c,continueRetry:u,canStart:m,start:()=>(m()?_():v().then(_),i)}}var L5=e=>setTimeout(e,0);function A5(){let e=[],t=0,n=c=>{c()},r=c=>{c()},s=L5;const i=c=>{t?e.push(c):s(()=>{n(c)})},l=()=>{const c=e;e=[],c.length&&s(()=>{r(()=>{c.forEach(u=>{n(u)})})})};return{batch:c=>{let u;t++;try{u=c()}finally{t--,t||l()}return u},batchCalls:c=>(...u)=>{i(()=>{c(...u)})},schedule:i,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var On=A5(),Xo,nS,KC=(nS=class{constructor(){Xe(this,Xo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jv(this.gcTime)&&Ee(this,Xo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(wa?1/0:5*60*1e3))}clearGcTimeout(){J(this,Xo)&&(clearTimeout(J(this,Xo)),Ee(this,Xo,void 0))}},Xo=new WeakMap,nS),El,Qo,Ur,ea,Hn,Hu,ta,fs,gi,rS,O5=(rS=class extends KC{constructor(t){super();Xe(this,fs);Xe(this,El);Xe(this,Qo);Xe(this,Ur);Xe(this,ea);Xe(this,Hn);Xe(this,Hu);Xe(this,ta);Ee(this,ta,!1),Ee(this,Hu,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ee(this,ea,t.client),Ee(this,Ur,J(this,ea).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ee(this,El,D5(this.options)),this.state=t.state??J(this,El),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=J(this,Hn))==null?void 0:t.promise}setOptions(t){this.options={...J(this,Hu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Ur).remove(this)}setData(t,n){const r=Pv(this.state.data,t,this.options);return yt(this,fs,gi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){yt(this,fs,gi).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=J(this,Hn))==null?void 0:r.promise;return(s=J(this,Hn))==null||s.cancel(t),n?n.then(fr).catch(fr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,El))}isActive(){return this.observers.some(t=>Wr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ux||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>go(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!WC(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,Hn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,Hn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),J(this,Ur).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(J(this,Hn)&&(J(this,ta)?J(this,Hn).cancel({revert:!0}):J(this,Hn).cancelRetry()),this.scheduleGc()),J(this,Ur).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||yt(this,fs,gi).call(this,{type:"invalidate"})}fetch(t,n){var h,m,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,Hn))return J(this,Hn).continueRetry(),J(this,Hn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(v=>v.options.queryFn);g&&this.setOptions(g.options)}const r=new AbortController,s=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(Ee(this,ta,!0),r.signal)})},i=()=>{const g=VC(this.options,n),_=(()=>{const x={client:J(this,ea),queryKey:this.queryKey,meta:this.meta};return s(x),x})();return Ee(this,ta,!1),this.options.persister?this.options.persister(g,_,this):g(_)},c=(()=>{const g={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:J(this,ea),state:this.state,fetchFn:i};return s(g),g})();(h=this.options.behavior)==null||h.onFetch(c,this),Ee(this,Qo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=c.fetchOptions)==null?void 0:m.meta))&&yt(this,fs,gi).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta});const u=g=>{var v,_,x,b;Wp(g)&&g.silent||yt(this,fs,gi).call(this,{type:"error",error:g}),Wp(g)||((_=(v=J(this,Ur).config).onError)==null||_.call(v,g,this),(b=(x=J(this,Ur).config).onSettled)==null||b.call(x,this.state.data,g,this)),this.scheduleGc()};return Ee(this,Hn,qC({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:g=>{var v,_,x,b;if(g===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(w){u(w);return}(_=(v=J(this,Ur).config).onSuccess)==null||_.call(v,g,this),(b=(x=J(this,Ur).config).onSettled)==null||b.call(x,g,this.state.error,this),this.scheduleGc()},onError:u,onFail:(g,v)=>{yt(this,fs,gi).call(this,{type:"failed",failureCount:g,error:v})},onPause:()=>{yt(this,fs,gi).call(this,{type:"pause"})},onContinue:()=>{yt(this,fs,gi).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),J(this,Hn).start()}},El=new WeakMap,Qo=new WeakMap,Ur=new WeakMap,ea=new WeakMap,Hn=new WeakMap,Hu=new WeakMap,ta=new WeakMap,fs=new WeakSet,gi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...YC(r.data,this.options),fetchMeta:t.meta??null};case"success":return Ee(this,Qo,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Wp(s)&&s.revert&&J(this,Qo)?{...J(this,Qo),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),On.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),J(this,Ur).notify({query:this,type:"updated",action:t})})},rS);function YC(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:GC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function D5(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ds,sS,$5=(sS=class extends sd{constructor(t={}){super();Xe(this,Ds);this.config=t,Ee(this,Ds,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Fx(s,n);let l=this.get(i);return l||(l=new O5({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(l)),l}add(t){J(this,Ds).has(t.queryHash)||(J(this,Ds).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=J(this,Ds).get(t.queryHash);n&&(t.destroy(),n===t&&J(this,Ds).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){On.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return J(this,Ds).get(t)}getAll(){return[...J(this,Ds).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>db(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>db(t,r)):n}notify(t){On.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){On.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){On.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ds=new WeakMap,sS),$s,er,na,zs,zi,iS,z5=(iS=class extends KC{constructor(t){super();Xe(this,zs);Xe(this,$s);Xe(this,er);Xe(this,na);this.mutationId=t.mutationId,Ee(this,er,t.mutationCache),Ee(this,$s,[]),this.state=t.state||B5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){J(this,$s).includes(t)||(J(this,$s).push(t),this.clearGcTimeout(),J(this,er).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ee(this,$s,J(this,$s).filter(n=>n!==t)),this.scheduleGc(),J(this,er).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){J(this,$s).length||(this.state.status==="pending"?this.scheduleGc():J(this,er).remove(this))}continue(){var t;return((t=J(this,na))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,c,u,h,m,f,g,v,_,x,b,w,S,k,j,T,R,E,B;const n=()=>{yt(this,zs,zi).call(this,{type:"continue"})};Ee(this,na,qC({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(q,Y)=>{yt(this,zs,zi).call(this,{type:"failed",failureCount:q,error:Y})},onPause:()=>{yt(this,zs,zi).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,er).canRun(this)}));const r=this.state.status==="pending",s=!J(this,na).canStart();try{if(r)n();else{yt(this,zs,zi).call(this,{type:"pending",variables:t,isPaused:s}),await((l=(i=J(this,er).config).onMutate)==null?void 0:l.call(i,t,this));const Y=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t));Y!==this.state.context&&yt(this,zs,zi).call(this,{type:"pending",context:Y,variables:t,isPaused:s})}const q=await J(this,na).start();return await((m=(h=J(this,er).config).onSuccess)==null?void 0:m.call(h,q,t,this.state.context,this)),await((g=(f=this.options).onSuccess)==null?void 0:g.call(f,q,t,this.state.context)),await((_=(v=J(this,er).config).onSettled)==null?void 0:_.call(v,q,null,this.state.variables,this.state.context,this)),await((b=(x=this.options).onSettled)==null?void 0:b.call(x,q,null,t,this.state.context)),yt(this,zs,zi).call(this,{type:"success",data:q}),q}catch(q){try{throw await((S=(w=J(this,er).config).onError)==null?void 0:S.call(w,q,t,this.state.context,this)),await((j=(k=this.options).onError)==null?void 0:j.call(k,q,t,this.state.context)),await((R=(T=J(this,er).config).onSettled)==null?void 0:R.call(T,void 0,q,this.state.variables,this.state.context,this)),await((B=(E=this.options).onSettled)==null?void 0:B.call(E,void 0,q,t,this.state.context)),q}finally{yt(this,zs,zi).call(this,{type:"error",error:q})}}finally{J(this,er).runNext(this)}}},$s=new WeakMap,er=new WeakMap,na=new WeakMap,zs=new WeakSet,zi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),On.batch(()=>{J(this,$s).forEach(r=>{r.onMutationUpdate(t)}),J(this,er).notify({mutation:this,type:"updated",action:t})})},iS);function B5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xi,ms,Vu,oS,F5=(oS=class extends sd{constructor(t={}){super();Xe(this,xi);Xe(this,ms);Xe(this,Vu);this.config=t,Ee(this,xi,new Set),Ee(this,ms,new Map),Ee(this,Vu,0)}build(t,n,r){const s=new z5({mutationCache:this,mutationId:++Id(this,Vu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){J(this,xi).add(t);const n=eh(t);if(typeof n=="string"){const r=J(this,ms).get(n);r?r.push(t):J(this,ms).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(J(this,xi).delete(t)){const n=eh(t);if(typeof n=="string"){const r=J(this,ms).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&J(this,ms).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=eh(t);if(typeof n=="string"){const r=J(this,ms).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=eh(t);if(typeof n=="string"){const s=(r=J(this,ms).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){On.batch(()=>{J(this,xi).forEach(t=>{this.notify({type:"removed",mutation:t})}),J(this,xi).clear(),J(this,ms).clear()})}getAll(){return Array.from(J(this,xi))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>hb(n,r))}findAll(t={}){return this.getAll().filter(n=>hb(t,n))}notify(t){On.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return On.batch(()=>Promise.all(t.map(n=>n.continue().catch(fr))))}},xi=new WeakMap,ms=new WeakMap,Vu=new WeakMap,oS);function eh(e){var t;return(t=e.options.scope)==null?void 0:t.id}function pb(e){return{onFetch:(t,n)=>{var m,f,g,v,_;const r=t.options,s=(g=(f=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:f.fetchMore)==null?void 0:g.direction,i=((v=t.state.data)==null?void 0:v.pages)||[],l=((_=t.state.data)==null?void 0:_.pageParams)||[];let c={pages:[],pageParams:[]},u=0;const h=async()=>{let x=!1;const b=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},w=VC(t.options,t.fetchOptions),S=async(k,j,T)=>{if(x)return Promise.reject();if(j==null&&k.pages.length)return Promise.resolve(k);const E=(()=>{const te={client:t.client,queryKey:t.queryKey,pageParam:j,direction:T?"backward":"forward",meta:t.options.meta};return b(te),te})(),B=await w(E),{maxPages:q}=t.options,Y=T?T5:E5;return{pages:Y(k.pages,B,q),pageParams:Y(k.pageParams,j,q)}};if(s&&i.length){const k=s==="backward",j=k?U5:gb,T={pages:i,pageParams:l},R=j(r,T);c=await S(T,R,k)}else{const k=e??i.length;do{const j=u===0?l[0]??r.initialPageParam:gb(r,c);if(u>0&&j==null)break;c=await S(c,j),u++}while(u<k)}return c};t.options.persister?t.fetchFn=()=>{var x,b;return(b=(x=t.options).persister)==null?void 0:b.call(x,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function gb(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function U5(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var an,Xi,Qi,Tl,Pl,eo,Ml,Il,aS,W5=(aS=class{constructor(e={}){Xe(this,an);Xe(this,Xi);Xe(this,Qi);Xe(this,Tl);Xe(this,Pl);Xe(this,eo);Xe(this,Ml);Xe(this,Il);Ee(this,an,e.queryCache||new $5),Ee(this,Xi,e.mutationCache||new F5),Ee(this,Qi,e.defaultOptions||{}),Ee(this,Tl,new Map),Ee(this,Pl,new Map),Ee(this,eo,0)}mount(){Id(this,eo)._++,J(this,eo)===1&&(Ee(this,Ml,Wx.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,an).onFocus())})),Ee(this,Il,pf.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,an).onOnline())})))}unmount(){var e,t;Id(this,eo)._--,J(this,eo)===0&&((e=J(this,Ml))==null||e.call(this),Ee(this,Ml,void 0),(t=J(this,Il))==null||t.call(this),Ee(this,Il,void 0))}isFetching(e){return J(this,an).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return J(this,Xi).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,an).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=J(this,an).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(go(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return J(this,an).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=J(this,an).get(r.queryHash),i=s==null?void 0:s.state.data,l=C5(t,i);if(l!==void 0)return J(this,an).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return On.batch(()=>J(this,an).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,an).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=J(this,an);On.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=J(this,an);return On.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=On.batch(()=>J(this,an).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(fr).catch(fr)}invalidateQueries(e,t={}){return On.batch(()=>(J(this,an).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=On.batch(()=>J(this,an).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(fr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(fr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=J(this,an).build(this,t);return n.isStaleByTime(go(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(fr).catch(fr)}fetchInfiniteQuery(e){return e.behavior=pb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(fr).catch(fr)}ensureInfiniteQueryData(e){return e.behavior=pb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return pf.isOnline()?J(this,Xi).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,an)}getMutationCache(){return J(this,Xi)}getDefaultOptions(){return J(this,Qi)}setDefaultOptions(e){Ee(this,Qi,e)}setQueryDefaults(e,t){J(this,Tl).set(Tu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...J(this,Tl).values()],n={};return t.forEach(r=>{Pu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){J(this,Pl).set(Tu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...J(this,Pl).values()],n={};return t.forEach(r=>{Pu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...J(this,Qi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Fx(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ux&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...J(this,Qi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){J(this,an).clear(),J(this,Xi).clear()}},an=new WeakMap,Xi=new WeakMap,Qi=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,eo=new WeakMap,Ml=new WeakMap,Il=new WeakMap,aS),dr,xt,Gu,tr,ra,Rl,to,no,Zu,Ll,Al,sa,ia,ro,Ol,At,Gc,Iv,Rv,Lv,Av,Ov,Dv,$v,JC,lS,H5=(lS=class extends sd{constructor(t,n){super();Xe(this,At);Xe(this,dr);Xe(this,xt);Xe(this,Gu);Xe(this,tr);Xe(this,ra);Xe(this,Rl);Xe(this,to);Xe(this,no);Xe(this,Zu);Xe(this,Ll);Xe(this,Al);Xe(this,sa);Xe(this,ia);Xe(this,ro);Xe(this,Ol,new Set);this.options=n,Ee(this,dr,t),Ee(this,no,null),Ee(this,to,Mv()),this.options.experimental_prefetchInRender||J(this,to).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,xt).addObserver(this),vb(J(this,xt),this.options)?yt(this,At,Gc).call(this):this.updateResult(),yt(this,At,Av).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zv(J(this,xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zv(J(this,xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,yt(this,At,Ov).call(this),yt(this,At,Dv).call(this),J(this,xt).removeObserver(this)}setOptions(t){const n=this.options,r=J(this,xt);if(this.options=J(this,dr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wr(this.options.enabled,J(this,xt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");yt(this,At,$v).call(this),J(this,xt).setOptions(this.options),n._defaulted&&!Ev(this.options,n)&&J(this,dr).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,xt),observer:this});const s=this.hasListeners();s&&yb(J(this,xt),r,this.options,n)&&yt(this,At,Gc).call(this),this.updateResult(),s&&(J(this,xt)!==r||Wr(this.options.enabled,J(this,xt))!==Wr(n.enabled,J(this,xt))||go(this.options.staleTime,J(this,xt))!==go(n.staleTime,J(this,xt)))&&yt(this,At,Iv).call(this);const i=yt(this,At,Rv).call(this);s&&(J(this,xt)!==r||Wr(this.options.enabled,J(this,xt))!==Wr(n.enabled,J(this,xt))||i!==J(this,ro))&&yt(this,At,Lv).call(this,i)}getOptimisticResult(t){const n=J(this,dr).getQueryCache().build(J(this,dr),t),r=this.createResult(n,t);return G5(this,r)&&(Ee(this,tr,r),Ee(this,Rl,this.options),Ee(this,ra,J(this,xt).state)),r}getCurrentResult(){return J(this,tr)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(t){J(this,Ol).add(t)}getCurrentQuery(){return J(this,xt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=J(this,dr).defaultQueryOptions(t),r=J(this,dr).getQueryCache().build(J(this,dr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return yt(this,At,Gc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,tr)))}createResult(t,n){var q;const r=J(this,xt),s=this.options,i=J(this,tr),l=J(this,ra),c=J(this,Rl),h=t!==r?t.state:J(this,Gu),{state:m}=t;let f={...m},g=!1,v;if(n._optimisticResults){const Y=this.hasListeners(),te=!Y&&vb(t,n),A=Y&&yb(t,r,n,s);(te||A)&&(f={...f,...YC(m.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:_,errorUpdatedAt:x,status:b}=f;v=f.data;let w=!1;if(n.placeholderData!==void 0&&v===void 0&&b==="pending"){let Y;i!=null&&i.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData)?(Y=i.data,w=!0):Y=typeof n.placeholderData=="function"?n.placeholderData((q=J(this,Al))==null?void 0:q.state.data,J(this,Al)):n.placeholderData,Y!==void 0&&(b="success",v=Pv(i==null?void 0:i.data,Y,n),g=!0)}if(n.select&&v!==void 0&&!w)if(i&&v===(l==null?void 0:l.data)&&n.select===J(this,Zu))v=J(this,Ll);else try{Ee(this,Zu,n.select),v=n.select(v),v=Pv(i==null?void 0:i.data,v,n),Ee(this,Ll,v),Ee(this,no,null)}catch(Y){Ee(this,no,Y)}J(this,no)&&(_=J(this,no),v=J(this,Ll),x=Date.now(),b="error");const S=f.fetchStatus==="fetching",k=b==="pending",j=b==="error",T=k&&S,R=v!==void 0,B={status:b,fetchStatus:f.fetchStatus,isPending:k,isSuccess:b==="success",isError:j,isInitialLoading:T,isLoading:T,data:v,dataUpdatedAt:f.dataUpdatedAt,error:_,errorUpdatedAt:x,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>h.dataUpdateCount||f.errorUpdateCount>h.errorUpdateCount,isFetching:S,isRefetching:S&&!k,isLoadingError:j&&!R,isPaused:f.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:j&&R,isStale:Hx(t,n),refetch:this.refetch,promise:J(this,to),isEnabled:Wr(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const Y=W=>{B.status==="error"?W.reject(B.error):B.data!==void 0&&W.resolve(B.data)},te=()=>{const W=Ee(this,to,B.promise=Mv());Y(W)},A=J(this,to);switch(A.status){case"pending":t.queryHash===r.queryHash&&Y(A);break;case"fulfilled":(B.status==="error"||B.data!==A.value)&&te();break;case"rejected":(B.status!=="error"||B.error!==A.reason)&&te();break}}return B}updateResult(){const t=J(this,tr),n=this.createResult(J(this,xt),this.options);if(Ee(this,ra,J(this,xt).state),Ee(this,Rl,this.options),J(this,ra).data!==void 0&&Ee(this,Al,J(this,xt)),Ev(n,t))return;Ee(this,tr,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!J(this,Ol).size)return!0;const l=new Set(i??J(this,Ol));return this.options.throwOnError&&l.add("error"),Object.keys(J(this,tr)).some(c=>{const u=c;return J(this,tr)[u]!==t[u]&&l.has(u)})};yt(this,At,JC).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&yt(this,At,Av).call(this)}},dr=new WeakMap,xt=new WeakMap,Gu=new WeakMap,tr=new WeakMap,ra=new WeakMap,Rl=new WeakMap,to=new WeakMap,no=new WeakMap,Zu=new WeakMap,Ll=new WeakMap,Al=new WeakMap,sa=new WeakMap,ia=new WeakMap,ro=new WeakMap,Ol=new WeakMap,At=new WeakSet,Gc=function(t){yt(this,At,$v).call(this);let n=J(this,xt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(fr)),n},Iv=function(){yt(this,At,Ov).call(this);const t=go(this.options.staleTime,J(this,xt));if(wa||J(this,tr).isStale||!jv(t))return;const r=WC(J(this,tr).dataUpdatedAt,t)+1;Ee(this,sa,setTimeout(()=>{J(this,tr).isStale||this.updateResult()},r))},Rv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,xt)):this.options.refetchInterval)??!1},Lv=function(t){yt(this,At,Dv).call(this),Ee(this,ro,t),!(wa||Wr(this.options.enabled,J(this,xt))===!1||!jv(J(this,ro))||J(this,ro)===0)&&Ee(this,ia,setInterval(()=>{(this.options.refetchIntervalInBackground||Wx.isFocused())&&yt(this,At,Gc).call(this)},J(this,ro)))},Av=function(){yt(this,At,Iv).call(this),yt(this,At,Lv).call(this,yt(this,At,Rv).call(this))},Ov=function(){J(this,sa)&&(clearTimeout(J(this,sa)),Ee(this,sa,void 0))},Dv=function(){J(this,ia)&&(clearInterval(J(this,ia)),Ee(this,ia,void 0))},$v=function(){const t=J(this,dr).getQueryCache().build(J(this,dr),this.options);if(t===J(this,xt))return;const n=J(this,xt);Ee(this,xt,t),Ee(this,Gu,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},JC=function(t){On.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(J(this,tr))}),J(this,dr).getQueryCache().notify({query:J(this,xt),type:"observerResultsUpdated"})})},lS);function V5(e,t){return Wr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function vb(e,t){return V5(e,t)||e.state.data!==void 0&&zv(e,t,t.refetchOnMount)}function zv(e,t,n){if(Wr(t.enabled,e)!==!1&&go(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Hx(e,t)}return!1}function yb(e,t,n,r){return(e!==t||Wr(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Hx(e,n)}function Hx(e,t){return Wr(t.enabled,e)!==!1&&e.isStaleByTime(go(t.staleTime,e))}function G5(e,t){return!Ev(e.getCurrentResult(),t)}var XC=p.createContext(void 0),Z5=e=>{const t=p.useContext(XC);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},q5=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(XC.Provider,{value:e,children:t})),QC=p.createContext(!1),K5=()=>p.useContext(QC);QC.Provider;function Y5(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var J5=p.createContext(Y5()),X5=()=>p.useContext(J5),Q5=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},e4=e=>{p.useEffect(()=>{e.clearReset()},[e])},t4=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||P5(n,[e.error,r])),n4=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},r4=(e,t)=>e.isLoading&&e.isFetching&&!t,s4=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,xb=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function i4(e,t,n){var f,g,v,_,x;const r=K5(),s=X5(),i=Z5(),l=i.defaultQueryOptions(e);(g=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||g.call(f,l),l._optimisticResults=r?"isRestoring":"optimistic",n4(l),Q5(l,s),e4(s);const c=!i.getQueryCache().get(l.queryHash),[u]=p.useState(()=>new t(i,l)),h=u.getOptimisticResult(l),m=!r&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(b=>{const w=m?u.subscribe(On.batchCalls(b)):fr;return u.updateResult(),w},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),p.useEffect(()=>{u.setOptions(l)},[l,u]),s4(l,h))throw xb(l,u,s);if(t4({result:h,errorResetBoundary:s,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;if((_=(v=i.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||_.call(v,l,h),l.experimental_prefetchInRender&&!wa&&r4(h,r)){const b=c?xb(l,u,s):(x=i.getQueryCache().get(l.queryHash))==null?void 0:x.promise;b==null||b.catch(fr).finally(()=>{u.updateResult()})}return l.notifyOnChangeProps?h:u.trackResult(h)}function ti(e,t){return i4(e,H5)}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mu.apply(this,arguments)}var oo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(oo||(oo={}));const wb="popstate";function o4(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:l,hash:c}=r.location;return Bv("",{pathname:i,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:gf(s)}return l4(t,n,null,e)}function wn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ej(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function a4(){return Math.random().toString(36).substr(2,8)}function _b(e,t){return{usr:e.state,key:e.key,idx:t}}function Bv(e,t,n,r){return n===void 0&&(n=null),Mu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?uc(t):t,{state:n,key:t&&t.key||r||a4()})}function gf(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function uc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function l4(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,l=s.history,c=oo.Pop,u=null,h=m();h==null&&(h=0,l.replaceState(Mu({},l.state,{idx:h}),""));function m(){return(l.state||{idx:null}).idx}function f(){c=oo.Pop;let b=m(),w=b==null?null:b-h;h=b,u&&u({action:c,location:x.location,delta:w})}function g(b,w){c=oo.Push;let S=Bv(x.location,b,w);h=m()+1;let k=_b(S,h),j=x.createHref(S);try{l.pushState(k,"",j)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(j)}i&&u&&u({action:c,location:x.location,delta:1})}function v(b,w){c=oo.Replace;let S=Bv(x.location,b,w);h=m();let k=_b(S,h),j=x.createHref(S);l.replaceState(k,"",j),i&&u&&u({action:c,location:x.location,delta:0})}function _(b){let w=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof b=="string"?b:gf(b);return S=S.replace(/ $/,"%20"),wn(w,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,w)}let x={get action(){return c},get location(){return e(s,l)},listen(b){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(wb,f),u=b,()=>{s.removeEventListener(wb,f),u=null}},createHref(b){return t(s,b)},createURL:_,encodeLocation(b){let w=_(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:v,go(b){return l.go(b)}};return x}var bb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bb||(bb={}));function c4(e,t,n){return n===void 0&&(n="/"),u4(e,t,n,!1)}function u4(e,t,n,r){let s=typeof t=="string"?uc(t):t,i=Vx(s.pathname||"/",n);if(i==null)return null;let l=tj(e);d4(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let h=b4(i);c=w4(l[u],h,r)}return c}function tj(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,l,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};u.relativePath.startsWith("/")&&(wn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=vo([r,u.relativePath]),m=n.concat(u);i.children&&i.children.length>0&&(wn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),tj(i.children,t,m,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:y4(h,i.index),routesMeta:m})};return e.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let u of nj(i.path))s(i,l,u)}),t}function nj(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let l=nj(r.join("/")),c=[];return c.push(...l.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...l),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function d4(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:x4(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const h4=/^:[\w-]+$/,f4=3,m4=2,p4=1,g4=10,v4=-2,Sb=e=>e==="*";function y4(e,t){let n=e.split("/"),r=n.length;return n.some(Sb)&&(r+=v4),t&&(r+=m4),n.filter(s=>!Sb(s)).reduce((s,i)=>s+(h4.test(i)?f4:i===""?p4:g4),r)}function x4(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function w4(e,t,n){let{routesMeta:r}=e,s={},i="/",l=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,m=i==="/"?t:t.slice(i.length)||"/",f=Nb({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),g=u.route;if(!f&&h&&n&&!r[r.length-1].route.index&&(f=Nb({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!f)return null;Object.assign(s,f.params),l.push({params:s,pathname:vo([i,f.pathname]),pathnameBase:C4(vo([i,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(i=vo([i,f.pathnameBase]))}return l}function Nb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=_4(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((h,m,f)=>{let{paramName:g,isOptional:v}=m;if(g==="*"){let x=c[f]||"";l=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const _=c[f];return v&&!_?h[g]=void 0:h[g]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:e}}function _4(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ej(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function b4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ej(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function S4(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?uc(e):e;return{pathname:n?n.startsWith("/")?n:N4(n,t):t,search:j4(r),hash:E4(s)}}function N4(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hp(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function k4(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rj(e,t){let n=k4(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sj(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=uc(e):(s=Mu({},e),wn(!s.pathname||!s.pathname.includes("?"),Hp("?","pathname","search",s)),wn(!s.pathname||!s.pathname.includes("#"),Hp("#","pathname","hash",s)),wn(!s.search||!s.search.includes("#"),Hp("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,c;if(l==null)c=n;else{let f=t.length-1;if(!r&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),f-=1;s.pathname=g.join("/")}c=f>=0?t[f]:"/"}let u=S4(s,c),h=l&&l!=="/"&&l.endsWith("/"),m=(i||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}const vo=e=>e.join("/").replace(/\/\/+/g,"/"),C4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,E4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function T4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ij=["post","put","patch","delete"];new Set(ij);const P4=["get",...ij];new Set(P4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iu(){return Iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iu.apply(this,arguments)}const Gx=p.createContext(null),M4=p.createContext(null),Ea=p.createContext(null),mm=p.createContext(null),Ta=p.createContext({outlet:null,matches:[],isDataRoute:!1}),oj=p.createContext(null);function I4(e,t){let{relative:n}=t===void 0?{}:t;id()||wn(!1);let{basename:r,navigator:s}=p.useContext(Ea),{hash:i,pathname:l,search:c}=cj(e,{relative:n}),u=l;return r!=="/"&&(u=l==="/"?r:vo([r,l])),s.createHref({pathname:u,search:c,hash:i})}function id(){return p.useContext(mm)!=null}function dc(){return id()||wn(!1),p.useContext(mm).location}function aj(e){p.useContext(Ea).static||p.useLayoutEffect(e)}function lj(){let{isDataRoute:e}=p.useContext(Ta);return e?V4():R4()}function R4(){id()||wn(!1);let e=p.useContext(Gx),{basename:t,future:n,navigator:r}=p.useContext(Ea),{matches:s}=p.useContext(Ta),{pathname:i}=dc(),l=JSON.stringify(rj(s,n.v7_relativeSplatPath)),c=p.useRef(!1);return aj(()=>{c.current=!0}),p.useCallback(function(h,m){if(m===void 0&&(m={}),!c.current)return;if(typeof h=="number"){r.go(h);return}let f=sj(h,JSON.parse(l),i,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:vo([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,l,i,e])}function cj(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(Ea),{matches:s}=p.useContext(Ta),{pathname:i}=dc(),l=JSON.stringify(rj(s,r.v7_relativeSplatPath));return p.useMemo(()=>sj(e,JSON.parse(l),i,n==="path"),[e,l,i,n])}function L4(e,t){return A4(e,t)}function A4(e,t,n,r){id()||wn(!1);let{navigator:s}=p.useContext(Ea),{matches:i}=p.useContext(Ta),l=i[i.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let h=dc(),m;if(t){var f;let b=typeof t=="string"?uc(t):t;u==="/"||(f=b.pathname)!=null&&f.startsWith(u)||wn(!1),m=b}else m=h;let g=m.pathname||"/",v=g;if(u!=="/"){let b=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let _=c4(e,{pathname:v}),x=B4(_&&_.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:vo([u,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:vo([u,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return t&&x?p.createElement(mm.Provider,{value:{location:Iu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:oo.Pop}},x):x}function O4(){let e=H4(),t=T4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:s},n):null,null)}const D4=p.createElement(O4,null);class $4 extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(Ta.Provider,{value:this.props.routeContext},p.createElement(oj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function z4(e){let{routeContext:t,match:n,children:r}=e,s=p.useContext(Gx);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(Ta.Provider,{value:t},r)}function B4(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=l.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);m>=0||wn(!1),l=l.slice(0,Math.min(l.length,m+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let f=l[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=m),f.route.id){let{loaderData:g,errors:v}=n,_=f.route.loader&&g[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||_){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((m,f,g)=>{let v,_=!1,x=null,b=null;n&&(v=c&&f.route.id?c[f.route.id]:void 0,x=f.route.errorElement||D4,u&&(h<0&&g===0?(_=!0,b=null):h===g&&(_=!0,b=f.route.hydrateFallbackElement||null)));let w=t.concat(l.slice(0,g+1)),S=()=>{let k;return v?k=x:_?k=b:f.route.Component?k=p.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=m,p.createElement(z4,{match:f,routeContext:{outlet:m,matches:w,isDataRoute:n!=null},children:k})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?p.createElement($4,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}var uj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(uj||{}),vf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vf||{});function F4(e){let t=p.useContext(Gx);return t||wn(!1),t}function U4(e){let t=p.useContext(M4);return t||wn(!1),t}function W4(e){let t=p.useContext(Ta);return t||wn(!1),t}function dj(e){let t=W4(),n=t.matches[t.matches.length-1];return n.route.id||wn(!1),n.route.id}function H4(){var e;let t=p.useContext(oj),n=U4(vf.UseRouteError),r=dj(vf.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function V4(){let{router:e}=F4(uj.UseNavigateStable),t=dj(vf.UseNavigateStable),n=p.useRef(!1);return aj(()=>{n.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Iu({fromRouteId:t},i)))},[e,t])}function G4(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function jh(e){wn(!1)}function Z4(e){let{basename:t="/",children:n=null,location:r,navigationType:s=oo.Pop,navigator:i,static:l=!1,future:c}=e;id()&&wn(!1);let u=t.replace(/^\/*/,"/"),h=p.useMemo(()=>({basename:u,navigator:i,static:l,future:Iu({v7_relativeSplatPath:!1},c)}),[u,c,i,l]);typeof r=="string"&&(r=uc(r));let{pathname:m="/",search:f="",hash:g="",state:v=null,key:_="default"}=r,x=p.useMemo(()=>{let b=Vx(m,u);return b==null?null:{location:{pathname:b,search:f,hash:g,state:v,key:_},navigationType:s}},[u,m,f,g,v,_,s]);return x==null?null:p.createElement(Ea.Provider,{value:h},p.createElement(mm.Provider,{children:n,value:x}))}function q4(e){let{children:t,location:n}=e;return L4(Fv(t),n)}new Promise(()=>{});function Fv(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,s)=>{if(!p.isValidElement(r))return;let i=[...t,s];if(r.type===p.Fragment){n.push.apply(n,Fv(r.props.children,i));return}r.type!==jh&&wn(!1),!r.props.index||!r.props.children||wn(!1);let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Fv(r.props.children,i)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uv.apply(this,arguments)}function K4(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Y4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function J4(e,t){return e.button===0&&(!t||t==="_self")&&!Y4(e)}function Wv(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function X4(e,t){let n=Wv(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}const Q4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eD="6";try{window.__reactRouterVersion=eD}catch{}const tD="startTransition",kb=My[tD];function nD(e){let{basename:t,children:n,future:r,window:s}=e,i=p.useRef();i.current==null&&(i.current=o4({window:s,v5Compat:!0}));let l=i.current,[c,u]=p.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},m=p.useCallback(f=>{h&&kb?kb(()=>u(f)):u(f)},[u,h]);return p.useLayoutEffect(()=>l.listen(m),[l,m]),p.useEffect(()=>G4(r),[r]),p.createElement(Z4,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const rD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yf=p.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:l,state:c,target:u,to:h,preventScrollReset:m,viewTransition:f}=t,g=K4(t,Q4),{basename:v}=p.useContext(Ea),_,x=!1;if(typeof h=="string"&&sD.test(h)&&(_=h,rD))try{let k=new URL(window.location.href),j=h.startsWith("//")?new URL(k.protocol+h):new URL(h),T=Vx(j.pathname,v);j.origin===k.origin&&T!=null?h=T+j.search+j.hash:x=!0}catch{}let b=I4(h,{relative:s}),w=iD(h,{replace:l,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:f});function S(k){r&&r(k),k.defaultPrevented||w(k)}return p.createElement("a",Uv({},g,{href:_||b,onClick:x||i?r:S,ref:n,target:u}))});var Cb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cb||(Cb={}));var jb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(jb||(jb={}));function iD(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:l,viewTransition:c}=t===void 0?{}:t,u=lj(),h=dc(),m=cj(e,{relative:l});return p.useCallback(f=>{if(J4(f,n)){f.preventDefault();let g=r!==void 0?r:gf(h)===gf(m);u(e,{replace:g,state:s,preventScrollReset:i,relative:l,viewTransition:c})}},[h,u,m,r,s,n,e,i,l,c])}function oD(e){let t=p.useRef(Wv(e)),n=p.useRef(!1),r=dc(),s=p.useMemo(()=>X4(r.search,n.current?null:t.current),[r.search]),i=lj(),l=p.useCallback((c,u)=>{const h=Wv(typeof c=="function"?c(s):c);n.current=!0,i("?"+h,u)},[i,s]);return[s,l]}var aD=p.createContext(void 0);function hc(e){const t=p.useContext(aD);return e||t||"ltr"}var Vp="rovingFocusGroup.onEntryFocus",lD={bubbles:!1,cancelable:!0},od="RovingFocusGroup",[Hv,hj,cD]=Qu(od),[uD,pm]=_r(od,[cD]),[dD,hD]=uD(od),fj=p.forwardRef((e,t)=>a.jsx(Hv.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Hv.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(fD,{...e,ref:t})})}));fj.displayName=od;var fD=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...f}=e,g=p.useRef(null),v=st(t,g),_=hc(i),[x,b]=Ss({prop:l,defaultProp:c??null,onChange:u,caller:od}),[w,S]=p.useState(!1),k=fn(h),j=hj(n),T=p.useRef(!1),[R,E]=p.useState(0);return p.useEffect(()=>{const B=g.current;if(B)return B.addEventListener(Vp,k),()=>B.removeEventListener(Vp,k)},[k]),a.jsx(dD,{scope:n,orientation:r,dir:_,loop:s,currentTabStopId:x,onItemFocus:p.useCallback(B=>b(B),[b]),onItemShiftTab:p.useCallback(()=>S(!0),[]),onFocusableItemAdd:p.useCallback(()=>E(B=>B+1),[]),onFocusableItemRemove:p.useCallback(()=>E(B=>B-1),[]),children:a.jsx(De.div,{tabIndex:w||R===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...e.style},onMouseDown:_e(e.onMouseDown,()=>{T.current=!0}),onFocus:_e(e.onFocus,B=>{const q=!T.current;if(B.target===B.currentTarget&&q&&!w){const Y=new CustomEvent(Vp,lD);if(B.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const te=j().filter($=>$.focusable),A=te.find($=>$.active),W=te.find($=>$.id===x),Z=[A,W,...te].filter(Boolean).map($=>$.ref.current);gj(Z,m)}}T.current=!1}),onBlur:_e(e.onBlur,()=>S(!1))})})}),mj="RovingFocusGroupItem",pj=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:l,...c}=e,u=Ks(),h=i||u,m=hD(mj,n),f=m.currentTabStopId===h,g=hj(n),{onFocusableItemAdd:v,onFocusableItemRemove:_,currentTabStopId:x}=m;return p.useEffect(()=>{if(r)return v(),()=>_()},[r,v,_]),a.jsx(Hv.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:a.jsx(De.span,{tabIndex:f?0:-1,"data-orientation":m.orientation,...c,ref:t,onMouseDown:_e(e.onMouseDown,b=>{r?m.onItemFocus(h):b.preventDefault()}),onFocus:_e(e.onFocus,()=>m.onItemFocus(h)),onKeyDown:_e(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){m.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=gD(b,m.orientation,m.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let k=g().filter(j=>j.focusable).map(j=>j.ref.current);if(w==="last")k.reverse();else if(w==="prev"||w==="next"){w==="prev"&&k.reverse();const j=k.indexOf(b.currentTarget);k=m.loop?vD(k,j+1):k.slice(j+1)}setTimeout(()=>gj(k))}}),children:typeof l=="function"?l({isCurrentTabStop:f,hasTabStop:x!=null}):l})})});pj.displayName=mj;var mD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function gD(e,t,n){const r=pD(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return mD[r]}function gj(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function vD(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var vj=fj,yj=pj,gm="Tabs",[yD,IH]=_r(gm,[pm]),xj=pm(),[xD,Zx]=yD(gm),wj=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:u="automatic",...h}=e,m=hc(c),[f,g]=Ss({prop:r,onChange:s,defaultProp:i??"",caller:gm});return a.jsx(xD,{scope:n,baseId:Ks(),value:f,onValueChange:g,orientation:l,dir:m,activationMode:u,children:a.jsx(De.div,{dir:m,"data-orientation":l,...h,ref:t})})});wj.displayName=gm;var _j="TabsList",bj=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,i=Zx(_j,n),l=xj(n);return a.jsx(vj,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(De.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});bj.displayName=_j;var Sj="TabsTrigger",Nj=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,l=Zx(Sj,n),c=xj(n),u=jj(l.baseId,r),h=Ej(l.baseId,r),m=r===l.value;return a.jsx(yj,{asChild:!0,...c,focusable:!s,active:m,children:a.jsx(De.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...i,ref:t,onMouseDown:_e(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?l.onValueChange(r):f.preventDefault()}),onKeyDown:_e(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&l.onValueChange(r)}),onFocus:_e(e.onFocus,()=>{const f=l.activationMode!=="manual";!m&&!s&&f&&l.onValueChange(r)})})})});Nj.displayName=Sj;var kj="TabsContent",Cj=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...l}=e,c=Zx(kj,n),u=jj(c.baseId,r),h=Ej(c.baseId,r),m=r===c.value,f=p.useRef(m);return p.useEffect(()=>{const g=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(g)},[]),a.jsx(ar,{present:s||m,children:({present:g})=>a.jsx(De.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:h,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:g&&i})})});Cj.displayName=kj;function jj(e,t){return`${e}-trigger-${t}`}function Ej(e,t){return`${e}-content-${t}`}var wD=wj,Tj=bj,Pj=Nj,Mj=Cj;const qx=wD,vm=p.forwardRef(({className:e,...t},n)=>a.jsx(Tj,{ref:n,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));vm.displayName=Tj.displayName;const Zr=p.forwardRef(({className:e,...t},n)=>a.jsx(Pj,{ref:n,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Zr.displayName=Pj.displayName;const qr=p.forwardRef(({className:e,...t},n)=>a.jsx(Mj,{ref:n,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));qr.displayName=Mj.displayName;var ym="Collapsible",[_D,RH]=_r(ym),[bD,Kx]=_D(ym),Ij=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:l,...c}=e,[u,h]=Ss({prop:r,defaultProp:s??!1,onChange:l,caller:ym});return a.jsx(bD,{scope:n,disabled:i,contentId:Ks(),open:u,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),children:a.jsx(De.div,{"data-state":Jx(u),"data-disabled":i?"":void 0,...c,ref:t})})});Ij.displayName=ym;var Rj="CollapsibleTrigger",Lj=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=Kx(Rj,n);return a.jsx(De.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Jx(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:_e(e.onClick,s.onOpenToggle)})});Lj.displayName=Rj;var Yx="CollapsibleContent",Aj=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Kx(Yx,e.__scopeCollapsible);return a.jsx(ar,{present:n||s.open,children:({present:i})=>a.jsx(SD,{...r,ref:t,present:i})})});Aj.displayName=Yx;var SD=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=e,l=Kx(Yx,n),[c,u]=p.useState(r),h=p.useRef(null),m=st(t,h),f=p.useRef(0),g=f.current,v=p.useRef(0),_=v.current,x=l.open||c,b=p.useRef(x),w=p.useRef(void 0);return p.useEffect(()=>{const S=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(S)},[]),jn(()=>{const S=h.current;if(S){w.current=w.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const k=S.getBoundingClientRect();f.current=k.height,v.current=k.width,b.current||(S.style.transitionDuration=w.current.transitionDuration,S.style.animationName=w.current.animationName),u(r)}},[l.open,r]),a.jsx(De.div,{"data-state":Jx(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!x,...i,ref:m,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":_?`${_}px`:void 0,...e.style},children:x&&s})});function Jx(e){return e?"open":"closed"}var ND=Ij;const xm=ND,kD=Lj,ad=p.forwardRef(({className:e,children:t,...n},r)=>a.jsx(Aj,{ref:r,className:ye("overflow-hidden data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",e),...n,children:t}));ad.displayName="CollapsibleContent";const Vv=sm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),de=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const l=r?s3:"button";return a.jsx(l,{className:ye(Vv({variant:t,size:n,className:e})),ref:i,...s})});de.displayName="Button";var Gp=0;function Xx(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Eb()),document.body.insertAdjacentElement("beforeend",e[1]??Eb()),Gp++,()=>{Gp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Gp--}},[])}function Eb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Zp="focusScope.autoFocusOnMount",qp="focusScope.autoFocusOnUnmount",Tb={bubbles:!1,cancelable:!0},CD="FocusScope",wm=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...l}=e,[c,u]=p.useState(null),h=fn(s),m=fn(i),f=p.useRef(null),g=st(t,x=>u(x)),v=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let x=function(k){if(v.paused||!c)return;const j=k.target;c.contains(j)?f.current=j:Bi(f.current,{select:!0})},b=function(k){if(v.paused||!c)return;const j=k.relatedTarget;j!==null&&(c.contains(j)||Bi(f.current,{select:!0}))},w=function(k){if(document.activeElement===document.body)for(const T of k)T.removedNodes.length>0&&Bi(c)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const S=new MutationObserver(w);return c&&S.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),S.disconnect()}}},[r,c,v.paused]),p.useEffect(()=>{if(c){Mb.add(v);const x=document.activeElement;if(!c.contains(x)){const w=new CustomEvent(Zp,Tb);c.addEventListener(Zp,h),c.dispatchEvent(w),w.defaultPrevented||(jD(ID(Oj(c)),{select:!0}),document.activeElement===x&&Bi(c))}return()=>{c.removeEventListener(Zp,h),setTimeout(()=>{const w=new CustomEvent(qp,Tb);c.addEventListener(qp,m),c.dispatchEvent(w),w.defaultPrevented||Bi(x??document.body,{select:!0}),c.removeEventListener(qp,m),Mb.remove(v)},0)}}},[c,h,m,v]);const _=p.useCallback(x=>{if(!n&&!r||v.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(b&&w){const S=x.currentTarget,[k,j]=ED(S);k&&j?!x.shiftKey&&w===j?(x.preventDefault(),n&&Bi(k,{select:!0})):x.shiftKey&&w===k&&(x.preventDefault(),n&&Bi(j,{select:!0})):w===S&&x.preventDefault()}},[n,r,v.paused]);return a.jsx(De.div,{tabIndex:-1,...l,ref:g,onKeyDown:_})});wm.displayName=CD;function jD(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Bi(r,{select:t}),document.activeElement!==n)return}function ED(e){const t=Oj(e),n=Pb(t,e),r=Pb(t.reverse(),e);return[n,r]}function Oj(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Pb(e,t){for(const n of e)if(!TD(n,{upTo:t}))return n}function TD(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function PD(e){return e instanceof HTMLInputElement&&"select"in e}function Bi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&PD(e)&&t&&e.select()}}var Mb=MD();function MD(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Ib(e,t),e.unshift(t)},remove(t){var n;e=Ib(e,t),(n=e[0])==null||n.resume()}}}function Ib(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function ID(e){return e.filter(t=>t.tagName!=="A")}var RD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ba=new WeakMap,th=new WeakMap,nh={},Kp=0,Dj=function(e){return e&&(e.host||Dj(e.parentNode))},LD=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Dj(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},AD=function(e,t,n,r){var s=LD(t,Array.isArray(e)?e:[e]);nh[n]||(nh[n]=new WeakMap);var i=nh[n],l=[],c=new Set,u=new Set(s),h=function(f){!f||c.has(f)||(c.add(f),h(f.parentNode))};s.forEach(h);var m=function(f){!f||u.has(f)||Array.prototype.forEach.call(f.children,function(g){if(c.has(g))m(g);else try{var v=g.getAttribute(r),_=v!==null&&v!=="false",x=(Ba.get(g)||0)+1,b=(i.get(g)||0)+1;Ba.set(g,x),i.set(g,b),l.push(g),x===1&&_&&th.set(g,!0),b===1&&g.setAttribute(n,"true"),_||g.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",g,w)}})};return m(t),c.clear(),Kp++,function(){l.forEach(function(f){var g=Ba.get(f)-1,v=i.get(f)-1;Ba.set(f,g),i.set(f,v),g||(th.has(f)||f.removeAttribute(r),th.delete(f)),v||f.removeAttribute(n)}),Kp--,Kp||(Ba=new WeakMap,Ba=new WeakMap,th=new WeakMap,nh={})}},Qx=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=RD(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),AD(r,s,n,"aria-hidden")):function(){return null}},Fs=function(){return Fs=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fs.apply(this,arguments)};function fc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function OD(e,t,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function c(m){try{h(r.next(m))}catch(f){l(f)}}function u(m){try{h(r.throw(m))}catch(f){l(f)}}function h(m){m.done?i(m.value):s(m.value).then(c,u)}h((r=r.apply(e,t||[])).next())})}function DD(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Eh="right-scroll-bar-position",Th="width-before-scroll-bar",$D="with-scroll-bars-hidden",zD="--removed-body-scroll-bar-size";function Yp(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function BD(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var FD=typeof window<"u"?p.useLayoutEffect:p.useEffect,Rb=new WeakMap;function UD(e,t){var n=BD(null,function(r){return e.forEach(function(s){return Yp(s,r)})});return FD(function(){var r=Rb.get(n);if(r){var s=new Set(r),i=new Set(e),l=n.current;s.forEach(function(c){i.has(c)||Yp(c,null)}),i.forEach(function(c){s.has(c)||Yp(c,l)})}Rb.set(n,e)},[e]),n}function WD(e){return e}function HD(e,t){t===void 0&&(t=WD);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var l=t(i,r);return n.push(l),function(){n=n.filter(function(c){return c!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var c=n;n=[],c.forEach(i),l=n}var u=function(){var m=l;l=[],m.forEach(i)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(m){l.push(m),h()},filter:function(m){return l=l.filter(m),n}}}};return s}function VD(e){e===void 0&&(e={});var t=HD(null);return t.options=Fs({async:!0,ssr:!1},e),t}var $j=function(e){var t=e.sideCar,n=fc(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Fs({},n))};$j.isSideCarExport=!0;function GD(e,t){return e.useMedium(t),$j}var zj=VD(),Jp=function(){},_m=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:Jp,onWheelCapture:Jp,onTouchMoveCapture:Jp}),s=r[0],i=r[1],l=e.forwardProps,c=e.children,u=e.className,h=e.removeScrollBar,m=e.enabled,f=e.shards,g=e.sideCar,v=e.noRelative,_=e.noIsolation,x=e.inert,b=e.allowPinchZoom,w=e.as,S=w===void 0?"div":w,k=e.gapMode,j=fc(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=g,R=UD([n,t]),E=Fs(Fs({},j),s);return p.createElement(p.Fragment,null,m&&p.createElement(T,{sideCar:zj,removeScrollBar:h,shards:f,noRelative:v,noIsolation:_,inert:x,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:k}),l?p.cloneElement(p.Children.only(c),Fs(Fs({},E),{ref:R})):p.createElement(S,Fs({},E,{className:u,ref:R}),c))});_m.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_m.classNames={fullWidth:Th,zeroRight:Eh};var ZD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ZD();return t&&e.setAttribute("nonce",t),e}function KD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function YD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var JD=function(){var e=0,t=null;return{add:function(n){e==0&&(t=qD())&&(KD(t,n),YD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},XD=function(){var e=JD();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Bj=function(){var e=XD(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},QD={left:0,top:0,right:0,gap:0},Xp=function(e){return parseInt(e||"",10)||0},e$=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Xp(n),Xp(r),Xp(s)]},t$=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return QD;var t=e$(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},n$=Bj(),xl="data-scroll-locked",r$=function(e,t,n,r){var s=e.left,i=e.top,l=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat($D,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(xl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Eh,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Th,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Eh," .").concat(Eh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Th," .").concat(Th,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(xl,`] {
    `).concat(zD,": ").concat(c,`px;
  }
`)},Lb=function(){var e=parseInt(document.body.getAttribute(xl)||"0",10);return isFinite(e)?e:0},s$=function(){p.useEffect(function(){return document.body.setAttribute(xl,(Lb()+1).toString()),function(){var e=Lb()-1;e<=0?document.body.removeAttribute(xl):document.body.setAttribute(xl,e.toString())}},[])},i$=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;s$();var i=p.useMemo(function(){return t$(s)},[s]);return p.createElement(n$,{styles:r$(i,!t,s,n?"":"!important")})},Gv=!1;if(typeof window<"u")try{var rh=Object.defineProperty({},"passive",{get:function(){return Gv=!0,!0}});window.addEventListener("test",rh,rh),window.removeEventListener("test",rh,rh)}catch{Gv=!1}var Fa=Gv?{passive:!1}:!1,o$=function(e){return e.tagName==="TEXTAREA"},Fj=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!o$(e)&&n[t]==="visible")},a$=function(e){return Fj(e,"overflowY")},l$=function(e){return Fj(e,"overflowX")},Ab=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Uj(e,r);if(s){var i=Wj(e,r),l=i[1],c=i[2];if(l>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},c$=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},u$=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Uj=function(e,t){return e==="v"?a$(t):l$(t)},Wj=function(e,t){return e==="v"?c$(t):u$(t)},d$=function(e,t){return e==="h"&&t==="rtl"?-1:1},h$=function(e,t,n,r,s){var i=d$(e,window.getComputedStyle(t).direction),l=i*r,c=n.target,u=t.contains(c),h=!1,m=l>0,f=0,g=0;do{if(!c)break;var v=Wj(e,c),_=v[0],x=v[1],b=v[2],w=x-b-i*_;(_||w)&&Uj(e,c)&&(f+=w,g+=_);var S=c.parentNode;c=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!u&&c!==document.body||u&&(t.contains(c)||t===c));return(m&&(Math.abs(f)<1||!s)||!m&&(Math.abs(g)<1||!s))&&(h=!0),h},sh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ob=function(e){return[e.deltaX,e.deltaY]},Db=function(e){return e&&"current"in e?e.current:e},f$=function(e,t){return e[0]===t[0]&&e[1]===t[1]},m$=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},p$=0,Ua=[];function g$(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(p$++)[0],i=p.useState(Bj)[0],l=p.useRef(e);p.useEffect(function(){l.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var x=DD([e.lockRef.current],(e.shards||[]).map(Db),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var c=p.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var w=sh(x),S=n.current,k="deltaX"in x?x.deltaX:S[0]-w[0],j="deltaY"in x?x.deltaY:S[1]-w[1],T,R=x.target,E=Math.abs(k)>Math.abs(j)?"h":"v";if("touches"in x&&E==="h"&&R.type==="range")return!1;var B=Ab(E,R);if(!B)return!0;if(B?T=E:(T=E==="v"?"h":"v",B=Ab(E,R)),!B)return!1;if(!r.current&&"changedTouches"in x&&(k||j)&&(r.current=T),!T)return!0;var q=r.current||T;return h$(q,b,x,q==="h"?k:j,!0)},[]),u=p.useCallback(function(x){var b=x;if(!(!Ua.length||Ua[Ua.length-1]!==i)){var w="deltaY"in b?Ob(b):sh(b),S=t.current.filter(function(T){return T.name===b.type&&(T.target===b.target||b.target===T.shadowParent)&&f$(T.delta,w)})[0];if(S&&S.should){b.cancelable&&b.preventDefault();return}if(!S){var k=(l.current.shards||[]).map(Db).filter(Boolean).filter(function(T){return T.contains(b.target)}),j=k.length>0?c(b,k[0]):!l.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),h=p.useCallback(function(x,b,w,S){var k={name:x,delta:b,target:w,should:S,shadowParent:v$(w)};t.current.push(k),setTimeout(function(){t.current=t.current.filter(function(j){return j!==k})},1)},[]),m=p.useCallback(function(x){n.current=sh(x),r.current=void 0},[]),f=p.useCallback(function(x){h(x.type,Ob(x),x.target,c(x,e.lockRef.current))},[]),g=p.useCallback(function(x){h(x.type,sh(x),x.target,c(x,e.lockRef.current))},[]);p.useEffect(function(){return Ua.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:g}),document.addEventListener("wheel",u,Fa),document.addEventListener("touchmove",u,Fa),document.addEventListener("touchstart",m,Fa),function(){Ua=Ua.filter(function(x){return x!==i}),document.removeEventListener("wheel",u,Fa),document.removeEventListener("touchmove",u,Fa),document.removeEventListener("touchstart",m,Fa)}},[]);var v=e.removeScrollBar,_=e.inert;return p.createElement(p.Fragment,null,_?p.createElement(i,{styles:m$(s)}):null,v?p.createElement(i$,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function v$(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const y$=GD(zj,g$);var bm=p.forwardRef(function(e,t){return p.createElement(_m,Fs({},e,{ref:t,sideCar:y$}))});bm.classNames=_m.classNames;var Sm="Popover",[Hj,LH]=_r(Sm,[jo]),ld=jo(),[x$,Eo]=Hj(Sm),Vj=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:l=!1}=e,c=ld(t),u=p.useRef(null),[h,m]=p.useState(!1),[f,g]=Ss({prop:r,defaultProp:s??!1,onChange:i,caller:Sm});return a.jsx(lm,{...c,children:a.jsx(x$,{scope:t,contentId:Ks(),triggerRef:u,open:f,onOpenChange:g,onOpenToggle:p.useCallback(()=>g(v=>!v),[g]),hasCustomAnchor:h,onCustomAnchorAdd:p.useCallback(()=>m(!0),[]),onCustomAnchorRemove:p.useCallback(()=>m(!1),[]),modal:l,children:n})})};Vj.displayName=Sm;var Gj="PopoverAnchor",w$=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Eo(Gj,n),i=ld(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=s;return p.useEffect(()=>(l(),()=>c()),[l,c]),a.jsx(rd,{...i,...r,ref:t})});w$.displayName=Gj;var Zj="PopoverTrigger",qj=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Eo(Zj,n),i=ld(n),l=st(t,s.triggerRef),c=a.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Qj(s.open),...r,ref:l,onClick:_e(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:a.jsx(rd,{asChild:!0,...i,children:c})});qj.displayName=Zj;var e0="PopoverPortal",[_$,b$]=Hj(e0,{forceMount:void 0}),Kj=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,i=Eo(e0,t);return a.jsx(_$,{scope:t,forceMount:n,children:a.jsx(ar,{present:n||i.open,children:a.jsx(ed,{asChild:!0,container:s,children:r})})})};Kj.displayName=e0;var Yl="PopoverContent",Yj=p.forwardRef((e,t)=>{const n=b$(Yl,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,i=Eo(Yl,e.__scopePopover);return a.jsx(ar,{present:r||i.open,children:i.modal?a.jsx(N$,{...s,ref:t}):a.jsx(k$,{...s,ref:t})})});Yj.displayName=Yl;var S$=pa("PopoverContent.RemoveScroll"),N$=p.forwardRef((e,t)=>{const n=Eo(Yl,e.__scopePopover),r=p.useRef(null),s=st(t,r),i=p.useRef(!1);return p.useEffect(()=>{const l=r.current;if(l)return Qx(l)},[]),a.jsx(bm,{as:S$,allowPinchZoom:!0,children:a.jsx(Jj,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(e.onCloseAutoFocus,l=>{var c;l.preventDefault(),i.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:_e(e.onPointerDownOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:_e(e.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),k$=p.forwardRef((e,t)=>{const n=Eo(Yl,e.__scopePopover),r=p.useRef(!1),s=p.useRef(!1);return a.jsx(Jj,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,c;(l=e.onCloseAutoFocus)==null||l.call(e,i),i.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,h;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Jj=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,...f}=e,g=Eo(Yl,n),v=ld(n);return Xx(),a.jsx(wm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(ic,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onDismiss:()=>g.onOpenChange(!1),children:a.jsx(cm,{"data-state":Qj(g.open),role:"dialog",id:g.contentId,...v,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Xj="PopoverClose",C$=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Eo(Xj,n);return a.jsx(De.button,{type:"button",...r,ref:t,onClick:_e(e.onClick,()=>s.onOpenChange(!1))})});C$.displayName=Xj;var j$="PopoverArrow",E$=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=ld(n);return a.jsx(um,{...s,...r,ref:t})});E$.displayName=j$;function Qj(e){return e?"open":"closed"}var T$=Vj,P$=qj,M$=Kj,e2=Yj;const xf=T$,wf=P$,Ru=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>a.jsx(M$,{children:a.jsx(e2,{ref:s,align:t,sideOffset:n,className:ye("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Ru.displayName=e2.displayName;const I$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Nm extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class t2 extends Nm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Zv extends Nm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class qv extends Nm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var _f;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(_f||(_f={}));class R${constructor(t,{headers:n={},customFetch:r,region:s=_f.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=I$(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return OD(this,arguments,void 0,function*(n,r={}){var s;let i,l;try{const{headers:c,method:u,body:h,signal:m,timeout:f}=r;let g={},{region:v}=r;v||(v=this.region);const _=new URL(`${this.url}/${n}`);v&&v!=="any"&&(g["x-region"]=v,_.searchParams.set("forceFunctionRegion",v));let x;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(g["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(g["Content-Type"]="application/json",x=JSON.stringify(h)):x=h;let b=m;f&&(l=new AbortController,i=setTimeout(()=>l.abort(),f),m?(b=l.signal,m.addEventListener("abort",()=>l.abort())):b=l.signal);const w=yield this.fetch(_.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),c),body:x,signal:b}).catch(T=>{throw new t2(T)}),S=w.headers.get("x-relay-error");if(S&&S==="true")throw new Zv(w);if(!w.ok)throw new qv(w);let k=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return k==="application/json"?j=yield w.json():k==="application/octet-stream"||k==="application/pdf"?j=yield w.blob():k==="text/event-stream"?j=w:k==="multipart/form-data"?j=yield w.formData():j=yield w.text(),{data:j,error:null,response:w}}catch(c){return{data:null,error:c,response:c instanceof qv||c instanceof Zv?c.context:void 0}}finally{i&&clearTimeout(i)}})}}var n2=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},L$=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let l=null,c=null,u=null,h=i.status,m=i.statusText;if(i.ok){var f,g;if(n.method!=="HEAD"){var v;const w=await i.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((v=n.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?c=w:c=JSON.parse(w))}const x=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),b=(g=i.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");x&&b&&b.length>1&&(u=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,u=null,h=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var _;const x=await i.text();try{l=JSON.parse(x),Array.isArray(l)&&i.status===404&&(c=[],l=null,h=200,m="OK")}catch{i.status===404&&x===""?(h=204,m="No Content"):l={message:x}}if(l&&n.isMaybeSingle&&(!(l==null||(_=l.details)===null||_===void 0)&&_.includes("0 rows"))&&(l=null,h=200,m="OK"),l&&n.shouldThrowOnError)throw new n2(l)}return{error:l,data:c,count:u,status:h,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var l;let c="";const u=i==null?void 0:i.cause;if(u){var h,m,f,g;const _=(h=u==null?void 0:u.message)!==null&&h!==void 0?h:"",x=(m=u==null?void 0:u.code)!==null&&m!==void 0?m:"";c=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,c+=`

Caused by: ${(g=u==null?void 0:u.name)!==null&&g!==void 0?g:"Error"}: ${_}`,x&&(c+=` (${x})`),u!=null&&u.stack&&(c+=`
${u.stack}`)}else{var v;c=(v=i==null?void 0:i.stack)!==null&&v!==void 0?v:""}return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},A$=class extends L${select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const $b=new RegExp("[,()]");var Ya=class extends A${eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&$b.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&$b.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},O$=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",l),r&&this.headers.append("Prefer",`count=${r}`),new Ya({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ya({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ya({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Ya({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Ya({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},D$=class r2{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new O$(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new r2(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var l;let c;const u=new URL(`${this.url}/rpc/${t}`);let h;r||s?(c=r?"HEAD":"GET",Object.entries(n).filter(([f,g])=>g!==void 0).map(([f,g])=>[f,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([f,g])=>{u.searchParams.append(f,g)})):(c="POST",h=n);const m=new Headers(this.headers);return i&&m.set("Prefer",`count=${i}`),new Ya({method:c,url:u,headers:m,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class s2{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const $$="2.89.0",z$=`realtime-js/${$$}`,i2="1.0.0",B$="2.0.0",zb=i2,Kv=1e4,F$=1e3,U$=100;var Wi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Wi||(Wi={}));var Nn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Nn||(Nn={}));var gs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(gs||(gs={}));var Yv;(function(e){e.websocket="websocket"})(Yv||(Yv={}));var Ho;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ho||(Ho={}));class W${constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,r){var s,i;const l=t.topic,c=(s=t.ref)!==null&&s!==void 0?s:"",u=(i=t.join_ref)!==null&&i!==void 0?i:"",h=t.payload.event,m=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(m).length===0?"":JSON.stringify(m);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+c.length+l.length+h.length+f.length,v=new ArrayBuffer(this.HEADER_LENGTH+g);let _=new DataView(v),x=0;_.setUint8(x++,this.KINDS.userBroadcastPush),_.setUint8(x++,u.length),_.setUint8(x++,c.length),_.setUint8(x++,l.length),_.setUint8(x++,h.length),_.setUint8(x++,f.length),_.setUint8(x++,n),Array.from(u,w=>_.setUint8(x++,w.charCodeAt(0))),Array.from(c,w=>_.setUint8(x++,w.charCodeAt(0))),Array.from(l,w=>_.setUint8(x++,w.charCodeAt(0))),Array.from(h,w=>_.setUint8(x++,w.charCodeAt(0))),Array.from(f,w=>_.setUint8(x++,w.charCodeAt(0)));var b=new Uint8Array(v.byteLength+r.byteLength);return b.set(new Uint8Array(v),0),b.set(new Uint8Array(r),v.byteLength),b.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,i,l,c,u]=r;return n({join_ref:s,ref:i,topic:l,event:c,payload:u})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2),l=n.getUint8(3),c=n.getUint8(4);let u=this.HEADER_LENGTH+4;const h=r.decode(t.slice(u,u+s));u=u+s;const m=r.decode(t.slice(u,u+i));u=u+i;const f=r.decode(t.slice(u,u+l));u=u+l;const g=t.slice(u,t.byteLength),v=c===this.JSON_ENCODING?JSON.parse(r.decode(g)):g,_={type:this.BROADCAST_EVENT,event:m,payload:v};return l>0&&(_.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class o2{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Bt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Bt||(Bt={}));const Bb=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=H$(l,e,t,s),i),{}):{}},H$=(e,t,n,r)=>{const s=t.find(c=>c.name===e),i=s==null?void 0:s.type,l=n[e];return i&&!r.includes(i)?a2(i,l):Jv(l)},a2=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return q$(t,n)}switch(e){case Bt.bool:return V$(t);case Bt.float4:case Bt.float8:case Bt.int2:case Bt.int4:case Bt.int8:case Bt.numeric:case Bt.oid:return G$(t);case Bt.json:case Bt.jsonb:return Z$(t);case Bt.timestamp:return K$(t);case Bt.abstime:case Bt.date:case Bt.daterange:case Bt.int4range:case Bt.int8range:case Bt.money:case Bt.reltime:case Bt.text:case Bt.time:case Bt.timestamptz:case Bt.timetz:case Bt.tsrange:case Bt.tstzrange:return Jv(t);default:return Jv(t)}},Jv=e=>e,V$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},G$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Z$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},q$=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const l=e.slice(1,n);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(c=>a2(t,c))}return e},K$=e=>typeof e=="string"?e.replace(" ","T"):e,l2=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Qp{constructor(t,n,r={},s=Kv){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Xv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Xv||(Xv={}));class wl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wl.syncState(this.state,s,i,l),this.pendingDiffs.forEach(u=>{this.state=wl.syncDiff(this.state,u,i,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=wl.syncDiff(this.state,s,i,l),c())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),l=this.transformState(n),c={},u={};return this.map(i,(h,m)=>{l[h]||(u[h]=m)}),this.map(l,(h,m)=>{const f=i[h];if(f){const g=m.map(b=>b.presence_ref),v=f.map(b=>b.presence_ref),_=m.filter(b=>v.indexOf(b.presence_ref)<0),x=f.filter(b=>g.indexOf(b.presence_ref)<0);_.length>0&&(c[h]=_),x.length>0&&(u[h]=x)}else c[h]=m}),this.syncDiff(i,{joins:c,leaves:u},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(c,u)=>{var h;const m=(h=t[c])!==null&&h!==void 0?h:[];if(t[c]=this.cloneDeep(u),m.length>0){const f=t[c].map(v=>v.presence_ref),g=m.filter(v=>f.indexOf(v.presence_ref)<0);t[c].unshift(...g)}r(c,m,u)}),this.map(l,(c,u)=>{let h=t[c];if(!h)return;const m=u.map(f=>f.presence_ref);h=h.filter(f=>m.indexOf(f.presence_ref)<0),t[c]=h,s(c,h,u),h.length===0&&delete t[c]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Qv||(Qv={}));var _l;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(_l||(_l={}));var Os;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Os||(Os={}));class Ko{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Qp(this,gs.join,this.params,this.timeout),this.rejoinTimer=new o2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gs.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new wl(this),this.broadcastEndpointURL=l2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Nn.closed){const{config:{broadcast:l,presence:c,private:u}}=this.params,h=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[_l.PRESENCE]&&this.bindings[_l.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},g={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:h,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(Os.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Os.CLOSED)),this.updateJoinPayload(Object.assign({config:g},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){t==null||t(Os.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(_=x==null?void 0:x.length)!==null&&_!==void 0?_:0,w=[];for(let S=0;S<b;S++){const k=x[S],{filter:{event:j,schema:T,table:R,filter:E}}=k,B=v&&v[S];if(B&&B.event===j&&Ko.isFilterValueEqual(B.schema,T)&&Ko.isFilterValueEqual(B.table,R)&&Ko.isFilterValueEqual(B.filter,E))w.push(Object.assign(Object.assign({},k),{id:B.id}));else{this.unsubscribe(),this.state=Nn.errored,t==null||t(Os.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(Os.SUBSCRIBED);return}}).receive("error",v=>{this.state=Nn.errored,t==null||t(Os.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Os.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Nn.joined&&t===_l.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let u=c.statusText;try{const h=await c.json();u=h.error||h.message||u}catch{}return Promise.reject(new Error(u))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=t,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,c,u;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Nn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Qp(this,gs.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Qp(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>U$){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const l=t.toLocaleLowerCase(),{close:c,error:u,leave:h,join:m}=gs;if(r&&[c,u,h,m].indexOf(l)>=0&&r!==this._joinRef())return;let g=this._onMessage(l,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var _,x,b;return((_=v.filter)===null||_===void 0?void 0:_.event)==="*"||((b=(x=v.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===l}).map(v=>v.callback(g,r)):(i=this.bindings[l])===null||i===void 0||i.filter(v=>{var _,x,b,w,S,k;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const j=v.id,T=(_=v.filter)===null||_===void 0?void 0:_.event;return j&&((x=n.ids)===null||x===void 0?void 0:x.includes(j))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(S=(w=v==null?void 0:v.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return j==="*"||j===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof g=="object"&&"ids"in g){const _=g.data,{schema:x,table:b,commit_timestamp:w,type:S,errors:k}=_;g=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:w,eventType:S,new:{},old:{},errors:k}),this._getPayloadRecords(_))}v.callback(g,r)})}_isClosed(){return this.state===Nn.closed}_isJoined(){return this.state===Nn.joined}_isJoining(){return this.state===Nn.joining}_isLeaving(){return this.state===Nn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ko.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(gs.close,{},t)}_onError(t){this._on(gs.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Bb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Bb(t.columns,t.old_record)),n}}const eg=()=>{},ih={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Y$=[1e3,2e3,5e3,1e4],J$=1e4,X$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class c2{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kv,this.transport=null,this.heartbeatIntervalMs=ih.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eg,this.ref=0,this.reconnectTimer=null,this.vsn=zb,this.logger=eg,this.conn=null,this.sendBuffer=[],this.serializer=new W$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Yv.websocket}`,this.httpEndpoint=l2(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=s2.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wi.connecting:return Ho.Connecting;case Wi.open:return Ho.Open;case Wi.closing:return Ho.Closing;default:return Ho.Closed}}isConnected(){return this.connectionState()===Ho.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Ko(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,l=()=>{this.encode(t,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(F$,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ih.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:l}=n,c=l?`(${l})`:"",u=i.status||"";this.log("receive",`${u} ${r} ${s} ${c}`.trim(),i),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,i,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Wi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Wi.open||this.conn.readyState===Wi.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(gs.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([X$],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:z$};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(gs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new o2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ih.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,l,c,u,h,m,f,g,v;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Kv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ih.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=t==null?void 0:t.heartbeatCallback)!==null&&c!==void 0?c:eg,this.vsn=(u=t==null?void 0:t.vsn)!==null&&u!==void 0?u:zb,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:_=>Y$[_-1]||J$,this.vsn){case i2:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:(_,x)=>x(JSON.stringify(_)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(_,x)=>x(JSON.parse(_));break;case B$:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Lu=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Q$(e,t,n){const r=new URL(t,e);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function e6(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function t6(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:l}){const c=Q$(e.baseUrl,r,s),u=await e6(e.auth),h=await t(c,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...u,...l},body:i?JSON.stringify(i):void 0}),m=await h.text(),f=(h.headers.get("content-type")||"").includes("application/json"),g=f&&m?JSON.parse(m):m;if(!h.ok){const v=f?g:void 0,_=v==null?void 0:v.error;throw new Lu((_==null?void 0:_.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:v})}return{status:h.status,headers:h.headers,data:g}}}}function oh(e){return e.join("")}var n6=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:oh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oh(e.namespace)}`}),!0}catch(t){if(t instanceof Lu&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Lu&&n.status===409)return;throw n}}};function Wa(e){return e.join("")}var r6=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wa(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wa(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wa(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wa(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wa(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wa(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Lu&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Lu&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},s6=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=t6({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new n6(this.client,t),this.tableOps=new r6(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},km=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Qt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var i6=class extends km{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ey=class extends km{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const t0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),o6=()=>Response,ty=e=>{if(Array.isArray(e))return e.map(n=>ty(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=ty(r)}),t},a6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},l6=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function c6(e,t){if(Au(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u6(e){var t=c6(e,"string");return Au(t)=="symbol"?t:t+""}function d6(e,t,n){return(t=u6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fb(Object(n),!0).forEach(function(r){d6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const tg=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},h6=async(e,t,n)=>{e instanceof await o6()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,i=(r==null?void 0:r.statusCode)||s+"";t(new i6(tg(r),s,i))}).catch(r=>{t(new ey(tg(r),r))}):t(new ey(tg(e),e))},f6=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(a6(r)?(s.headers=Ye({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Ye(Ye({},s),n))};async function cd(e,t,n,r,s,i){return new Promise((l,c)=>{e(n,f6(t,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>l(u)).catch(u=>h6(u,c,r))})}async function Ou(e,t,n,r){return cd(e,"GET",t,n,r)}async function hs(e,t,n,r,s){return cd(e,"POST",t,r,s,n)}async function ny(e,t,n,r,s){return cd(e,"PUT",t,r,s,n)}async function m6(e,t,n,r){return cd(e,"HEAD",t,Ye(Ye({},n),{},{noResolveJson:!0}),r)}async function n0(e,t,n,r,s){return cd(e,"DELETE",t,r,s,n)}var p6=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}}};let u2;u2=Symbol.toStringTag;var g6=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[u2]="BlobDownloadBuilder",this.promise=null}asStream(){return new p6(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Qt(t))return{data:null,error:t};throw t}}};const v6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ub={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var y6=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=t0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let i;const l=Ye(Ye({},Ub),r);let c=Ye(Ye({},s.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const u=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),u&&i.append("metadata",s.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",l.cacheControl),u&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(u))):(i=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,u&&(c["x-metadata"]=s.toBase64(s.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(c=Ye(Ye({},c),r.headers));const h=s._removeEmptyFolders(t),m=s._getFinalPath(h),f=await(e=="PUT"?ny:hs)(s.fetch,`${s.url}/object/${m}`,i,Ye({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Qt(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const i=s._removeEmptyFolders(e),l=s._getFinalPath(i),c=new URL(s.url+`/object/upload/sign/${l}`);c.searchParams.set("token",t);try{let u;const h=Ye({upsert:Ub.upsert},r),m=Ye(Ye({},s.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",h.cacheControl)):(u=n,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType),{data:{path:i,fullPath:(await ny(s.fetch,c.toString(),u,{headers:m})).Key},error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(Qt(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=Ye({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await hs(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(n.url+i.url),c=l.searchParams.get("token");if(!c)throw new km("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await hs(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Qt(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await hs(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Qt(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),i=await hs(r.fetch,`${r.url}/object/sign/${s}`,Ye({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Qt(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await hs(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Ye(Ye({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Qt(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(e),l=()=>Ou(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new g6(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:ty(await Ou(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await m6(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Qt(r)&&r instanceof ey){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${c}`)}}}async remove(e){var t=this;try{return{data:await n0(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=Ye(Ye(Ye({},v6),t),{},{prefix:e||""});return{data:await hs(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Qt(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=Ye({},e);return{data:await hs(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const d2="2.89.0",h2={"X-Client-Info":`storage-js/${d2}`};var x6=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Ye(Ye({},h2),t),this.fetch=t0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Ou(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Ou(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await hs(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await ny(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Qt(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await hs(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await n0(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},w6=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ye(Ye({},h2),t),this.fetch=t0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await hs(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Ou(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await n0(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!l6(e))throw new km("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new s6({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const l=s[i];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(s,c),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}}}})}};const r0={"X-Client-Info":`storage-js/${d2}`,"Content-Type":"application/json"};var f2=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Er(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var ng=class extends f2{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_6=class extends f2{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const s0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),b6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Wb=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),S6=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";t(new ng(Wb(i),r,l))}).catch(()=>{const i=r+"";t(new ng(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";t(new ng(s.statusText||`HTTP ${r} error`,r,i))}}else t(new _6(Wb(e),e))},N6=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(b6(r)?(s.headers=Ye({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Ye(Ye({},s),n)):s};async function k6(e,t,n,r,s,i){return new Promise((l,c)=>{e(n,N6(t,r,s,i)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;const h=u.headers.get("content-type");return!h||!h.includes("application/json")?{}:u.json()}).then(u=>l(u)).catch(u=>S6(u,c,r))})}async function Tr(e,t,n,r,s){return k6(e,"POST",t,r,s,n)}var C6=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ye(Ye({},r0),t),this.fetch=s0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Tr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await Tr(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Er(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await Tr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await Tr(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Er(r))return{data:null,error:r};throw r}}},j6=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ye(Ye({},r0),t),this.fetch=s0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Tr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await Tr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Tr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await Tr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Tr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}},E6=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ye(Ye({},r0),t),this.fetch=s0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Tr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Tr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await Tr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Tr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Er(n))return{data:null,error:n};throw n}}},T6=class extends E6{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new P6(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},P6=class extends C6{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Ye(Ye({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Ye(Ye({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new M6(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},M6=class extends j6{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Ye(Ye({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Ye(Ye({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Ye(Ye({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Ye(Ye({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Ye(Ye({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},I6=class extends x6{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new y6(this.url,this.headers,e,this.fetch)}get vectors(){return new T6(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new w6(this.url+"/iceberg",this.headers,this.fetch)}};const m2="2.89.0",Ja=30*1e3,ry=3,rg=ry*Ja,R6="http://localhost:9999",L6="supabase.auth.token",A6={"X-Client-Info":`gotrue-js/${m2}`},sy="X-Supabase-Api-Version",p2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},O6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,D6=10*60*1e3;class Jl extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ae(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class g2 extends Jl{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function v2(e){return Ae(e)&&e.name==="AuthApiError"}class Gi extends Jl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ni extends Jl{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class ur extends ni{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y2(e){return Ae(e)&&e.name==="AuthSessionMissingError"}class Bo extends ni{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zc extends ni{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class qc extends ni{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function x2(e){return Ae(e)&&e.name==="AuthImplicitGrantRedirectError"}class iy extends ni{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class w2 extends ni{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bf extends ni{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Ph(e){return Ae(e)&&e.name==="AuthRetryableFetchError"}class oy extends ni{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Sf extends ni{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hb=` 	
\r=`.split(""),$6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Hb.length;t+=1)e[Hb[t].charCodeAt(0)]=-2;for(let t=0;t<Nf.length;t+=1)e[Nf[t].charCodeAt(0)]=t;return e})();function Vb(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Nf[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Nf[r]),t.queuedBits-=6}}function _2(e,t,n){const r=$6[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Gb(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{F6(l,r,n)};for(let l=0;l<e.length;l+=1)_2(e.charCodeAt(l),s,i);return t.join("")}function z6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function B6(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}z6(r,t)}}function F6(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function bl(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)_2(e.charCodeAt(s),n,r);return new Uint8Array(t)}function U6(e){const t=[];return B6(e,n=>t.push(n)),new Uint8Array(t)}function Yo(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Vb(s,n,r)),Vb(null,n,r),t.join("")}function W6(e){return Math.round(Date.now()/1e3)+e}function H6(){return Symbol("auth-callback")}const Ln=()=>typeof window<"u"&&typeof document<"u",Ao={tested:!1,writable:!1},b2=()=>{if(!Ln())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ao.tested)return Ao.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ao.tested=!0,Ao.writable=!0}catch{Ao.tested=!0,Ao.writable=!1}return Ao.writable};function V6(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const S2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),G6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Xa=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Oo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Rn=async(e,t)=>{await e.removeItem(t)};class Cm{constructor(){this.promise=new Cm.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Cm.promiseConstructor=Promise;function sg(e){const t=e.split(".");if(t.length!==3)throw new Sf("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!O6.test(t[r]))throw new Sf("JWT not in base64url format");return{header:JSON.parse(Gb(t[0])),payload:JSON.parse(Gb(t[1])),signature:bl(t[2]),raw:{header:t[0],payload:t[1]}}}async function Z6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function q6(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){r(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function K6(e){return("0"+e.toString(16)).substr(-2)}function Y6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,K6).join("")}async function J6(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function X6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await J6(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ha(e,t,n=!1){const r=Y6();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Xa(e,`${t}-code-verifier`,s);const i=await X6(r);return[i,r===i?"plain":"s256"]}const Q6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ez(e){const t=e.headers.get(sy);if(!t||!t.match(Q6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function tz(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function nz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Va(e){if(!rz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ig(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sz(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Zb(e){return JSON.parse(JSON.stringify(e))}const Fo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iz=[502,503,504];async function qb(e){var t;if(!G6(e))throw new bf(Fo(e),0);if(iz.includes(e.status))throw new bf(Fo(e),e.status);let n;try{n=await e.json()}catch(i){throw new Gi(Fo(i),i)}let r;const s=ez(e);if(s&&s.getTime()>=p2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new oy(Fo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ur}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new oy(Fo(n),e.status,n.weak_password.reasons);throw new g2(Fo(n),e.status||500,r)}const oz=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ke(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[sy]||(i[sy]=p2["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",u=await az(e,t,n+c,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function az(e,t,n,r,s,i){const l=oz(t,r,s,i);let c;try{c=await e(n,Object.assign({},l))}catch(u){throw console.error(u),new bf(Fo(u),0)}if(c.ok||await qb(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(u){await qb(u)}}function cs(e){var t;let n=null;uz(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=W6(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Kb(e){const t=cs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function lz(e){return{data:e,error:null}}function cz(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,l=fc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},l);return{data:{properties:c,user:u},error:null}}function Yb(e){return e}function uz(e){return e.access_token&&e.refresh_token&&e.expires_in}const Mh=["global","local","others"];class N2{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=S2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Mh[0]){if(Mh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mh.join(", ")}`);try{return await Ke(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Zi})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=fc(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:cz,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ae(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ke(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zi})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,l,c,u;try{const h={nextPage:null,lastPage:0,total:0},m=await Ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Yb});if(m.error)throw m.error;const f=await m.json(),g=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(u=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(_=>{const x=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(_.split(";")[1].split("=")[1]);h[`${b}Page`]=x}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},f),h),error:null}}catch(h){if(Ae(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Va(t);try{return await Ke(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zi})}catch(n){if(Ae(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Va(t);try{return await Ke(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Zi})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Va(t);try{return await Ke(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Zi})}catch(r){if(Ae(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Va(t.userId);try{const{data:n,error:r}=await Ke(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Va(t.userId),Va(t.id);try{return{data:await Ke(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,l,c,u;try{const h={nextPage:null,lastPage:0,total:0},m=await Ke(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Yb});if(m.error)throw m.error;const f=await m.json(),g=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(u=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(_=>{const x=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(_.split(";")[1].split("=")[1]);h[`${b}Page`]=x}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},f),h),error:null}}catch(h){if(Ae(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await Ke(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ke(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Ke(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ae(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Ke(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ae(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ke(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ae(n))return{data:null,error:n};throw n}}}function Jb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Uo={debug:!!(globalThis&&b2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class k2 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class C2 extends k2{}async function j2(e,t,n){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new C2(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Uo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function dz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function E2(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function hz(e){return parseInt(e,16)}function fz(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function mz(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:c,requestId:u,resources:h,scheme:m,uri:f,version:g}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=E2(e.address),_=m?`${m}://${r}`:r,x=e.statement?`${e.statement}
`:"",b=`${_} wants you to sign in with your Ethereum account:
${v}

${x}`;let w=`URI: ${f}
Version: ${g}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),c&&(w+=`
Not Before: ${c.toISOString()}`),u&&(w+=`
Request ID: ${u}`),h){let S=`
Resources:`;for(const k of h){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);S+=`
- ${k}`}w+=S}return`${b}
${w}`}class vn extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class kf extends vn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function pz({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new vn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new vn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new vn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new vn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new vn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new vn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new vn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new vn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(T2(l)){if(i.rp.id!==l)return new vn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new vn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new vn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new vn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new vn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function gz({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new vn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new vn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(T2(r)){if(n.rpId!==r)return new vn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new vn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new vn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new vn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class vz{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const yz=new vz;function xz(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=fc(e,["challenge","user","excludeCredentials"]),i=bl(t).buffer,l=Object.assign(Object.assign({},n),{id:bl(n.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:i,user:l});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const h=r[u];c.excludeCredentials[u]=Object.assign(Object.assign({},h),{id:bl(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return c}function wz(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=fc(e,["challenge","allowCredentials"]),s=bl(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];i.allowCredentials[l]=Object.assign(Object.assign({},c),{id:bl(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return i}function _z(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Yo(new Uint8Array(e.response.attestationObject)),clientDataJSON:Yo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Yo(new Uint8Array(s.authenticatorData)),clientDataJSON:Yo(new Uint8Array(s.clientDataJSON)),signature:Yo(new Uint8Array(s.signature)),userHandle:s.userHandle?Yo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function T2(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Xb(){var e,t;return!!(Ln()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Sz(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kf("Browser returned unexpected credential type",t)}:{data:null,error:new kf("Empty credential response",t)}}catch(t){return{data:null,error:pz({error:t,options:e})}}}async function Nz(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kf("Browser returned unexpected credential type",t)}:{data:null,error:new kf("Empty credential response",t)}}catch(t){return{data:null,error:gz({error:t,options:e})}}}const kz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Cz={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Cf(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))r[i]=l;else if(n(l))r[i]=l;else if(t(l)){const c=r[i];t(c)?r[i]=Cf(c,l):r[i]=Cf(l)}else r[i]=l}return r}function jz(e,t){return Cf(kz,e,t||{})}function Ez(e,t){return Cf(Cz,e,t||{})}class Tz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:c};const u=s??yz.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=jz(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:m,error:f}=await Sz({publicKey:h,signal:u});return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:f}}case"request":{const h=Ez(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:m,error:f}=await Nz(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:u}));return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:f}}}}catch(l){return Ae(l)?{data:null,error:l}:{data:null,error:new Gi("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Jl("rpId is required for WebAuthn authentication")};try{if(!Xb())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!l)return{data:null,error:c};const{webauthn:u}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(l){return Ae(l)?{data:null,error:l}:{data:null,error:new Gi("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Jl("rpId is required for WebAuthn registration")};try{if(!Xb())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(m=>{var f;return(f=m.data)===null||f===void 0?void 0:f.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:c};const{data:u,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return u?this._verify({factorId:l.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Ae(l)?{data:null,error:l}:{data:null,error:new Gi("Unexpected error in register",l)}}}}dz();const Pz={url:R6,storageKey:L6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:A6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Qb(e,t,n){return await n()}const Ga={};class Xl{get jwks(){var t,n;return(n=(t=Ga[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ga[this.storageKey]=Object.assign(Object.assign({},Ga[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ga[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ga[this.storageKey]=Object.assign(Object.assign({},Ga[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Pz),t);if(this.storageKey=i.storageKey,this.instanceID=(n=Xl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Xl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ln()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new N2({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=S2(i.fetch),this.lock=i.lock||Qb,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Ln()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=j2:this.lock=Qb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Tz(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:b2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jb(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Jb(this.memoryStorage)),Ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${m2}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Ln()&&(n=V6(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Ln()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),x2(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ae(n)?this._returnResult({error:n}):this._returnResult({error:new Gi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:cs}),{data:l,error:c}=i;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(Ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:m,password:f,options:g}=t;let v=null,_=null;this.flowType==="pkce"&&([v,_]=await Ha(this.storage,this.storageKey)),i=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:m,password:f,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:_},xform:cs})}else if("phone"in t){const{phone:m,password:f,options:g}=t;i=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:f,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:cs})}else throw new Zc("You must provide either an email or phone number and a password");const{data:l,error:c}=i;if(c||!l)return await Rn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),Ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:l,options:c}=t;n=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Kb})}else if("phone"in t){const{phone:i,password:l,options:c}=t;n=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Kb})}else throw new Zc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Bo;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,l,c,u,h,m,f,g;let v,_;if("message"in t)v=t.message,_=t.signature;else{const{chain:x,wallet:b,statement:w,options:S}=t;let k;if(Ln())if(typeof b=="object")k=b;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")k=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=b}const j=new URL((n=S==null?void 0:S.url)!==null&&n!==void 0?n:window.location.href),T=await k.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=E2(T[0]);let E=(r=S==null?void 0:S.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const q=await k.request({method:"eth_chainId"});E=hz(q)}const B={domain:j.host,address:R,statement:w,uri:j.href,version:"1",chainId:E,nonce:(s=S==null?void 0:S.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=S==null?void 0:S.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=S==null?void 0:S.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(u=S==null?void 0:S.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(h=S==null?void 0:S.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(m=S==null?void 0:S.signInWithEthereum)===null||m===void 0?void 0:m.resources};v=mz(B),_=await k.request({method:"personal_sign",params:[fz(v),R]})}try{const{data:x,error:b}=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:_},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:cs});if(b)throw b;if(!x||!x.session||!x.user){const w=new Bo;return this._returnResult({data:{user:null,session:null},error:w})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(Ae(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var n,r,s,i,l,c,u,h,m,f,g,v;let _,x;if("message"in t)_=t.message,x=t.signature;else{const{chain:b,wallet:w,statement:S,options:k}=t;let j;if(Ln())if(typeof w=="object")j=w;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))j=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=w}const T=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const R=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),S?{statement:S}:null));let E;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")E=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)E=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)_=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),x=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${T.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=k==null?void 0:k.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((f=(m=k==null?void 0:k.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||f===void 0)&&f.length?["Resources",...k.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const R=await j.signMessage(new TextEncoder().encode(_),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=R}}try{const{data:b,error:w}=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Yo(x)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:cs});if(w)throw w;if(!b||!b.session||!b.user){const S=new Bo;return this._returnResult({data:{user:null,session:null},error:S})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if(Ae(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const n=await Oo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new w2;const{data:i,error:l}=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:cs});if(await Rn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!i||!i.session||!i.user){const c=new Bo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),Ae(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:l}=t,c=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:cs}),{data:u,error:h}=c;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u||!u.session||!u.user){const m=new Bo;return this._returnResult({data:{user:null,session:null},error:m})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:h})}catch(n){if(Ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,i,l;try{if("email"in t){const{email:c,options:u}=t;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Ha(this.storage,this.storageKey));const{error:f}=await Ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:c,options:u}=t,{data:h,error:m}=await Ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(l=u==null?void 0:u.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m})}throw new Zc("You must provide either an email or phone number.")}catch(c){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),Ae(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await Ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:cs});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,h=l.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(s){if(Ae(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,i,l;try{let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ha(this.storage,this.storageKey));const h=await Ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:lz});return!((i=h.data)===null||i===void 0)&&i.url&&Ln()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(c){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),Ae(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ur;const{error:s}=await Ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Ae(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:l}=await Ke(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:l,error:c}=await Ke(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new Zc("You must provide either an email or phone number and a type")}catch(n){if(Ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Oo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<rg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await Oo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=ig()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=sz(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await Ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zi}):await this._useSession(async n=>{var r,s,i;const{data:l,error:c}=n;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ur}:await Ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Zi})})}catch(n){if(Ae(n))return y2(n)&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new ur;const l=s.session;let c=null,u=null;this.flowType==="pkce"&&t.email!=null&&([c,u]=await Ha(this.storage,this.storageKey));const{data:h,error:m}=await Ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:Zi});if(m)throw m;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),Ae(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ur;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:l}=sg(t.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Ae(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:c}=n;if(c)throw c;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ur;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ae(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Ln())throw new qc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new qc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new iy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new iy("No code detected.");const{data:S,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:c,expires_at:u,token_type:h}=t;if(!i||!c||!l||!h)throw new qc("No session defined in URL");const m=Math.round(Date.now()/1e3),f=parseInt(c);let g=m+f;u&&(g=parseInt(u));const v=g-m;v*1e3<=Ja&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const _=g-f;m-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,g,m):m-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,g,m);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:g,refresh_token:l,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:t.type},error:null})}catch(r){if(Ae(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Oo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,t);if(c&&!(v2(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return t!=="others"&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=H6(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ha(this.storage,this.storageKey,!0));try{return await Ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),Ae(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var l,c,u,h,m;const{data:f,error:g}=i;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Ke(this.fetch,"GET",v,{headers:this.headers,jwt:(m=(h=f.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return Ln()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ae(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:l,provider:c,token:u,access_token:h,nonce:m}=t,f=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:u,access_token:h,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:cs}),{data:g,error:v}=f;return v?this._returnResult({data:{user:null,session:null},error:v}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new Bo}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:v}))}catch(s){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),Ae(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:l}=n;if(l)throw l;return await Ke(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await q6(async s=>(s>0&&await Z6(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:cs})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Ph(i)&&Date.now()+l-r<Ja})}catch(r){if(this._debug(n,"error",r),Ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Ln()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Oo(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Oo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Xa(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:ig()}else if(s&&!s.user&&!s.user){const l=await Oo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Rn(this.storage,this.storageKey+"-user"),await Xa(this.storage,this.storageKey,s)):s.user=ig()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rg;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${rg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Ph(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(s.access_token);!c&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Cm;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new ur;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={data:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(s,"error",i),Ae(i)){const l={data:null,error:i};return Ph(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,n)}catch(u){i.push(u)}});if(await Promise.all(l),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Rn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Xa(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Zb(s);await Xa(this.storage,this.storageKey,i)}else{const s=Zb(n);await Xa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Rn(this.storage,this.storageKey),await Rn(this.storage,this.storageKey+"-code-verifier"),await Rn(this.storage,this.storageKey+"-user"),this.userStorage&&await Rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ln()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ja);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ja);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ja}ms, refresh threshold is ${ry} ticks`),s<=ry&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof k2)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ln()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,l]=await Ha(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await Ke(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:h}=await Ke(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&u.type==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?_z(t.webauthn.credential_response):bz(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:u}=await Ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:u}))})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=await Ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:xz(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:wz(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=sg(r.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Ke(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ur})})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new ur});const l=await Ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Ln()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new ur});const l=await Ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Ln()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Ke(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ur})})}catch(t){if(Ae(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await Ke(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ur})})}catch(n){if(Ae(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(c=>c.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(c=>c.kid===t),r&&this.jwks_cached_at+D6>s)return r;const{data:i,error:l}=await Ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(c=>c.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:_}=await this.getSession();if(_||!v.session)return this._returnResult({data:null,error:_});r=v.session.access_token}const{header:s,payload:i,signature:l,raw:{header:c,payload:u}}=sg(r);n!=null&&n.allowExpired||tz(i.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:l},error:null}}const m=nz(s.alg),f=await crypto.subtle.importKey("jwk",h,m,!0,["verify"]);if(!await crypto.subtle.verify(m,f,l,U6(`${c}.${u}`)))throw new Sf("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(r){if(Ae(r))return this._returnResult({data:null,error:r});throw r}}}Xl.nextInstanceID={};const P2=Xl,Mz="2.89.0";let Kc="";typeof Deno<"u"?Kc="deno":typeof document<"u"?Kc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kc="react-native":Kc="node";const Iz={"X-Client-Info":`supabase-js-${Kc}/${Mz}`},Rz={headers:Iz},Lz={schema:"public"},Az={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Oz={};function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function Dz(e,t){if(Du(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Du(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $z(e){var t=Dz(e,"string");return Du(t)=="symbol"?t:t+""}function zz(e,t,n){return(t=$z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e1(Object(n),!0).forEach(function(r){zz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Bz=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Fz=()=>Headers,Uz=(e,t,n)=>{const r=Bz(n),s=Fz();return async(i,l)=>{var c;const u=(c=await t())!==null&&c!==void 0?c:e;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${u}`),r(i,ln(ln({},l),{},{headers:h}))}};function Wz(e){return e.endsWith("/")?e:e+"/"}function Hz(e,t){var n,r;const{db:s,auth:i,realtime:l,global:c}=e,{db:u,auth:h,realtime:m,global:f}=t,g={db:ln(ln({},u),s),auth:ln(ln({},h),i),realtime:ln(ln({},m),l),storage:{},global:ln(ln(ln({},f),c),{},{headers:ln(ln({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function Vz(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wz(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Gz=class extends P2{constructor(e){super(e)}},M2=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Vz(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const l=`sb-${i.hostname.split(".")[0]}-auth-token`,c={db:Lz,realtime:Oz,auth:ln(ln({},Az),{},{storageKey:l}),global:Rz},u=Hz(n??{},c);if(this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=u.auth)!==null&&h!==void 0?h:{},this.headers,u.global.fetch)}this.fetch=Uz(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(ln({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new D$(new URL("rest/v1",i).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new I6(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new R$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:l,lock:c,debug:u,throwOnError:h},m,f){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gz({url:this.authUrl.href,headers:ln(ln({},g),m),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:l,lock:c,debug:u,throwOnError:h,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new c2(this.realtimeUrl.href,ln(ln({},e),{},{params:ln(ln({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ay=(e,t,n)=>new M2(e,t,n);function Zz(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Zz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jf=Object.freeze(Object.defineProperty({__proto__:null,AuthApiError:g2,AuthClient:P2,AuthError:Jl,AuthImplicitGrantRedirectError:qc,AuthInvalidCredentialsError:Zc,AuthInvalidJwtError:Sf,AuthInvalidTokenResponseError:Bo,AuthPKCECodeVerifierMissingError:w2,AuthPKCEGrantCodeExchangeError:iy,AuthRetryableFetchError:bf,AuthSessionMissingError:ur,AuthUnknownError:Gi,AuthWeakPasswordError:oy,CustomAuthError:ni,get FunctionRegion(){return _f},FunctionsError:Nm,FunctionsFetchError:t2,FunctionsHttpError:qv,FunctionsRelayError:Zv,GoTrueAdminApi:N2,GoTrueClient:Xl,NavigatorLockAcquireTimeoutError:C2,PostgrestError:n2,get REALTIME_LISTEN_TYPES(){return _l},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Qv},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Xv},get REALTIME_SUBSCRIBE_STATES(){return Os},RealtimeChannel:Ko,RealtimeClient:c2,RealtimePresence:wl,SIGN_OUT_SCOPES:Mh,SupabaseClient:M2,WebSocketFactory:s2,createClient:ay,isAuthApiError:v2,isAuthError:Ae,isAuthImplicitGrantRedirectError:x2,isAuthRetryableFetchError:Ph,isAuthSessionMissingError:y2,lockInternals:Uo,navigatorLock:j2},Symbol.toStringTag,{value:"Module"})),$u="https://jftthfniwfarxyisszjh.supabase.co",zu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw";if(typeof window<"u"){const e=zu.length>0;console.log("[Supabase Client] Configuration:",{url:$u.substring(0,50)+"...",key:e?zu.substring(0,20)+"...":"MISSING",urlExists:!!$u,keyExists:e}),e||(console.error("[Supabase Client]  VITE_SUPABASE_PUBLISHABLE_KEY is missing!"),console.error("[Supabase Client] Please set it in .env file or run:"),console.error('[Supabase Client] localStorage.setItem("supabase_anon_key", "YOUR_KEY_HERE")'),console.error("[Supabase Client] Get your key from: https://supabase.com/dashboard/project/jftthfniwfarxyisszjh/settings/api"))}const xn=zu.length>0?ay($u,zu,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}):ay($u,"dummy-key-for-initialization",{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});typeof window<"u"&&$u&&zu&&xn.from("stop_notification_subscriptions").select("id").limit(1).then(({error:e})=>{e?console.error("[Supabase Client]  Connection test failed:",e):console.log("[Supabase Client]  Connection test successful")}).then(void 0,e=>{console.error("[Supabase Client]  Connection test error:",e)});const og="motionbus_saved_trips",I2="motionbus_push_endpoint";function t1(){try{return localStorage.getItem(I2)}catch{return null}}function qz(e){try{localStorage.setItem(I2,e)}catch(t){console.error("Failed to store push endpoint:",t)}}function i0(){const[e,t]=p.useState([]),[n,r]=p.useState(!0);p.useEffect(()=>{(async()=>{try{const v=localStorage.getItem(og);if(v){const x=JSON.parse(v);t(x)}const _=t1();if(_){const{data:x,error:b}=await xn.from("saved_trips").select("*").eq("push_endpoint",_);if(!b&&x){const w=x.map(T=>({id:T.id,origin:{stop_id:T.origin_stop_id,stop_name:T.origin_stop_name},destination:{stop_id:T.destination_stop_id,stop_name:T.destination_stop_name},journey:T.journey_data,departureDate:`${T.departure_date}T${T.departure_time}`,savedAt:T.created_at,reminderMinutes:T.reminder_minutes,syncedToServer:!0})),k=(v?JSON.parse(v):[]).filter(T=>!w.find(R=>R.id===T.id)),j=[...w,...k];t(j),localStorage.setItem(og,JSON.stringify(j))}}}catch(v){console.error("Failed to load saved trips:",v)}finally{r(!1)}})()},[]);const s=p.useCallback(g=>{try{localStorage.setItem(og,JSON.stringify(g))}catch(v){console.error("Failed to save trips:",v)}},[]),i=p.useCallback(async g=>{const v=t1();if(!v)return console.log("No push endpoint, skipping server sync"),!1;try{const _=new Date(g.departureDate),b=g.journey.legs.filter(S=>S.type==="bus").map(S=>{var k;return((k=S.route)==null?void 0:k.route_short_name)||""}).filter(Boolean),{data:w}=await xn.from("saved_trips").select("id").eq("id",g.id).maybeSingle();if(w){const{error:S}=await xn.from("saved_trips").update({push_endpoint:v,origin_stop_id:g.origin.stop_id,origin_stop_name:g.origin.stop_name,destination_stop_id:g.destination.stop_id,destination_stop_name:g.destination.stop_name,journey_data:JSON.parse(JSON.stringify(g.journey)),departure_date:_.toISOString().split("T")[0],departure_time:g.journey.departureTime,reminder_minutes:g.reminderMinutes||15,route_names:b,reminder_sent:!1}).eq("id",g.id);if(S)return console.error("Failed to update trip:",S),!1}else{const S={id:g.id,push_endpoint:v,origin_stop_id:g.origin.stop_id,origin_stop_name:g.origin.stop_name,destination_stop_id:g.destination.stop_id,destination_stop_name:g.destination.stop_name,journey_data:JSON.parse(JSON.stringify(g.journey)),departure_date:_.toISOString().split("T")[0],departure_time:g.journey.departureTime,reminder_minutes:g.reminderMinutes||15,route_names:b,reminder_sent:!1},{error:k}=await xn.from("saved_trips").insert([S]);if(k)return console.error("Failed to insert trip:",k),!1}return console.log("Trip synced to server:",g.id),!0}catch(_){return console.error("Error syncing trip:",_),!1}},[]),l=p.useCallback(async(g,v,_,x,b=15)=>{const w={id:`trip_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,origin:g,destination:v,journey:_,departureDate:x.toISOString(),savedAt:new Date().toISOString(),reminderMinutes:b,syncedToServer:!1};return t(k=>{const j=[w,...k];return s(j),j}),await i(w)&&t(k=>{const j=k.map(T=>T.id===w.id?{...T,syncedToServer:!0}:T);return s(j),j}),w},[s,i]),c=p.useCallback(async g=>{t(v=>{const _=v.filter(x=>x.id!==g);return s(_),_});try{await xn.from("saved_trips").delete().eq("id",g),console.log("Trip deleted from server:",g)}catch(v){console.error("Failed to delete trip from server:",v)}},[s]),u=p.useCallback(async(g,v)=>{t(_=>{const x=_.map(w=>w.id===g?{...w,reminderMinutes:v}:w);s(x);const b=x.find(w=>w.id===g);return b&&i(b),x})},[s,i]),h=p.useCallback(g=>e.find(v=>v.id===g),[e]),m=p.useCallback(()=>{const g=new Date;return e.filter(v=>{const _=new Date(v.departureDate),[x,b]=v.journey.departureTime.split(":").map(Number);return _.setHours(x,b,0,0),_>=g}).sort((v,_)=>{const x=new Date(v.departureDate),b=new Date(_.departureDate);return x.getTime()-b.getTime()})},[e]),f=p.useCallback(async()=>{const g=e.filter(v=>!v.syncedToServer);console.log(`Syncing ${g.length} unsynced trips...`);for(const v of g)await i(v)},[e,i]);return{savedTrips:e,isLoading:n,saveTrip:l,deleteTrip:c,updateTripReminder:u,getTripById:h,getUpcomingTrips:m,syncAllTrips:f}}function ly(e){const t=new Date(e.departureDate),[n,r]=e.journey.departureTime.split(":").map(Number);t.setHours(n,r,0,0);const s=new Date(e.departureDate),[i,l]=e.journey.arrivalTime.split(":").map(Number);s.setHours(i,l,0,0),s<t&&s.setDate(s.getDate()+1);const c=_=>_.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",h=e.journey.legs.filter(_=>_.type==="bus").map(_=>{var x;return(x=_.route)==null?void 0:x.route_short_name}).join("  "),m=encodeURIComponent(` ${h}: ${e.origin.stop_name}  ${e.destination.stop_name}`),f=[`: ${e.origin.stop_name}  ${e.destination.stop_name}`,`: ${e.journey.departureTime}`,`: ${e.journey.arrivalTime}`,`: ${e.journey.totalDurationMinutes} `,""];e.journey.legs.forEach((_,x)=>{var b,w,S,k;_.type==="walk"?(f.push(`${x+1}.   ${_.walkingMinutes}  (${_.walkingMeters})`),_.fromLocation&&_.toLocation&&f.push(`   ${_.fromLocation.name}  ${_.toLocation.name}`)):_.type==="bus"&&(f.push(`${x+1}.  ${(b=_.route)==null?void 0:b.route_short_name} - ${(w=_.route)==null?void 0:w.route_long_name}`),f.push(`   : ${(S=_.fromStop)==null?void 0:S.stop_name} (${_.departureTime})`),f.push(`   : ${(k=_.toStop)==null?void 0:k.stop_name} (${_.arrivalTime})`),_.stopCount&&f.push(`   ${_.stopCount} `))});const g=encodeURIComponent(f.join(`
`)),v=encodeURIComponent(e.origin.stop_name);return`https://www.google.com/calendar/render?action=TEMPLATE&text=${m}&dates=${c(t)}/${c(s)}&details=${g}&location=${v}`}const cy="BG5VfDXkytFaecTL-oWSCnIRZHVg1p9fwPaRsmA1rsPS6U4EY6G-RGvt78VFVO0lb8CQJd0SrUmfwbz_vCMbmlw";console.log("[usePushSubscription] Using DIRECT Verified VAPID Key:",cy.substring(0,10)+"...");const Kz="v1.5.17.9.4",$c=async(e,t,n)=>{try{await xn.from("notifications_log").insert({stop_id:e||"DIAGNOSTIC",route_id:"DIAGNOSTIC_V2",alert_level:0,metadata:{...n,step:t,version:Kz,timestamp:new Date().toISOString()}})}catch(r){console.error("[usePushSubscription Diagnostic] Failed:",r)}};function n1(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}function Yz(){const e=navigator.userAgent.match(/OS (\d+)_/);return e?parseInt(e[1],10):null}function ah(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}function zc(){return window.matchMedia("(display-mode: standalone)").matches||"standalone"in window.navigator&&window.navigator.standalone===!0}function jm(){const[e,t]=p.useState(!1),[n,r]=p.useState(!1),[s,i]=p.useState(!0),[l,c]=p.useState([]),[u,h]=p.useState(null);p.useEffect(()=>{(async()=>{if(ah()){const _=Yz(),x=zc();if(console.log("iOS detected, version:",_,"standalone:",x),_&&_<16.4){console.log("iOS version too old for Web Push notifications (min 16.4)"),r(!1),h("needs-update"),i(!1);return}if(x)h("supported");else{console.log("iOS Safari not in PWA mode - client-side notifications only"),r(!0),h("needs-install"),i(!1);return}}if(!("serviceWorker"in navigator)){console.log("Service Worker not supported"),r(!1),i(!1);return}if(!("PushManager"in window)){console.log("PushManager not supported"),r(!1),i(!1);return}if(r(!0),ah()&&!zc()){const _=localStorage.getItem("push_subscription_routes");if(_)try{const x=JSON.parse(_);t(!0),c(x),console.log("iOS Safari - client-side subscription found:",x)}catch(x){console.error("Error parsing saved routes:",x)}i(!1);return}try{const _=await navigator.serviceWorker.getRegistrations();if(_.length===0){console.log("No service worker registration found - waiting for main.tsx to register"),i(!1);return}const x=_[0];console.log("Using existing service worker registration:",x.scope);let b=x;if(!x.active){console.log("Service worker not active yet, waiting...");try{b=await navigator.serviceWorker.ready}catch{console.log("Service worker not ready, will check later"),i(!1);return}}const w=await b.pushManager.getSubscription();if(console.log("Existing subscription:",w),w){t(!0);const S=localStorage.getItem("push_subscribed_routes");if(S)try{c(JSON.parse(S))}catch(k){console.error("Error parsing stored routes:",k)}}}catch(_){console.error("Error checking subscription:",_)}i(!1)})()},[]);const m=p.useCallback(async(v=[])=>{var _,x;if(!n)return tt({title:" ",description:"  push      ",variant:"destructive"}),!1;try{if(i(!0),await $c(v[0]||"GENERAL","ATTEMPT_START",{standalone:zc(),ua:navigator.userAgent,routeIds:v}),!("Notification"in window))return tt({title:" ",description:" Notification API       browser",variant:"destructive"}),i(!1),!1;if(console.log("Current notification permission:",Notification.permission),Notification.permission==="denied")return tt({title:" ",description:"   .     browser   refresh.",variant:"destructive"}),i(!1),!1;const b=await Notification.requestPermission();if(console.log("Permission result after request:",b),await $c(v[0]||"GENERAL","PERMISSION_RESULT",{permission:b,platform:"Web",href:window.location.href}),b!=="granted")return tt({title:" ",description:` : ${b}.     browser.`,variant:"destructive"}),i(!1),!1;if(ah()&&!zc())return console.log("iOS Safari - enabling client-side notifications only"),localStorage.setItem("push_subscription_routes",JSON.stringify(v)),t(!0),c(v),tt({title:"  ",description:"     app   (Safari - client-side only)"}),i(!1),!0;const w=await navigator.serviceWorker.getRegistrations();if(w.length===0||!w[0].active)return console.warn("No active service worker found"),await $c(v[0]||"GENERAL","SW_FAILED",{reason:"NO_ACTIVE_SW"}),tt({title:"Service Worker   ",description:"  2-3    ",variant:"destructive"}),i(!1),!1;const S=w[0],k=await S.pushManager.getSubscription();if(k){console.log("Removing existing subscription before creating new one");try{await k.unsubscribe()}catch(A){console.log("Failed to unsubscribe existing, continuing anyway:",A)}}let j;try{console.log("Attempting subscription with Uint8Array key..."),j=await S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n1(cy)})}catch(A){console.warn("Subscription with Uint8Array failed, retrying with ArrayBuffer...",A);try{j=await S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n1(cy).buffer}),console.log("Subscription with ArrayBuffer succeeded!")}catch(W){throw console.error("Retry with ArrayBuffer also failed:",W),A}}console.log("Push subscription:",j),await $c(v[0]||"GENERAL","SUB_CREATED",{endpoint:j.endpoint});const T=new URL(j.endpoint);if(T.hostname.includes("wns.")||T.hostname.includes("notify.windows.com"))return console.warn(" WNS endpoint detected - WNS doesn't support Web Push. Unsubscribing..."),await j.unsubscribe(),tt({title:" Push notifications not supported",description:"Your browser is using WNS which doesn't support Web Push. Please use Chrome, Firefox, or Edge (Chromium) with FCM endpoints.",variant:"destructive"}),i(!1),!1;const R=j.getKey("p256dh"),E=j.getKey("auth");if(!R||!E)throw new Error("Failed to get subscription keys");const B=btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(R)))),q=btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(E))));console.log("Saving subscription to database:",j.endpoint.substring(0,50)+"...");const{data:Y,error:te}=await xn.from("push_subscriptions").upsert({endpoint:j.endpoint,p256dh:B,auth:q,route_ids:v},{onConflict:"endpoint"}).select();if(console.log("Database save result:",{data:Y,error:te}),te)throw te;return t(!0),c(v),localStorage.setItem("push_subscribed_routes",JSON.stringify(v)),qz(j.endpoint),tt({title:" ",description:"    "}),!0}catch(b){console.error("Error subscribing to push:",b),await $c(v[0]||"GENERAL","SUB_FAILED",{error:String(b)}),console.error("Error details:",b==null?void 0:b.message,b==null?void 0:b.code,b==null?void 0:b.name);let w=" : ";return(_=b==null?void 0:b.message)!=null&&_.includes("permission")||(b==null?void 0:b.name)==="NotAllowedError"?w="    .":(b==null?void 0:b.code)==="42501"||(x=b==null?void 0:b.message)!=null&&x.includes("RLS")?w="  .":w+=(b==null?void 0:b.message)||" ",tt({title:" ",description:w,variant:"destructive"}),!1}finally{i(!1)}},[n]),f=p.useCallback(async()=>{try{if(i(!0),ah()&&!zc())return localStorage.removeItem("push_subscription_routes"),t(!1),c([]),tt({title:" "}),i(!1),!0;const v=await navigator.serviceWorker.getRegistrations();if(v.length===0||!v[0].active)return console.log("[usePushSubscription] No active SW found during unsubscribe. Forcing local cleanup."),t(!1),c([]),localStorage.removeItem("push_subscribed_routes"),i(!1),!0;const x=await v[0].pushManager.getSubscription();return x&&(await xn.from("push_subscriptions").delete().eq("endpoint",x.endpoint),await x.unsubscribe()),t(!1),c([]),localStorage.removeItem("push_subscribed_routes"),tt({title:"",description:"    "}),!0}catch(v){return console.error("Error unsubscribing from push:",v),tt({title:"",description:" ",variant:"destructive"}),!1}finally{i(!1)}},[]),g=p.useCallback(async v=>{try{const _=await navigator.serviceWorker.getRegistrations();if(_.length===0||!_[0].active)return console.log("Service worker not ready for updateRoutes"),!1;const b=await _[0].pushManager.getSubscription();if(!b)return m(v);const{error:w}=await xn.from("push_subscriptions").update({route_ids:v}).eq("endpoint",b.endpoint);if(w)throw w;return c(v),localStorage.setItem("push_subscribed_routes",JSON.stringify(v)),tt({title:"",description:"   "}),!0}catch(_){return console.error("Error updating routes:",_),tt({title:"",description:"  ",variant:"destructive"}),!1}},[m]);return{isSubscribed:e,isSupported:n,isLoading:s,subscribedRoutes:l,iosStatus:u,subscribe:m,unsubscribe:f,updateRoutes:g}}function r1(){const{isSubscribed:e,isSupported:t,isLoading:n,subscribe:r,unsubscribe:s,iosStatus:i}=jm(),l=async()=>{e?await s():await r([])},c=()=>i==="needs-update"?a.jsxs("div",{className:"p-2 rounded bg-destructive/10 border border-destructive/20",children:[a.jsx("p",{className:"text-xs text-destructive font-medium",children:"  iOS 16.4+"}),a.jsx("p",{className:"text-[10px] text-destructive/80 mt-1",children:"   iPhone      push."})]}):i==="needs-install"?a.jsxs("div",{className:"p-3 rounded-lg bg-primary/10 border border-primary/20 animate-pulse-subtle",children:[a.jsx("p",{className:"text-xs text-primary font-semibold flex items-center gap-2",children:"  "}),a.jsx("p",{className:"text-[11px] text-muted-foreground mt-2 leading-relaxed",children:"     iPhone:"}),a.jsxs("ol",{className:"text-[10px] text-muted-foreground mt-1 space-y-1 list-decimal list-inside",children:[a.jsxs("li",{children:["   ",a.jsx("strong",{children:'""'})," (Share)  Safari"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:'"   "'})]}),a.jsx("li",{children:"       "})]})]}):null;return t?a.jsxs(xf,{children:[a.jsx(wf,{asChild:!0,children:a.jsxs(de,{variant:"ghost",size:"icon",className:"h-7 w-7 relative",title:"",children:[n?a.jsx(qn,{className:"h-4 w-4 animate-spin"}):e?a.jsx(Dn,{className:"h-4 w-4 text-primary"}):a.jsx(qs,{className:"h-4 w-4 text-muted-foreground"}),e&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-success rounded-full"})]})}),a.jsx(Ru,{className:"w-72",align:"end",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-sm font-medium",children:" Push"}),c(),a.jsx("p",{className:"text-xs text-muted-foreground",children:e?i==="needs-install"?"    app   (Safari - client-side only).":"    .":i==="needs-install"?"       app   (Safari - client-side only).":"     ."}),i!=="needs-update"&&a.jsxs(de,{onClick:l,disabled:n,variant:e?"outline":"default",size:"sm",className:"w-full",children:[n?a.jsx(qn,{className:"h-4 w-4 animate-spin mr-1"}):e?a.jsx(qs,{className:"h-4 w-4 mr-1"}):a.jsx(Dn,{className:"h-4 w-4 mr-1"}),e?"":""]}),e&&i==="supported"&&a.jsx("p",{className:"text-xs text-success",children:" iOS PWA -  "})]})})]}):null}function s1({isError:e,isLoading:t,errorMessage:n,onRetry:r,lastSuccessfulUpdate:s,retryCountdown:i,isUsingCachedData:l}){const[c,u]=p.useState(!1),h=()=>{u(!0),r(),setTimeout(()=>u(!1),2e3)},m=()=>{if(!s)return null;const f=Math.floor((Date.now()-s)/1e3);if(f<60)return`${f} `;const g=Math.floor(f/60);return g<60?`${g} `:`${Math.floor(g/60)} `};return!e&&!t?a.jsxs(ya,{children:[a.jsx(xa,{asChild:!0,children:a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-emerald-500/10 border border-emerald-500/20",children:[a.jsx(uf,{className:"h-3.5 w-3.5 text-emerald-500"}),a.jsx("span",{className:"text-xs text-emerald-500 font-medium",children:"Online"})]})}),a.jsxs(bo,{side:"bottom",children:[a.jsx("p",{children:"  GTFS API "}),s&&a.jsxs("p",{className:"text-muted-foreground text-xs",children:[" : ",m()]})]})]}):t&&!e?a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-primary/10 border border-primary/20",children:[a.jsx(lf,{className:"h-3.5 w-3.5 text-primary animate-spin"}),a.jsx("span",{className:"text-xs text-primary font-medium",children:"..."})]}):a.jsxs(ya,{children:[a.jsx(xa,{asChild:!0,children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsxs("div",{className:ye("flex items-center gap-1.5 px-2 py-1 rounded-md border",l?"bg-amber-500/10 border-amber-500/20":"bg-destructive/10 border-destructive/20"),children:[l?a.jsxs(a.Fragment,{children:[a.jsx($n,{className:"h-3.5 w-3.5 text-amber-500"}),a.jsx("span",{className:"text-xs text-amber-500 font-medium",children:"Cached"})]}):a.jsxs(a.Fragment,{children:[a.jsx(rC,{className:"h-3.5 w-3.5 text-destructive"}),a.jsx("span",{className:"text-xs text-destructive font-medium",children:"Offline"})]}),i!==void 0&&i>0&&a.jsxs("span",{className:ye("text-xs",l?"text-amber-500/70":"text-destructive/70"),children:["(",i,")"]})]}),a.jsx(de,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:h,disabled:c||t,children:a.jsx(lf,{className:ye("h-3.5 w-3.5",(c||t)&&"animate-spin")})})]})}),a.jsx(bo,{side:"bottom",className:"max-w-xs",children:a.jsxs("div",{className:"space-y-1",children:[l?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium text-amber-500",children:"  "}),a.jsx("p",{className:"text-xs text-muted-foreground",children:" GTFS API   .      ."})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium text-destructive",children:"   GTFS API"}),n&&a.jsx("p",{className:"text-xs text-muted-foreground",children:n})]}),s&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["  : ",m()]}),i!==void 0&&i>0&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["   ",i," "]})]})})]})}function Bu(e,[t,n]){return Math.min(n,Math.max(t,e))}function o0(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Jz=[" ","Enter","ArrowUp","ArrowDown"],Xz=[" ","Enter"],_a="Select",[Em,Tm,Qz]=Qu(_a),[mc,AH]=_r(_a,[Qz,jo]),Pm=jo(),[e8,To]=mc(_a),[t8,n8]=mc(_a),R2=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:l,defaultValue:c,onValueChange:u,dir:h,name:m,autoComplete:f,disabled:g,required:v,form:_}=e,x=Pm(t),[b,w]=p.useState(null),[S,k]=p.useState(null),[j,T]=p.useState(!1),R=hc(h),[E,B]=Ss({prop:r,defaultProp:s??!1,onChange:i,caller:_a}),[q,Y]=Ss({prop:l,defaultProp:c,onChange:u,caller:_a}),te=p.useRef(null),A=b?_||!!b.closest("form"):!0,[W,P]=p.useState(new Set),Z=Array.from(W).map($=>$.props.value).join(";");return a.jsx(lm,{...x,children:a.jsxs(e8,{required:v,scope:t,trigger:b,onTriggerChange:w,valueNode:S,onValueNodeChange:k,valueNodeHasChildren:j,onValueNodeHasChildrenChange:T,contentId:Ks(),value:q,onValueChange:Y,open:E,onOpenChange:B,dir:R,triggerPointerDownPosRef:te,disabled:g,children:[a.jsx(Em.Provider,{scope:t,children:a.jsx(t8,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback($=>{P(U=>new Set(U).add($))},[]),onNativeOptionRemove:p.useCallback($=>{P(U=>{const I=new Set(U);return I.delete($),I})},[]),children:n})}),A?a.jsxs(rE,{"aria-hidden":!0,required:v,tabIndex:-1,name:m,autoComplete:f,value:q,onChange:$=>Y($.target.value),disabled:g,form:_,children:[q===void 0?a.jsx("option",{value:""}):null,Array.from(W)]},Z):null]})})};R2.displayName=_a;var L2="SelectTrigger",A2=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=Pm(n),l=To(L2,n),c=l.disabled||r,u=st(t,l.onTriggerChange),h=Tm(n),m=p.useRef("touch"),[f,g,v]=iE(x=>{const b=h().filter(k=>!k.disabled),w=b.find(k=>k.value===l.value),S=oE(b,x,w);S!==void 0&&l.onValueChange(S.value)}),_=x=>{c||(l.onOpenChange(!0),v()),x&&(l.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return a.jsx(rd,{asChild:!0,...i,children:a.jsx(De.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":sE(l.value)?"":void 0,...s,ref:u,onClick:_e(s.onClick,x=>{x.currentTarget.focus(),m.current!=="mouse"&&_(x)}),onPointerDown:_e(s.onPointerDown,x=>{m.current=x.pointerType;const b=x.target;b.hasPointerCapture(x.pointerId)&&b.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(_(x),x.preventDefault())}),onKeyDown:_e(s.onKeyDown,x=>{const b=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&g(x.key),!(b&&x.key===" ")&&Jz.includes(x.key)&&(_(),x.preventDefault())})})})});A2.displayName=L2;var O2="SelectValue",D2=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:l="",...c}=e,u=To(O2,n),{onValueNodeHasChildrenChange:h}=u,m=i!==void 0,f=st(t,u.onValueNodeChange);return jn(()=>{h(m)},[h,m]),a.jsx(De.span,{...c,ref:f,style:{pointerEvents:"none"},children:sE(u.value)?a.jsx(a.Fragment,{children:l}):i})});D2.displayName=O2;var r8="SelectIcon",$2=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return a.jsx(De.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});$2.displayName=r8;var s8="SelectPortal",z2=e=>a.jsx(ed,{asChild:!0,...e});z2.displayName=s8;var ba="SelectContent",B2=p.forwardRef((e,t)=>{const n=To(ba,e.__scopeSelect),[r,s]=p.useState();if(jn(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?ja.createPortal(a.jsx(F2,{scope:e.__scopeSelect,children:a.jsx(Em.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),i):null}return a.jsx(U2,{...e,ref:t})});B2.displayName=ba;var us=10,[F2,Po]=mc(ba),i8="SelectContentImpl",o8=pa("SelectContent.RemoveScroll"),U2=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:l,side:c,sideOffset:u,align:h,alignOffset:m,arrowPadding:f,collisionBoundary:g,collisionPadding:v,sticky:_,hideWhenDetached:x,avoidCollisions:b,...w}=e,S=To(ba,n),[k,j]=p.useState(null),[T,R]=p.useState(null),E=st(t,ce=>j(ce)),[B,q]=p.useState(null),[Y,te]=p.useState(null),A=Tm(n),[W,P]=p.useState(!1),Z=p.useRef(!1);p.useEffect(()=>{if(k)return Qx(k)},[k]),Xx();const $=p.useCallback(ce=>{const[ke,...Oe]=A().map(We=>We.ref.current),[Pe]=Oe.slice(-1),Te=document.activeElement;for(const We of ce)if(We===Te||(We==null||We.scrollIntoView({block:"nearest"}),We===ke&&T&&(T.scrollTop=0),We===Pe&&T&&(T.scrollTop=T.scrollHeight),We==null||We.focus(),document.activeElement!==Te))return},[A,T]),U=p.useCallback(()=>$([B,k]),[$,B,k]);p.useEffect(()=>{W&&U()},[W,U]);const{onOpenChange:I,triggerPointerDownPosRef:O}=S;p.useEffect(()=>{if(k){let ce={x:0,y:0};const ke=Pe=>{var Te,We;ce={x:Math.abs(Math.round(Pe.pageX)-(((Te=O.current)==null?void 0:Te.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((We=O.current)==null?void 0:We.y)??0))}},Oe=Pe=>{ce.x<=10&&ce.y<=10?Pe.preventDefault():k.contains(Pe.target)||I(!1),document.removeEventListener("pointermove",ke),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",ke),document.addEventListener("pointerup",Oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ke),document.removeEventListener("pointerup",Oe,{capture:!0})}}},[k,I,O]),p.useEffect(()=>{const ce=()=>I(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[I]);const[F,X]=iE(ce=>{const ke=A().filter(Te=>!Te.disabled),Oe=ke.find(Te=>Te.ref.current===document.activeElement),Pe=oE(ke,ce,Oe);Pe&&setTimeout(()=>Pe.ref.current.focus())}),re=p.useCallback((ce,ke,Oe)=>{const Pe=!Z.current&&!Oe;(S.value!==void 0&&S.value===ke||Pe)&&(q(ce),Pe&&(Z.current=!0))},[S.value]),ae=p.useCallback(()=>k==null?void 0:k.focus(),[k]),ie=p.useCallback((ce,ke,Oe)=>{const Pe=!Z.current&&!Oe;(S.value!==void 0&&S.value===ke||Pe)&&te(ce)},[S.value]),oe=r==="popper"?uy:W2,ge=oe===uy?{side:c,sideOffset:u,align:h,alignOffset:m,arrowPadding:f,collisionBoundary:g,collisionPadding:v,sticky:_,hideWhenDetached:x,avoidCollisions:b}:{};return a.jsx(F2,{scope:n,content:k,viewport:T,onViewportChange:R,itemRefCallback:re,selectedItem:B,onItemLeave:ae,itemTextRefCallback:ie,focusSelectedItem:U,selectedItemText:Y,position:r,isPositioned:W,searchRef:F,children:a.jsx(bm,{as:o8,allowPinchZoom:!0,children:a.jsx(wm,{asChild:!0,trapped:S.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:_e(s,ce=>{var ke;(ke=S.trigger)==null||ke.focus({preventScroll:!0}),ce.preventDefault()}),children:a.jsx(ic,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:a.jsx(oe,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:ce=>ce.preventDefault(),...w,...ge,onPlaced:()=>P(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:_e(w.onKeyDown,ce=>{const ke=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!ke&&ce.key.length===1&&X(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let Pe=A().filter(Te=>!Te.disabled).map(Te=>Te.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const Te=ce.target,We=Pe.indexOf(Te);Pe=Pe.slice(We+1)}setTimeout(()=>$(Pe)),ce.preventDefault()}})})})})})})});U2.displayName=i8;var a8="SelectItemAlignedPosition",W2=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=To(ba,n),l=Po(ba,n),[c,u]=p.useState(null),[h,m]=p.useState(null),f=st(t,E=>m(E)),g=Tm(n),v=p.useRef(!1),_=p.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:w,focusSelectedItem:S}=l,k=p.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&h&&x&&b&&w){const E=i.trigger.getBoundingClientRect(),B=h.getBoundingClientRect(),q=i.valueNode.getBoundingClientRect(),Y=w.getBoundingClientRect();if(i.dir!=="rtl"){const Te=Y.left-B.left,We=q.left-Te,wt=E.left-We,kt=E.width+wt,ot=Math.max(kt,B.width),Q=window.innerWidth-us,he=Bu(We,[us,Math.max(us,Q-ot)]);c.style.minWidth=kt+"px",c.style.left=he+"px"}else{const Te=B.right-Y.right,We=window.innerWidth-q.right-Te,wt=window.innerWidth-E.right-We,kt=E.width+wt,ot=Math.max(kt,B.width),Q=window.innerWidth-us,he=Bu(We,[us,Math.max(us,Q-ot)]);c.style.minWidth=kt+"px",c.style.right=he+"px"}const te=g(),A=window.innerHeight-us*2,W=x.scrollHeight,P=window.getComputedStyle(h),Z=parseInt(P.borderTopWidth,10),$=parseInt(P.paddingTop,10),U=parseInt(P.borderBottomWidth,10),I=parseInt(P.paddingBottom,10),O=Z+$+W+I+U,F=Math.min(b.offsetHeight*5,O),X=window.getComputedStyle(x),re=parseInt(X.paddingTop,10),ae=parseInt(X.paddingBottom,10),ie=E.top+E.height/2-us,oe=A-ie,ge=b.offsetHeight/2,ce=b.offsetTop+ge,ke=Z+$+ce,Oe=O-ke;if(ke<=ie){const Te=te.length>0&&b===te[te.length-1].ref.current;c.style.bottom="0px";const We=h.clientHeight-x.offsetTop-x.offsetHeight,wt=Math.max(oe,ge+(Te?ae:0)+We+U),kt=ke+wt;c.style.height=kt+"px"}else{const Te=te.length>0&&b===te[0].ref.current;c.style.top="0px";const wt=Math.max(ie,Z+x.offsetTop+(Te?re:0)+ge)+Oe;c.style.height=wt+"px",x.scrollTop=ke-ie+x.offsetTop}c.style.margin=`${us}px 0`,c.style.minHeight=F+"px",c.style.maxHeight=A+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[g,i.trigger,i.valueNode,c,h,x,b,w,i.dir,r]);jn(()=>k(),[k]);const[j,T]=p.useState();jn(()=>{h&&T(window.getComputedStyle(h).zIndex)},[h]);const R=p.useCallback(E=>{E&&_.current===!0&&(k(),S==null||S(),_.current=!1)},[k,S]);return a.jsx(c8,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:v,onScrollButtonChange:R,children:a.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:a.jsx(De.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});W2.displayName=a8;var l8="SelectPopperPosition",uy=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=us,...i}=e,l=Pm(n);return a.jsx(cm,{...l,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});uy.displayName=l8;var[c8,a0]=mc(ba,{}),dy="SelectViewport",H2=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=Po(dy,n),l=a0(dy,n),c=st(t,i.onViewportChange),u=p.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Em.Slot,{scope:n,children:a.jsx(De.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:_e(s.onScroll,h=>{const m=h.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:g}=l;if(g!=null&&g.current&&f){const v=Math.abs(u.current-m.scrollTop);if(v>0){const _=window.innerHeight-us*2,x=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),w=Math.max(x,b);if(w<_){const S=w+v,k=Math.min(_,S),j=S-k;f.style.height=k+"px",f.style.bottom==="0px"&&(m.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}u.current=m.scrollTop})})})]})});H2.displayName=dy;var V2="SelectGroup",[u8,d8]=mc(V2),h8=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Ks();return a.jsx(u8,{scope:n,id:s,children:a.jsx(De.div,{role:"group","aria-labelledby":s,...r,ref:t})})});h8.displayName=V2;var G2="SelectLabel",Z2=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=d8(G2,n);return a.jsx(De.div,{id:s.id,...r,ref:t})});Z2.displayName=G2;var Ef="SelectItem",[f8,q2]=mc(Ef),K2=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...l}=e,c=To(Ef,n),u=Po(Ef,n),h=c.value===r,[m,f]=p.useState(i??""),[g,v]=p.useState(!1),_=st(t,S=>{var k;return(k=u.itemRefCallback)==null?void 0:k.call(u,S,r,s)}),x=Ks(),b=p.useRef("touch"),w=()=>{s||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(f8,{scope:n,value:r,disabled:s,textId:x,isSelected:h,onItemTextChange:p.useCallback(S=>{f(k=>k||((S==null?void 0:S.textContent)??"").trim())},[]),children:a.jsx(Em.ItemSlot,{scope:n,value:r,disabled:s,textValue:m,children:a.jsx(De.div,{role:"option","aria-labelledby":x,"data-highlighted":g?"":void 0,"aria-selected":h&&g,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:_,onFocus:_e(l.onFocus,()=>v(!0)),onBlur:_e(l.onBlur,()=>v(!1)),onClick:_e(l.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:_e(l.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:_e(l.onPointerDown,S=>{b.current=S.pointerType}),onPointerMove:_e(l.onPointerMove,S=>{var k;b.current=S.pointerType,s?(k=u.onItemLeave)==null||k.call(u):b.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_e(l.onPointerLeave,S=>{var k;S.currentTarget===document.activeElement&&((k=u.onItemLeave)==null||k.call(u))}),onKeyDown:_e(l.onKeyDown,S=>{var j;((j=u.searchRef)==null?void 0:j.current)!==""&&S.key===" "||(Xz.includes(S.key)&&w(),S.key===" "&&S.preventDefault())})})})})});K2.displayName=Ef;var Yc="SelectItemText",Y2=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,l=To(Yc,n),c=Po(Yc,n),u=q2(Yc,n),h=n8(Yc,n),[m,f]=p.useState(null),g=st(t,w=>f(w),u.onItemTextChange,w=>{var S;return(S=c.itemTextRefCallback)==null?void 0:S.call(c,w,u.value,u.disabled)}),v=m==null?void 0:m.textContent,_=p.useMemo(()=>a.jsx("option",{value:u.value,disabled:u.disabled,children:v},u.value),[u.disabled,u.value,v]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=h;return jn(()=>(x(_),()=>b(_)),[x,b,_]),a.jsxs(a.Fragment,{children:[a.jsx(De.span,{id:u.textId,...i,ref:g}),u.isSelected&&l.valueNode&&!l.valueNodeHasChildren?ja.createPortal(i.children,l.valueNode):null]})});Y2.displayName=Yc;var J2="SelectItemIndicator",X2=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return q2(J2,n).isSelected?a.jsx(De.span,{"aria-hidden":!0,...r,ref:t}):null});X2.displayName=J2;var hy="SelectScrollUpButton",Q2=p.forwardRef((e,t)=>{const n=Po(hy,e.__scopeSelect),r=a0(hy,e.__scopeSelect),[s,i]=p.useState(!1),l=st(t,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollTop>0;i(h)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?a.jsx(tE,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});Q2.displayName=hy;var fy="SelectScrollDownButton",eE=p.forwardRef((e,t)=>{const n=Po(fy,e.__scopeSelect),r=a0(fy,e.__scopeSelect),[s,i]=p.useState(!1),l=st(t,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollHeight-u.clientHeight,m=Math.ceil(u.scrollTop)<h;i(m)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?a.jsx(tE,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});eE.displayName=fy;var tE=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=Po("SelectScrollButton",n),l=p.useRef(null),c=Tm(n),u=p.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return p.useEffect(()=>()=>u(),[u]),jn(()=>{var m;const h=c().find(f=>f.ref.current===document.activeElement);(m=h==null?void 0:h.ref.current)==null||m.scrollIntoView({block:"nearest"})},[c]),a.jsx(De.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:_e(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:_e(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:_e(s.onPointerLeave,()=>{u()})})}),m8="SelectSeparator",nE=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return a.jsx(De.div,{"aria-hidden":!0,...r,ref:t})});nE.displayName=m8;var my="SelectArrow",p8=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Pm(n),i=To(my,n),l=Po(my,n);return i.open&&l.position==="popper"?a.jsx(um,{...s,...r,ref:t}):null});p8.displayName=my;var g8="SelectBubbleInput",rE=p.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=p.useRef(null),i=st(r,s),l=o0(t);return p.useEffect(()=>{const c=s.current;if(!c)return;const u=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==t&&m){const f=new Event("change",{bubbles:!0});m.call(c,t),c.dispatchEvent(f)}},[l,t]),a.jsx(De.select,{...n,style:{...Ek,...n.style},ref:i,defaultValue:t})});rE.displayName=g8;function sE(e){return e===""||e===void 0}function iE(e){const t=fn(e),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(l=>{const c=n.current+l;t(c),function u(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[t]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function oE(e,t,n){const s=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=v8(e,Math.max(i,0));s.length===1&&(l=l.filter(h=>h!==n));const u=l.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function v8(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var y8=R2,aE=A2,x8=D2,w8=$2,_8=z2,lE=B2,b8=H2,cE=Z2,uE=K2,S8=Y2,N8=X2,dE=Q2,hE=eE,fE=nE;const Js=y8,Xs=x8,Cs=p.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(aE,{ref:r,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,a.jsx(w8,{asChild:!0,children:a.jsx(Jr,{className:"h-4 w-4 opacity-50"})})]}));Cs.displayName=aE.displayName;const mE=p.forwardRef(({className:e,...t},n)=>a.jsx(dE,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(ji,{className:"h-4 w-4"})}));mE.displayName=dE.displayName;const pE=p.forwardRef(({className:e,...t},n)=>a.jsx(hE,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(Jr,{className:"h-4 w-4"})}));pE.displayName=hE.displayName;const js=p.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>a.jsx(_8,{children:a.jsxs(lE,{ref:s,className:ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[a.jsx(mE,{}),a.jsx(b8,{className:ye("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(pE,{})]})}));js.displayName=lE.displayName;const k8=p.forwardRef(({className:e,...t},n)=>a.jsx(cE,{ref:n,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));k8.displayName=cE.displayName;const Vt=p.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(uE,{ref:r,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(N8,{children:a.jsx(Xk,{className:"h-4 w-4"})})}),a.jsx(S8,{children:t})]}));Vt.displayName=uE.displayName;const C8=p.forwardRef(({className:e,...t},n)=>a.jsx(fE,{ref:n,className:ye("-mx-1 my-1 h-px bg-muted",e),...t}));C8.displayName=fE.displayName;var Mm="Switch",[j8,OH]=_r(Mm),[E8,T8]=j8(Mm),gE=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:l,disabled:c,value:u="on",onCheckedChange:h,form:m,...f}=e,[g,v]=p.useState(null),_=st(t,k=>v(k)),x=p.useRef(!1),b=g?m||!!g.closest("form"):!0,[w,S]=Ss({prop:s,defaultProp:i??!1,onChange:h,caller:Mm});return a.jsxs(E8,{scope:n,checked:w,disabled:c,children:[a.jsx(De.button,{type:"button",role:"switch","aria-checked":w,"aria-required":l,"data-state":wE(w),"data-disabled":c?"":void 0,disabled:c,value:u,...f,ref:_,onClick:_e(e.onClick,k=>{S(j=>!j),b&&(x.current=k.isPropagationStopped(),x.current||k.stopPropagation())})}),b&&a.jsx(xE,{control:g,bubbles:!x.current,name:r,value:u,checked:w,required:l,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});gE.displayName=Mm;var vE="SwitchThumb",yE=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=T8(vE,n);return a.jsx(De.span,{"data-state":wE(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});yE.displayName=vE;var P8="SwitchBubbleInput",xE=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const l=p.useRef(null),c=st(l,i),u=o0(n),h=Dx(t);return p.useEffect(()=>{const m=l.current;if(!m)return;const f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==n&&v){const _=new Event("click",{bubbles:r});v.call(m,n),m.dispatchEvent(_)}},[u,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:c,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});xE.displayName=P8;function wE(e){return e?"checked":"unchecked"}var _E=gE,M8=yE;const Tf=p.forwardRef(({className:e,...t},n)=>a.jsx(_E,{className:ye("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:a.jsx(M8,{className:ye("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Tf.displayName=_E.displayName;var I8="Label",bE=p.forwardRef((e,t)=>a.jsx(De.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));bE.displayName=I8;var SE=bE;const R8=sm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),la=p.forwardRef(({className:e,...t},n)=>a.jsx(SE,{ref:n,className:ye(R8(),e),...t}));la.displayName=SE.displayName;const py=[{id:"all",name:"  "},{id:"2",name:"OSYPA",city:"",region:"paphos"},{id:"4",name:"OSEA",city:"",region:"famagusta"},{id:"5",name:"",isIntercity:!0},{id:"6",name:"EMEL",city:"",region:"limassol"},{id:"9",name:"NPT",city:"",region:"nicosia"},{id:"10",name:"LPT",city:"",region:"larnaca"},{id:"11",name:"PAME EXPRESS",isIntercity:!0}];function i1({value:e,onChange:t}){const n=py.find(r=>r.id===e);return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs(Js,{value:e,onValueChange:t,children:[a.jsx(Cs,{className:"w-[160px] h-8 text-xs",children:a.jsx(Xs,{children:(n==null?void 0:n.name)||"  "})}),a.jsx(js,{children:py.map(r=>a.jsx(Vt,{value:r.id,children:a.jsxs("span",{className:"flex items-center gap-2",children:[r.name,r.city&&a.jsxs("span",{className:"text-muted-foreground text-xs",children:["(",r.city,")"]})]})},r.id))})]})]})}function o1({value:e,onChange:t,routes:n,routeNames:r,disabled:s,isLoading:i}){const l=[...n].sort((g,v)=>{var S,k;const _=((S=r==null?void 0:r.get(g))==null?void 0:S.route_short_name)||g,x=((k=r==null?void 0:r.get(v))==null?void 0:k.route_short_name)||v,b=parseInt(_),w=parseInt(x);return!isNaN(b)&&!isNaN(w)?b-w:_.localeCompare(x)}),c=g=>{const v=r==null?void 0:r.get(g);return(v==null?void 0:v.route_short_name)||g},u=g=>{const v=r==null?void 0:r.get(g);if(v!=null&&v.route_color)return`#${v.route_color}`},h=g=>{const v=r==null?void 0:r.get(g);return v!=null&&v.route_text_color?`#${v.route_text_color}`:v!=null&&v.route_color?"#FFFFFF":"currentColor"},m=e!=="all"?r==null?void 0:r.get(e):null,f=m!=null&&m.route_color?`#${m.route_color}`:void 0;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vl,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs(Js,{value:e,onValueChange:t,disabled:s||n.length===0,children:[a.jsx(Cs,{className:"w-full min-w-[320px] h-8 text-xs",children:a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[f&&a.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 border border-border/50",style:{backgroundColor:f}}),a.jsx("span",{className:"truncate",children:a.jsx(Xs,{placeholder:i?"...":""})})]})}),a.jsxs(js,{className:"max-h-[300px] z-50 bg-popover",children:[a.jsx(Vt,{value:"all",children:a.jsx("span",{children:"  "})}),l.map(g=>{var x,b;const v=u(g),_=h(g);return a.jsx(Vt,{value:g,className:"text-xs",children:a.jsxs("div",{className:"flex items-center gap-2",children:[v?a.jsx("div",{className:"w-6 h-5 rounded flex items-center justify-center text-[10px] font-bold flex-shrink-0",style:{backgroundColor:v,color:_},children:c(g)}):a.jsx("span",{className:"font-medium",children:c(g)}),((x=r==null?void 0:r.get(g))==null?void 0:x.route_long_name)&&a.jsx("span",{className:"text-muted-foreground",children:(b=r.get(g))==null?void 0:b.route_long_name})]})},g)})]})]})]})}function pt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ar(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function rr(e,t){const n=pt(e);return isNaN(t)?Ar(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Es(e,t){const n=pt(e);if(isNaN(t))return Ar(e,NaN);if(!t)return n;const r=n.getDate(),s=Ar(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const l0=6048e5,L8=864e5,A8=6e4,O8=36e5;let D8={};function ud(){return D8}function Qs(e,t){var c,u,h,m;const n=ud(),r=(t==null?void 0:t.weekStartsOn)??((u=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=pt(e),i=s.getDay(),l=(i<r?7:0)+i-r;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function Sa(e){return Qs(e,{weekStartsOn:1})}function NE(e){const t=pt(e),n=t.getFullYear(),r=Ar(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Sa(r),i=Ar(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=Sa(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}function Ql(e){const t=pt(e);return t.setHours(0,0,0,0),t}function Pf(e){const t=pt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function xs(e,t){const n=Ql(e),r=Ql(t),s=+n-Pf(n),i=+r-Pf(r);return Math.round((s-i)/L8)}function $8(e){const t=NE(e),n=Ar(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Sa(n)}function gy(e,t){const n=t*7;return rr(e,n)}function z8(e,t){return Es(e,t*12)}function B8(e){let t;return e.forEach(function(n){const r=pt(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function F8(e){let t;return e.forEach(n=>{const r=pt(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function gr(e,t){const n=Ql(e),r=Ql(t);return+n==+r}function c0(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function U8(e){if(!c0(e)&&typeof e!="number")return!1;const t=pt(e);return!isNaN(Number(t))}function Fu(e,t){const n=pt(e),r=pt(t),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function W8(e,t,n){const r=Qs(e,n),s=Qs(t,n),i=+r-Pf(r),l=+s-Pf(s);return Math.round((i-l)/l0)}function H8(e,t){const n=pt(e),r=pt(t),s=a1(n,r),i=Math.abs(xs(n,r));n.setDate(n.getDate()-s*i);const l=+(a1(n,r)===-s),c=s*(i-l);return c===0?0:c}function a1(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function kE(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function CE(e,t){return+pt(e)-+pt(t)}function V8(e,t,n){const r=CE(e,t)/O8;return kE(n==null?void 0:n.roundingMethod)(r)}function jE(e,t,n){const r=CE(e,t)/A8;return kE(n==null?void 0:n.roundingMethod)(r)}function u0(e){const t=pt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function wr(e){const t=pt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function EE(e){const t=pt(e),n=Ar(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function d0(e,t){var c,u,h,m;const n=ud(),r=(t==null?void 0:t.weekStartsOn)??((u=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=pt(e),i=s.getDay(),l=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+l),s.setHours(23,59,59,999),s}function TE(e){return d0(e,{weekStartsOn:1})}const G8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Z8=(e,t,n)=>{let r;const s=G8[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Sl(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const q8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},K8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Y8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},J8={date:Sl({formats:q8,defaultWidth:"full"}),time:Sl({formats:K8,defaultWidth:"full"}),dateTime:Sl({formats:Y8,defaultWidth:"full"})},X8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Q8=(e,t,n,r)=>X8[e];function Us(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,c=n!=null&&n.width?String(n.width):l;s=e.formattingValues[c]||e.formattingValues[l]}else{const l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const eB={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tB={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nB={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rB={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oB=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},aB={ordinalNumber:oB,era:Us({values:eB,defaultWidth:"wide"}),quarter:Us({values:tB,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Us({values:nB,defaultWidth:"wide"}),day:Us({values:rB,defaultWidth:"wide"}),dayPeriod:Us({values:sB,defaultWidth:"wide",formattingValues:iB,defaultFormattingWidth:"wide"})};function Ws(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const l=i[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(c)?cB(c,f=>f.test(l)):lB(c,f=>f.test(l));let h;h=e.valueCallback?e.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const m=t.slice(l.length);return{value:h,rest:m}}}function lB(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function cB(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function PE(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const c=t.slice(s.length);return{value:l,rest:c}}}const uB=/^(\d+)(th|st|nd|rd)?/i,dB=/\d+/i,hB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fB={any:[/^b/i,/^(a|c)/i]},mB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pB={any:[/1/i,/2/i,/3/i,/4/i]},gB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xB={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_B={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bB={ordinalNumber:PE({matchPattern:uB,parsePattern:dB,valueCallback:e=>parseInt(e,10)}),era:Ws({matchPatterns:hB,defaultMatchWidth:"wide",parsePatterns:fB,defaultParseWidth:"any"}),quarter:Ws({matchPatterns:mB,defaultMatchWidth:"wide",parsePatterns:pB,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ws({matchPatterns:gB,defaultMatchWidth:"wide",parsePatterns:vB,defaultParseWidth:"any"}),day:Ws({matchPatterns:yB,defaultMatchWidth:"wide",parsePatterns:xB,defaultParseWidth:"any"}),dayPeriod:Ws({matchPatterns:wB,defaultMatchWidth:"any",parsePatterns:_B,defaultParseWidth:"any"})},ME={code:"en-US",formatDistance:Z8,formatLong:J8,formatRelative:Q8,localize:aB,match:bB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function SB(e){const t=pt(e);return xs(t,EE(t))+1}function IE(e){const t=pt(e),n=+Sa(t)-+$8(t);return Math.round(n/l0)+1}function RE(e,t){var m,f,g,v;const n=pt(e),r=n.getFullYear(),s=ud(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((v=(g=s.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,l=Ar(e,0);l.setFullYear(r+1,0,i),l.setHours(0,0,0,0);const c=Qs(l,t),u=Ar(e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const h=Qs(u,t);return n.getTime()>=c.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function NB(e,t){var c,u,h,m;const n=ud(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,s=RE(e,t),i=Ar(e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Qs(i,t)}function LE(e,t){const n=pt(e),r=+Qs(n,t)-+NB(n,t);return Math.round(r/l0)+1}function Dt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Di={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Dt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Dt(n+1,2)},d(e,t){return Dt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Dt(e.getHours()%12||12,t.length)},H(e,t){return Dt(e.getHours(),t.length)},m(e,t){return Dt(e.getMinutes(),t.length)},s(e,t){return Dt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Dt(s,t.length)}},Za={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},l1={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Di.y(e,t)},Y:function(e,t,n,r){const s=RE(e,r),i=s>0?s:1-s;if(t==="YY"){const l=i%100;return Dt(l,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Dt(i,t.length)},R:function(e,t){const n=NE(e);return Dt(n,t.length)},u:function(e,t){const n=e.getFullYear();return Dt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Dt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Dt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Di.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Dt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=LE(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Dt(s,t.length)},I:function(e,t,n){const r=IE(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Dt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Di.d(e,t)},D:function(e,t,n){const r=SB(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Dt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Dt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Dt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Dt(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Za.noon:r===0?s=Za.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Za.evening:r>=12?s=Za.afternoon:r>=4?s=Za.morning:s=Za.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Di.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Di.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Dt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Dt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Di.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Di.s(e,t)},S:function(e,t){return Di.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return u1(r);case"XXXX":case"XX":return Wo(r);case"XXXXX":case"XXX":default:return Wo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return u1(r);case"xxxx":case"xx":return Wo(r);case"xxxxx":case"xxx":default:return Wo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+c1(r,":");case"OOOO":default:return"GMT"+Wo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+c1(r,":");case"zzzz":default:return"GMT"+Wo(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Dt(r,t.length)},T:function(e,t,n){const r=e.getTime();return Dt(r,t.length)}};function c1(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+Dt(i,2)}function u1(e,t){return e%60===0?(e>0?"-":"+")+Dt(Math.abs(e)/60,2):Wo(e,t)}function Wo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Dt(Math.trunc(r/60),2),i=Dt(r%60,2);return n+s+t+i}const d1=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},AE=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},kB=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return d1(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",d1(r,t)).replace("{{time}}",AE(s,t))},CB={p:AE,P:kB},jB=/^D+$/,EB=/^Y+$/,TB=["D","DD","YY","YYYY"];function PB(e){return jB.test(e)}function MB(e){return EB.test(e)}function IB(e,t,n){const r=RB(e,t,n);if(console.warn(r),TB.includes(e))throw new RangeError(r)}function RB(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OB=/^'([^]*?)'?$/,DB=/''/g,$B=/[a-zA-Z]/;function ri(e,t,n){var m,f,g,v,_,x,b,w;const r=ud(),s=(n==null?void 0:n.locale)??r.locale??ME,i=(n==null?void 0:n.firstWeekContainsDate)??((f=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(g=r.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((x=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:x.weekStartsOn)??r.weekStartsOn??((w=(b=r.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)??0,c=pt(e);if(!U8(c))throw new RangeError("Invalid time value");let u=t.match(AB).map(S=>{const k=S[0];if(k==="p"||k==="P"){const j=CB[k];return j(S,s.formatLong)}return S}).join("").match(LB).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const k=S[0];if(k==="'")return{isToken:!1,value:zB(S)};if(l1[k])return{isToken:!0,value:S};if(k.match($B))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:S}});s.localize.preprocessor&&(u=s.localize.preprocessor(c,u));const h={firstWeekContainsDate:i,weekStartsOn:l,locale:s};return u.map(S=>{if(!S.isToken)return S.value;const k=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&MB(k)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&PB(k))&&IB(k,t,String(e));const j=l1[k[0]];return j(c,k,s.localize,h)}).join("")}function zB(e){const t=e.match(OB);return t?t[1].replace(DB,"'"):e}function BB(e){const t=pt(e),n=t.getFullYear(),r=t.getMonth(),s=Ar(e,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function FB(e){return Math.trunc(+pt(e)/1e3)}function UB(e){const t=pt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function WB(e,t){return W8(UB(e),wr(e),t)+1}function vy(e,t){const n=pt(e),r=pt(t);return n.getTime()>r.getTime()}function OE(e,t){const n=pt(e),r=pt(t);return+n<+r}function h0(e,t){const n=pt(e),r=pt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function HB(e,t){const n=pt(e),r=pt(t);return n.getFullYear()===r.getFullYear()}function ag(e,t){return rr(e,-t)}function lg(e,t){const n=pt(e),r=n.getFullYear(),s=n.getDate(),i=Ar(e,0);i.setFullYear(r,t,15),i.setHours(0,0,0,0);const l=BB(i);return n.setMonth(t,Math.min(s,l)),n}function h1(e,t){const n=pt(e);return isNaN(+n)?Ar(e,NaN):(n.setFullYear(t),n)}const VB={lessThanXSeconds:{one:"   ",other:"  {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:" ",lessThanXMinutes:{one:"   ",other:"  {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xHours:{one:"1 ",other:"{{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:"  1 ",other:"  {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},GB=(e,t,n)=>{let r;const s=VB[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?" "+r:r+" ":r},ZB={full:"EEEE, d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"d/M/yy"},qB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KB={full:"{{date}} - {{time}}",long:"{{date}} - {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},YB={date:Sl({formats:ZB,defaultWidth:"full"}),time:Sl({formats:qB,defaultWidth:"full"}),dateTime:Sl({formats:KB,defaultWidth:"full"})},JB={lastWeek:e=>{switch(e.getDay()){case 6:return"' ' eeee '' p";default:return"' ' eeee '' p"}},yesterday:"' ' p",today:"' ' p",tomorrow:"' ' p",nextWeek:"eeee '' p",other:"P"},XB=(e,t)=>{const n=JB[e];return typeof n=="function"?n(t):n},QB={narrow:["",""],abbreviated:["..",".."],wide:[" "," "]},eF={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["1 ","2 ","3 ","4 "]},tF={narrow:["","","","","","","","","","","",""],abbreviated:["","","","","","","","","","","",""],wide:["","","","","","","","","","","",""]},nF={narrow:["","","","","","","","","","","",""],abbreviated:["","","","","","","","","","","",""],wide:["","","","","","","","","","","",""]},rF={narrow:["","","T","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},sF={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"..",pm:"..",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"..",pm:"..",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},iF=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;let s;return r==="year"||r==="month"?s="":r==="week"||r==="dayOfYear"||r==="day"||r==="hour"||r==="date"?s="":s="",n+s},oF={ordinalNumber:iF,era:Us({values:QB,defaultWidth:"wide"}),quarter:Us({values:eF,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Us({values:tF,defaultWidth:"wide",formattingValues:nF,defaultFormattingWidth:"wide"}),day:Us({values:rF,defaultWidth:"wide"}),dayPeriod:Us({values:sF,defaultWidth:"wide"})},aF=/^(\d+)(||)?/i,lF=/\d+/i,cF={narrow:/^(|)/i,abbreviated:/^(\.?\s?\.?|\.?\s?\.?\s?\.?|\.?\s?\.?|\.?\s?\.?)/i,wide:/^( (|)| (|)  (|) (|)|(|) (|)|(|) (|))/i},uF={any:[/^/i,/^(|)/i]},dF={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^[1234]? (|)/i},hF={any:[/1/i,/2/i,/3/i,/4/i]},fF={narrow:/^[]/i,abbreviated:/^(||[]||[][]|[]|[]|[]|||[]|)/i,wide:/^([][]|[][])(|)|([]|[]|[]|[]|[]|[]|[]|[]|[]|[])(|)/i},mF={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^[]/i,/^/i,/^[][]/i,/^[]/i,/^[]/i,/^[]/i,/^/i,/^/i,/^/i,/^/i]},pF={narrow:/^[]/i,short:/^(||||[]|[]|[])/i,abbreviated:/^(||||||)/i,wide:/^((|)|(|)|(|)|(|)|(|)|(|)|(|))/i},gF={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^[]/i,/^/i]},vF={narrow:/^(||(|)|(|)|(|)|(|)|(|)|(|))/i,any:/^([]\.?\s?\.?|(|)|(|)|(|)|(|)|(|)|(|))/i},yF={any:{am:/^|\.\s?\./i,pm:/^|\.\s?\./i,midnight:/^/i,noon:/^(|)/i,morning:/(|)/i,afternoon:/(|)/i,evening:/(|)/i,night:/(|)/i}},xF={ordinalNumber:PE({matchPattern:aF,parsePattern:lF,valueCallback:e=>parseInt(e,10)}),era:Ws({matchPatterns:cF,defaultMatchWidth:"wide",parsePatterns:uF,defaultParseWidth:"any"}),quarter:Ws({matchPatterns:dF,defaultMatchWidth:"wide",parsePatterns:hF,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ws({matchPatterns:fF,defaultMatchWidth:"wide",parsePatterns:mF,defaultParseWidth:"any"}),day:Ws({matchPatterns:pF,defaultMatchWidth:"wide",parsePatterns:gF,defaultParseWidth:"any"}),dayPeriod:Ws({matchPatterns:vF,defaultMatchWidth:"any",parsePatterns:yF,defaultParseWidth:"any"})},f0={code:"el",formatDistance:GB,formatLong:YB,formatRelative:XB,localize:oF,match:xF,options:{weekStartsOn:1,firstWeekContainsDate:4}};var et=function(){return et=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},et.apply(this,arguments)};function wF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function DE(e,t,n){for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function dd(e){return e.mode==="multiple"}function hd(e){return e.mode==="range"}function Im(e){return e.mode==="single"}var _F={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function bF(e,t){return ri(e,"LLLL y",t)}function SF(e,t){return ri(e,"d",t)}function NF(e,t){return ri(e,"LLLL",t)}function kF(e){return"".concat(e)}function CF(e,t){return ri(e,"cccccc",t)}function jF(e,t){return ri(e,"yyyy",t)}var EF=Object.freeze({__proto__:null,formatCaption:bF,formatDay:SF,formatMonthCaption:NF,formatWeekNumber:kF,formatWeekdayName:CF,formatYearCaption:jF}),TF=function(e,t,n){return ri(e,"do MMMM (EEEE)",n)},PF=function(){return"Month: "},MF=function(){return"Go to next month"},IF=function(){return"Go to previous month"},RF=function(e,t){return ri(e,"cccc",t)},LF=function(e){return"Week n. ".concat(e)},AF=function(){return"Year: "},OF=Object.freeze({__proto__:null,labelDay:TF,labelMonthDropdown:PF,labelNext:MF,labelPrevious:IF,labelWeekNumber:LF,labelWeekday:RF,labelYearDropdown:AF});function DF(){var e="buttons",t=_F,n=ME,r={},s={},i=1,l={},c=new Date;return{captionLayout:e,classNames:t,formatters:EF,labels:OF,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:l,today:c,mode:"default"}}function $F(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,i=e.fromDate,l=e.toDate;return r?i=wr(r):t&&(i=new Date(t,0,1)),s?l=u0(s):n&&(l=new Date(n,11,31)),{fromDate:i?Ql(i):void 0,toDate:l?Ql(l):void 0}}var $E=p.createContext(void 0);function zF(e){var t,n=e.initialProps,r=DF(),s=$F(n),i=s.fromDate,l=s.toDate,c=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;c!=="buttons"&&(!i||!l)&&(c="buttons");var u;(Im(n)||dd(n)||hd(n))&&(u=n.onSelect);var h=et(et(et({},r),n),{captionLayout:c,classNames:et(et({},r.classNames),n.classNames),components:et({},n.components),formatters:et(et({},r.formatters),n.formatters),fromDate:i,labels:et(et({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:et(et({},r.modifiers),n.modifiers),modifiersClassNames:et(et({},r.modifiersClassNames),n.modifiersClassNames),onSelect:u,styles:et(et({},r.styles),n.styles),toDate:l});return a.jsx($E.Provider,{value:h,children:e.children})}function Ut(){var e=p.useContext($E);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function zE(e){var t=Ut(),n=t.locale,r=t.classNames,s=t.styles,i=t.formatters.formatCaption;return a.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:n})})}function BF(e){return a.jsx("svg",et({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function BE(e){var t,n,r=e.onChange,s=e.value,i=e.children,l=e.caption,c=e.className,u=e.style,h=Ut(),m=(n=(t=h.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:BF;return a.jsxs("div",{className:c,style:u,children:[a.jsx("span",{className:h.classNames.vhidden,children:e["aria-label"]}),a.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:s,onChange:r,children:i}),a.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[l,a.jsx(m,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function FF(e){var t,n=Ut(),r=n.fromDate,s=n.toDate,i=n.styles,l=n.locale,c=n.formatters.formatMonthCaption,u=n.classNames,h=n.components,m=n.labels.labelMonthDropdown;if(!r)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});var f=[];if(HB(r,s))for(var g=wr(r),v=r.getMonth();v<=s.getMonth();v++)f.push(lg(g,v));else for(var g=wr(new Date),v=0;v<=11;v++)f.push(lg(g,v));var _=function(b){var w=Number(b.target.value),S=lg(wr(e.displayMonth),w);e.onChange(S)},x=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:BE;return a.jsx(x,{name:"months","aria-label":m(),className:u.dropdown_month,style:i.dropdown_month,onChange:_,value:e.displayMonth.getMonth(),caption:c(e.displayMonth,{locale:l}),children:f.map(function(b){return a.jsx("option",{value:b.getMonth(),children:c(b,{locale:l})},b.getMonth())})})}function UF(e){var t,n=e.displayMonth,r=Ut(),s=r.fromDate,i=r.toDate,l=r.locale,c=r.styles,u=r.classNames,h=r.components,m=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,g=[];if(!s)return a.jsx(a.Fragment,{});if(!i)return a.jsx(a.Fragment,{});for(var v=s.getFullYear(),_=i.getFullYear(),x=v;x<=_;x++)g.push(h1(EE(new Date),x));var b=function(S){var k=h1(wr(n),Number(S.target.value));e.onChange(k)},w=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:BE;return a.jsx(w,{name:"years","aria-label":f(),className:u.dropdown_year,style:c.dropdown_year,onChange:b,value:n.getFullYear(),caption:m(n,{locale:l}),children:g.map(function(S){return a.jsx("option",{value:S.getFullYear(),children:m(S,{locale:l})},S.getFullYear())})})}function WF(e,t){var n=p.useState(e),r=n[0],s=n[1],i=t===void 0?r:t;return[i,s]}function HF(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,i=e.toDate,l=e.fromDate,c=e.numberOfMonths,u=c===void 0?1:c;if(i&&Fu(i,s)<0){var h=-1*(u-1);s=Es(i,h)}return l&&Fu(s,l)<0&&(s=l),wr(s)}function VF(){var e=Ut(),t=HF(e),n=WF(t,e.month),r=n[0],s=n[1],i=function(l){var c;if(!e.disableNavigation){var u=wr(l);s(u),(c=e.onMonthChange)===null||c===void 0||c.call(e,u)}};return[r,i]}function GF(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=wr(e),i=wr(Es(s,r)),l=Fu(i,s),c=[],u=0;u<l;u++){var h=Es(s,u);c.push(h)}return n&&(c=c.reverse()),c}function ZF(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,i=s===void 0?1:s,l=r?i:1,c=wr(e);if(!n)return Es(c,l);var u=Fu(n,e);if(!(u<i))return Es(c,l)}}function qF(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,i=s===void 0?1:s,l=r?i:1,c=wr(e);if(!n)return Es(c,-l);var u=Fu(c,n);if(!(u<=0))return Es(c,-l)}}var FE=p.createContext(void 0);function KF(e){var t=Ut(),n=VF(),r=n[0],s=n[1],i=GF(r,t),l=ZF(r,t),c=qF(r,t),u=function(f){return i.some(function(g){return h0(f,g)})},h=function(f,g){u(f)||(g&&OE(f,g)?s(Es(f,1+t.numberOfMonths*-1)):s(f))},m={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:h,previousMonth:c,nextMonth:l,isDateDisplayed:u};return a.jsx(FE.Provider,{value:m,children:e.children})}function fd(){var e=p.useContext(FE);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function f1(e){var t,n=Ut(),r=n.classNames,s=n.styles,i=n.components,l=fd().goToMonth,c=function(m){l(Es(m,e.displayIndex?-e.displayIndex:0))},u=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:zE,h=a.jsx(u,{id:e.id,displayMonth:e.displayMonth});return a.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[a.jsx("div",{className:r.vhidden,children:h}),a.jsx(FF,{onChange:c,displayMonth:e.displayMonth}),a.jsx(UF,{onChange:c,displayMonth:e.displayMonth})]})}function YF(e){return a.jsx("svg",et({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function JF(e){return a.jsx("svg",et({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Mf=p.forwardRef(function(e,t){var n=Ut(),r=n.classNames,s=n.styles,i=[r.button_reset,r.button];e.className&&i.push(e.className);var l=i.join(" "),c=et(et({},s.button_reset),s.button);return e.style&&Object.assign(c,e.style),a.jsx("button",et({},e,{ref:t,type:"button",className:l,style:c}))});function XF(e){var t,n,r=Ut(),s=r.dir,i=r.locale,l=r.classNames,c=r.styles,u=r.labels,h=u.labelPrevious,m=u.labelNext,f=r.components;if(!e.nextMonth&&!e.previousMonth)return a.jsx(a.Fragment,{});var g=h(e.previousMonth,{locale:i}),v=[l.nav_button,l.nav_button_previous].join(" "),_=m(e.nextMonth,{locale:i}),x=[l.nav_button,l.nav_button_next].join(" "),b=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:JF,w=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:YF;return a.jsxs("div",{className:l.nav,style:c.nav,children:[!e.hidePrevious&&a.jsx(Mf,{name:"previous-month","aria-label":g,className:v,style:c.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?a.jsx(b,{className:l.nav_icon,style:c.nav_icon}):a.jsx(w,{className:l.nav_icon,style:c.nav_icon})}),!e.hideNext&&a.jsx(Mf,{name:"next-month","aria-label":_,className:x,style:c.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?a.jsx(w,{className:l.nav_icon,style:c.nav_icon}):a.jsx(b,{className:l.nav_icon,style:c.nav_icon})})]})}function m1(e){var t=Ut().numberOfMonths,n=fd(),r=n.previousMonth,s=n.nextMonth,i=n.goToMonth,l=n.displayMonths,c=l.findIndex(function(_){return h0(e.displayMonth,_)}),u=c===0,h=c===l.length-1,m=t>1&&(u||!h),f=t>1&&(h||!u),g=function(){r&&i(r)},v=function(){s&&i(s)};return a.jsx(XF,{displayMonth:e.displayMonth,hideNext:m,hidePrevious:f,nextMonth:s,previousMonth:r,onPreviousClick:g,onNextClick:v})}function QF(e){var t,n=Ut(),r=n.classNames,s=n.disableNavigation,i=n.styles,l=n.captionLayout,c=n.components,u=(t=c==null?void 0:c.CaptionLabel)!==null&&t!==void 0?t:zE,h;return s?h=a.jsx(u,{id:e.id,displayMonth:e.displayMonth}):l==="dropdown"?h=a.jsx(f1,{displayMonth:e.displayMonth,id:e.id}):l==="dropdown-buttons"?h=a.jsxs(a.Fragment,{children:[a.jsx(f1,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),a.jsx(m1,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):h=a.jsxs(a.Fragment,{children:[a.jsx(u,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),a.jsx(m1,{displayMonth:e.displayMonth,id:e.id})]}),a.jsx("div",{className:r.caption,style:i.caption,children:h})}function eU(e){var t=Ut(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?a.jsx("tfoot",{className:s,style:r.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:n})})}):a.jsx(a.Fragment,{})}function tU(e,t,n){for(var r=n?Sa(new Date):Qs(new Date,{locale:e,weekStartsOn:t}),s=[],i=0;i<7;i++){var l=rr(r,i);s.push(l)}return s}function nU(){var e=Ut(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,i=e.weekStartsOn,l=e.ISOWeek,c=e.formatters.formatWeekdayName,u=e.labels.labelWeekday,h=tU(s,i,l);return a.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&a.jsx("td",{style:n.head_cell,className:t.head_cell}),h.map(function(m,f){return a.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":u(m,{locale:s}),children:c(m,{locale:s})},f)})]})}function rU(){var e,t=Ut(),n=t.classNames,r=t.styles,s=t.components,i=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:nU;return a.jsx("thead",{style:r.head,className:n.head,children:a.jsx(i,{})})}function sU(e){var t=Ut(),n=t.locale,r=t.formatters.formatDay;return a.jsx(a.Fragment,{children:r(e.date,{locale:n})})}var m0=p.createContext(void 0);function iU(e){if(!dd(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return a.jsx(m0.Provider,{value:t,children:e.children})}return a.jsx(oU,{initialProps:e.initialProps,children:e.children})}function oU(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,i=t.max,l=function(h,m,f){var g,v;(g=t.onDayClick)===null||g===void 0||g.call(t,h,m,f);var _=!!(m.selected&&s&&(r==null?void 0:r.length)===s);if(!_){var x=!!(!m.selected&&i&&(r==null?void 0:r.length)===i);if(!x){var b=r?DE([],r):[];if(m.selected){var w=b.findIndex(function(S){return gr(h,S)});b.splice(w,1)}else b.push(h);(v=t.onSelect)===null||v===void 0||v.call(t,b,h,m,f)}}},c={disabled:[]};r&&c.disabled.push(function(h){var m=i&&r.length>i-1,f=r.some(function(g){return gr(g,h)});return!!(m&&!f)});var u={selected:r,onDayClick:l,modifiers:c};return a.jsx(m0.Provider,{value:u,children:n})}function p0(){var e=p.useContext(m0);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function aU(e,t){var n=t||{},r=n.from,s=n.to;return r&&s?gr(s,e)&&gr(r,e)?void 0:gr(s,e)?{from:s,to:void 0}:gr(r,e)?void 0:vy(r,e)?{from:e,to:s}:{from:r,to:e}:s?vy(e,s)?{from:s,to:e}:{from:e,to:s}:r?OE(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var g0=p.createContext(void 0);function lU(e){if(!hd(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(g0.Provider,{value:t,children:e.children})}return a.jsx(cU,{initialProps:e.initialProps,children:e.children})}function cU(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},i=s.from,l=s.to,c=t.min,u=t.max,h=function(v,_,x){var b,w;(b=t.onDayClick)===null||b===void 0||b.call(t,v,_,x);var S=aU(v,r);(w=t.onSelect)===null||w===void 0||w.call(t,S,v,_,x)},m={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(m.range_start=[i],l?(m.range_end=[l],gr(i,l)||(m.range_middle=[{after:i,before:l}])):m.range_end=[i]):l&&(m.range_start=[l],m.range_end=[l]),c&&(i&&!l&&m.disabled.push({after:ag(i,c-1),before:rr(i,c-1)}),i&&l&&m.disabled.push({after:i,before:rr(i,c-1)}),!i&&l&&m.disabled.push({after:ag(l,c-1),before:rr(l,c-1)})),u){if(i&&!l&&(m.disabled.push({before:rr(i,-u+1)}),m.disabled.push({after:rr(i,u-1)})),i&&l){var f=xs(l,i)+1,g=u-f;m.disabled.push({before:ag(i,g)}),m.disabled.push({after:rr(l,g)})}!i&&l&&(m.disabled.push({before:rr(l,-u+1)}),m.disabled.push({after:rr(l,u-1)}))}return a.jsx(g0.Provider,{value:{selected:r,onDayClick:h,modifiers:m},children:n})}function v0(){var e=p.useContext(g0);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Ih(e){return Array.isArray(e)?DE([],e):e!==void 0?[e]:[]}function uU(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=Ih(s)}),t}var Ts;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Ts||(Ts={}));var dU=Ts.Selected,fi=Ts.Disabled,hU=Ts.Hidden,fU=Ts.Today,cg=Ts.RangeEnd,ug=Ts.RangeMiddle,dg=Ts.RangeStart,mU=Ts.Outside;function pU(e,t,n){var r,s=(r={},r[dU]=Ih(e.selected),r[fi]=Ih(e.disabled),r[hU]=Ih(e.hidden),r[fU]=[e.today],r[cg]=[],r[ug]=[],r[dg]=[],r[mU]=[],r);return e.fromDate&&s[fi].push({before:e.fromDate}),e.toDate&&s[fi].push({after:e.toDate}),dd(e)?s[fi]=s[fi].concat(t.modifiers[fi]):hd(e)&&(s[fi]=s[fi].concat(n.modifiers[fi]),s[dg]=n.modifiers[dg],s[ug]=n.modifiers[ug],s[cg]=n.modifiers[cg]),s}var UE=p.createContext(void 0);function gU(e){var t=Ut(),n=p0(),r=v0(),s=pU(t,n,r),i=uU(t.modifiers),l=et(et({},s),i);return a.jsx(UE.Provider,{value:l,children:e.children})}function WE(){var e=p.useContext(UE);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function vU(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function yU(e){return!!(e&&typeof e=="object"&&"from"in e)}function xU(e){return!!(e&&typeof e=="object"&&"after"in e)}function wU(e){return!!(e&&typeof e=="object"&&"before"in e)}function _U(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function bU(e,t){var n,r=t.from,s=t.to;if(r&&s){var i=xs(s,r)<0;i&&(n=[s,r],r=n[0],s=n[1]);var l=xs(e,r)>=0&&xs(s,e)>=0;return l}return s?gr(s,e):r?gr(r,e):!1}function SU(e){return c0(e)}function NU(e){return Array.isArray(e)&&e.every(c0)}function kU(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(SU(n))return gr(e,n);if(NU(n))return n.includes(e);if(yU(n))return bU(e,n);if(_U(n))return n.dayOfWeek.includes(e.getDay());if(vU(n)){var r=xs(n.before,e),s=xs(n.after,e),i=r>0,l=s<0,c=vy(n.before,n.after);return c?l&&i:i||l}return xU(n)?xs(e,n.after)>0:wU(n)?xs(n.before,e)>0:typeof n=="function"?n(e):!1})}function y0(e,t,n){var r=Object.keys(t).reduce(function(i,l){var c=t[l];return kU(e,c)&&i.push(l),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),n&&!h0(e,n)&&(s.outside=!0),s}function CU(e,t){for(var n=wr(e[0]),r=u0(e[e.length-1]),s,i,l=n;l<=r;){var c=y0(l,t),u=!c.disabled&&!c.hidden;if(!u){l=rr(l,1);continue}if(c.selected)return l;c.today&&!i&&(i=l),s||(s=l),l=rr(l,1)}return i||s}var jU=365;function HE(e,t){var n=t.moveBy,r=t.direction,s=t.context,i=t.modifiers,l=t.retry,c=l===void 0?{count:0,lastFocused:e}:l,u=s.weekStartsOn,h=s.fromDate,m=s.toDate,f=s.locale,g={day:rr,week:gy,month:Es,year:z8,startOfWeek:function(b){return s.ISOWeek?Sa(b):Qs(b,{locale:f,weekStartsOn:u})},endOfWeek:function(b){return s.ISOWeek?TE(b):d0(b,{locale:f,weekStartsOn:u})}},v=g[n](e,r==="after"?1:-1);r==="before"&&h?v=B8([h,v]):r==="after"&&m&&(v=F8([m,v]));var _=!0;if(i){var x=y0(v,i);_=!x.disabled&&!x.hidden}return _?v:c.count>jU?c.lastFocused:HE(v,{moveBy:n,direction:r,context:s,modifiers:i,retry:et(et({},c),{count:c.count+1})})}var VE=p.createContext(void 0);function EU(e){var t=fd(),n=WE(),r=p.useState(),s=r[0],i=r[1],l=p.useState(),c=l[0],u=l[1],h=CU(t.displayMonths,n),m=s??(c&&t.isDateDisplayed(c))?c:h,f=function(){u(s),i(void 0)},g=function(b){i(b)},v=Ut(),_=function(b,w){if(s){var S=HE(s,{moveBy:b,direction:w,context:v,modifiers:n});gr(s,S)||(t.goToDate(S,s),g(S))}},x={focusedDay:s,focusTarget:m,blur:f,focus:g,focusDayAfter:function(){return _("day","after")},focusDayBefore:function(){return _("day","before")},focusWeekAfter:function(){return _("week","after")},focusWeekBefore:function(){return _("week","before")},focusMonthBefore:function(){return _("month","before")},focusMonthAfter:function(){return _("month","after")},focusYearBefore:function(){return _("year","before")},focusYearAfter:function(){return _("year","after")},focusStartOfWeek:function(){return _("startOfWeek","before")},focusEndOfWeek:function(){return _("endOfWeek","after")}};return a.jsx(VE.Provider,{value:x,children:e.children})}function x0(){var e=p.useContext(VE);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function TU(e,t){var n=WE(),r=y0(e,n,t);return r}var w0=p.createContext(void 0);function PU(e){if(!Im(e.initialProps)){var t={selected:void 0};return a.jsx(w0.Provider,{value:t,children:e.children})}return a.jsx(MU,{initialProps:e.initialProps,children:e.children})}function MU(e){var t=e.initialProps,n=e.children,r=function(i,l,c){var u,h,m;if((u=t.onDayClick)===null||u===void 0||u.call(t,i,l,c),l.selected&&!t.required){(h=t.onSelect)===null||h===void 0||h.call(t,void 0,i,l,c);return}(m=t.onSelect)===null||m===void 0||m.call(t,i,i,l,c)},s={selected:t.selected,onDayClick:r};return a.jsx(w0.Provider,{value:s,children:n})}function GE(){var e=p.useContext(w0);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function IU(e,t){var n=Ut(),r=GE(),s=p0(),i=v0(),l=x0(),c=l.focusDayAfter,u=l.focusDayBefore,h=l.focusWeekAfter,m=l.focusWeekBefore,f=l.blur,g=l.focus,v=l.focusMonthBefore,_=l.focusMonthAfter,x=l.focusYearBefore,b=l.focusYearAfter,w=l.focusStartOfWeek,S=l.focusEndOfWeek,k=function(U){var I,O,F,X;Im(n)?(I=r.onDayClick)===null||I===void 0||I.call(r,e,t,U):dd(n)?(O=s.onDayClick)===null||O===void 0||O.call(s,e,t,U):hd(n)?(F=i.onDayClick)===null||F===void 0||F.call(i,e,t,U):(X=n.onDayClick)===null||X===void 0||X.call(n,e,t,U)},j=function(U){var I;g(e),(I=n.onDayFocus)===null||I===void 0||I.call(n,e,t,U)},T=function(U){var I;f(),(I=n.onDayBlur)===null||I===void 0||I.call(n,e,t,U)},R=function(U){var I;(I=n.onDayMouseEnter)===null||I===void 0||I.call(n,e,t,U)},E=function(U){var I;(I=n.onDayMouseLeave)===null||I===void 0||I.call(n,e,t,U)},B=function(U){var I;(I=n.onDayPointerEnter)===null||I===void 0||I.call(n,e,t,U)},q=function(U){var I;(I=n.onDayPointerLeave)===null||I===void 0||I.call(n,e,t,U)},Y=function(U){var I;(I=n.onDayTouchCancel)===null||I===void 0||I.call(n,e,t,U)},te=function(U){var I;(I=n.onDayTouchEnd)===null||I===void 0||I.call(n,e,t,U)},A=function(U){var I;(I=n.onDayTouchMove)===null||I===void 0||I.call(n,e,t,U)},W=function(U){var I;(I=n.onDayTouchStart)===null||I===void 0||I.call(n,e,t,U)},P=function(U){var I;(I=n.onDayKeyUp)===null||I===void 0||I.call(n,e,t,U)},Z=function(U){var I;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?c():u();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?u():c();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),h();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),m();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?x():v();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?b():_();break;case"Home":U.preventDefault(),U.stopPropagation(),w();break;case"End":U.preventDefault(),U.stopPropagation(),S();break}(I=n.onDayKeyDown)===null||I===void 0||I.call(n,e,t,U)},$={onClick:k,onFocus:j,onBlur:T,onKeyDown:Z,onKeyUp:P,onMouseEnter:R,onMouseLeave:E,onPointerEnter:B,onPointerLeave:q,onTouchCancel:Y,onTouchEnd:te,onTouchMove:A,onTouchStart:W};return $}function RU(){var e=Ut(),t=GE(),n=p0(),r=v0(),s=Im(e)?t.selected:dd(e)?n.selected:hd(e)?r.selected:void 0;return s}function LU(e){return Object.values(Ts).includes(e)}function AU(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(LU(r)){var i=e.classNames["day_".concat(r)];i&&n.push(i)}}),n}function OU(e,t){var n=et({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=et(et({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function DU(e,t,n){var r,s,i,l=Ut(),c=x0(),u=TU(e,t),h=IU(e,u),m=RU(),f=!!(l.onDayClick||l.mode!=="default");p.useEffect(function(){var R;u.outside||c.focusedDay&&f&&gr(c.focusedDay,e)&&((R=n.current)===null||R===void 0||R.focus())},[c.focusedDay,e,n,f,u.outside]);var g=AU(l,u).join(" "),v=OU(l,u),_=!!(u.outside&&!l.showOutsideDays||u.hidden),x=(i=(s=l.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:sU,b=a.jsx(x,{date:e,displayMonth:t,activeModifiers:u}),w={style:v,className:g,children:b,role:"gridcell"},S=c.focusTarget&&gr(c.focusTarget,e)&&!u.outside,k=c.focusedDay&&gr(c.focusedDay,e),j=et(et(et({},w),(r={disabled:u.disabled,role:"gridcell"},r["aria-selected"]=u.selected,r.tabIndex=k||S?0:-1,r)),h),T={isButton:f,isHidden:_,activeModifiers:u,selectedDays:m,buttonProps:j,divProps:w};return T}function $U(e){var t=p.useRef(null),n=DU(e.date,e.displayMonth,t);return n.isHidden?a.jsx("div",{role:"gridcell"}):n.isButton?a.jsx(Mf,et({name:"day",ref:t},n.buttonProps)):a.jsx("div",et({},n.divProps))}function zU(e){var t=e.number,n=e.dates,r=Ut(),s=r.onWeekNumberClick,i=r.styles,l=r.classNames,c=r.locale,u=r.labels.labelWeekNumber,h=r.formatters.formatWeekNumber,m=h(Number(t),{locale:c});if(!s)return a.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:m});var f=u(Number(t),{locale:c}),g=function(v){s(t,n,v)};return a.jsx(Mf,{name:"week-number","aria-label":f,className:l.weeknumber,style:i.weeknumber,onClick:g,children:m})}function BU(e){var t,n,r=Ut(),s=r.styles,i=r.classNames,l=r.showWeekNumber,c=r.components,u=(t=c==null?void 0:c.Day)!==null&&t!==void 0?t:$U,h=(n=c==null?void 0:c.WeekNumber)!==null&&n!==void 0?n:zU,m;return l&&(m=a.jsx("td",{className:i.cell,style:s.cell,children:a.jsx(h,{number:e.weekNumber,dates:e.dates})})),a.jsxs("tr",{className:i.row,style:s.row,children:[m,e.dates.map(function(f){return a.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:a.jsx(u,{displayMonth:e.displayMonth,date:f})},FB(f))})]})}function p1(e,t,n){for(var r=n!=null&&n.ISOWeek?TE(t):d0(t,n),s=n!=null&&n.ISOWeek?Sa(e):Qs(e,n),i=xs(r,s),l=[],c=0;c<=i;c++)l.push(rr(s,c));var u=l.reduce(function(h,m){var f=n!=null&&n.ISOWeek?IE(m):LE(m,n),g=h.find(function(v){return v.weekNumber===f});return g?(g.dates.push(m),h):(h.push({weekNumber:f,dates:[m]}),h)},[]);return u}function FU(e,t){var n=p1(wr(e),u0(e),t);if(t!=null&&t.useFixedWeeks){var r=WB(e,t);if(r<6){var s=n[n.length-1],i=s.dates[s.dates.length-1],l=gy(i,6-r),c=p1(gy(i,1),l,t);n.push.apply(n,c)}}return n}function UU(e){var t,n,r,s=Ut(),i=s.locale,l=s.classNames,c=s.styles,u=s.hideHead,h=s.fixedWeeks,m=s.components,f=s.weekStartsOn,g=s.firstWeekContainsDate,v=s.ISOWeek,_=FU(e.displayMonth,{useFixedWeeks:!!h,ISOWeek:v,locale:i,weekStartsOn:f,firstWeekContainsDate:g}),x=(t=m==null?void 0:m.Head)!==null&&t!==void 0?t:rU,b=(n=m==null?void 0:m.Row)!==null&&n!==void 0?n:BU,w=(r=m==null?void 0:m.Footer)!==null&&r!==void 0?r:eU;return a.jsxs("table",{id:e.id,className:l.table,style:c.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!u&&a.jsx(x,{}),a.jsx("tbody",{className:l.tbody,style:c.tbody,children:_.map(function(S){return a.jsx(b,{displayMonth:e.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),a.jsx(w,{displayMonth:e.displayMonth})]})}function WU(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var HU=WU()?p.useLayoutEffect:p.useEffect,hg=!1,VU=0;function g1(){return"react-day-picker-".concat(++VU)}function GU(e){var t,n=e??(hg?g1():null),r=p.useState(n),s=r[0],i=r[1];return HU(function(){s===null&&i(g1())},[]),p.useEffect(function(){hg===!1&&(hg=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function ZU(e){var t,n,r=Ut(),s=r.dir,i=r.classNames,l=r.styles,c=r.components,u=fd().displayMonths,h=GU(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),m=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],g=l.month,v=e.displayIndex===0,_=e.displayIndex===u.length-1,x=!v&&!_;s==="rtl"&&(t=[v,_],_=t[0],v=t[1]),v&&(f.push(i.caption_start),g=et(et({},g),l.caption_start)),_&&(f.push(i.caption_end),g=et(et({},g),l.caption_end)),x&&(f.push(i.caption_between),g=et(et({},g),l.caption_between));var b=(n=c==null?void 0:c.Caption)!==null&&n!==void 0?n:QF;return a.jsxs("div",{className:f.join(" "),style:g,children:[a.jsx(b,{id:h,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),a.jsx(UU,{id:m,"aria-labelledby":h,displayMonth:e.displayMonth})]},e.displayIndex)}function qU(e){var t=Ut(),n=t.classNames,r=t.styles;return a.jsx("div",{className:n.months,style:r.months,children:e.children})}function KU(e){var t,n,r=e.initialProps,s=Ut(),i=x0(),l=fd(),c=p.useState(!1),u=c[0],h=c[1];p.useEffect(function(){s.initialFocus&&i.focusTarget&&(u||(i.focus(i.focusTarget),h(!0)))},[s.initialFocus,u,i.focus,i.focusTarget,i]);var m=[s.classNames.root,s.className];s.numberOfMonths>1&&m.push(s.classNames.multiple_months),s.showWeekNumber&&m.push(s.classNames.with_weeknumber);var f=et(et({},s.styles.root),s.style),g=Object.keys(r).filter(function(_){return _.startsWith("data-")}).reduce(function(_,x){var b;return et(et({},_),(b={},b[x]=r[x],b))},{}),v=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:qU;return a.jsx("div",et({className:m.join(" "),style:f,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},g,{children:a.jsx(v,{children:l.displayMonths.map(function(_,x){return a.jsx(ZU,{displayIndex:x,displayMonth:_},x)})})}))}function YU(e){var t=e.children,n=wF(e,["children"]);return a.jsx(zF,{initialProps:n,children:a.jsx(KF,{children:a.jsx(PU,{initialProps:n,children:a.jsx(iU,{initialProps:n,children:a.jsx(lU,{initialProps:n,children:a.jsx(gU,{children:a.jsx(EU,{children:t})})})})})})})}function JU(e){return a.jsx(YU,et({},e,{children:a.jsx(KU,{initialProps:e})}))}function ZE({className:e,classNames:t,showOutsideDays:n=!0,...r}){return a.jsx(JU,{showOutsideDays:n,className:ye("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ye(Vv({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ye(Vv({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:()=>a.jsx(Qk,{className:"h-4 w-4"}),IconRight:()=>a.jsx(Co,{className:"h-4 w-4"})},...r})}ZE.displayName="Calendar";const Na=p.forwardRef(({className:e,type:t,...n},r)=>a.jsx("input",{type:t,className:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Na.displayName="Input";var yy=["Enter"," "],XU=["ArrowDown","PageUp","Home"],qE=["ArrowUp","PageDown","End"],QU=[...XU,...qE],e9={ltr:[...yy,"ArrowRight"],rtl:[...yy,"ArrowLeft"]},t9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},md="Menu",[Uu,n9,r9]=Qu(md),[Pa,KE]=_r(md,[r9,jo,pm]),Rm=jo(),YE=pm(),[s9,Ma]=Pa(md),[i9,pd]=Pa(md),JE=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:l=!0}=e,c=Rm(t),[u,h]=p.useState(null),m=p.useRef(!1),f=fn(i),g=hc(s);return p.useEffect(()=>{const v=()=>{m.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>m.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),a.jsx(lm,{...c,children:a.jsx(s9,{scope:t,open:n,onOpenChange:f,content:u,onContentChange:h,children:a.jsx(i9,{scope:t,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:m,dir:g,modal:l,children:r})})})};JE.displayName=md;var o9="MenuAnchor",_0=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Rm(n);return a.jsx(rd,{...s,...r,ref:t})});_0.displayName=o9;var b0="MenuPortal",[a9,XE]=Pa(b0,{forceMount:void 0}),QE=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=Ma(b0,t);return a.jsx(a9,{scope:t,forceMount:n,children:a.jsx(ar,{present:n||i.open,children:a.jsx(ed,{asChild:!0,container:s,children:r})})})};QE.displayName=b0;var Xr="MenuContent",[l9,S0]=Pa(Xr),eT=p.forwardRef((e,t)=>{const n=XE(Xr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=Ma(Xr,e.__scopeMenu),l=pd(Xr,e.__scopeMenu);return a.jsx(Uu.Provider,{scope:e.__scopeMenu,children:a.jsx(ar,{present:r||i.open,children:a.jsx(Uu.Slot,{scope:e.__scopeMenu,children:l.modal?a.jsx(c9,{...s,ref:t}):a.jsx(u9,{...s,ref:t})})})})}),c9=p.forwardRef((e,t)=>{const n=Ma(Xr,e.__scopeMenu),r=p.useRef(null),s=st(t,r);return p.useEffect(()=>{const i=r.current;if(i)return Qx(i)},[]),a.jsx(N0,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:_e(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),u9=p.forwardRef((e,t)=>{const n=Ma(Xr,e.__scopeMenu);return a.jsx(N0,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),d9=pa("MenuContent.ScrollLock"),N0=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:g,onDismiss:v,disableOutsideScroll:_,...x}=e,b=Ma(Xr,n),w=pd(Xr,n),S=Rm(n),k=YE(n),j=n9(n),[T,R]=p.useState(null),E=p.useRef(null),B=st(t,E,b.onContentChange),q=p.useRef(0),Y=p.useRef(""),te=p.useRef(0),A=p.useRef(null),W=p.useRef("right"),P=p.useRef(0),Z=_?bm:p.Fragment,$=_?{as:d9,allowPinchZoom:!0}:void 0,U=O=>{var ce,ke;const F=Y.current+O,X=j().filter(Oe=>!Oe.disabled),re=document.activeElement,ae=(ce=X.find(Oe=>Oe.ref.current===re))==null?void 0:ce.textValue,ie=X.map(Oe=>Oe.textValue),oe=S9(ie,F,ae),ge=(ke=X.find(Oe=>Oe.textValue===oe))==null?void 0:ke.ref.current;(function Oe(Pe){Y.current=Pe,window.clearTimeout(q.current),Pe!==""&&(q.current=window.setTimeout(()=>Oe(""),1e3))})(F),ge&&setTimeout(()=>ge.focus())};p.useEffect(()=>()=>window.clearTimeout(q.current),[]),Xx();const I=p.useCallback(O=>{var X,re;return W.current===((X=A.current)==null?void 0:X.side)&&k9(O,(re=A.current)==null?void 0:re.area)},[]);return a.jsx(l9,{scope:n,searchRef:Y,onItemEnter:p.useCallback(O=>{I(O)&&O.preventDefault()},[I]),onItemLeave:p.useCallback(O=>{var F;I(O)||((F=E.current)==null||F.focus(),R(null))},[I]),onTriggerLeave:p.useCallback(O=>{I(O)&&O.preventDefault()},[I]),pointerGraceTimerRef:te,onPointerGraceIntentChange:p.useCallback(O=>{A.current=O},[]),children:a.jsx(Z,{...$,children:a.jsx(wm,{asChild:!0,trapped:s,onMountAutoFocus:_e(i,O=>{var F;O.preventDefault(),(F=E.current)==null||F.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:a.jsx(ic,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:g,onDismiss:v,children:a.jsx(vj,{asChild:!0,...k,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:R,onEntryFocus:_e(u,O=>{w.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(cm,{role:"menu","aria-orientation":"vertical","data-state":gT(b.open),"data-radix-menu-content":"",dir:w.dir,...S,...x,ref:B,style:{outline:"none",...x.style},onKeyDown:_e(x.onKeyDown,O=>{const X=O.target.closest("[data-radix-menu-content]")===O.currentTarget,re=O.ctrlKey||O.altKey||O.metaKey,ae=O.key.length===1;X&&(O.key==="Tab"&&O.preventDefault(),!re&&ae&&U(O.key));const ie=E.current;if(O.target!==ie||!QU.includes(O.key))return;O.preventDefault();const ge=j().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);qE.includes(O.key)&&ge.reverse(),_9(ge)}),onBlur:_e(e.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(q.current),Y.current="")}),onPointerMove:_e(e.onPointerMove,Wu(O=>{const F=O.target,X=P.current!==O.clientX;if(O.currentTarget.contains(F)&&X){const re=O.clientX>P.current?"right":"left";W.current=re,P.current=O.clientX}}))})})})})})})});eT.displayName=Xr;var h9="MenuGroup",k0=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(De.div,{role:"group",...r,ref:t})});k0.displayName=h9;var f9="MenuLabel",tT=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(De.div,{...r,ref:t})});tT.displayName=f9;var If="MenuItem",v1="menu.itemSelect",Lm=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=p.useRef(null),l=pd(If,e.__scopeMenu),c=S0(If,e.__scopeMenu),u=st(t,i),h=p.useRef(!1),m=()=>{const f=i.current;if(!n&&f){const g=new CustomEvent(v1,{bubbles:!0,cancelable:!0});f.addEventListener(v1,v=>r==null?void 0:r(v),{once:!0}),bx(f,g),g.defaultPrevented?h.current=!1:l.onClose()}};return a.jsx(nT,{...s,ref:u,disabled:n,onClick:_e(e.onClick,m),onPointerDown:f=>{var g;(g=e.onPointerDown)==null||g.call(e,f),h.current=!0},onPointerUp:_e(e.onPointerUp,f=>{var g;h.current||(g=f.currentTarget)==null||g.click()}),onKeyDown:_e(e.onKeyDown,f=>{const g=c.searchRef.current!=="";n||g&&f.key===" "||yy.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Lm.displayName=If;var nT=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,l=S0(If,n),c=YE(n),u=p.useRef(null),h=st(t,u),[m,f]=p.useState(!1),[g,v]=p.useState("");return p.useEffect(()=>{const _=u.current;_&&v((_.textContent??"").trim())},[i.children]),a.jsx(Uu.ItemSlot,{scope:n,disabled:r,textValue:s??g,children:a.jsx(yj,{asChild:!0,...c,focusable:!r,children:a.jsx(De.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:h,onPointerMove:_e(e.onPointerMove,Wu(_=>{r?l.onItemLeave(_):(l.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:_e(e.onPointerLeave,Wu(_=>l.onItemLeave(_))),onFocus:_e(e.onFocus,()=>f(!0)),onBlur:_e(e.onBlur,()=>f(!1))})})})}),m9="MenuCheckboxItem",rT=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return a.jsx(lT,{scope:e.__scopeMenu,checked:n,children:a.jsx(Lm,{role:"menuitemcheckbox","aria-checked":Rf(n)?"mixed":n,...s,ref:t,"data-state":j0(n),onSelect:_e(s.onSelect,()=>r==null?void 0:r(Rf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});rT.displayName=m9;var sT="MenuRadioGroup",[p9,g9]=Pa(sT,{value:void 0,onValueChange:()=>{}}),iT=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=fn(r);return a.jsx(p9,{scope:e.__scopeMenu,value:n,onValueChange:i,children:a.jsx(k0,{...s,ref:t})})});iT.displayName=sT;var oT="MenuRadioItem",aT=p.forwardRef((e,t)=>{const{value:n,...r}=e,s=g9(oT,e.__scopeMenu),i=n===s.value;return a.jsx(lT,{scope:e.__scopeMenu,checked:i,children:a.jsx(Lm,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":j0(i),onSelect:_e(r.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,n)},{checkForDefaultPrevented:!1})})})});aT.displayName=oT;var C0="MenuItemIndicator",[lT,v9]=Pa(C0,{checked:!1}),cT=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=v9(C0,n);return a.jsx(ar,{present:r||Rf(i.checked)||i.checked===!0,children:a.jsx(De.span,{...s,ref:t,"data-state":j0(i.checked)})})});cT.displayName=C0;var y9="MenuSeparator",uT=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return a.jsx(De.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});uT.displayName=y9;var x9="MenuArrow",dT=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Rm(n);return a.jsx(um,{...s,...r,ref:t})});dT.displayName=x9;var w9="MenuSub",[DH,hT]=Pa(w9),Jc="MenuSubTrigger",fT=p.forwardRef((e,t)=>{const n=Ma(Jc,e.__scopeMenu),r=pd(Jc,e.__scopeMenu),s=hT(Jc,e.__scopeMenu),i=S0(Jc,e.__scopeMenu),l=p.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=i,h={__scopeMenu:e.__scopeMenu},m=p.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return p.useEffect(()=>m,[m]),p.useEffect(()=>{const f=c.current;return()=>{window.clearTimeout(f),u(null)}},[c,u]),a.jsx(_0,{asChild:!0,...h,children:a.jsx(nT,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":gT(n.open),...e,ref:tm(t,s.onTriggerChange),onClick:f=>{var g;(g=e.onClick)==null||g.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:_e(e.onPointerMove,Wu(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:_e(e.onPointerLeave,Wu(f=>{var v,_;m();const g=(v=n.content)==null?void 0:v.getBoundingClientRect();if(g){const x=(_=n.content)==null?void 0:_.dataset.side,b=x==="right",w=b?-5:5,S=g[b?"left":"right"],k=g[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+w,y:f.clientY},{x:S,y:g.top},{x:k,y:g.top},{x:k,y:g.bottom},{x:S,y:g.bottom}],side:x}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:_e(e.onKeyDown,f=>{var v;const g=i.searchRef.current!=="";e.disabled||g&&f.key===" "||e9[r.dir].includes(f.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),f.preventDefault())})})})});fT.displayName=Jc;var mT="MenuSubContent",pT=p.forwardRef((e,t)=>{const n=XE(Xr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=Ma(Xr,e.__scopeMenu),l=pd(Xr,e.__scopeMenu),c=hT(mT,e.__scopeMenu),u=p.useRef(null),h=st(t,u);return a.jsx(Uu.Provider,{scope:e.__scopeMenu,children:a.jsx(ar,{present:r||i.open,children:a.jsx(Uu.Slot,{scope:e.__scopeMenu,children:a.jsx(N0,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var f;l.isUsingKeyboardRef.current&&((f=u.current)==null||f.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:_e(e.onFocusOutside,m=>{m.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:_e(e.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:_e(e.onKeyDown,m=>{var v;const f=m.currentTarget.contains(m.target),g=t9[l.dir].includes(m.key);f&&g&&(i.onOpenChange(!1),(v=c.trigger)==null||v.focus(),m.preventDefault())})})})})})});pT.displayName=mT;function gT(e){return e?"open":"closed"}function Rf(e){return e==="indeterminate"}function j0(e){return Rf(e)?"indeterminate":e?"checked":"unchecked"}function _9(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function b9(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function S9(e,t,n){const s=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let l=b9(e,Math.max(i,0));s.length===1&&(l=l.filter(h=>h!==n));const u=l.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function N9(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,l=t.length-1;i<t.length;l=i++){const c=t[i],u=t[l],h=c.x,m=c.y,f=u.x,g=u.y;m>r!=g>r&&n<(f-h)*(r-m)/(g-m)+h&&(s=!s)}return s}function k9(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return N9(n,t)}function Wu(e){return t=>t.pointerType==="mouse"?e(t):void 0}var C9=JE,j9=_0,E9=QE,T9=eT,P9=k0,M9=tT,I9=Lm,R9=rT,L9=iT,A9=aT,O9=cT,D9=uT,$9=dT,z9=fT,B9=pT,Am="DropdownMenu",[F9,$H]=_r(Am,[KE]),lr=KE(),[U9,vT]=F9(Am),yT=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:l,modal:c=!0}=e,u=lr(t),h=p.useRef(null),[m,f]=Ss({prop:s,defaultProp:i??!1,onChange:l,caller:Am});return a.jsx(U9,{scope:t,triggerId:Ks(),triggerRef:h,contentId:Ks(),open:m,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(g=>!g),[f]),modal:c,children:a.jsx(C9,{...u,open:m,onOpenChange:f,dir:r,modal:c,children:n})})};yT.displayName=Am;var xT="DropdownMenuTrigger",wT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=vT(xT,n),l=lr(n);return a.jsx(j9,{asChild:!0,...l,children:a.jsx(De.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:tm(t,i.triggerRef),onPointerDown:_e(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:_e(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});wT.displayName=xT;var W9="DropdownMenuPortal",_T=e=>{const{__scopeDropdownMenu:t,...n}=e,r=lr(t);return a.jsx(E9,{...r,...n})};_T.displayName=W9;var bT="DropdownMenuContent",ST=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=vT(bT,n),i=lr(n),l=p.useRef(!1);return a.jsx(T9,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:_e(e.onCloseAutoFocus,c=>{var u;l.current||(u=s.triggerRef.current)==null||u.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:_e(e.onInteractOutside,c=>{const u=c.detail.originalEvent,h=u.button===0&&u.ctrlKey===!0,m=u.button===2||h;(!s.modal||m)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ST.displayName=bT;var H9="DropdownMenuGroup",V9=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(P9,{...s,...r,ref:t})});V9.displayName=H9;var G9="DropdownMenuLabel",NT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(M9,{...s,...r,ref:t})});NT.displayName=G9;var Z9="DropdownMenuItem",kT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(I9,{...s,...r,ref:t})});kT.displayName=Z9;var q9="DropdownMenuCheckboxItem",CT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(R9,{...s,...r,ref:t})});CT.displayName=q9;var K9="DropdownMenuRadioGroup",Y9=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(L9,{...s,...r,ref:t})});Y9.displayName=K9;var J9="DropdownMenuRadioItem",jT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(A9,{...s,...r,ref:t})});jT.displayName=J9;var X9="DropdownMenuItemIndicator",ET=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(O9,{...s,...r,ref:t})});ET.displayName=X9;var Q9="DropdownMenuSeparator",TT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(D9,{...s,...r,ref:t})});TT.displayName=Q9;var eW="DropdownMenuArrow",tW=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx($9,{...s,...r,ref:t})});tW.displayName=eW;var nW="DropdownMenuSubTrigger",PT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(z9,{...s,...r,ref:t})});PT.displayName=nW;var rW="DropdownMenuSubContent",MT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=lr(n);return a.jsx(B9,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});MT.displayName=rW;var sW=yT,iW=wT,oW=_T,IT=ST,RT=NT,LT=kT,AT=CT,OT=jT,DT=ET,$T=TT,zT=PT,BT=MT;const FT=sW,UT=iW,aW=p.forwardRef(({className:e,inset:t,children:n,...r},s)=>a.jsxs(zT,{ref:s,className:ye("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,a.jsx(Co,{className:"ml-auto h-4 w-4"})]}));aW.displayName=zT.displayName;const lW=p.forwardRef(({className:e,...t},n)=>a.jsx(BT,{ref:n,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));lW.displayName=BT.displayName;const E0=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>a.jsx(oW,{children:a.jsx(IT,{ref:r,sideOffset:t,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));E0.displayName=IT.displayName;const Vo=p.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(LT,{ref:r,className:ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));Vo.displayName=LT.displayName;const cW=p.forwardRef(({className:e,children:t,checked:n,...r},s)=>a.jsxs(AT,{ref:s,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(DT,{children:a.jsx(Xk,{className:"h-4 w-4"})})}),t]}));cW.displayName=AT.displayName;const uW=p.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(OT,{ref:r,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(DT,{children:a.jsx(rL,{className:"h-2 w-2 fill-current"})})}),t]}));uW.displayName=OT.displayName;const dW=p.forwardRef(({className:e,inset:t,...n},r)=>a.jsx(RT,{ref:r,className:ye("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));dW.displayName=RT.displayName;const WT=p.forwardRef(({className:e,...t},n)=>a.jsx($T,{ref:n,className:ye("-mx-1 my-1 h-px bg-muted",e),...t}));WT.displayName=$T.displayName;var HT=["PageUp","PageDown"],VT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],GT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pc="Slider",[xy,hW,fW]=Qu(pc),[ZT,zH]=_r(pc,[fW]),[mW,Om]=ZT(pc),qT=p.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[r],value:m,onValueChange:f=()=>{},onValueCommit:g=()=>{},inverted:v=!1,form:_,...x}=e,b=p.useRef(new Set),w=p.useRef(0),k=l==="horizontal"?pW:gW,[j=[],T]=Ss({prop:m,defaultProp:h,onChange:te=>{var W;(W=[...b.current][w.current])==null||W.focus(),f(te)}}),R=p.useRef(j);function E(te){const A=_W(j,te);Y(te,A)}function B(te){Y(te,w.current)}function q(){const te=R.current[w.current];j[w.current]!==te&&g(j)}function Y(te,A,{commit:W}={commit:!1}){const P=kW(i),Z=CW(Math.round((te-r)/i)*i+r,P),$=Bu(Z,[r,s]);T((U=[])=>{const I=xW(U,$,A);if(NW(I,u*i)){w.current=I.indexOf($);const O=String(I)!==String(U);return O&&W&&g(I),O?I:U}else return U})}return a.jsx(mW,{scope:e.__scopeSlider,name:n,disabled:c,min:r,max:s,valueIndexToChangeRef:w,thumbs:b.current,values:j,orientation:l,form:_,children:a.jsx(xy.Provider,{scope:e.__scopeSlider,children:a.jsx(xy.Slot,{scope:e.__scopeSlider,children:a.jsx(k,{"aria-disabled":c,"data-disabled":c?"":void 0,...x,ref:t,onPointerDown:_e(x.onPointerDown,()=>{c||(R.current=j)}),min:r,max:s,inverted:v,onSlideStart:c?void 0:E,onSlideMove:c?void 0:B,onSlideEnd:c?void 0:q,onHomeKeyDown:()=>!c&&Y(r,0,{commit:!0}),onEndKeyDown:()=>!c&&Y(s,j.length-1,{commit:!0}),onStepKeyDown:({event:te,direction:A})=>{if(!c){const Z=HT.includes(te.key)||te.shiftKey&&VT.includes(te.key)?10:1,$=w.current,U=j[$],I=i*Z*A;Y(U+I,$,{commit:!0})}}})})})})});qT.displayName=pc;var[KT,YT]=ZT(pc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),pW=p.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:l,onSlideMove:c,onSlideEnd:u,onStepKeyDown:h,...m}=e,[f,g]=p.useState(null),v=st(t,k=>g(k)),_=p.useRef(void 0),x=hc(s),b=x==="ltr",w=b&&!i||!b&&i;function S(k){const j=_.current||f.getBoundingClientRect(),T=[0,j.width],E=T0(T,w?[n,r]:[r,n]);return _.current=j,E(k-j.left)}return a.jsx(KT,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:a.jsx(JT,{dir:x,"data-orientation":"horizontal",...m,ref:v,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:k=>{const j=S(k.clientX);l==null||l(j)},onSlideMove:k=>{const j=S(k.clientX);c==null||c(j)},onSlideEnd:()=>{_.current=void 0,u==null||u()},onStepKeyDown:k=>{const T=GT[w?"from-left":"from-right"].includes(k.key);h==null||h({event:k,direction:T?-1:1})}})})}),gW=p.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...h}=e,m=p.useRef(null),f=st(t,m),g=p.useRef(void 0),v=!s;function _(x){const b=g.current||m.current.getBoundingClientRect(),w=[0,b.height],k=T0(w,v?[r,n]:[n,r]);return g.current=b,k(x-b.top)}return a.jsx(KT,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:a.jsx(JT,{"data-orientation":"vertical",...h,ref:f,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const b=_(x.clientY);i==null||i(b)},onSlideMove:x=>{const b=_(x.clientY);l==null||l(b)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:x=>{const w=GT[v?"from-bottom":"from-top"].includes(x.key);u==null||u({event:x,direction:w?-1:1})}})})}),JT=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:u,...h}=e,m=Om(pc,n);return a.jsx(De.span,{...h,ref:t,onKeyDown:_e(e.onKeyDown,f=>{f.key==="Home"?(l(f),f.preventDefault()):f.key==="End"?(c(f),f.preventDefault()):HT.concat(VT).includes(f.key)&&(u(f),f.preventDefault())}),onPointerDown:_e(e.onPointerDown,f=>{const g=f.target;g.setPointerCapture(f.pointerId),f.preventDefault(),m.thumbs.has(g)?g.focus():r(f)}),onPointerMove:_e(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:_e(e.onPointerUp,f=>{const g=f.target;g.hasPointerCapture(f.pointerId)&&(g.releasePointerCapture(f.pointerId),i(f))})})}),XT="SliderTrack",QT=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Om(XT,n);return a.jsx(De.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});QT.displayName=XT;var wy="SliderRange",eP=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Om(wy,n),i=YT(wy,n),l=p.useRef(null),c=st(t,l),u=s.values.length,h=s.values.map(g=>rP(g,s.min,s.max)),m=u>1?Math.min(...h):0,f=100-Math.max(...h);return a.jsx(De.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:c,style:{...e.style,[i.startEdge]:m+"%",[i.endEdge]:f+"%"}})});eP.displayName=wy;var _y="SliderThumb",tP=p.forwardRef((e,t)=>{const n=hW(e.__scopeSlider),[r,s]=p.useState(null),i=st(t,c=>s(c)),l=p.useMemo(()=>r?n().findIndex(c=>c.ref.current===r):-1,[n,r]);return a.jsx(vW,{...e,ref:i,index:l})}),vW=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...i}=e,l=Om(_y,n),c=YT(_y,n),[u,h]=p.useState(null),m=st(t,S=>h(S)),f=u?l.form||!!u.closest("form"):!0,g=Dx(u),v=l.values[r],_=v===void 0?0:rP(v,l.min,l.max),x=wW(r,l.values.length),b=g==null?void 0:g[c.size],w=b?bW(b,_,c.direction):0;return p.useEffect(()=>{if(u)return l.thumbs.add(u),()=>{l.thumbs.delete(u)}},[u,l.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${_}% + ${w}px)`},children:[a.jsx(xy.ItemSlot,{scope:e.__scopeSlider,children:a.jsx(De.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":l.min,"aria-valuenow":v,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:m,style:v===void 0?{display:"none"}:e.style,onFocus:_e(e.onFocus,()=>{l.valueIndexToChangeRef.current=r})})}),f&&a.jsx(nP,{name:s??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:v},r)]})});tP.displayName=_y;var yW="RadioBubbleInput",nP=p.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=p.useRef(null),i=st(s,r),l=o0(t);return p.useEffect(()=>{const c=s.current;if(!c)return;const u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==t&&m){const f=new Event("input",{bubbles:!0});m.call(c,t),c.dispatchEvent(f)}},[l,t]),a.jsx(De.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});nP.displayName=yW;function xW(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,i)=>s-i)}function rP(e,t,n){const i=100/(n-t)*(e-t);return Bu(i,[0,100])}function wW(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function _W(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function bW(e,t,n){const r=e/2,i=T0([0,50],[0,r]);return(r-i(t)*n)*n}function SW(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function NW(e,t){if(t>0){const n=SW(e);return Math.min(...n)>=t}return!0}function T0(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function kW(e){return(String(e).split(".")[1]||"").length}function CW(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var sP=qT,jW=QT,EW=eP,TW=tP;const P0=p.forwardRef(({className:e,...t},n)=>a.jsxs(sP,{ref:n,className:ye("relative flex w-full touch-none select-none items-center",e),...t,children:[a.jsx(jW,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(EW,{className:"absolute h-full bg-primary"})}),a.jsx(TW,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));P0.displayName=sP.displayName;function PW(e,t,n,r){const i=(n-e)*Math.PI/180,l=(r-t)*Math.PI/180,c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}function MW(e){return Math.ceil(e/83.3)}function by(e){return e<1e3?`${Math.round(e)} .`:`${(e/1e3).toFixed(1)} .`}function IW(){const[e,t]=p.useState(!1),[n,r]=p.useState([]),[s,i]=p.useState(null),l=p.useCallback(async u=>{if(!u||u.length<2)return r([]),[];t(!0),i(null);try{const h=await fetch("https://nominatim.openstreetmap.org/search?"+new URLSearchParams({q:u,format:"json",addressdetails:"1",countrycodes:"cy",limit:"8","accept-language":"el,en"}),{headers:{Accept:"application/json","User-Agent":"MotionCyprusTransit/1.0"}});if(!h.ok)throw new Error("Geocoding request failed");const f=(await h.json()).map(g=>{var b,w,S,k,j,T;let v="place";g.class==="highway"||g.type==="road"||g.type==="street"?v="street":g.class==="amenity"||g.class==="tourism"||g.class==="shop"?v="poi":(g.type==="house"||g.type==="building")&&(v="address");const x=g.display_name.split(",").map(R=>R.trim()).slice(0,2).join(", ");return{id:`geo-${g.place_id}`,displayName:g.display_name,shortName:x,lat:parseFloat(g.lat),lon:parseFloat(g.lon),type:v,address:{road:(b=g.address)==null?void 0:b.road,city:((w=g.address)==null?void 0:w.city)||((S=g.address)==null?void 0:S.town)||((k=g.address)==null?void 0:k.village),suburb:(j=g.address)==null?void 0:j.suburb,postcode:(T=g.address)==null?void 0:T.postcode}}});return r(f),f}catch(h){const m=h instanceof Error?h.message:"Geocoding error";return i(m),r([]),[]}finally{t(!1)}},[]),c=p.useCallback(()=>{r([]),i(null)},[]);return{searchAddress:l,clearResults:c,results:n,isSearching:e,error:s}}function Nl(e,t,n,r=5){return n.filter(i=>i.stop_lat&&i.stop_lon).map(i=>{const l=PW(e,t,i.stop_lat,i.stop_lon);return{stopId:i.stop_id,stopName:i.stop_name,lat:i.stop_lat,lon:i.stop_lon,distanceMeters:l,walkingMinutes:MW(l)}}).sort((i,l)=>i.distanceMeters-l.distanceMeters).slice(0,r)}function RW(e="el-GR"){const[t,n]=p.useState(!1),[r,s]=p.useState(""),[i,l]=p.useState(""),[c,u]=p.useState(null),h=p.useRef(null),m=typeof window<"u"&&(!!window.SpeechRecognition||!!window.webkitSpeechRecognition);p.useEffect(()=>{if(!m)return;const _=window.SpeechRecognition||window.webkitSpeechRecognition;h.current=new _;const x=h.current;return x.continuous=!1,x.interimResults=!0,x.lang=e,x.onstart=()=>{n(!0),u(null)},x.onresult=b=>{let w="",S="";for(let k=b.resultIndex;k<b.results.length;k++){const j=b.results[k];j.isFinal?w+=j[0].transcript:S+=j[0].transcript}w?(s(k=>k+w),l("")):l(S)},x.onerror=b=>{switch(n(!1),b.error){case"not-allowed":u("     ");break;case"no-speech":u("  ");break;case"network":u(" ");break;default:u(`: ${b.error}`)}},x.onend=()=>{n(!1)},()=>{h.current&&h.current.abort()}},[m,e]);const f=p.useCallback(()=>{if(!m||!h.current){u("        browser");return}s(""),l(""),u(null);try{h.current.start()}catch(_){console.error("Speech recognition error:",_)}},[m]),g=p.useCallback(()=>{h.current&&h.current.stop(),n(!1)},[]),v=p.useCallback(()=>{s(""),l(""),u(null)},[]);return{isListening:t,transcript:r,interimTranscript:i,error:c,isSupported:m,startListening:f,stopListening:g,resetTranscript:v}}const y1=[{id:"poi-mall-of-cyprus",name:"Mall of Cyprus",name_en:"Mall of Cyprus",category:"shopping",lat:35.1578,lon:33.3823},{id:"poi-nicosia-mall",name:"Nicosia Mall",name_en:"Nicosia Mall",category:"shopping",lat:35.1856,lon:33.3822},{id:"poi-the-mall-of-engomi",name:"The Mall of Engomi",name_en:"The Mall of Engomi",category:"shopping",lat:35.1633,lon:33.3456},{id:"poi-ikea-nicosia",name:"IKEA ",name_en:"IKEA Nicosia",category:"shopping",lat:35.1583,lon:33.3833},{id:"poi-nicosia-general-hospital",name:"  ",name_en:"Nicosia General Hospital",category:"hospital",lat:35.1692,lon:33.3583},{id:"poi-american-medical-center",name:"American Medical Center",name_en:"American Medical Center",category:"hospital",lat:35.1583,lon:33.3667},{id:"poi-apollonion-hospital",name:"Apollonion Private Hospital",name_en:"Apollonion Private Hospital",category:"hospital",lat:35.1547,lon:33.3739},{id:"poi-aretaeio-hospital",name:" ",name_en:"Aretaeio Hospital",category:"hospital",lat:35.1611,lon:33.3822},{id:"poi-university-of-cyprus",name:" ",name_en:"University of Cyprus",category:"education",lat:35.1447,lon:33.4103},{id:"poi-frederick-university-nicosia",name:"Frederick University ",name_en:"Frederick University Nicosia",category:"education",lat:35.1389,lon:33.3694},{id:"poi-european-university",name:"European University Cyprus",name_en:"European University Cyprus",category:"education",lat:35.1369,lon:33.3728},{id:"poi-university-of-nicosia",name:" ",name_en:"University of Nicosia",category:"education",lat:35.1578,lon:33.3767},{id:"poi-intercollege",name:"Intercollege",name_en:"Intercollege",category:"education",lat:35.1556,lon:33.3789},{id:"poi-ledra-street",name:" ",name_en:"Ledra Street",category:"landmark",lat:35.1724,lon:33.3619},{id:"poi-eleftheria-square",name:" ",name_en:"Eleftheria Square",category:"landmark",lat:35.1696,lon:33.3604},{id:"poi-cyprus-museum",name:" ",name_en:"Cyprus Museum",category:"landmark",lat:35.1689,lon:33.355},{id:"poi-shacolas-tower",name:" ",name_en:"Shacolas Tower",category:"landmark",lat:35.1719,lon:33.3622},{id:"poi-laiki-geitonia",name:" ",name_en:"Laiki Geitonia",category:"landmark",lat:35.1714,lon:33.3631},{id:"poi-venetian-walls",name:" ",name_en:"Venetian Walls",category:"landmark",lat:35.1706,lon:33.3578},{id:"poi-hilton-nicosia",name:"Hilton Nicosia",name_en:"Hilton Nicosia",category:"hotel",lat:35.1656,lon:33.3656},{id:"poi-landmark-nicosia",name:"Landmark Hotel Nicosia",name_en:"Landmark Hotel Nicosia",category:"hotel",lat:35.1728,lon:33.3647},{id:"poi-cleopatra-hotel",name:"Cleopatra Hotel",name_en:"Cleopatra Hotel",category:"hotel",lat:35.1706,lon:33.3622},{id:"poi-centrum-hotel",name:"Centrum Hotel",name_en:"Centrum Hotel",category:"hotel",lat:35.1694,lon:33.3614},{id:"poi-gsp-stadium",name:" ",name_en:"GSP Stadium",category:"sports",lat:35.1489,lon:33.3953},{id:"poi-makareio-stadium",name:" ",name_en:"Makareio Stadium",category:"sports",lat:35.1578,lon:33.3683},{id:"poi-presidential-palace",name:" ",name_en:"Presidential Palace",category:"government",lat:35.1661,lon:33.3564},{id:"poi-house-of-representatives",name:"  ",name_en:"House of Representatives",category:"government",lat:35.1667,lon:33.3639},{id:"poi-to-anamma",name:" ",name_en:"To Anamma",category:"restaurant",lat:35.1717,lon:33.3619},{id:"poi-pyxida-fish-tavern",name:" ",name_en:"Pyxida Fish Tavern",category:"restaurant",lat:35.1722,lon:33.3628},{id:"poi-zanettos-tavern",name:" ",name_en:"Zanettos Tavern",category:"restaurant",lat:35.1711,lon:33.3625},{id:"poi-piatsa-gourounaki",name:" ",name_en:"Piatsa Gourounaki",category:"restaurant",lat:35.1708,lon:33.3617},{id:"poi-my-mall-limassol",name:"My Mall Limassol",name_en:"My Mall Limassol",category:"shopping",lat:34.7071,lon:33.0225},{id:"poi-alfa-mega-limassol",name:"Alfa Mega Hypermarket ",name_en:"Alfa Mega Limassol",category:"shopping",lat:34.6889,lon:33.0489},{id:"poi-limassol-general-hospital",name:"  ",name_en:"Limassol General Hospital",category:"hospital",lat:34.6876,lon:33.0319},{id:"poi-mediterranean-hospital",name:"Mediterranean Hospital",name_en:"Mediterranean Hospital",category:"hospital",lat:34.6978,lon:33.0417},{id:"poi-ygia-polyclinic",name:"YGIA Polyclinic",name_en:"YGIA Polyclinic",category:"hospital",lat:34.6928,lon:33.0378},{id:"poi-cyprus-university-technology",name:"",name_en:"Cyprus University of Technology",category:"education",lat:34.6756,lon:33.0444},{id:"poi-frederick-university-limassol",name:"Frederick University ",name_en:"Frederick University Limassol",category:"education",lat:34.7011,lon:33.0358},{id:"poi-limassol-marina",name:" ",name_en:"Limassol Marina",category:"entertainment",lat:34.6698,lon:33.0382},{id:"poi-limassol-castle",name:" ",name_en:"Limassol Castle",category:"landmark",lat:34.6717,lon:33.0417},{id:"poi-technopolis-20",name:" 20",name_en:"Technopolis 20",category:"entertainment",lat:34.6825,lon:33.0456},{id:"poi-limassol-zoo",name:"  ",name_en:"Limassol Zoo",category:"entertainment",lat:34.6889,lon:33.0567},{id:"poi-old-port-limassol",name:"  ",name_en:"Old Port Limassol",category:"landmark",lat:34.6711,lon:33.0411},{id:"poi-curium-beach",name:" ",name_en:"Curium Beach",category:"beach",lat:34.6653,lon:32.8889},{id:"poi-dasoudi-beach",name:" ",name_en:"Dasoudi Beach",category:"beach",lat:34.6958,lon:33.085},{id:"poi-ladys-mile-beach",name:"Lady's Mile Beach",name_en:"Lady's Mile Beach",category:"beach",lat:34.6347,lon:33.0028},{id:"poi-governors-beach",name:"Governor's Beach",name_en:"Governor's Beach",category:"beach",lat:34.7228,lon:33.2717},{id:"poi-pissouri-beach",name:" ",name_en:"Pissouri Beach",category:"beach",lat:34.6683,lon:32.7028},{id:"poi-four-seasons-limassol",name:"Four Seasons Limassol",name_en:"Four Seasons Limassol",category:"hotel",lat:34.7028,lon:33.1183},{id:"poi-amathus-beach-hotel",name:"Amathus Beach Hotel",name_en:"Amathus Beach Hotel",category:"hotel",lat:34.7033,lon:33.1267},{id:"poi-st-raphael-resort",name:"St. Raphael Resort",name_en:"St. Raphael Resort",category:"hotel",lat:34.7022,lon:33.1189},{id:"poi-grandresort-limassol",name:"GrandResort Limassol",name_en:"GrandResort Limassol",category:"hotel",lat:34.7025,lon:33.1256},{id:"poi-parklane-resort",name:"Parklane Resort & Spa",name_en:"Parklane Resort & Spa",category:"hotel",lat:34.6889,lon:33.0556},{id:"poi-crowne-plaza-limassol",name:"Crowne Plaza Limassol",name_en:"Crowne Plaza Limassol",category:"hotel",lat:34.6944,lon:33.0722},{id:"poi-tsirio-stadium",name:" ",name_en:"Tsirion Stadium",category:"sports",lat:34.6783,lon:33.0389},{id:"poi-alphamega-stadium",name:"Alphamega Stadium",name_en:"Alphamega Stadium",category:"sports",lat:34.7083,lon:33.0267},{id:"poi-ocean-basket-limassol",name:"Ocean Basket ",name_en:"Ocean Basket Limassol",category:"restaurant",lat:34.6869,lon:33.0456},{id:"poi-dionysus-mansion",name:"Dionysus Mansion",name_en:"Dionysus Mansion",category:"restaurant",lat:34.6717,lon:33.0422},{id:"poi-karatello",name:"",name_en:"Karatello",category:"restaurant",lat:34.6722,lon:33.0428},{id:"poi-artima",name:"Artima",name_en:"Artima",category:"restaurant",lat:34.6711,lon:33.0417},{id:"poi-larnaca-airport",name:" ",name_en:"Larnaca Airport",category:"transport",lat:34.8751,lon:33.6249},{id:"poi-metropolis-mall",name:"Metropolis Mall",name_en:"Metropolis Mall",category:"shopping",lat:34.9022,lon:33.6122},{id:"poi-city-center-larnaca",name:"City Center Larnaca",name_en:"City Center Larnaca",category:"shopping",lat:34.9178,lon:33.6278},{id:"poi-larnaca-general-hospital",name:"  ",name_en:"Larnaca General Hospital",category:"hospital",lat:34.9239,lon:33.6203},{id:"poi-evangelismos-clinic",name:" ",name_en:"Evangelismos Clinic",category:"hospital",lat:34.9156,lon:33.6289},{id:"poi-uclan-cyprus",name:"UCLan Cyprus",name_en:"UCLan Cyprus",category:"education",lat:34.9203,lon:33.6236},{id:"poi-finikoudes-beach",name:" ",name_en:"Finikoudes Beach",category:"beach",lat:34.9127,lon:33.6389},{id:"poi-mackenzie-beach",name:" ",name_en:"Mackenzie Beach",category:"beach",lat:34.8889,lon:33.6256},{id:"poi-kastella-beach",name:" ",name_en:"Kastella Beach",category:"beach",lat:34.8983,lon:33.6167},{id:"poi-ced-beach",name:"CTO Beach Larnaca",name_en:"CTO Beach Larnaca",category:"beach",lat:34.9089,lon:33.6344},{id:"poi-larnaca-marina",name:" ",name_en:"Larnaca Marina",category:"entertainment",lat:34.9083,lon:33.6361},{id:"poi-saint-lazarus-church",name:"  ",name_en:"Church of Saint Lazarus",category:"religious",lat:34.9106,lon:33.6361},{id:"poi-larnaca-salt-lake",name:" ",name_en:"Larnaca Salt Lake",category:"landmark",lat:34.8886,lon:33.6133},{id:"poi-hala-sultan-tekke",name:"  ",name_en:"Hala Sultan Tekke",category:"religious",lat:34.8817,lon:33.6083},{id:"poi-larnaca-fort",name:" ",name_en:"Larnaca Fort",category:"landmark",lat:34.9103,lon:33.6397},{id:"poi-pierides-museum",name:" ",name_en:"Pierides Museum",category:"landmark",lat:34.9117,lon:33.6378},{id:"poi-golden-bay-beach-hotel",name:"Golden Bay Beach Hotel",name_en:"Golden Bay Beach Hotel",category:"hotel",lat:34.9211,lon:33.6478},{id:"poi-palm-beach-hotel",name:"Palm Beach Hotel",name_en:"Palm Beach Hotel",category:"hotel",lat:34.9156,lon:33.6433},{id:"poi-sun-hall-hotel",name:"Sun Hall Hotel",name_en:"Sun Hall Hotel",category:"hotel",lat:34.9139,lon:33.6411},{id:"poi-radisson-blu-larnaca",name:"Radisson Blu Larnaca",name_en:"Radisson Blu Larnaca",category:"hotel",lat:34.9117,lon:33.6389},{id:"poi-lebay-beach-hotel",name:"Lebay Beach Hotel",name_en:"Lebay Beach Hotel",category:"hotel",lat:34.9178,lon:33.6456},{id:"poi-aca-stadium",name:"AEK Arena",name_en:"AEK Arena",category:"sports",lat:34.9456,lon:33.6567},{id:"poi-monte-carlo",name:"Monte Carlo",name_en:"Monte Carlo",category:"restaurant",lat:34.9128,lon:33.6389},{id:"poi-maqam-al-sultan",name:"Maqam Al Sultan",name_en:"Maqam Al Sultan",category:"restaurant",lat:34.9117,lon:33.6378},{id:"poi-art-cafe-1900",name:"Art Cafe 1900",name_en:"Art Cafe 1900",category:"restaurant",lat:34.9111,lon:33.6367},{id:"poi-militzis",name:"",name_en:"Militzis",category:"restaurant",lat:34.9122,lon:33.6383},{id:"poi-paphos-airport",name:" ",name_en:"Paphos Airport",category:"transport",lat:34.718,lon:32.4857},{id:"poi-kings-avenue-mall",name:"Kings Avenue Mall",name_en:"Kings Avenue Mall",category:"shopping",lat:34.7625,lon:32.4211},{id:"poi-paphos-mall",name:"Paphos Mall",name_en:"Paphos Mall",category:"shopping",lat:34.7583,lon:32.4178},{id:"poi-paphos-general-hospital",name:"  ",name_en:"Paphos General Hospital",category:"hospital",lat:34.7728,lon:32.4297},{id:"poi-iasis-hospital",name:"IASIS Hospital",name_en:"IASIS Hospital",category:"hospital",lat:34.7683,lon:32.4228},{id:"poi-paphos-harbour",name:" ",name_en:"Paphos Harbour",category:"landmark",lat:34.7539,lon:32.4072},{id:"poi-tombs-of-kings",name:"  ",name_en:"Tombs of the Kings",category:"landmark",lat:34.7728,lon:32.3969},{id:"poi-kato-paphos-archaeological-park",name:"   ",name_en:"Kato Paphos Archaeological Park",category:"landmark",lat:34.7556,lon:32.4061},{id:"poi-paphos-castle",name:" ",name_en:"Paphos Castle",category:"landmark",lat:34.7539,lon:32.4069},{id:"poi-aphrodite-rock",name:"  ",name_en:"Aphrodite's Rock",category:"landmark",lat:34.6633,lon:32.6267},{id:"poi-st-paul-pillar",name:"  ",name_en:"St. Paul's Pillar",category:"religious",lat:34.7547,lon:32.4067},{id:"poi-coral-bay",name:"  ",name_en:"Coral Bay Beach",category:"beach",lat:34.8517,lon:32.3556},{id:"poi-latchi-beach",name:" ",name_en:"Latchi Beach",category:"beach",lat:35.0417,lon:32.3917},{id:"poi-blue-lagoon-akamas",name:"  ",name_en:"Blue Lagoon Akamas",category:"beach",lat:35.0567,lon:32.3083},{id:"poi-vroudia-beach",name:" ",name_en:"Vroudia Beach",category:"beach",lat:34.7544,lon:32.4083},{id:"poi-elysium-hotel",name:"Elysium Hotel",name_en:"Elysium Hotel",category:"hotel",lat:34.7611,lon:32.4017},{id:"poi-annabelle-hotel",name:"Annabelle Hotel",name_en:"Annabelle Hotel",category:"hotel",lat:34.7583,lon:32.4028},{id:"poi-almyra-hotel",name:"Almyra Hotel",name_en:"Almyra Hotel",category:"hotel",lat:34.7589,lon:32.4033},{id:"poi-constantinou-bros-hotels",name:"Constantinou Bros Hotels",name_en:"Constantinou Bros Hotels",category:"hotel",lat:34.7617,lon:32.4022},{id:"poi-venus-beach-hotel",name:"Venus Beach Hotel",name_en:"Venus Beach Hotel",category:"hotel",lat:34.7544,lon:32.4089},{id:"poi-coral-beach-hotel",name:"Coral Beach Hotel",name_en:"Coral Beach Hotel",category:"hotel",lat:34.8528,lon:32.3544},{id:"poi-paphos-waterpark",name:"Aphrodite Waterpark",name_en:"Aphrodite Waterpark",category:"entertainment",lat:34.8367,lon:32.3917},{id:"poi-paphos-zoo",name:"  ",name_en:"Paphos Zoo",category:"entertainment",lat:34.8483,lon:32.36},{id:"poi-hondros-tavern",name:" ",name_en:"Hondros Tavern",category:"restaurant",lat:34.7556,lon:32.4078},{id:"poi-theo-s-restaurant",name:"Theo's Restaurant",name_en:"Theo's Restaurant",category:"restaurant",lat:34.7544,lon:32.4083},{id:"poi-pelican-restaurant",name:"Pelican Restaurant",name_en:"Pelican Restaurant",category:"restaurant",lat:34.7539,lon:32.4078},{id:"poi-nissi-beach",name:" ",name_en:"Nissi Beach",category:"beach",lat:34.9886,lon:33.9522},{id:"poi-makronissos-beach",name:" ",name_en:"Makronissos Beach",category:"beach",lat:34.9806,lon:33.9317},{id:"poi-landa-beach",name:"Landa Beach (Golden Beach)",name_en:"Landa Beach",category:"beach",lat:34.9889,lon:33.9583},{id:"poi-konnos-beach",name:" ",name_en:"Konnos Beach",category:"beach",lat:34.9756,lon:34.0667},{id:"poi-grecian-bay-beach",name:"Grecian Bay Beach",name_en:"Grecian Bay Beach",category:"beach",lat:34.9889,lon:33.9944},{id:"poi-ayia-napa-monastery",name:"  ",name_en:"Ayia Napa Monastery",category:"religious",lat:34.9894,lon:33.9992},{id:"poi-waterworld",name:"WaterWorld",name_en:"WaterWorld Waterpark",category:"entertainment",lat:34.9808,lon:33.9683},{id:"poi-cape-greco",name:" ",name_en:"Cape Greco",category:"landmark",lat:34.9667,lon:34.075},{id:"poi-ayia-napa-harbor",name:"  ",name_en:"Ayia Napa Harbor",category:"landmark",lat:34.9878,lon:34.0017},{id:"poi-luna-park",name:"Luna Park  ",name_en:"Luna Park Ayia Napa",category:"entertainment",lat:34.9889,lon:33.9978},{id:"poi-sea-caves",name:" ",name_en:"Sea Caves",category:"landmark",lat:34.9711,lon:34.0583},{id:"poi-thalassa-museum",name:" ",name_en:"Thalassa Museum",category:"landmark",lat:34.9889,lon:33.9994},{id:"poi-nissi-beach-resort",name:"Nissi Beach Resort",name_en:"Nissi Beach Resort",category:"hotel",lat:34.9878,lon:33.9533},{id:"poi-grecian-bay-hotel",name:"Grecian Bay Hotel",name_en:"Grecian Bay Hotel",category:"hotel",lat:34.9889,lon:33.9944},{id:"poi-adams-beach-hotel",name:"Adams Beach Hotel",name_en:"Adams Beach Hotel",category:"hotel",lat:34.9867,lon:33.9578},{id:"poi-olympic-lagoon-resort",name:"Olympic Lagoon Resort",name_en:"Olympic Lagoon Resort",category:"hotel",lat:34.9844,lon:33.9389},{id:"poi-so-white-club",name:"So White Club Resort",name_en:"So White Club Resort",category:"hotel",lat:34.9856,lon:33.9611},{id:"poi-protaras-beach",name:" ",name_en:"Protaras Beach",category:"beach",lat:35.0122,lon:34.0578},{id:"poi-fig-tree-bay",name:"Fig Tree Bay",name_en:"Fig Tree Bay",category:"beach",lat:35.0133,lon:34.0553},{id:"poi-sunrise-beach",name:"Sunrise Beach",name_en:"Sunrise Beach",category:"beach",lat:35.0156,lon:34.0594},{id:"poi-pernera-beach",name:" ",name_en:"Pernera Beach",category:"beach",lat:35.0267,lon:34.0483},{id:"poi-kalamies-beach",name:" ",name_en:"Kalamies Beach",category:"beach",lat:35.0089,lon:34.0511},{id:"poi-capo-bay-hotel",name:"Capo Bay Hotel",name_en:"Capo Bay Hotel",category:"hotel",lat:35.0128,lon:34.0567},{id:"poi-sunrise-pearl-hotel",name:"Sunrise Pearl Hotel",name_en:"Sunrise Pearl Hotel",category:"hotel",lat:35.0139,lon:34.0583},{id:"poi-grecian-park-hotel",name:"Grecian Park Hotel",name_en:"Grecian Park Hotel",category:"hotel",lat:34.9778,lon:34.0722},{id:"poi-anastasia-beach-hotel",name:"Anastasia Beach Hotel",name_en:"Anastasia Beach Hotel",category:"hotel",lat:35.0144,lon:34.0589},{id:"poi-profitis-ilias-church",name:"   ",name_en:"Prophet Elias Church Protaras",category:"religious",lat:35.0111,lon:34.0528},{id:"poi-ocean-aquarium",name:"Ocean Aquarium",name_en:"Ocean Aquarium",category:"entertainment",lat:35.0222,lon:34.0483},{id:"poi-magic-dancing-waters",name:"Magic Dancing Waters",name_en:"Magic Dancing Waters",category:"entertainment",lat:35.0156,lon:34.0561},{id:"poi-troodos-square",name:" ",name_en:"Troodos Square",category:"landmark",lat:34.9283,lon:32.8756},{id:"poi-kykkos-monastery",name:" ",name_en:"Kykkos Monastery",category:"religious",lat:34.9833,lon:32.7411},{id:"poi-mount-olympus",name:"  ()",name_en:"Mount Olympus (Chionistra)",category:"landmark",lat:34.9394,lon:32.8683},{id:"poi-trooditissa-monastery",name:" ",name_en:"Trooditissa Monastery",category:"religious",lat:34.9094,lon:32.8389},{id:"poi-platres",name:"",name_en:"Platres",category:"landmark",lat:34.8889,lon:32.8639},{id:"poi-omodos-village",name:" ",name_en:"Omodos Village",category:"landmark",lat:34.8447,lon:32.8067},{id:"poi-kakopetria",name:"",name_en:"Kakopetria",category:"landmark",lat:34.9589,lon:32.9028},{id:"poi-caledonia-waterfall",name:" ",name_en:"Caledonia Waterfalls",category:"landmark",lat:34.8983,lon:32.8633},{id:"poi-millomeris-waterfall",name:" ",name_en:"Millomeris Waterfall",category:"landmark",lat:34.8917,lon:32.8611},{id:"poi-lefkara-village",name:" ",name_en:"Lefkara Village",category:"landmark",lat:34.8667,lon:33.3056},{id:"poi-agros-village",name:" ",name_en:"Agros Village",category:"landmark",lat:34.9194,lon:33.0167},{id:"poi-jubilee-hotel",name:"Jubilee Hotel Troodos",name_en:"Jubilee Hotel Troodos",category:"hotel",lat:34.9278,lon:32.8756},{id:"poi-forest-park-hotel",name:"Forest Park Hotel",name_en:"Forest Park Hotel",category:"hotel",lat:34.8867,lon:32.8622},{id:"poi-casale-panayiotis",name:"Casale Panayiotis",name_en:"Casale Panayiotis",category:"hotel",lat:34.9889,lon:32.8167}],x1=e=>{switch(e){case"landmark":return"";case"shopping":return"";case"education":return"";case"hospital":return"";case"government":return"";case"entertainment":return"";case"transport":return"";case"beach":return"";case"hotel":return"";case"restaurant":return"";case"sports":return"";case"religious":return"";default:return""}};function w1({value:e,onChange:t,placeholder:n,stops:r,icon:s,iconColor:i,onLocationSelect:l,enableVoice:c=!0}){const[u,h]=p.useState(!1),[m,f]=p.useState(""),{searchAddress:g,results:v,isSearching:_,clearResults:x}=IW(),[b,w]=p.useState(""),{isListening:S,transcript:k,interimTranscript:j,error:T,isSupported:R,startListening:E,stopListening:B,resetTranscript:q}=RW("el-GR");p.useEffect(()=>{k&&f(k)},[k]),p.useEffect(()=>{const $=setTimeout(()=>{w(m)},300);return()=>clearTimeout($)},[m]),p.useEffect(()=>{b.length>=2?g(b):x()},[b,g,x]);const Y=p.useMemo(()=>{if(!m)return y1.slice(0,8);const $=m.toLowerCase();return y1.filter(U=>U.name.toLowerCase().includes($)||U.name_en.toLowerCase().includes($)).slice(0,8)},[m]),te=p.useMemo(()=>{if(!m)return r.slice(0,10);const $=m.toLowerCase();return r.filter(U=>{var I;return U.stop_name.toLowerCase().includes($)||((I=U.stop_code)==null?void 0:I.toLowerCase().includes($))}).slice(0,15)},[r,m]),A=$=>{const U={type:"stop",stop:$,displayName:$.stop_name};t(U),l==null||l(U),h(!1),f(""),x()},W=$=>{const U=Nl($.lat,$.lon,r,1);if(U.length>0){const I=r.find(O=>O.stop_id===U[0].stopId);if(I){const O={type:"poi",poi:$,nearestStop:I,displayName:`${x1($.category)} ${$.name}`};t(O),l==null||l(O)}}h(!1),f(""),x()},P=$=>{const U=Nl($.lat,$.lon,r,1);if(U.length>0){const I=r.find(O=>O.stop_id===U[0].stopId);if(I){const O={type:"address",location:$,nearestStop:I,displayName:$.shortName};t(O),l==null||l(O)}}h(!1),f(""),x()},Z=()=>e?e.displayName:"";return a.jsxs(xf,{open:u,onOpenChange:h,children:[a.jsx(wf,{asChild:!0,children:a.jsxs(de,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-start h-10 sm:h-9 text-left font-normal bg-background",children:[a.jsx("span",{className:ye("mr-2 flex-shrink-0",i),children:s}),a.jsx("span",{className:"truncate text-sm",children:e?Z():n})]})}),a.jsx(Ru,{className:"w-[340px] p-0 z-[100]",align:"start",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"p-2 border-b border-border",children:[a.jsxs("div",{className:"relative flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Gl,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Na,{placeholder:S?" ...":" ,   ...",value:S&&(j||k)||m,onChange:$=>f($.target.value),className:ye("pl-9 pr-8 h-9",S&&"bg-primary/5 border-primary"),autoFocus:!S,readOnly:S}),_&&!S&&a.jsx(qn,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin text-muted-foreground"}),m&&!S&&a.jsx("button",{onClick:()=>{f(""),q(),x()},className:"absolute right-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground hover:text-foreground",title:" ",children:a.jsx(un,{className:"h-4 w-4"})})]}),c&&R&&a.jsx(de,{variant:S?"default":"outline",size:"icon",className:ye("h-9 w-9 flex-shrink-0 transition-all",S&&"bg-primary animate-pulse"),onClick:()=>{S?B():(q(),f(""),E())},title:S?" ":" ",children:S?a.jsx(pL,{className:"h-4 w-4"}):a.jsx(gL,{className:"h-4 w-4"})})]}),S&&a.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-primary animate-pulse",children:[a.jsxs("div",{className:"flex gap-0.5",children:[a.jsx("span",{className:"voice-feedback-bar voice-feedback-bar-0"}),a.jsx("span",{className:"voice-feedback-bar voice-feedback-bar-1"}),a.jsx("span",{className:"voice-feedback-bar voice-feedback-bar-2"})]}),a.jsx("span",{children:"..."})]}),T&&a.jsx("div",{className:"mt-2 text-xs text-destructive",children:T})]}),a.jsxs("div",{className:"max-h-[300px] overflow-auto",children:[v.length>0&&a.jsxs("div",{className:"p-1",children:[a.jsxs("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground flex items-center gap-1",children:[a.jsx(dL,{className:"h-3 w-3"})," & "]}),v.map($=>{var U;return a.jsxs("button",{onClick:()=>P($),className:"w-full text-left px-2 py-2 rounded-md hover:bg-accent transition-colors flex items-start gap-2",children:[a.jsx(It,{className:"h-4 w-4 mt-0.5 text-blue-500 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium truncate",children:$.shortName}),((U=$.address)==null?void 0:U.city)&&a.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[$.address.suburb?`${$.address.suburb}, `:"",$.address.city]})]})]},$.id)})]}),Y.length>0&&a.jsxs("div",{className:"p-1 border-t border-border first:border-t-0",children:[a.jsxs("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground flex items-center gap-1",children:[a.jsx(tL,{className:"h-3 w-3"})," "]}),Y.map($=>{const U=Nl($.lat,$.lon,r,1)[0];return a.jsxs("button",{onClick:()=>W($),className:"w-full text-left px-2 py-2 rounded-md hover:bg-accent transition-colors flex items-start gap-2",children:[a.jsx("span",{className:"text-lg",children:x1($.category)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium truncate",children:$.name}),U&&a.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(jr,{className:"h-3 w-3"}),by(U.distanceMeters),"   "]})]})]},$.id)})]}),te.length>0&&a.jsxs("div",{className:"p-1 border-t border-border first:border-t-0",children:[a.jsxs("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground flex items-center gap-1",children:[a.jsx(Vl,{className:"h-3 w-3"})," "]}),te.map($=>a.jsxs("button",{onClick:()=>A($),className:"w-full text-left px-2 py-2 rounded-md hover:bg-accent transition-colors flex items-center gap-2",children:[a.jsx(It,{className:"h-4 w-4 text-orange-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm truncate flex-1",children:$.stop_name}),$.stop_code&&a.jsx("span",{className:"text-xs text-muted-foreground",children:$.stop_code})]},$.stop_id))]}),m.length>=2&&!_&&v.length===0&&Y.length===0&&te.length===0&&a.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"  "})]})]})})]})}function LW({stops:e,isLoading:t,onSearch:n,favorites:r=[],onRemoveFavorite:s}){const[i,l]=p.useState(null),[c,u]=p.useState(null),[h,m]=p.useState(!1),[f,g]=p.useState("now"),[v,_]=p.useState("09:00"),[x,b]=p.useState(new Date),[w,S]=p.useState(!1),[k,j]=p.useState(!1),[T,R]=p.useState(2),[E,B]=p.useState(1e3),[q,Y]=p.useState("balanced"),[te,A]=p.useState(!0),[W,P]=p.useState(!1),Z=p.useMemo(()=>f==="now"?"now":f==="all_day"?"all_day":v,[f,v]),$=p.useMemo(()=>{const oe=new Date;return x.toDateString()===oe.toDateString()},[x]),U=p.useMemo(()=>i?i.type==="stop"?i.stop:i.nearestStop:null,[i]),I=p.useMemo(()=>c?c.type==="stop"?c.stop:c.nearestStop:null,[c]),O=p.useMemo(()=>{let oe=0,ge=0,ce=0,ke=0;if(i&&i.type!=="stop"&&U){const Oe=i.type==="poi"?i.poi.lat:i.location.lat,Pe=i.type==="poi"?i.poi.lon:i.location.lon,Te=Nl(Oe,Pe,e,1)[0];Te&&(oe=Te.distanceMeters,ge=Te.walkingMinutes)}if(c&&c.type!=="stop"&&I){const Oe=c.type==="poi"?c.poi.lat:c.location.lat,Pe=c.type==="poi"?c.poi.lon:c.location.lon,Te=Nl(Oe,Pe,e,1)[0];Te&&(ce=Te.distanceMeters,ke=Te.walkingMinutes)}return{originWalkingMeters:oe,originWalkingMinutes:ge,destWalkingMeters:ce,destWalkingMinutes:ke}},[i,c,U,I,e]),F=()=>{navigator.geolocation&&(m(!0),navigator.geolocation.getCurrentPosition(oe=>{const{latitude:ge,longitude:ce}=oe.coords,ke=Nl(ge,ce,e,1);if(ke.length>0){const Oe=e.find(Pe=>Pe.stop_id===ke[0].stopId);Oe&&l({type:"address",location:{id:"current-location",displayName:"  ",shortName:"  ",lat:ge,lon:ce,type:"place"},nearestStop:Oe,displayName:"   "})}m(!1)},()=>{m(!1)}))},X=()=>{const oe=i;l(c),u(oe)},re=()=>{if(!U||!I)return;const oe=i&&i.type!=="stop"?{name:i.displayName,lat:i.type==="poi"?i.poi.lat:i.location.lat,lon:i.type==="poi"?i.poi.lon:i.location.lon}:void 0,ge=c&&c.type!=="stop"?{name:c.displayName,lat:c.type==="poi"?c.poi.lat:c.location.lat,lon:c.type==="poi"?c.poi.lon:c.location.lon}:void 0;n==null||n(U,I,Z,x,oe,ge,{maxWalkingDistance:E,maxTransfers:T,preference:q,includeNightBuses:te},O)},ae=oe=>{l({type:"stop",stop:oe.origin,displayName:oe.origin.stop_name}),u({type:"stop",stop:oe.destination,displayName:oe.destination.stop_name})},ie=O.originWalkingMinutes+O.destWalkingMinutes;return a.jsx("div",{className:"bg-card/80 backdrop-blur-sm rounded-lg border border-border p-2 sm:p-3",children:a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-end gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:""}),a.jsxs("button",{onClick:F,disabled:h,className:"text-xs text-primary hover:underline flex items-center gap-1 ml-auto sm:ml-2",children:[a.jsx(Mr,{className:"h-3 w-3"}),a.jsx("span",{className:"hidden xs:inline",children:h?"...":""})]})]}),a.jsx(w1,{value:i,onChange:l,placeholder:" ...",stops:e,icon:a.jsx(It,{className:"h-4 w-4"}),iconColor:"text-primary"}),i&&i.type!=="stop"&&O.originWalkingMinutes>0&&a.jsxs("div",{className:"mt-1 text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(jr,{className:"h-3 w-3"}),O.originWalkingMinutes,"  (",by(O.originWalkingMeters),")    ",U==null?void 0:U.stop_name]})]}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-9 w-9 flex-shrink-0 self-end",onClick:X,children:a.jsx(Q3,{className:"h-4 w-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"flex items-center gap-1 mb-1",children:a.jsx("span",{className:"text-xs text-muted-foreground",children:""})}),a.jsx(w1,{value:c,onChange:u,placeholder:" ...",stops:e,icon:a.jsx(It,{className:"h-4 w-4"}),iconColor:"text-destructive"}),c&&c.type!=="stop"&&O.destWalkingMinutes>0&&a.jsxs("div",{className:"mt-1 text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(jr,{className:"h-3 w-3"}),O.destWalkingMinutes,"  (",by(O.destWalkingMeters),")    ",I==null?void 0:I.stop_name]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[a.jsxs("div",{className:"w-[calc(50%-4px)] sm:w-[120px] flex-shrink-0",children:[a.jsx("div",{className:"flex items-center gap-1 mb-1",children:a.jsx("span",{className:"text-xs text-muted-foreground",children:""})}),a.jsxs(xf,{open:w,onOpenChange:S,children:[a.jsx(wf,{asChild:!0,children:a.jsxs(de,{variant:"outline",className:"w-full h-10 sm:h-9 justify-start text-left font-normal bg-background",children:[a.jsx(ga,{className:"h-3 w-3 mr-1 text-muted-foreground"}),a.jsx("span",{className:"text-sm",children:$?"":ri(x,"dd/MM",{locale:f0})})]})}),a.jsx(Ru,{className:"w-auto p-0 z-[100]",align:"start",children:a.jsx(ZE,{mode:"single",selected:x,onSelect:oe=>{oe&&(b(oe),S(!1))},disabled:oe=>oe<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]})]}),a.jsxs("div",{className:"w-[calc(50%-4px)] sm:w-auto flex-shrink-0",children:[a.jsx("div",{className:"flex items-center gap-1 mb-1",children:a.jsx("span",{className:"text-xs text-muted-foreground",children:""})}),a.jsxs(xf,{open:k,onOpenChange:j,children:[a.jsx(wf,{asChild:!0,children:a.jsxs(de,{variant:"outline",className:"h-10 sm:h-9 justify-start text-left font-normal bg-background min-w-[120px]",children:[a.jsx($n,{className:"h-3 w-3 mr-1 text-muted-foreground"}),a.jsxs("span",{className:"text-sm",children:[f==="now"&&"",f==="all_day"&&"  ",f==="specific"&&v]})]})}),a.jsx(Ru,{className:"w-56 p-2 z-[100]",align:"start",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("button",{onClick:()=>{g("now"),j(!1)},className:ye("w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center gap-2",f==="now"?"bg-primary text-primary-foreground":"hover:bg-accent"),title:" ",children:[a.jsx($n,{className:"h-4 w-4"}),a.jsx("span",{children:""}),a.jsx("span",{className:"text-xs opacity-70 ml-auto",children:"   "})]}),a.jsxs("button",{onClick:()=>{g("all_day"),j(!1)},className:ye("w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center gap-2",f==="all_day"?"bg-primary text-primary-foreground":"hover:bg-accent"),title:"  ",children:[a.jsx(ga,{className:"h-4 w-4"}),a.jsx("span",{children:"  "}),a.jsx("span",{className:"text-xs opacity-70 ml-auto",children:"  "})]})]}),a.jsxs("div",{className:"border-t border-border pt-2",children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1.5 px-1",children:" :"}),a.jsx("div",{className:"grid grid-cols-4 gap-1 max-h-[200px] overflow-y-auto",children:Array.from({length:24},(oe,ge)=>["00","30"].map(ce=>{const ke=`${ge.toString().padStart(2,"0")}:${ce}`,Oe=f==="specific"&&v===ke;return a.jsx("button",{onClick:()=>{_(ke),g("specific"),j(!1)},className:ye("px-2 py-1.5 rounded text-xs font-medium transition-colors",Oe?"bg-primary text-primary-foreground":"hover:bg-accent"),children:ke},ke)})).flat()})]})]})})]})]}),r.length>0&&a.jsxs(FT,{children:[a.jsx(UT,{asChild:!0,children:a.jsxs(de,{variant:"outline",size:"sm",className:"h-10 sm:h-9 gap-1 px-2 sm:px-3 flex-shrink-0",children:[a.jsx(ys,{className:"h-3 w-3 text-yellow-500"}),a.jsx("span",{className:"hidden sm:inline text-xs",children:""}),a.jsx(Jr,{className:"h-3 w-3"})]})}),a.jsx(E0,{align:"end",className:"w-64 z-[100]",children:r.map(oe=>a.jsxs("div",{className:"flex items-center",children:[a.jsx(Vo,{className:"flex-1 cursor-pointer",onClick:()=>ae(oe),children:a.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a.jsx(ys,{className:"h-3 w-3 text-yellow-500 flex-shrink-0"}),a.jsxs("span",{className:"truncate text-xs",children:[oe.origin.stop_name,"  ",oe.destination.stop_name]})]})}),s&&a.jsxs(a.Fragment,{children:[a.jsx(WT,{className:"h-6 w-px mx-1"}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:ge=>{ge.stopPropagation(),s(oe.id)},title:"  ",children:a.jsx(cf,{className:"h-3 w-3 text-destructive"})})]})]},oe.id))})]}),a.jsxs(de,{onClick:re,disabled:!U||!I||t,className:"flex-1 sm:flex-initial h-10 sm:h-9 gap-2",title:" ",children:[t?a.jsx(qn,{className:"h-4 w-4 animate-spin"}):a.jsx(Gl,{className:"h-4 w-4"}),a.jsx("span",{children:""})]})]}),a.jsxs(xm,{open:W,onOpenChange:P,className:"w-full",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("button",{onClick:()=>P(!W),className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[a.jsx(wL,{className:ye("h-3 w-3 transition-transform duration-200",W&&"rotate-90")}),a.jsx("span",{children:" "}),a.jsx(Co,{className:ye("h-3 w-3 transition-transform",W&&"rotate-90")})]}),!W&&a.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-muted-foreground/60 hidden sm:flex",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(W_,{className:"h-2.5 w-2.5"}),T===0?" ":` ${T} `]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(jr,{className:"h-2.5 w-2.5"}),E>=2e3?"":`${E}m`]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(uL,{className:"h-2.5 w-2.5"}),q==="fastest"?"":q==="least_walking"?" ":q==="fewest_transfers"?" ":""]})]})]}),a.jsx(ad,{className:"pt-3 pb-1",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 p-3 rounded-lg border border-border/50 bg-secondary/20",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(W_,{className:"h-3.5 w-3.5 text-primary"}),a.jsx(la,{className:"text-xs font-medium",children:" "})]}),a.jsxs(Js,{value:T.toString(),onValueChange:oe=>R(parseInt(oe)),children:[a.jsx(Cs,{className:"h-8 text-xs",children:a.jsx(Xs,{})}),a.jsxs(js,{children:[a.jsx(Vt,{value:"0",className:"text-xs",children:" ()"}),a.jsx(Vt,{value:"1",className:"text-xs",children:" 1 "}),a.jsx(Vt,{value:"2",className:"text-xs",children:" 2 "}),a.jsx(Vt,{value:"3",className:"text-xs",children:" 3 "}),a.jsx(Vt,{value:"5",className:"text-xs",children:""})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jr,{className:"h-3.5 w-3.5 text-primary"}),a.jsx(la,{className:"text-xs font-medium",children:" "})]}),a.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[E,"m"]})]}),a.jsx("div",{className:"pt-1",children:a.jsx(P0,{value:[E],onValueChange:([oe])=>B(oe),max:2e3,min:200,step:100,className:"py-2"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Y3,{className:"h-3.5 w-3.5 text-primary"}),a.jsx(la,{className:"text-xs font-medium",children:" "})]}),a.jsxs(Js,{value:q,onValueChange:oe=>Y(oe),children:[a.jsx(Cs,{className:"h-8 text-xs",children:a.jsx(Xs,{})}),a.jsxs(js,{children:[a.jsx(Vt,{value:"fastest",className:"text-xs",children:" "}),a.jsx(Vt,{value:"least_walking",className:"text-xs",children:" "}),a.jsx(Vt,{value:"fewest_transfers",className:"text-xs",children:" "}),a.jsx(Vt,{value:"balanced",className:"text-xs",children:""})]})]})]}),a.jsxs("div",{className:"sm:col-span-3 flex items-center justify-between pt-2 border-t border-border/30 mt-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"h-3.5 w-3.5 text-primary"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs font-medium",children:"  "}),a.jsx("span",{className:"text-[10px] text-muted-foreground",children:"     "})]})]}),a.jsx(Tf,{checked:te,onCheckedChange:A,className:"scale-75"})]})]})})]}),ie>0&&i&&c&&a.jsxs("div",{className:"bg-secondary/50 rounded-lg px-3 py-2 flex items-center gap-2 text-sm",children:[a.jsx(jr,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{className:"text-muted-foreground",children:[" : ",a.jsxs("strong",{className:"text-foreground",children:[ie," "]})]})]})]})})}const AW="/MotionAG/assets/motion-logo-C3d6Rso_.png";function _1({className:e="",height:t="1.5rem"}){const n=typeof t=="number"?`${t}px`:t;return a.jsx("img",{src:AW,alt:"Motion Logo",className:`animated-logo ${e}`,style:{height:n,objectFit:"contain"}})}function OW({isDark:e,onToggleTheme:t,refreshInterval:n,onRefreshIntervalChange:r,lastUpdate:s,isLoading:i,selectedOperator:l,onOperatorChange:c,selectedRoute:u,onRouteChange:h,availableRoutes:m,routeNamesMap:f,isRoutesLoading:g,showLiveOnly:v,onShowLiveOnlyChange:_,liveRoutesCount:x,stops:b=[],stopsLoading:w,onTripSearch:S,favorites:k=[],onRemoveFavorite:j,hasApiError:T=!1,apiErrorMessage:R,onApiRetry:E,retryCountdown:B,isUsingCachedData:q=!1,onOpenSavedTrips:Y,savedTripsCount:te=0}){const[A,W]=p.useState(!1),[P,Z]=p.useState(()=>{const I=localStorage.getItem("tripPlannerVisible");return I!==null?JSON.parse(I):!0}),$=()=>{const I=!P;Z(I),localStorage.setItem("tripPlannerVisible",JSON.stringify(I))},U=I=>new Date(I).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return a.jsx("header",{className:"glass-card border-b sticky top-0 z-50 safe-area-top flex-shrink-0",children:a.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-1.5 sm:py-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-1 md:hidden",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(_1,{height:"1rem",className:"sm:h-5"}),a.jsx("h1",{className:"text-xs sm:text-sm font-bold tracking-tight",children:"GTFS Realtime"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(s1,{isError:T,isLoading:i,errorMessage:R,onRetry:E||(()=>{}),lastSuccessfulUpdate:s||void 0,retryCountdown:B,isUsingCachedData:q}),a.jsx(de,{variant:"ghost",size:"icon",onClick:$,className:"h-7 w-7 sm:h-8 sm:w-8",title:P?" ":" ",children:P?a.jsx(ji,{className:"h-4 w-4"}):a.jsx(Jr,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:t,className:"h-7 w-7 sm:h-8 sm:w-8",children:e?a.jsx(q_,{className:"h-4 w-4"}):a.jsx(G_,{className:"h-4 w-4"})}),a.jsxs(de,{variant:"ghost",size:"icon",onClick:Y,className:"h-7 w-7 sm:h-8 sm:w-8 relative",title:"  ",children:[a.jsx(vv,{className:"h-4 w-4"}),te>0&&a.jsx("span",{className:"absolute -top-0.5 -right-0.5 h-3.5 w-3.5 rounded-full bg-primary text-[9px] text-primary-foreground flex items-center justify-center",children:te})]}),a.jsx(r1,{}),a.jsx(yf,{to:"/install",children:a.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7 sm:h-8 sm:w-8",children:a.jsx(Hl,{className:"h-4 w-4"})})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>W(!A),className:"h-8 w-8",children:A?a.jsx(un,{className:"h-4 w-4"}):a.jsx(fL,{className:"h-4 w-4"})})]})]}),A&&a.jsxs("div",{className:"md:hidden mt-3 pt-3 border-t border-border/50 space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(i1,{value:l,onChange:c}),a.jsx(o1,{value:u,onChange:h,routes:m,routeNames:f,disabled:l==="all",isLoading:g})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[_&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Tf,{id:"live-only-mobile",checked:v,onCheckedChange:_}),a.jsxs(la,{htmlFor:"live-only-mobile",className:"text-xs text-muted-foreground cursor-pointer",children:[" Live (",x||0,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:":"}),a.jsxs(Js,{value:n.toString(),onValueChange:I=>r(parseInt(I)),children:[a.jsx(Cs,{className:"w-[60px] h-7 text-xs",children:a.jsx(Xs,{})}),a.jsxs(js,{children:[a.jsx(Vt,{value:"3",children:"3s"}),a.jsx(Vt,{value:"5",children:"5s"}),a.jsx(Vt,{value:"10",children:"10s"}),a.jsx(Vt,{value:"15",children:"15s"})]})]})]})]}),s&&a.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[". : ",U(s)]})]}),a.jsxs("div",{className:"hidden md:flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_1,{height:"1.5rem"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-base font-bold tracking-tight leading-none",children:"GTFS Realtime"}),a.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Live Tracking"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(i1,{value:l,onChange:c}),a.jsx(o1,{value:u,onChange:h,routes:m,routeNames:f,disabled:l==="all",isLoading:g})]}),_&&a.jsxs("div",{className:"flex items-center gap-2 border-l border-border pl-3",children:[a.jsx(Tf,{id:"live-only-header",checked:v,onCheckedChange:_}),a.jsxs(la,{htmlFor:"live-only-header",className:"text-xs text-muted-foreground cursor-pointer whitespace-nowrap",children:["Live (",x||0,")"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(s1,{isError:T,isLoading:i,errorMessage:R,onRetry:E||(()=>{}),lastSuccessfulUpdate:s||void 0,retryCountdown:B,isUsingCachedData:q}),a.jsx("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground border-l border-border pl-2",children:a.jsxs(Js,{value:n.toString(),onValueChange:I=>r(parseInt(I)),children:[a.jsx(Cs,{className:"w-[60px] h-6 text-xs",children:a.jsx(Xs,{})}),a.jsxs(js,{children:[a.jsx(Vt,{value:"3",children:"3s"}),a.jsx(Vt,{value:"5",children:"5s"}),a.jsx(Vt,{value:"10",children:"10s"}),a.jsx(Vt,{value:"15",children:"15s"})]})]})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:$,className:"h-7 w-7",title:P?" ":" ",children:P?a.jsx(ji,{className:"h-4 w-4"}):a.jsx(Jr,{className:"h-4 w-4"})}),a.jsxs(de,{variant:"ghost",size:"icon",onClick:Y,className:"h-7 w-7 relative",title:"  ",children:[a.jsx(vv,{className:"h-4 w-4"}),te>0&&a.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 rounded-full bg-primary text-[10px] text-primary-foreground flex items-center justify-center",children:te})]}),a.jsx(r1,{}),a.jsx(yf,{to:"/install",children:a.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7",title:" ",children:a.jsx(Hl,{className:"h-4 w-4"})})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:t,className:"h-7 w-7",children:e?a.jsx(q_,{className:"h-4 w-4"}):a.jsx(G_,{className:"h-4 w-4"})})]})]}),a.jsx(xm,{open:P,onOpenChange:Z,children:a.jsx(ad,{className:"mt-2 pt-2 border-t border-border/50",children:a.jsx(LW,{stops:b,isLoading:w,onSearch:S,favorites:k,onRemoveFavorite:j})})})]})})}function DW({message:e,onRetry:t}){return a.jsx("div",{className:"bg-destructive/10 border border-destructive/30 rounded-lg p-4 mx-4 mt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(oc,{className:"h-5 w-5 text-destructive flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-destructive",children:" "}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e})]}),t&&a.jsxs(de,{variant:"outline",size:"sm",onClick:t,className:"flex-shrink-0",children:[a.jsx(lf,{className:"h-4 w-4 mr-2"}),""]})]})})}var Sy={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(cS,function(n){var r="1.9.4";function s(o){var d,y,N,C;for(y=1,N=arguments.length;y<N;y++){C=arguments[y];for(d in C)o[d]=C[d]}return o}var i=Object.create||function(){function o(){}return function(d){return o.prototype=d,new o}}();function l(o,d){var y=Array.prototype.slice;if(o.bind)return o.bind.apply(o,y.call(arguments,1));var N=y.call(arguments,2);return function(){return o.apply(d,N.length?N.concat(y.call(arguments)):arguments)}}var c=0;function u(o){return"_leaflet_id"in o||(o._leaflet_id=++c),o._leaflet_id}function h(o,d,y){var N,C,M,G;return G=function(){N=!1,C&&(M.apply(y,C),C=!1)},M=function(){N?C=arguments:(o.apply(y,arguments),setTimeout(G,d),N=!0)},M}function m(o,d,y){var N=d[1],C=d[0],M=N-C;return o===N&&y?o:((o-C)%M+M)%M+C}function f(){return!1}function g(o,d){if(d===!1)return o;var y=Math.pow(10,d===void 0?6:d);return Math.round(o*y)/y}function v(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function _(o){return v(o).split(/\s+/)}function x(o,d){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?i(o.options):{});for(var y in d)o.options[y]=d[y];return o.options}function b(o,d,y){var N=[];for(var C in o)N.push(encodeURIComponent(y?C.toUpperCase():C)+"="+encodeURIComponent(o[C]));return(!d||d.indexOf("?")===-1?"?":"&")+N.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function S(o,d){return o.replace(w,function(y,N){var C=d[N];if(C===void 0)throw new Error("No value provided for variable "+y);return typeof C=="function"&&(C=C(d)),C})}var k=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function j(o,d){for(var y=0;y<o.length;y++)if(o[y]===d)return y;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var E=0;function B(o){var d=+new Date,y=Math.max(0,16-(d-E));return E=d+y,window.setTimeout(o,y)}var q=window.requestAnimationFrame||R("RequestAnimationFrame")||B,Y=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function te(o,d,y){if(y&&q===B)o.call(d);else return q.call(window,l(o,d))}function A(o){o&&Y.call(window,o)}var W={__proto__:null,extend:s,create:i,bind:l,get lastId(){return c},stamp:u,throttle:h,wrapNum:m,falseFn:f,formatNum:g,trim:v,splitWords:_,setOptions:x,getParamString:b,template:S,isArray:k,indexOf:j,emptyImageUrl:T,requestFn:q,cancelFn:Y,requestAnimFrame:te,cancelAnimFrame:A};function P(){}P.extend=function(o){var d=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},y=d.__super__=this.prototype,N=i(y);N.constructor=d,d.prototype=N;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(d[C]=this[C]);return o.statics&&s(d,o.statics),o.includes&&(Z(o.includes),s.apply(null,[N].concat(o.includes))),s(N,o),delete N.statics,delete N.includes,N.options&&(N.options=y.options?i(y.options):{},s(N.options,o.options)),N._initHooks=[],N.callInitHooks=function(){if(!this._initHooksCalled){y.callInitHooks&&y.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,G=N._initHooks.length;M<G;M++)N._initHooks[M].call(this)}},d},P.include=function(o){var d=this.prototype.options;return s(this.prototype,o),o.options&&(this.prototype.options=d,this.mergeOptions(o.options)),this},P.mergeOptions=function(o){return s(this.prototype.options,o),this},P.addInitHook=function(o){var d=Array.prototype.slice.call(arguments,1),y=typeof o=="function"?o:function(){this[o].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(y),this};function Z(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=k(o)?o:[o];for(var d=0;d<o.length;d++)o[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(o,d,y){if(typeof o=="object")for(var N in o)this._on(N,o[N],d);else{o=_(o);for(var C=0,M=o.length;C<M;C++)this._on(o[C],d,y)}return this},off:function(o,d,y){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var N in o)this._off(N,o[N],d);else{o=_(o);for(var C=arguments.length===1,M=0,G=o.length;M<G;M++)C?this._off(o[M]):this._off(o[M],d,y)}return this},_on:function(o,d,y,N){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(o,d,y)===!1){y===this&&(y=void 0);var C={fn:d,ctx:y};N&&(C.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(C)}},_off:function(o,d,y){var N,C,M;if(this._events&&(N=this._events[o],!!N)){if(arguments.length===1){if(this._firingCount)for(C=0,M=N.length;C<M;C++)N[C].fn=f;delete this._events[o];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var G=this._listens(o,d,y);if(G!==!1){var ne=N[G];this._firingCount&&(ne.fn=f,this._events[o]=N=N.slice()),N.splice(G,1)}}},fire:function(o,d,y){if(!this.listens(o,y))return this;var N=s({},d,{type:o,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var C=this._events[o];if(C){this._firingCount=this._firingCount+1||1;for(var M=0,G=C.length;M<G;M++){var ne=C[M],se=ne.fn;ne.once&&this.off(o,se,ne.ctx),se.call(ne.ctx||this,N)}this._firingCount--}}return y&&this._propagateEvent(N),this},listens:function(o,d,y,N){typeof o!="string"&&console.warn('"string" type argument expected');var C=d;typeof d!="function"&&(N=!!d,C=void 0,y=void 0);var M=this._events&&this._events[o];if(M&&M.length&&this._listens(o,C,y)!==!1)return!0;if(N){for(var G in this._eventParents)if(this._eventParents[G].listens(o,d,y,N))return!0}return!1},_listens:function(o,d,y){if(!this._events)return!1;var N=this._events[o]||[];if(!d)return!!N.length;y===this&&(y=void 0);for(var C=0,M=N.length;C<M;C++)if(N[C].fn===d&&N[C].ctx===y)return C;return!1},once:function(o,d,y){if(typeof o=="object")for(var N in o)this._on(N,o[N],d,!0);else{o=_(o);for(var C=0,M=o.length;C<M;C++)this._on(o[C],d,y,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[u(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[u(o)],this},_propagateEvent:function(o){for(var d in this._eventParents)this._eventParents[d].fire(o.type,s({layer:o.target,propagatedFrom:o.target},o),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var U=P.extend($);function I(o,d,y){this.x=y?Math.round(o):o,this.y=y?Math.round(d):d}var O=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};I.prototype={clone:function(){return new I(this.x,this.y)},add:function(o){return this.clone()._add(F(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(F(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new I(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new I(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(o){o=F(o);var d=o.x-this.x,y=o.y-this.y;return Math.sqrt(d*d+y*y)},equals:function(o){return o=F(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=F(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function F(o,d,y){return o instanceof I?o:k(o)?new I(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new I(o.x,o.y):new I(o,d,y)}function X(o,d){if(o)for(var y=d?[o,d]:o,N=0,C=y.length;N<C;N++)this.extend(y[N])}X.prototype={extend:function(o){var d,y;if(!o)return this;if(o instanceof I||typeof o[0]=="number"||"x"in o)d=y=F(o);else if(o=re(o),d=o.min,y=o.max,!d||!y)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=y.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(y.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(y.y,this.max.y)),this},getCenter:function(o){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var d,y;return typeof o[0]=="number"||o instanceof I?o=F(o):o=re(o),o instanceof X?(d=o.min,y=o.max):d=y=o,d.x>=this.min.x&&y.x<=this.max.x&&d.y>=this.min.y&&y.y<=this.max.y},intersects:function(o){o=re(o);var d=this.min,y=this.max,N=o.min,C=o.max,M=C.x>=d.x&&N.x<=y.x,G=C.y>=d.y&&N.y<=y.y;return M&&G},overlaps:function(o){o=re(o);var d=this.min,y=this.max,N=o.min,C=o.max,M=C.x>d.x&&N.x<y.x,G=C.y>d.y&&N.y<y.y;return M&&G},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var d=this.min,y=this.max,N=Math.abs(d.x-y.x)*o,C=Math.abs(d.y-y.y)*o;return re(F(d.x-N,d.y-C),F(y.x+N,y.y+C))},equals:function(o){return o?(o=re(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function re(o,d){return!o||o instanceof X?o:new X(o,d)}function ae(o,d){if(o)for(var y=d?[o,d]:o,N=0,C=y.length;N<C;N++)this.extend(y[N])}ae.prototype={extend:function(o){var d=this._southWest,y=this._northEast,N,C;if(o instanceof oe)N=o,C=o;else if(o instanceof ae){if(N=o._southWest,C=o._northEast,!N||!C)return this}else return o?this.extend(ge(o)||ie(o)):this;return!d&&!y?(this._southWest=new oe(N.lat,N.lng),this._northEast=new oe(C.lat,C.lng)):(d.lat=Math.min(N.lat,d.lat),d.lng=Math.min(N.lng,d.lng),y.lat=Math.max(C.lat,y.lat),y.lng=Math.max(C.lng,y.lng)),this},pad:function(o){var d=this._southWest,y=this._northEast,N=Math.abs(d.lat-y.lat)*o,C=Math.abs(d.lng-y.lng)*o;return new ae(new oe(d.lat-N,d.lng-C),new oe(y.lat+N,y.lng+C))},getCenter:function(){return new oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof oe||"lat"in o?o=ge(o):o=ie(o);var d=this._southWest,y=this._northEast,N,C;return o instanceof ae?(N=o.getSouthWest(),C=o.getNorthEast()):N=C=o,N.lat>=d.lat&&C.lat<=y.lat&&N.lng>=d.lng&&C.lng<=y.lng},intersects:function(o){o=ie(o);var d=this._southWest,y=this._northEast,N=o.getSouthWest(),C=o.getNorthEast(),M=C.lat>=d.lat&&N.lat<=y.lat,G=C.lng>=d.lng&&N.lng<=y.lng;return M&&G},overlaps:function(o){o=ie(o);var d=this._southWest,y=this._northEast,N=o.getSouthWest(),C=o.getNorthEast(),M=C.lat>d.lat&&N.lat<y.lat,G=C.lng>d.lng&&N.lng<y.lng;return M&&G},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,d){return o?(o=ie(o),this._southWest.equals(o.getSouthWest(),d)&&this._northEast.equals(o.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ie(o,d){return o instanceof ae?o:new ae(o,d)}function oe(o,d,y){if(isNaN(o)||isNaN(d))throw new Error("Invalid LatLng object: ("+o+", "+d+")");this.lat=+o,this.lng=+d,y!==void 0&&(this.alt=+y)}oe.prototype={equals:function(o,d){if(!o)return!1;o=ge(o);var y=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return y<=(d===void 0?1e-9:d)},toString:function(o){return"LatLng("+g(this.lat,o)+", "+g(this.lng,o)+")"},distanceTo:function(o){return ke.distance(this,ge(o))},wrap:function(){return ke.wrapLatLng(this)},toBounds:function(o){var d=180*o/40075017,y=d/Math.cos(Math.PI/180*this.lat);return ie([this.lat-d,this.lng-y],[this.lat+d,this.lng+y])},clone:function(){return new oe(this.lat,this.lng,this.alt)}};function ge(o,d,y){return o instanceof oe?o:k(o)&&typeof o[0]!="object"?o.length===3?new oe(o[0],o[1],o[2]):o.length===2?new oe(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new oe(o.lat,"lng"in o?o.lng:o.lon,o.alt):d===void 0?null:new oe(o,d,y)}var ce={latLngToPoint:function(o,d){var y=this.projection.project(o),N=this.scale(d);return this.transformation._transform(y,N)},pointToLatLng:function(o,d){var y=this.scale(d),N=this.transformation.untransform(o,y);return this.projection.unproject(N)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var d=this.projection.bounds,y=this.scale(o),N=this.transformation.transform(d.min,y),C=this.transformation.transform(d.max,y);return new X(N,C)},infinite:!1,wrapLatLng:function(o){var d=this.wrapLng?m(o.lng,this.wrapLng,!0):o.lng,y=this.wrapLat?m(o.lat,this.wrapLat,!0):o.lat,N=o.alt;return new oe(y,d,N)},wrapLatLngBounds:function(o){var d=o.getCenter(),y=this.wrapLatLng(d),N=d.lat-y.lat,C=d.lng-y.lng;if(N===0&&C===0)return o;var M=o.getSouthWest(),G=o.getNorthEast(),ne=new oe(M.lat-N,M.lng-C),se=new oe(G.lat-N,G.lng-C);return new ae(ne,se)}},ke=s({},ce,{wrapLng:[-180,180],R:6371e3,distance:function(o,d){var y=Math.PI/180,N=o.lat*y,C=d.lat*y,M=Math.sin((d.lat-o.lat)*y/2),G=Math.sin((d.lng-o.lng)*y/2),ne=M*M+Math.cos(N)*Math.cos(C)*G*G,se=2*Math.atan2(Math.sqrt(ne),Math.sqrt(1-ne));return this.R*se}}),Oe=6378137,Pe={R:Oe,MAX_LATITUDE:85.0511287798,project:function(o){var d=Math.PI/180,y=this.MAX_LATITUDE,N=Math.max(Math.min(y,o.lat),-y),C=Math.sin(N*d);return new I(this.R*o.lng*d,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(o){var d=180/Math.PI;return new oe((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*d,o.x*d/this.R)},bounds:function(){var o=Oe*Math.PI;return new X([-o,-o],[o,o])}()};function Te(o,d,y,N){if(k(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=d,this._c=y,this._d=N}Te.prototype={transform:function(o,d){return this._transform(o.clone(),d)},_transform:function(o,d){return d=d||1,o.x=d*(this._a*o.x+this._b),o.y=d*(this._c*o.y+this._d),o},untransform:function(o,d){return d=d||1,new I((o.x/d-this._b)/this._a,(o.y/d-this._d)/this._c)}};function We(o,d,y,N){return new Te(o,d,y,N)}var wt=s({},ke,{code:"EPSG:3857",projection:Pe,transformation:function(){var o=.5/(Math.PI*Pe.R);return We(o,.5,-o,.5)}()}),kt=s({},wt,{code:"EPSG:900913"});function ot(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Q(o,d){var y="",N,C,M,G,ne,se;for(N=0,M=o.length;N<M;N++){for(ne=o[N],C=0,G=ne.length;C<G;C++)se=ne[C],y+=(C?"L":"M")+se.x+" "+se.y;y+=d?Se.svg?"z":"x":""}return y||"M0 0"}var he=document.documentElement.style,me="ActiveXObject"in window,Ue=me&&!document.addEventListener,Ze="msLaunchUri"in navigator&&!("documentMode"in document),ze=dn("webkit"),_t=dn("android"),dt=dn("android 2")||dn("android 3"),En=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Yn=_t&&dn("Google")&&En<537&&!("AudioNode"in window),Rt=!!window.opera,rn=!Ze&&dn("chrome"),Jt=dn("gecko")&&!ze&&!Rt&&!me,Et=!rn&&dn("safari"),bt=dn("phantom"),Fn="OTransition"in he,ue=navigator.platform.indexOf("Win")===0,Ve=me&&"transition"in he,Ie="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!dt,Fe="MozPerspective"in he,Ot=!window.L_DISABLE_3D&&(Ve||Ie||Fe)&&!Fn&&!bt,Mt=typeof orientation<"u"||dn("mobile"),_n=Mt&&ze,Jn=Mt&&Ie,Tt=!window.PointerEvent&&window.MSPointerEvent,sn=!!(window.PointerEvent||Tt),bn="ontouchstart"in window||!!window.TouchEvent,mn=!window.L_NO_TOUCH&&(bn||sn),qe=Mt&&Rt,Be=Mt&&Jt,ct=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ht=function(){var o=!1;try{var d=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",f,d),window.removeEventListener("testPassiveEventSupport",f,d)}catch{}return o}(),Lt=function(){return!!document.createElement("canvas").getContext}(),Ct=!!(document.createElementNS&&ot("svg").createSVGRect),Xt=!!Ct&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),qt=!Ct&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var d=o.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}(),Kt=navigator.platform.indexOf("Mac")===0,Sn=navigator.platform.indexOf("Linux")===0;function dn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Se={ie:me,ielt9:Ue,edge:Ze,webkit:ze,android:_t,android23:dt,androidStock:Yn,opera:Rt,chrome:rn,gecko:Jt,safari:Et,phantom:bt,opera12:Fn,win:ue,ie3d:Ve,webkit3d:Ie,gecko3d:Fe,any3d:Ot,mobile:Mt,mobileWebkit:_n,mobileWebkit3d:Jn,msPointer:Tt,pointer:sn,touch:mn,touchNative:bn,mobileOpera:qe,mobileGecko:Be,retina:ct,passiveEvents:ht,canvas:Lt,svg:Ct,vml:qt,inlineSvg:Xt,mac:Kt,linux:Sn},ii=Se.msPointer?"MSPointerDown":"pointerdown",oi=Se.msPointer?"MSPointerMove":"pointermove",$r=Se.msPointer?"MSPointerUp":"pointerup",Ps=Se.msPointer?"MSPointerCancel":"pointercancel",ns={touchstart:ii,touchmove:oi,touchend:$r,touchcancel:Ps},V={touchstart:$e,touchmove:we,touchend:we,touchcancel:we},fe={},pe=!1;function D(o,d,y){return d==="touchstart"&&le(),V[d]?(y=V[d].bind(this,y),o.addEventListener(ns[d],y,!1),y):(console.warn("wrong event specified:",d),f)}function K(o,d,y){if(!ns[d]){console.warn("wrong event specified:",d);return}o.removeEventListener(ns[d],y,!1)}function z(o){fe[o.pointerId]=o}function H(o){fe[o.pointerId]&&(fe[o.pointerId]=o)}function ee(o){delete fe[o.pointerId]}function le(){pe||(document.addEventListener(ii,z,!0),document.addEventListener(oi,H,!0),document.addEventListener($r,ee,!0),document.addEventListener(Ps,ee,!0),pe=!0)}function we(o,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var y in fe)d.touches.push(fe[y]);d.changedTouches=[d],o(d)}}function $e(o,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&In(d),we(o,d)}function Le(o){var d={},y,N;for(N in o)y=o[N],d[N]=y&&y.bind?y.bind(o):y;return o=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var Me=200;function Re(o,d){o.addEventListener("dblclick",d);var y=0,N;function C(M){if(M.detail!==1){N=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var G=$0(M);if(!(G.some(function(se){return se instanceof HTMLLabelElement&&se.attributes.for})&&!G.some(function(se){return se instanceof HTMLInputElement||se instanceof HTMLSelectElement}))){var ne=Date.now();ne-y<=Me?(N++,N===2&&d(Le(M))):N=1,y=ne}}}return o.addEventListener("click",C),{dblclick:d,simDblclick:C}}function rt(o,d){o.removeEventListener("dblclick",d.dblclick),o.removeEventListener("click",d.simDblclick)}var nt=Xn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),at=Xn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vt=at==="webkitTransition"||at==="OTransition"?at+"End":"transitionend";function St(o){return typeof o=="string"?document.getElementById(o):o}function ut(o,d){var y=o.style[d]||o.currentStyle&&o.currentStyle[d];if((!y||y==="auto")&&document.defaultView){var N=document.defaultView.getComputedStyle(o,null);y=N?N[d]:null}return y==="auto"?null:y}function Ge(o,d,y){var N=document.createElement(o);return N.className=d||"",y&&y.appendChild(N),N}function ft(o){var d=o.parentNode;d&&d.removeChild(o)}function zr(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function rs(o){var d=o.parentNode;d&&d.lastChild!==o&&d.appendChild(o)}function ss(o){var d=o.parentNode;d&&d.firstChild!==o&&d.insertBefore(o,d.firstChild)}function Ia(o,d){if(o.classList!==void 0)return o.classList.contains(d);var y=br(o);return y.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(y)}function He(o,d){if(o.classList!==void 0)for(var y=_(d),N=0,C=y.length;N<C;N++)o.classList.add(y[N]);else if(!Ia(o,d)){var M=br(o);Mi(o,(M?M+" ":"")+d)}}function Pt(o,d){o.classList!==void 0?o.classList.remove(d):Mi(o,v((" "+br(o)+" ").replace(" "+d+" "," ")))}function Mi(o,d){o.className.baseVal===void 0?o.className=d:o.className.baseVal=d}function br(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function on(o,d){"opacity"in o.style?o.style.opacity=d:"filter"in o.style&&Sr(o,d)}function Sr(o,d){var y=!1,N="DXImageTransform.Microsoft.Alpha";try{y=o.filters.item(N)}catch{if(d===1)return}d=Math.round(d*100),y?(y.Enabled=d!==100,y.Opacity=d):o.style.filter+=" progid:"+N+"(opacity="+d+")"}function Xn(o){for(var d=document.documentElement.style,y=0;y<o.length;y++)if(o[y]in d)return o[y];return!1}function ai(o,d,y){var N=d||new I(0,0);o.style[nt]=(Se.ie3d?"translate("+N.x+"px,"+N.y+"px)":"translate3d("+N.x+"px,"+N.y+"px,0)")+(y?" scale("+y+")":"")}function pn(o,d){o._leaflet_pos=d,Se.any3d?ai(o,d):(o.style.left=d.x+"px",o.style.top=d.y+"px")}function Mo(o){return o._leaflet_pos||new I(0,0)}var vc,yc,Bm;if("onselectstart"in document)vc=function(){it(window,"selectstart",In)},yc=function(){zt(window,"selectstart",In)};else{var xc=Xn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);vc=function(){if(xc){var o=document.documentElement.style;Bm=o[xc],o[xc]="none"}},yc=function(){xc&&(document.documentElement.style[xc]=Bm,Bm=void 0)}}function Fm(){it(window,"dragstart",In)}function Um(){zt(window,"dragstart",In)}var yd,Wm;function Hm(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(xd(),yd=o,Wm=o.style.outlineStyle,o.style.outlineStyle="none",it(window,"keydown",xd))}function xd(){yd&&(yd.style.outlineStyle=Wm,yd=void 0,Wm=void 0,zt(window,"keydown",xd))}function O0(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Vm(o){var d=o.getBoundingClientRect();return{x:d.width/o.offsetWidth||1,y:d.height/o.offsetHeight||1,boundingClientRect:d}}var EP={__proto__:null,TRANSFORM:nt,TRANSITION:at,TRANSITION_END:vt,get:St,getStyle:ut,create:Ge,remove:ft,empty:zr,toFront:rs,toBack:ss,hasClass:Ia,addClass:He,removeClass:Pt,setClass:Mi,getClass:br,setOpacity:on,testProp:Xn,setTransform:ai,setPosition:pn,getPosition:Mo,get disableTextSelection(){return vc},get enableTextSelection(){return yc},disableImageDrag:Fm,enableImageDrag:Um,preventOutline:Hm,restoreOutline:xd,getSizedParentNode:O0,getScale:Vm};function it(o,d,y,N){if(d&&typeof d=="object")for(var C in d)Zm(o,C,d[C],y);else{d=_(d);for(var M=0,G=d.length;M<G;M++)Zm(o,d[M],y,N)}return this}var Ms="_leaflet_events";function zt(o,d,y,N){if(arguments.length===1)D0(o),delete o[Ms];else if(d&&typeof d=="object")for(var C in d)qm(o,C,d[C],y);else if(d=_(d),arguments.length===2)D0(o,function(ne){return j(d,ne)!==-1});else for(var M=0,G=d.length;M<G;M++)qm(o,d[M],y,N);return this}function D0(o,d){for(var y in o[Ms]){var N=y.split(/\d/)[0];(!d||d(N))&&qm(o,N,null,null,y)}}var Gm={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Zm(o,d,y,N){var C=d+u(y)+(N?"_"+u(N):"");if(o[Ms]&&o[Ms][C])return this;var M=function(ne){return y.call(N||o,ne||window.event)},G=M;!Se.touchNative&&Se.pointer&&d.indexOf("touch")===0?M=D(o,d,M):Se.touch&&d==="dblclick"?M=Re(o,M):"addEventListener"in o?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?o.addEventListener(Gm[d]||d,M,Se.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(M=function(ne){ne=ne||window.event,Ym(o,ne)&&G(ne)},o.addEventListener(Gm[d],M,!1)):o.addEventListener(d,G,!1):o.attachEvent("on"+d,M),o[Ms]=o[Ms]||{},o[Ms][C]=M}function qm(o,d,y,N,C){C=C||d+u(y)+(N?"_"+u(N):"");var M=o[Ms]&&o[Ms][C];if(!M)return this;!Se.touchNative&&Se.pointer&&d.indexOf("touch")===0?K(o,d,M):Se.touch&&d==="dblclick"?rt(o,M):"removeEventListener"in o?o.removeEventListener(Gm[d]||d,M,!1):o.detachEvent("on"+d,M),o[Ms][C]=null}function Io(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Km(o){return Zm(o,"wheel",Io),this}function wc(o){return it(o,"mousedown touchstart dblclick contextmenu",Io),o._leaflet_disable_click=!0,this}function In(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Ro(o){return In(o),Io(o),this}function $0(o){if(o.composedPath)return o.composedPath();for(var d=[],y=o.target;y;)d.push(y),y=y.parentNode;return d}function z0(o,d){if(!d)return new I(o.clientX,o.clientY);var y=Vm(d),N=y.boundingClientRect;return new I((o.clientX-N.left)/y.x-d.clientLeft,(o.clientY-N.top)/y.y-d.clientTop)}var TP=Se.linux&&Se.chrome?window.devicePixelRatio:Se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function B0(o){return Se.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/TP:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Ym(o,d){var y=d.relatedTarget;if(!y)return!0;try{for(;y&&y!==o;)y=y.parentNode}catch{return!1}return y!==o}var PP={__proto__:null,on:it,off:zt,stopPropagation:Io,disableScrollPropagation:Km,disableClickPropagation:wc,preventDefault:In,stop:Ro,getPropagationPath:$0,getMousePosition:z0,getWheelDelta:B0,isExternalTarget:Ym,addListener:it,removeListener:zt},F0=U.extend({run:function(o,d,y,N){this.stop(),this._el=o,this._inProgress=!0,this._duration=y||.25,this._easeOutPower=1/Math.max(N||.5,.2),this._startPos=Mo(o),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=te(this._animate,this),this._step()},_step:function(o){var d=+new Date-this._startTime,y=this._duration*1e3;d<y?this._runFrame(this._easeOut(d/y),o):(this._runFrame(1),this._complete())},_runFrame:function(o,d){var y=this._startPos.add(this._offset.multiplyBy(o));d&&y._round(),pn(this._el,y),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Nt=U.extend({options:{crs:wt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,d){d=x(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(ge(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=at&&Se.any3d&&!Se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,vt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,d,y){if(d=d===void 0?this._zoom:this._limitZoom(d),o=this._limitCenter(ge(o),d,this.options.maxBounds),y=y||{},this._stop(),this._loaded&&!y.reset&&y!==!0){y.animate!==void 0&&(y.zoom=s({animate:y.animate},y.zoom),y.pan=s({animate:y.animate,duration:y.duration},y.pan));var N=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,d,y.zoom):this._tryAnimatedPan(o,y.pan);if(N)return clearTimeout(this._sizeTimer),this}return this._resetView(o,d,y.pan&&y.pan.noMoveStart),this},setZoom:function(o,d){return this._loaded?this.setView(this.getCenter(),o,{zoom:d}):(this._zoom=o,this)},zoomIn:function(o,d){return o=o||(Se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,d)},zoomOut:function(o,d){return o=o||(Se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,d)},setZoomAround:function(o,d,y){var N=this.getZoomScale(d),C=this.getSize().divideBy(2),M=o instanceof I?o:this.latLngToContainerPoint(o),G=M.subtract(C).multiplyBy(1-1/N),ne=this.containerPointToLatLng(C.add(G));return this.setView(ne,d,{zoom:y})},_getBoundsCenterZoom:function(o,d){d=d||{},o=o.getBounds?o.getBounds():ie(o);var y=F(d.paddingTopLeft||d.padding||[0,0]),N=F(d.paddingBottomRight||d.padding||[0,0]),C=this.getBoundsZoom(o,!1,y.add(N));if(C=typeof d.maxZoom=="number"?Math.min(d.maxZoom,C):C,C===1/0)return{center:o.getCenter(),zoom:C};var M=N.subtract(y).divideBy(2),G=this.project(o.getSouthWest(),C),ne=this.project(o.getNorthEast(),C),se=this.unproject(G.add(ne).divideBy(2).add(M),C);return{center:se,zoom:C}},fitBounds:function(o,d){if(o=ie(o),!o.isValid())throw new Error("Bounds are not valid.");var y=this._getBoundsCenterZoom(o,d);return this.setView(y.center,y.zoom,d)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,d){return this.setView(o,this._zoom,{pan:d})},panBy:function(o,d){if(o=F(o).round(),d=d||{},!o.x&&!o.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new F0,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){He(this._mapPane,"leaflet-pan-anim");var y=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,y,d.duration||.25,d.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,d,y){if(y=y||{},y.animate===!1||!Se.any3d)return this.setView(o,d,y);this._stop();var N=this.project(this.getCenter()),C=this.project(o),M=this.getSize(),G=this._zoom;o=ge(o),d=d===void 0?G:d;var ne=Math.max(M.x,M.y),se=ne*this.getZoomScale(G,d),ve=C.distanceTo(N)||1,Ce=1.42,Je=Ce*Ce;function mt(gn){var Md=gn?-1:1,yM=gn?se:ne,xM=se*se-ne*ne+Md*Je*Je*ve*ve,wM=2*yM*Je*ve,ap=xM/wM,_w=Math.sqrt(ap*ap+1)-ap,_M=_w<1e-9?-18:Math.log(_w);return _M}function Qn(gn){return(Math.exp(gn)-Math.exp(-gn))/2}function Tn(gn){return(Math.exp(gn)+Math.exp(-gn))/2}function Fr(gn){return Qn(gn)/Tn(gn)}var cr=mt(0);function $a(gn){return ne*(Tn(cr)/Tn(cr+Ce*gn))}function mM(gn){return ne*(Tn(cr)*Fr(cr+Ce*gn)-Qn(cr))/Je}function pM(gn){return 1-Math.pow(1-gn,1.5)}var gM=Date.now(),xw=(mt(1)-cr)/Ce,vM=y.duration?1e3*y.duration:1e3*xw*.8;function ww(){var gn=(Date.now()-gM)/vM,Md=pM(gn)*xw;gn<=1?(this._flyToFrame=te(ww,this),this._move(this.unproject(N.add(C.subtract(N).multiplyBy(mM(Md)/ve)),G),this.getScaleZoom(ne/$a(Md),G),{flyTo:!0})):this._move(o,d)._moveEnd(!0)}return this._moveStart(!0,y.noMoveStart),ww.call(this),this},flyToBounds:function(o,d){var y=this._getBoundsCenterZoom(o,d);return this.flyTo(y.center,y.zoom,d)},setMaxBounds:function(o){return o=ie(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var d=this.options.minZoom;return this.options.minZoom=o,this._loaded&&d!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var d=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&d!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,d){this._enforcingBounds=!0;var y=this.getCenter(),N=this._limitCenter(y,this._zoom,ie(o));return y.equals(N)||this.panTo(N,d),this._enforcingBounds=!1,this},panInside:function(o,d){d=d||{};var y=F(d.paddingTopLeft||d.padding||[0,0]),N=F(d.paddingBottomRight||d.padding||[0,0]),C=this.project(this.getCenter()),M=this.project(o),G=this.getPixelBounds(),ne=re([G.min.add(y),G.max.subtract(N)]),se=ne.getSize();if(!ne.contains(M)){this._enforcingBounds=!0;var ve=M.subtract(ne.getCenter()),Ce=ne.extend(M).getSize().subtract(se);C.x+=ve.x<0?-Ce.x:Ce.x,C.y+=ve.y<0?-Ce.y:Ce.y,this.panTo(this.unproject(C),d),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=s({animate:!1,pan:!0},o===!0?{animate:!0}:o);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var y=this.getSize(),N=d.divideBy(2).round(),C=y.divideBy(2).round(),M=N.subtract(C);return!M.x&&!M.y?this:(o.animate&&o.pan?this.panBy(M):(o.pan&&this._rawPanBy(M),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:y}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=s({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=l(this._handleGeolocationResponse,this),y=l(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,y,o):navigator.geolocation.getCurrentPosition(d,y,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var d=o.code,y=o.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+y+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var d=o.coords.latitude,y=o.coords.longitude,N=new oe(d,y),C=N.toBounds(o.coords.accuracy*2),M=this._locateOptions;if(M.setView){var G=this.getBoundsZoom(C);this.setView(N,M.maxZoom?Math.min(G,M.maxZoom):G)}var ne={latlng:N,bounds:C,timestamp:o.timestamp};for(var se in o.coords)typeof o.coords[se]=="number"&&(ne[se]=o.coords[se]);this.fire("locationfound",ne)}},addHandler:function(o,d){if(!d)return this;var y=this[o]=new d(this);return this._handlers.push(y),this.options[o]&&y.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)ft(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,d){var y="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),N=Ge("div",y,d||this._mapPane);return o&&(this._panes[o]=N),N},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),d=this.unproject(o.getBottomLeft()),y=this.unproject(o.getTopRight());return new ae(d,y)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,d,y){o=ie(o),y=F(y||[0,0]);var N=this.getZoom()||0,C=this.getMinZoom(),M=this.getMaxZoom(),G=o.getNorthWest(),ne=o.getSouthEast(),se=this.getSize().subtract(y),ve=re(this.project(ne,N),this.project(G,N)).getSize(),Ce=Se.any3d?this.options.zoomSnap:1,Je=se.x/ve.x,mt=se.y/ve.y,Qn=d?Math.max(Je,mt):Math.min(Je,mt);return N=this.getScaleZoom(Qn,N),Ce&&(N=Math.round(N/(Ce/100))*(Ce/100),N=d?Math.ceil(N/Ce)*Ce:Math.floor(N/Ce)*Ce),Math.max(C,Math.min(M,N))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,d){var y=this._getTopLeftPoint(o,d);return new X(y,y.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,d){var y=this.options.crs;return d=d===void 0?this._zoom:d,y.scale(o)/y.scale(d)},getScaleZoom:function(o,d){var y=this.options.crs;d=d===void 0?this._zoom:d;var N=y.zoom(o*y.scale(d));return isNaN(N)?1/0:N},project:function(o,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(ge(o),d)},unproject:function(o,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(F(o),d)},layerPointToLatLng:function(o){var d=F(o).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(o){var d=this.project(ge(o))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ge(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(ie(o))},distance:function(o,d){return this.options.crs.distance(ge(o),ge(d))},containerPointToLayerPoint:function(o){return F(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return F(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var d=this.containerPointToLayerPoint(F(o));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(o)))},mouseEventToContainerPoint:function(o){return z0(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var d=this._container=St(o);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(d,"scroll",this._onScroll,this),this._containerId=u(d)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Se.any3d,He(o,"leaflet-container"+(Se.touch?" leaflet-touch":"")+(Se.retina?" leaflet-retina":"")+(Se.ielt9?" leaflet-oldie":"")+(Se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=ut(o,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pn(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(He(o.markerPane,"leaflet-zoom-hide"),He(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,d,y){pn(this._mapPane,new I(0,0));var N=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var C=this._zoom!==d;this._moveStart(C,y)._move(o,d)._moveEnd(C),this.fire("viewreset"),N&&this.fire("load")},_moveStart:function(o,d){return o&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(o,d,y,N){d===void 0&&(d=this._zoom);var C=this._zoom!==d;return this._zoom=d,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),N?y&&y.pinch&&this.fire("zoom",y):((C||y&&y.pinch)&&this.fire("zoom",y),this.fire("move",y)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){pn(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[u(this._container)]=this;var d=o?zt:it;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Se.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=te(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,d){for(var y=[],N,C=d==="mouseout"||d==="mouseover",M=o.target||o.srcElement,G=!1;M;){if(N=this._targets[u(M)],N&&(d==="click"||d==="preclick")&&this._draggableMoved(N)){G=!0;break}if(N&&N.listens(d,!0)&&(C&&!Ym(M,o)||(y.push(N),C))||M===this._container)break;M=M.parentNode}return!y.length&&!G&&!C&&this.listens(d,!0)&&(y=[this]),y},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var d=o.target||o.srcElement;if(!(!this._loaded||d._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(d))){var y=o.type;y==="mousedown"&&Hm(d),this._fireDOMEvent(o,y)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,d,y){if(o.type==="click"){var N=s({},o);N.type="preclick",this._fireDOMEvent(N,N.type,y)}var C=this._findEventTargets(o,d);if(y){for(var M=[],G=0;G<y.length;G++)y[G].listens(d,!0)&&M.push(y[G]);C=M.concat(C)}if(C.length){d==="contextmenu"&&In(o);var ne=C[0],se={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var ve=ne.getLatLng&&(!ne._radius||ne._radius<=10);se.containerPoint=ve?this.latLngToContainerPoint(ne.getLatLng()):this.mouseEventToContainerPoint(o),se.layerPoint=this.containerPointToLayerPoint(se.containerPoint),se.latlng=ve?ne.getLatLng():this.layerPointToLatLng(se.layerPoint)}for(G=0;G<C.length;G++)if(C[G].fire(d,se,!0),se.originalEvent._stopped||C[G].options.bubblingMouseEvents===!1&&j(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,d=this._handlers.length;o<d;o++)this._handlers[o].disable()},whenReady:function(o,d){return this._loaded?o.call(d||this,{target:this}):this.on("load",o,d),this},_getMapPanePos:function(){return Mo(this._mapPane)||new I(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,d){var y=o&&d!==void 0?this._getNewPixelOrigin(o,d):this.getPixelOrigin();return y.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,d){var y=this.getSize()._divideBy(2);return this.project(o,d)._subtract(y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,d,y){var N=this._getNewPixelOrigin(y,d);return this.project(o,d)._subtract(N)},_latLngBoundsToNewLayerBounds:function(o,d,y){var N=this._getNewPixelOrigin(y,d);return re([this.project(o.getSouthWest(),d)._subtract(N),this.project(o.getNorthWest(),d)._subtract(N),this.project(o.getSouthEast(),d)._subtract(N),this.project(o.getNorthEast(),d)._subtract(N)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,d,y){if(!y)return o;var N=this.project(o,d),C=this.getSize().divideBy(2),M=new X(N.subtract(C),N.add(C)),G=this._getBoundsOffset(M,y,d);return Math.abs(G.x)<=1&&Math.abs(G.y)<=1?o:this.unproject(N.add(G),d)},_limitOffset:function(o,d){if(!d)return o;var y=this.getPixelBounds(),N=new X(y.min.add(o),y.max.add(o));return o.add(this._getBoundsOffset(N,d))},_getBoundsOffset:function(o,d,y){var N=re(this.project(d.getNorthEast(),y),this.project(d.getSouthWest(),y)),C=N.min.subtract(o.min),M=N.max.subtract(o.max),G=this._rebound(C.x,-M.x),ne=this._rebound(C.y,-M.y);return new I(G,ne)},_rebound:function(o,d){return o+d>0?Math.round(o-d)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(d))},_limitZoom:function(o){var d=this.getMinZoom(),y=this.getMaxZoom(),N=Se.any3d?this.options.zoomSnap:1;return N&&(o=Math.round(o/N)*N),Math.max(d,Math.min(y,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,d){var y=this._getCenterOffset(o)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(y)?!1:(this.panBy(y,d),!0)},_createAnimProxy:function(){var o=this._proxy=Ge("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(d){var y=nt,N=this._proxy.style[y];ai(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),N===this._proxy.style[y]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),d=this.getZoom();ai(this._proxy,this.project(o,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,d,y){if(this._animatingZoom)return!0;if(y=y||{},!this._zoomAnimated||y.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var N=this.getZoomScale(d),C=this._getCenterOffset(o)._divideBy(1-1/N);return y.animate!==!0&&!this.getSize().contains(C)?!1:(te(function(){this._moveStart(!0,y.noMoveStart||!1)._animateZoom(o,d,!0)},this),!0)},_animateZoom:function(o,d,y,N){this._mapPane&&(y&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=d,He(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:d,noUpdate:N}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function MP(o,d){return new Nt(o,d)}var is=P.extend({options:{position:"topright"},initialize:function(o){x(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var d=this._map;return d&&d.removeControl(this),this.options.position=o,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var d=this._container=this.onAdd(o),y=this.getPosition(),N=o._controlCorners[y];return He(d,"leaflet-control"),y.indexOf("bottom")!==-1?N.insertBefore(d,N.firstChild):N.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),_c=function(o){return new is(o)};Nt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},d="leaflet-",y=this._controlContainer=Ge("div",d+"control-container",this._container);function N(C,M){var G=d+C+" "+d+M;o[C+M]=Ge("div",G,y)}N("top","left"),N("top","right"),N("bottom","left"),N("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)ft(this._controlCorners[o]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var U0=is.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,d,y,N){return y<N?-1:N<y?1:0}},initialize:function(o,d,y){x(this,y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var N in o)this._addLayer(o[N],N);for(N in d)this._addLayer(d[N],N,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return is.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,d){return this._addLayer(o,d),this._map?this._update():this},addOverlay:function(o,d){return this._addLayer(o,d,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var d=this._getLayer(u(o));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){He(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(He(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",d=this._container=Ge("div",o),y=this.options.collapsed;d.setAttribute("aria-haspopup",!0),wc(d),Km(d);var N=this._section=Ge("section",o+"-list");y&&(this._map.on("click",this.collapse,this),it(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=Ge("a",o+"-toggle",d);C.href="#",C.title="Layers",C.setAttribute("role","button"),it(C,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){In(M),this._expandSafely()}},this),y||this.expand(),this._baseLayersList=Ge("div",o+"-base",N),this._separator=Ge("div",o+"-separator",N),this._overlaysList=Ge("div",o+"-overlays",N),d.appendChild(N)},_getLayer:function(o){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&u(this._layers[d].layer)===o)return this._layers[d]},_addLayer:function(o,d,y){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:d,overlay:y}),this.options.sortLayers&&this._layers.sort(l(function(N,C){return this.options.sortFunction(N.layer,C.layer,N.name,C.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zr(this._baseLayersList),zr(this._overlaysList),this._layerControlInputs=[];var o,d,y,N,C=0;for(y=0;y<this._layers.length;y++)N=this._layers[y],this._addItem(N),d=d||N.overlay,o=o||!N.overlay,C+=N.overlay?0:1;return this.options.hideSingleBase&&(o=o&&C>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=d&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var d=this._getLayer(u(o.target)),y=d.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;y&&this._map.fire(y,d)},_createRadioElement:function(o,d){var y='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(d?' checked="checked"':"")+"/>",N=document.createElement("div");return N.innerHTML=y,N.firstChild},_addItem:function(o){var d=document.createElement("label"),y=this._map.hasLayer(o.layer),N;o.overlay?(N=document.createElement("input"),N.type="checkbox",N.className="leaflet-control-layers-selector",N.defaultChecked=y):N=this._createRadioElement("leaflet-base-layers_"+u(this),y),this._layerControlInputs.push(N),N.layerId=u(o.layer),it(N,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+o.name;var M=document.createElement("span");d.appendChild(M),M.appendChild(N),M.appendChild(C);var G=o.overlay?this._overlaysList:this._baseLayersList;return G.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,d,y,N=[],C=[];this._handlingClick=!0;for(var M=o.length-1;M>=0;M--)d=o[M],y=this._getLayer(d.layerId).layer,d.checked?N.push(y):d.checked||C.push(y);for(M=0;M<C.length;M++)this._map.hasLayer(C[M])&&this._map.removeLayer(C[M]);for(M=0;M<N.length;M++)this._map.hasLayer(N[M])||this._map.addLayer(N[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,d,y,N=this._map.getZoom(),C=o.length-1;C>=0;C--)d=o[C],y=this._getLayer(d.layerId).layer,d.disabled=y.options.minZoom!==void 0&&N<y.options.minZoom||y.options.maxZoom!==void 0&&N>y.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,it(o,"click",In),this.expand();var d=this;setTimeout(function(){zt(o,"click",In),d._preventClick=!1})}}),IP=function(o,d,y){return new U0(o,d,y)},Jm=is.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var d="leaflet-control-zoom",y=Ge("div",d+" leaflet-bar"),N=this.options;return this._zoomInButton=this._createButton(N.zoomInText,N.zoomInTitle,d+"-in",y,this._zoomIn),this._zoomOutButton=this._createButton(N.zoomOutText,N.zoomOutTitle,d+"-out",y,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),y},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,d,y,N,C){var M=Ge("a",y,N);return M.innerHTML=o,M.href="#",M.title=d,M.setAttribute("role","button"),M.setAttribute("aria-label",d),wc(M),it(M,"click",Ro),it(M,"click",C,this),it(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var o=this._map,d="leaflet-disabled";Pt(this._zoomInButton,d),Pt(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(He(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(He(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});Nt.mergeOptions({zoomControl:!0}),Nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Jm,this.addControl(this.zoomControl))});var RP=function(o){return new Jm(o)},W0=is.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var d="leaflet-control-scale",y=Ge("div",d),N=this.options;return this._addScales(N,d+"-line",y),o.on(N.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),y},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,d,y){o.metric&&(this._mScale=Ge("div",d,y)),o.imperial&&(this._iScale=Ge("div",d,y))},_update:function(){var o=this._map,d=o.getSize().y/2,y=o.distance(o.containerPointToLatLng([0,d]),o.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(y)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var d=this._getRoundNum(o),y=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,y,d/o)},_updateImperial:function(o){var d=o*3.2808399,y,N,C;d>5280?(y=d/5280,N=this._getRoundNum(y),this._updateScale(this._iScale,N+" mi",N/y)):(C=this._getRoundNum(d),this._updateScale(this._iScale,C+" ft",C/d))},_updateScale:function(o,d,y){o.style.width=Math.round(this.options.maxWidth*y)+"px",o.innerHTML=d},_getRoundNum:function(o){var d=Math.pow(10,(Math.floor(o)+"").length-1),y=o/d;return y=y>=10?10:y>=5?5:y>=3?3:y>=2?2:1,d*y}}),LP=function(o){return new W0(o)},AP='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Xm=is.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Se.inlineSvg?AP+" ":"")+"Leaflet</a>"},initialize:function(o){x(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Ge("div","leaflet-control-attribution"),wc(this._container);for(var d in o._layers)o._layers[d].getAttribution&&this.addAttribution(o._layers[d].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var d in this._attributions)this._attributions[d]&&o.push(d);var y=[];this.options.prefix&&y.push(this.options.prefix),o.length&&y.push(o.join(", ")),this._container.innerHTML=y.join(' <span aria-hidden="true">|</span> ')}}});Nt.mergeOptions({attributionControl:!0}),Nt.addInitHook(function(){this.options.attributionControl&&new Xm().addTo(this)});var OP=function(o){return new Xm(o)};is.Layers=U0,is.Zoom=Jm,is.Scale=W0,is.Attribution=Xm,_c.layers=IP,_c.zoom=RP,_c.scale=LP,_c.attribution=OP;var Is=P.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Is.addTo=function(o,d){return o.addHandler(d,this),this};var DP={Events:$},H0=Se.touch?"touchstart mousedown":"mousedown",Ii=U.extend({options:{clickTolerance:3},initialize:function(o,d,y,N){x(this,N),this._element=o,this._dragStartTarget=d||o,this._preventOutline=y},enable:function(){this._enabled||(it(this._dragStartTarget,H0,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ii._dragging===this&&this.finishDrag(!0),zt(this._dragStartTarget,H0,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Ia(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Ii._dragging===this&&this.finishDrag();return}if(!(Ii._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Ii._dragging=this,this._preventOutline&&Hm(this._element),Fm(),vc(),!this._moving)){this.fire("down");var d=o.touches?o.touches[0]:o,y=O0(this._element);this._startPoint=new I(d.clientX,d.clientY),this._startPos=Mo(this._element),this._parentScale=Vm(y);var N=o.type==="mousedown";it(document,N?"mousemove":"touchmove",this._onMove,this),it(document,N?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var d=o.touches&&o.touches.length===1?o.touches[0]:o,y=new I(d.clientX,d.clientY)._subtract(this._startPoint);!y.x&&!y.y||Math.abs(y.x)+Math.abs(y.y)<this.options.clickTolerance||(y.x/=this._parentScale.x,y.y/=this._parentScale.y,In(o),this._moved||(this.fire("dragstart"),this._moved=!0,He(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),He(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(y),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),pn(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Pt(document.body,"leaflet-dragging"),this._lastTarget&&(Pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),zt(document,"mousemove touchmove",this._onMove,this),zt(document,"mouseup touchend touchcancel",this._onUp,this),Um(),yc();var d=this._moved&&this._moving;this._moving=!1,Ii._dragging=!1,d&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function V0(o,d,y){var N,C=[1,4,2,8],M,G,ne,se,ve,Ce,Je,mt;for(M=0,Ce=o.length;M<Ce;M++)o[M]._code=Lo(o[M],d);for(ne=0;ne<4;ne++){for(Je=C[ne],N=[],M=0,Ce=o.length,G=Ce-1;M<Ce;G=M++)se=o[M],ve=o[G],se._code&Je?ve._code&Je||(mt=wd(ve,se,Je,d,y),mt._code=Lo(mt,d),N.push(mt)):(ve._code&Je&&(mt=wd(ve,se,Je,d,y),mt._code=Lo(mt,d),N.push(mt)),N.push(se));o=N}return o}function G0(o,d){var y,N,C,M,G,ne,se,ve,Ce;if(!o||o.length===0)throw new Error("latlngs not passed");Br(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Je=ge([0,0]),mt=ie(o),Qn=mt.getNorthWest().distanceTo(mt.getSouthWest())*mt.getNorthEast().distanceTo(mt.getNorthWest());Qn<1700&&(Je=Qm(o));var Tn=o.length,Fr=[];for(y=0;y<Tn;y++){var cr=ge(o[y]);Fr.push(d.project(ge([cr.lat-Je.lat,cr.lng-Je.lng])))}for(ne=se=ve=0,y=0,N=Tn-1;y<Tn;N=y++)C=Fr[y],M=Fr[N],G=C.y*M.x-M.y*C.x,se+=(C.x+M.x)*G,ve+=(C.y+M.y)*G,ne+=G*3;ne===0?Ce=Fr[0]:Ce=[se/ne,ve/ne];var $a=d.unproject(F(Ce));return ge([$a.lat+Je.lat,$a.lng+Je.lng])}function Qm(o){for(var d=0,y=0,N=0,C=0;C<o.length;C++){var M=ge(o[C]);d+=M.lat,y+=M.lng,N++}return ge([d/N,y/N])}var $P={__proto__:null,clipPolygon:V0,polygonCenter:G0,centroid:Qm};function Z0(o,d){if(!d||!o.length)return o.slice();var y=d*d;return o=FP(o,y),o=BP(o,y),o}function q0(o,d,y){return Math.sqrt(bc(o,d,y,!0))}function zP(o,d,y){return bc(o,d,y)}function BP(o,d){var y=o.length,N=typeof Uint8Array<"u"?Uint8Array:Array,C=new N(y);C[0]=C[y-1]=1,ep(o,C,d,0,y-1);var M,G=[];for(M=0;M<y;M++)C[M]&&G.push(o[M]);return G}function ep(o,d,y,N,C){var M=0,G,ne,se;for(ne=N+1;ne<=C-1;ne++)se=bc(o[ne],o[N],o[C],!0),se>M&&(G=ne,M=se);M>y&&(d[G]=1,ep(o,d,y,N,G),ep(o,d,y,G,C))}function FP(o,d){for(var y=[o[0]],N=1,C=0,M=o.length;N<M;N++)UP(o[N],o[C])>d&&(y.push(o[N]),C=N);return C<M-1&&y.push(o[M-1]),y}var K0;function Y0(o,d,y,N,C){var M=N?K0:Lo(o,y),G=Lo(d,y),ne,se,ve;for(K0=G;;){if(!(M|G))return[o,d];if(M&G)return!1;ne=M||G,se=wd(o,d,ne,y,C),ve=Lo(se,y),ne===M?(o=se,M=ve):(d=se,G=ve)}}function wd(o,d,y,N,C){var M=d.x-o.x,G=d.y-o.y,ne=N.min,se=N.max,ve,Ce;return y&8?(ve=o.x+M*(se.y-o.y)/G,Ce=se.y):y&4?(ve=o.x+M*(ne.y-o.y)/G,Ce=ne.y):y&2?(ve=se.x,Ce=o.y+G*(se.x-o.x)/M):y&1&&(ve=ne.x,Ce=o.y+G*(ne.x-o.x)/M),new I(ve,Ce,C)}function Lo(o,d){var y=0;return o.x<d.min.x?y|=1:o.x>d.max.x&&(y|=2),o.y<d.min.y?y|=4:o.y>d.max.y&&(y|=8),y}function UP(o,d){var y=d.x-o.x,N=d.y-o.y;return y*y+N*N}function bc(o,d,y,N){var C=d.x,M=d.y,G=y.x-C,ne=y.y-M,se=G*G+ne*ne,ve;return se>0&&(ve=((o.x-C)*G+(o.y-M)*ne)/se,ve>1?(C=y.x,M=y.y):ve>0&&(C+=G*ve,M+=ne*ve)),G=o.x-C,ne=o.y-M,N?G*G+ne*ne:new I(C,M)}function Br(o){return!k(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function J0(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Br(o)}function X0(o,d){var y,N,C,M,G,ne,se,ve;if(!o||o.length===0)throw new Error("latlngs not passed");Br(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ce=ge([0,0]),Je=ie(o),mt=Je.getNorthWest().distanceTo(Je.getSouthWest())*Je.getNorthEast().distanceTo(Je.getNorthWest());mt<1700&&(Ce=Qm(o));var Qn=o.length,Tn=[];for(y=0;y<Qn;y++){var Fr=ge(o[y]);Tn.push(d.project(ge([Fr.lat-Ce.lat,Fr.lng-Ce.lng])))}for(y=0,N=0;y<Qn-1;y++)N+=Tn[y].distanceTo(Tn[y+1])/2;if(N===0)ve=Tn[0];else for(y=0,M=0;y<Qn-1;y++)if(G=Tn[y],ne=Tn[y+1],C=G.distanceTo(ne),M+=C,M>N){se=(M-N)/C,ve=[ne.x-se*(ne.x-G.x),ne.y-se*(ne.y-G.y)];break}var cr=d.unproject(F(ve));return ge([cr.lat+Ce.lat,cr.lng+Ce.lng])}var WP={__proto__:null,simplify:Z0,pointToSegmentDistance:q0,closestPointOnSegment:zP,clipSegment:Y0,_getEdgeIntersection:wd,_getBitCode:Lo,_sqClosestPointOnSegment:bc,isFlat:Br,_flat:J0,polylineCenter:X0},tp={project:function(o){return new I(o.lng,o.lat)},unproject:function(o){return new oe(o.y,o.x)},bounds:new X([-180,-90],[180,90])},np={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var d=Math.PI/180,y=this.R,N=o.lat*d,C=this.R_MINOR/y,M=Math.sqrt(1-C*C),G=M*Math.sin(N),ne=Math.tan(Math.PI/4-N/2)/Math.pow((1-G)/(1+G),M/2);return N=-y*Math.log(Math.max(ne,1e-10)),new I(o.lng*d*y,N)},unproject:function(o){for(var d=180/Math.PI,y=this.R,N=this.R_MINOR/y,C=Math.sqrt(1-N*N),M=Math.exp(-o.y/y),G=Math.PI/2-2*Math.atan(M),ne=0,se=.1,ve;ne<15&&Math.abs(se)>1e-7;ne++)ve=C*Math.sin(G),ve=Math.pow((1-ve)/(1+ve),C/2),se=Math.PI/2-2*Math.atan(M*ve)-G,G+=se;return new oe(G*d,o.x*d/y)}},HP={__proto__:null,LonLat:tp,Mercator:np,SphericalMercator:Pe},VP=s({},ke,{code:"EPSG:3395",projection:np,transformation:function(){var o=.5/(Math.PI*np.R);return We(o,.5,-o,.5)}()}),Q0=s({},ke,{code:"EPSG:4326",projection:tp,transformation:We(1/180,1,-1/180,.5)}),GP=s({},ce,{projection:tp,transformation:We(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,d){var y=d.lng-o.lng,N=d.lat-o.lat;return Math.sqrt(y*y+N*N)},infinite:!0});ce.Earth=ke,ce.EPSG3395=VP,ce.EPSG3857=wt,ce.EPSG900913=kt,ce.EPSG4326=Q0,ce.Simple=GP;var os=U.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[u(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[u(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var d=o.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var y=this.getEvents();d.on(y,this),this.once("remove",function(){d.off(y,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});Nt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var d=u(o);return this._layers[d]?this:(this._layers[d]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var d=u(o);return this._layers[d]?(this._loaded&&o.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return u(o)in this._layers},eachLayer:function(o,d){for(var y in this._layers)o.call(d,this._layers[y]);return this},_addLayers:function(o){o=o?k(o)?o:[o]:[];for(var d=0,y=o.length;d<y;d++)this.addLayer(o[d])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[u(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var d=u(o);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,d=-1/0,y=this._getZoomSpan();for(var N in this._zoomBoundLayers){var C=this._zoomBoundLayers[N].options;o=C.minZoom===void 0?o:Math.min(o,C.minZoom),d=C.maxZoom===void 0?d:Math.max(d,C.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=o===1/0?void 0:o,y!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ra=os.extend({initialize:function(o,d){x(this,d),this._layers={};var y,N;if(o)for(y=0,N=o.length;y<N;y++)this.addLayer(o[y])},addLayer:function(o){var d=this.getLayerId(o);return this._layers[d]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var d=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(o){var d=typeof o=="number"?o:this.getLayerId(o);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var d=Array.prototype.slice.call(arguments,1),y,N;for(y in this._layers)N=this._layers[y],N[o]&&N[o].apply(N,d);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,d){for(var y in this._layers)o.call(d,this._layers[y]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return u(o)}}),ZP=function(o,d){return new Ra(o,d)},li=Ra.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Ra.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Ra.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ae;for(var d in this._layers){var y=this._layers[d];o.extend(y.getBounds?y.getBounds():y.getLatLng())}return o}}),qP=function(o,d){return new li(o,d)},La=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){x(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,d){var y=this._getIconUrl(o);if(!y){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var N=this._createImg(y,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(N,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(N.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),N},_setIconStyles:function(o,d){var y=this.options,N=y[d+"Size"];typeof N=="number"&&(N=[N,N]);var C=F(N),M=F(d==="shadow"&&y.shadowAnchor||y.iconAnchor||C&&C.divideBy(2,!0));o.className="leaflet-marker-"+d+" "+(y.className||""),M&&(o.style.marginLeft=-M.x+"px",o.style.marginTop=-M.y+"px"),C&&(o.style.width=C.x+"px",o.style.height=C.y+"px")},_createImg:function(o,d){return d=d||document.createElement("img"),d.src=o,d},_getIconUrl:function(o){return Se.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function KP(o){return new La(o)}var Sc=La.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Sc.imagePath!="string"&&(Sc.imagePath=this._detectIconPath()),(this.options.imagePath||Sc.imagePath)+La.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var d=function(y,N,C){var M=N.exec(y);return M&&M[C]};return o=d(o,/^url\((['"])?(.+)\1\)$/,2),o&&d(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Ge("div","leaflet-default-icon-path",document.body),d=ut(o,"background-image")||ut(o,"backgroundImage");if(document.body.removeChild(o),d=this._stripUrl(d),d)return d;var y=document.querySelector('link[href$="leaflet.css"]');return y?y.href.substring(0,y.href.length-11-1):""}}),ew=Is.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Ii(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),He(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var d=this._marker,y=d._map,N=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,M=Mo(d._icon),G=y.getPixelBounds(),ne=y.getPixelOrigin(),se=re(G.min._subtract(ne).add(C),G.max._subtract(ne).subtract(C));if(!se.contains(M)){var ve=F((Math.max(se.max.x,M.x)-se.max.x)/(G.max.x-se.max.x)-(Math.min(se.min.x,M.x)-se.min.x)/(G.min.x-se.min.x),(Math.max(se.max.y,M.y)-se.max.y)/(G.max.y-se.max.y)-(Math.min(se.min.y,M.y)-se.min.y)/(G.min.y-se.min.y)).multiplyBy(N);y.panBy(ve,{animate:!1}),this._draggable._newPos._add(ve),this._draggable._startPos._add(ve),pn(d._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=te(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=te(this._adjustPan.bind(this,o)))},_onDrag:function(o){var d=this._marker,y=d._shadow,N=Mo(d._icon),C=d._map.layerPointToLatLng(N);y&&pn(y,N),d._latlng=C,o.latlng=C,o.oldLatLng=this._oldLatLng,d.fire("move",o).fire("drag",o)},_onDragEnd:function(o){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),_d=os.extend({options:{icon:new Sc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,d){x(this,d),this._latlng=ge(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var d=this._latlng;return this._latlng=ge(o),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),y=o.icon.createIcon(this._icon),N=!1;y!==this._icon&&(this._icon&&this._removeIcon(),N=!0,o.title&&(y.title=o.title),y.tagName==="IMG"&&(y.alt=o.alt||"")),He(y,d),o.keyboard&&(y.tabIndex="0",y.setAttribute("role","button")),this._icon=y,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(y,"focus",this._panOnFocus,this);var C=o.icon.createShadow(this._shadow),M=!1;C!==this._shadow&&(this._removeShadow(),M=!0),C&&(He(C,d),C.alt=""),this._shadow=C,o.opacity<1&&this._updateOpacity(),N&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&M&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&pn(this._icon,o),this._shadow&&pn(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var d=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(He(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ew)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ew(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&on(this._icon,o),this._shadow&&on(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var d=this.options.icon.options,y=d.iconSize?F(d.iconSize):F(0,0),N=d.iconAnchor?F(d.iconAnchor):F(0,0);o.panInside(this._latlng,{paddingTopLeft:N,paddingBottomRight:y.subtract(N)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function YP(o,d){return new _d(o,d)}var Ri=os.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return x(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),bd=Ri.extend({options:{fill:!0,radius:10},initialize:function(o,d){x(this,d),this._latlng=ge(o),this._radius=this.options.radius},setLatLng:function(o){var d=this._latlng;return this._latlng=ge(o),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var d=o&&o.radius||this._radius;return Ri.prototype.setStyle.call(this,o),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,d=this._radiusY||o,y=this._clickTolerance(),N=[o+y,d+y];this._pxBounds=new X(this._point.subtract(N),this._point.add(N))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function JP(o,d){return new bd(o,d)}var rp=bd.extend({initialize:function(o,d,y){if(typeof d=="number"&&(d=s({},y,{radius:d})),x(this,d),this._latlng=ge(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ae(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Ri.prototype.setStyle,_project:function(){var o=this._latlng.lng,d=this._latlng.lat,y=this._map,N=y.options.crs;if(N.distance===ke.distance){var C=Math.PI/180,M=this._mRadius/ke.R/C,G=y.project([d+M,o]),ne=y.project([d-M,o]),se=G.add(ne).divideBy(2),ve=y.unproject(se).lat,Ce=Math.acos((Math.cos(M*C)-Math.sin(d*C)*Math.sin(ve*C))/(Math.cos(d*C)*Math.cos(ve*C)))/C;(isNaN(Ce)||Ce===0)&&(Ce=M/Math.cos(Math.PI/180*d)),this._point=se.subtract(y.getPixelOrigin()),this._radius=isNaN(Ce)?0:se.x-y.project([ve,o-Ce]).x,this._radiusY=se.y-G.y}else{var Je=N.unproject(N.project(this._latlng).subtract([this._mRadius,0]));this._point=y.latLngToLayerPoint(this._latlng),this._radius=this._point.x-y.latLngToLayerPoint(Je).x}this._updateBounds()}});function XP(o,d,y){return new rp(o,d,y)}var ci=Ri.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,d){x(this,d),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var d=1/0,y=null,N=bc,C,M,G=0,ne=this._parts.length;G<ne;G++)for(var se=this._parts[G],ve=1,Ce=se.length;ve<Ce;ve++){C=se[ve-1],M=se[ve];var Je=N(o,C,M,!0);Je<d&&(d=Je,y=N(o,C,M))}return y&&(y.distance=Math.sqrt(d)),y},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return X0(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,d){return d=d||this._defaultShape(),o=ge(o),d.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ae,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Br(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var d=[],y=Br(o),N=0,C=o.length;N<C;N++)y?(d[N]=ge(o[N]),this._bounds.extend(d[N])):d[N]=this._convertLatLngs(o[N]);return d},_project:function(){var o=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),d=new I(o,o);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(o,d,y){var N=o[0]instanceof oe,C=o.length,M,G;if(N){for(G=[],M=0;M<C;M++)G[M]=this._map.latLngToLayerPoint(o[M]),y.extend(G[M]);d.push(G)}else for(M=0;M<C;M++)this._projectLatlngs(o[M],d,y)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,y,N,C,M,G,ne,se;for(y=0,C=0,M=this._rings.length;y<M;y++)for(se=this._rings[y],N=0,G=se.length;N<G-1;N++)ne=Y0(se[N],se[N+1],o,N,!0),ne&&(d[C]=d[C]||[],d[C].push(ne[0]),(ne[1]!==se[N+1]||N===G-2)&&(d[C].push(ne[1]),C++))}},_simplifyPoints:function(){for(var o=this._parts,d=this.options.smoothFactor,y=0,N=o.length;y<N;y++)o[y]=Z0(o[y],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,d){var y,N,C,M,G,ne,se=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(y=0,M=this._parts.length;y<M;y++)for(ne=this._parts[y],N=0,G=ne.length,C=G-1;N<G;C=N++)if(!(!d&&N===0)&&q0(o,ne[C],ne[N])<=se)return!0;return!1}});function QP(o,d){return new ci(o,d)}ci._flat=J0;var Aa=ci.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return G0(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var d=ci.prototype._convertLatLngs.call(this,o),y=d.length;return y>=2&&d[0]instanceof oe&&d[0].equals(d[y-1])&&d.pop(),d},_setLatLngs:function(o){ci.prototype._setLatLngs.call(this,o),Br(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Br(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,d=this.options.weight,y=new I(d,d);if(o=new X(o.min.subtract(y),o.max.add(y)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var N=0,C=this._rings.length,M;N<C;N++)M=V0(this._rings[N],o,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var d=!1,y,N,C,M,G,ne,se,ve;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(M=0,se=this._parts.length;M<se;M++)for(y=this._parts[M],G=0,ve=y.length,ne=ve-1;G<ve;ne=G++)N=y[G],C=y[ne],N.y>o.y!=C.y>o.y&&o.x<(C.x-N.x)*(o.y-N.y)/(C.y-N.y)+N.x&&(d=!d);return d||ci.prototype._containsPoint.call(this,o,!0)}});function eM(o,d){return new Aa(o,d)}var ui=li.extend({initialize:function(o,d){x(this,d),this._layers={},o&&this.addData(o)},addData:function(o){var d=k(o)?o:o.features,y,N,C;if(d){for(y=0,N=d.length;y<N;y++)C=d[y],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var M=this.options;if(M.filter&&!M.filter(o))return this;var G=Sd(o,M);return G?(G.feature=Cd(o),G.defaultOptions=G.options,this.resetStyle(G),M.onEachFeature&&M.onEachFeature(o,G),this.addLayer(G)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=s({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(d){this._setLayerStyle(d,o)},this)},_setLayerStyle:function(o,d){o.setStyle&&(typeof d=="function"&&(d=d(o.feature)),o.setStyle(d))}});function Sd(o,d){var y=o.type==="Feature"?o.geometry:o,N=y?y.coordinates:null,C=[],M=d&&d.pointToLayer,G=d&&d.coordsToLatLng||sp,ne,se,ve,Ce;if(!N&&!y)return null;switch(y.type){case"Point":return ne=G(N),tw(M,o,ne,d);case"MultiPoint":for(ve=0,Ce=N.length;ve<Ce;ve++)ne=G(N[ve]),C.push(tw(M,o,ne,d));return new li(C);case"LineString":case"MultiLineString":return se=Nd(N,y.type==="LineString"?0:1,G),new ci(se,d);case"Polygon":case"MultiPolygon":return se=Nd(N,y.type==="Polygon"?1:2,G),new Aa(se,d);case"GeometryCollection":for(ve=0,Ce=y.geometries.length;ve<Ce;ve++){var Je=Sd({geometry:y.geometries[ve],type:"Feature",properties:o.properties},d);Je&&C.push(Je)}return new li(C);case"FeatureCollection":for(ve=0,Ce=y.features.length;ve<Ce;ve++){var mt=Sd(y.features[ve],d);mt&&C.push(mt)}return new li(C);default:throw new Error("Invalid GeoJSON object.")}}function tw(o,d,y,N){return o?o(d,y):new _d(y,N&&N.markersInheritOptions&&N)}function sp(o){return new oe(o[1],o[0],o[2])}function Nd(o,d,y){for(var N=[],C=0,M=o.length,G;C<M;C++)G=d?Nd(o[C],d-1,y):(y||sp)(o[C]),N.push(G);return N}function ip(o,d){return o=ge(o),o.alt!==void 0?[g(o.lng,d),g(o.lat,d),g(o.alt,d)]:[g(o.lng,d),g(o.lat,d)]}function kd(o,d,y,N){for(var C=[],M=0,G=o.length;M<G;M++)C.push(d?kd(o[M],Br(o[M])?0:d-1,y,N):ip(o[M],N));return!d&&y&&C.length>0&&C.push(C[0].slice()),C}function Oa(o,d){return o.feature?s({},o.feature,{geometry:d}):Cd(d)}function Cd(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var op={toGeoJSON:function(o){return Oa(this,{type:"Point",coordinates:ip(this.getLatLng(),o)})}};_d.include(op),rp.include(op),bd.include(op),ci.include({toGeoJSON:function(o){var d=!Br(this._latlngs),y=kd(this._latlngs,d?1:0,!1,o);return Oa(this,{type:(d?"Multi":"")+"LineString",coordinates:y})}}),Aa.include({toGeoJSON:function(o){var d=!Br(this._latlngs),y=d&&!Br(this._latlngs[0]),N=kd(this._latlngs,y?2:d?1:0,!0,o);return d||(N=[N]),Oa(this,{type:(y?"Multi":"")+"Polygon",coordinates:N})}}),Ra.include({toMultiPoint:function(o){var d=[];return this.eachLayer(function(y){d.push(y.toGeoJSON(o).geometry.coordinates)}),Oa(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(o){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(o);var y=d==="GeometryCollection",N=[];return this.eachLayer(function(C){if(C.toGeoJSON){var M=C.toGeoJSON(o);if(y)N.push(M.geometry);else{var G=Cd(M);G.type==="FeatureCollection"?N.push.apply(N,G.features):N.push(G)}}}),y?Oa(this,{geometries:N,type:"GeometryCollection"}):{type:"FeatureCollection",features:N}}});function nw(o,d){return new ui(o,d)}var tM=nw,jd=os.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,d,y){this._url=o,this._bounds=ie(d),x(this,y)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(He(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&rs(this._image),this},bringToBack:function(){return this._map&&ss(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=ie(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",d=this._image=o?this._url:Ge("img");if(He(d,"leaflet-image-layer"),this._zoomAnimated&&He(d,"leaflet-zoom-animated"),this.options.className&&He(d,this.options.className),d.onselectstart=f,d.onmousemove=f,d.onload=l(this.fire,this,"load"),d.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(o){var d=this._map.getZoomScale(o.zoom),y=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;ai(this._image,y,d)},_reset:function(){var o=this._image,d=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),y=d.getSize();pn(o,d.min),o.style.width=y.x+"px",o.style.height=y.y+"px"},_updateOpacity:function(){on(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),nM=function(o,d,y){return new jd(o,d,y)},rw=jd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",d=this._image=o?this._url:Ge("video");if(He(d,"leaflet-image-layer"),this._zoomAnimated&&He(d,"leaflet-zoom-animated"),this.options.className&&He(d,this.options.className),d.onselectstart=f,d.onmousemove=f,d.onloadeddata=l(this.fire,this,"load"),o){for(var y=d.getElementsByTagName("source"),N=[],C=0;C<y.length;C++)N.push(y[C].src);this._url=y.length>0?N:[d.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var G=Ge("source");G.src=this._url[M],d.appendChild(G)}}});function rM(o,d,y){return new rw(o,d,y)}var sw=jd.extend({_initImage:function(){var o=this._image=this._url;He(o,"leaflet-image-layer"),this._zoomAnimated&&He(o,"leaflet-zoom-animated"),this.options.className&&He(o,this.options.className),o.onselectstart=f,o.onmousemove=f}});function sM(o,d,y){return new sw(o,d,y)}var Rs=os.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,d){o&&(o instanceof oe||k(o))?(this._latlng=ge(o),x(this,d)):(x(this,o),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&on(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&on(this._container,1),this.bringToFront(),this.options.interactive&&(He(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(on(this._container,0),this._removeTimeout=setTimeout(l(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(Pt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ge(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rs(this._container),this},bringToBack:function(){return this._map&&ss(this._container),this},_prepareOpen:function(o){var d=this._source;if(!d._map)return!1;if(d instanceof li){d=null;var y=this._source._layers;for(var N in y)if(y[N]._map){d=y[N];break}if(!d)return!1;this._source=d}if(!o)if(d.getCenter)o=d.getCenter();else if(d.getLatLng)o=d.getLatLng();else if(d.getBounds)o=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")o.innerHTML=d;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),d=F(this.options.offset),y=this._getAnchor();this._zoomAnimated?pn(this._container,o.add(y)):d=d.add(o).add(y);var N=this._containerBottom=-d.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=N+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});Nt.include({_initOverlay:function(o,d,y,N){var C=d;return C instanceof o||(C=new o(N).setContent(d)),y&&C.setLatLng(y),C}}),os.include({_initOverlay:function(o,d,y,N){var C=y;return C instanceof o?(x(C,N),C._source=this):(C=d&&!N?d:new o(N,this),C.setContent(y)),C}});var Ed=Rs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Rs.prototype.openOn.call(this,o)},onAdd:function(o){Rs.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ri||this._source.on("preclick",Io))},onRemove:function(o){Rs.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ri||this._source.off("preclick",Io))},getEvents:function(){var o=Rs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",d=this._container=Ge("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),y=this._wrapper=Ge("div",o+"-content-wrapper",d);if(this._contentNode=Ge("div",o+"-content",y),wc(d),Km(this._contentNode),it(d,"contextmenu",Io),this._tipContainer=Ge("div",o+"-tip-container",d),this._tip=Ge("div",o+"-tip",this._tipContainer),this.options.closeButton){var N=this._closeButton=Ge("a",o+"-close-button",d);N.setAttribute("role","button"),N.setAttribute("aria-label","Close popup"),N.href="#close",N.innerHTML='<span aria-hidden="true">&#215;</span>',it(N,"click",function(C){In(C),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,d=o.style;d.width="",d.whiteSpace="nowrap";var y=o.offsetWidth;y=Math.min(y,this.options.maxWidth),y=Math.max(y,this.options.minWidth),d.width=y+1+"px",d.whiteSpace="",d.height="";var N=o.offsetHeight,C=this.options.maxHeight,M="leaflet-popup-scrolled";C&&N>C?(d.height=C+"px",He(o,M)):Pt(o,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var d=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),y=this._getAnchor();pn(this._container,d.add(y))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,d=parseInt(ut(this._container,"marginBottom"),10)||0,y=this._container.offsetHeight+d,N=this._containerWidth,C=new I(this._containerLeft,-y-this._containerBottom);C._add(Mo(this._container));var M=o.layerPointToContainerPoint(C),G=F(this.options.autoPanPadding),ne=F(this.options.autoPanPaddingTopLeft||G),se=F(this.options.autoPanPaddingBottomRight||G),ve=o.getSize(),Ce=0,Je=0;M.x+N+se.x>ve.x&&(Ce=M.x+N-ve.x+se.x),M.x-Ce-ne.x<0&&(Ce=M.x-ne.x),M.y+y+se.y>ve.y&&(Je=M.y+y-ve.y+se.y),M.y-Je-ne.y<0&&(Je=M.y-ne.y),(Ce||Je)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Ce,Je]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),iM=function(o,d){return new Ed(o,d)};Nt.mergeOptions({closePopupOnClick:!0}),Nt.include({openPopup:function(o,d,y){return this._initOverlay(Ed,o,d,y).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),os.include({bindPopup:function(o,d){return this._popup=this._initOverlay(Ed,this._popup,o,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof li||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Ro(o);var d=o.layer||o.target;if(this._popup._source===d&&!(d instanceof Ri)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=d,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Td=Rs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Rs.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Rs.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Rs.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",d=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ge("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var d,y,N=this._map,C=this._container,M=N.latLngToContainerPoint(N.getCenter()),G=N.layerPointToContainerPoint(o),ne=this.options.direction,se=C.offsetWidth,ve=C.offsetHeight,Ce=F(this.options.offset),Je=this._getAnchor();ne==="top"?(d=se/2,y=ve):ne==="bottom"?(d=se/2,y=0):ne==="center"?(d=se/2,y=ve/2):ne==="right"?(d=0,y=ve/2):ne==="left"?(d=se,y=ve/2):G.x<M.x?(ne="right",d=0,y=ve/2):(ne="left",d=se+(Ce.x+Je.x)*2,y=ve/2),o=o.subtract(F(d,y,!0)).add(Ce).add(Je),Pt(C,"leaflet-tooltip-right"),Pt(C,"leaflet-tooltip-left"),Pt(C,"leaflet-tooltip-top"),Pt(C,"leaflet-tooltip-bottom"),He(C,"leaflet-tooltip-"+ne),pn(C,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&on(this._container,o)},_animateZoom:function(o){var d=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(d)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),oM=function(o,d){return new Td(o,d)};Nt.include({openTooltip:function(o,d,y){return this._initOverlay(Td,o,d,y).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),os.include({bindTooltip:function(o,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Td,this._tooltip,o,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var d=o?"off":"on",y={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?y.add=this._openTooltip:(y.mouseover=this._openTooltip,y.mouseout=this.closeTooltip,y.click=this._openTooltip,this._map?this._addFocusListeners():y.add=this._addFocusListeners),this._tooltip.options.sticky&&(y.mousemove=this._moveTooltip),this[d](y),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof li||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var d=typeof o.getElement=="function"&&o.getElement();d&&(it(d,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),it(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var d=typeof o.getElement=="function"&&o.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var d=o.latlng,y,N;this._tooltip.options.sticky&&o.originalEvent&&(y=this._map.mouseEventToContainerPoint(o.originalEvent),N=this._map.containerPointToLayerPoint(y),d=this._map.layerPointToLatLng(N)),this._tooltip.setLatLng(d)}});var iw=La.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var d=o&&o.tagName==="DIV"?o:document.createElement("div"),y=this.options;if(y.html instanceof Element?(zr(d),d.appendChild(y.html)):d.innerHTML=y.html!==!1?y.html:"",y.bgPos){var N=F(y.bgPos);d.style.backgroundPosition=-N.x+"px "+-N.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function aM(o){return new iw(o)}La.Default=Sc;var Nc=os.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){x(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),ft(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ss(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof I?o:new I(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var d=this.getPane().children,y=-o(-1/0,1/0),N=0,C=d.length,M;N<C;N++)M=d[N].style.zIndex,d[N]!==this._container&&M&&(y=o(y,+M));isFinite(y)&&(this.options.zIndex=y+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Se.ielt9){on(this._container,this.options.opacity);var o=+new Date,d=!1,y=!1;for(var N in this._tiles){var C=this._tiles[N];if(!(!C.current||!C.loaded)){var M=Math.min(1,(o-C.loaded)/200);on(C.el,M),M<1?d=!0:(C.active?y=!0:this._onOpaqueTile(C),C.active=!0)}}y&&!this._noPrune&&this._pruneTiles(),d&&(A(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Ge("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,d=this.options.maxZoom;if(o!==void 0){for(var y in this._levels)y=Number(y),this._levels[y].el.children.length||y===o?(this._levels[y].el.style.zIndex=d-Math.abs(o-y),this._onUpdateLevel(y)):(ft(this._levels[y].el),this._removeTilesAtZoom(y),this._onRemoveLevel(y),delete this._levels[y]);var N=this._levels[o],C=this._map;return N||(N=this._levels[o]={},N.el=Ge("div","leaflet-tile-container leaflet-zoom-animated",this._container),N.el.style.zIndex=d,N.origin=C.project(C.unproject(C.getPixelOrigin()),o).round(),N.zoom=o,this._setZoomTransform(N,C.getCenter(),C.getZoom()),f(N.el.offsetWidth),this._onCreateLevel(N)),this._level=N,N}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var o,d,y=this._map.getZoom();if(y>this.options.maxZoom||y<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)d=this._tiles[o],d.retain=d.current;for(o in this._tiles)if(d=this._tiles[o],d.current&&!d.active){var N=d.coords;this._retainParent(N.x,N.y,N.z,N.z-5)||this._retainChildren(N.x,N.y,N.z,N.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var d in this._tiles)this._tiles[d].coords.z===o&&this._removeTile(d)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)ft(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,d,y,N){var C=Math.floor(o/2),M=Math.floor(d/2),G=y-1,ne=new I(+C,+M);ne.z=+G;var se=this._tileCoordsToKey(ne),ve=this._tiles[se];return ve&&ve.active?(ve.retain=!0,!0):(ve&&ve.loaded&&(ve.retain=!0),G>N?this._retainParent(C,M,G,N):!1)},_retainChildren:function(o,d,y,N){for(var C=2*o;C<2*o+2;C++)for(var M=2*d;M<2*d+2;M++){var G=new I(C,M);G.z=y+1;var ne=this._tileCoordsToKey(G),se=this._tiles[ne];if(se&&se.active){se.retain=!0;continue}else se&&se.loaded&&(se.retain=!0);y+1<N&&this._retainChildren(C,M,y+1,N)}},_resetView:function(o){var d=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var d=this.options;return d.minNativeZoom!==void 0&&o<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<o?d.maxNativeZoom:o},_setView:function(o,d,y,N){var C=Math.round(d);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var M=this.options.updateWhenZooming&&C!==this._tileZoom;(!N||M)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(o),y||this._pruneTiles(),this._noPrune=!!y),this._setZoomTransforms(o,d)},_setZoomTransforms:function(o,d){for(var y in this._levels)this._setZoomTransform(this._levels[y],o,d)},_setZoomTransform:function(o,d,y){var N=this._map.getZoomScale(y,o.zoom),C=o.origin.multiplyBy(N).subtract(this._map._getNewPixelOrigin(d,y)).round();Se.any3d?ai(o.el,C,N):pn(o.el,C)},_resetGrid:function(){var o=this._map,d=o.options.crs,y=this._tileSize=this.getTileSize(),N=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,d.wrapLng[0]],N).x/y.x),Math.ceil(o.project([0,d.wrapLng[1]],N).x/y.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([d.wrapLat[0],0],N).y/y.x),Math.ceil(o.project([d.wrapLat[1],0],N).y/y.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var d=this._map,y=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),N=d.getZoomScale(y,this._tileZoom),C=d.project(o,this._tileZoom).floor(),M=d.getSize().divideBy(N*2);return new X(C.subtract(M),C.add(M))},_update:function(o){var d=this._map;if(d){var y=this._clampZoom(d.getZoom());if(o===void 0&&(o=d.getCenter()),this._tileZoom!==void 0){var N=this._getTiledPixelBounds(o),C=this._pxBoundsToTileRange(N),M=C.getCenter(),G=[],ne=this.options.keepBuffer,se=new X(C.getBottomLeft().subtract([ne,-ne]),C.getTopRight().add([ne,-ne]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ve in this._tiles){var Ce=this._tiles[ve].coords;(Ce.z!==this._tileZoom||!se.contains(new I(Ce.x,Ce.y)))&&(this._tiles[ve].current=!1)}if(Math.abs(y-this._tileZoom)>1){this._setView(o,y);return}for(var Je=C.min.y;Je<=C.max.y;Je++)for(var mt=C.min.x;mt<=C.max.x;mt++){var Qn=new I(mt,Je);if(Qn.z=this._tileZoom,!!this._isValidTile(Qn)){var Tn=this._tiles[this._tileCoordsToKey(Qn)];Tn?Tn.current=!0:G.push(Qn)}}if(G.sort(function(cr,$a){return cr.distanceTo(M)-$a.distanceTo(M)}),G.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Fr=document.createDocumentFragment();for(mt=0;mt<G.length;mt++)this._addTile(G[mt],Fr);this._level.el.appendChild(Fr)}}}},_isValidTile:function(o){var d=this._map.options.crs;if(!d.infinite){var y=this._globalTileRange;if(!d.wrapLng&&(o.x<y.min.x||o.x>y.max.x)||!d.wrapLat&&(o.y<y.min.y||o.y>y.max.y))return!1}if(!this.options.bounds)return!0;var N=this._tileCoordsToBounds(o);return ie(this.options.bounds).overlaps(N)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var d=this._map,y=this.getTileSize(),N=o.scaleBy(y),C=N.add(y),M=d.unproject(N,o.z),G=d.unproject(C,o.z);return[M,G]},_tileCoordsToBounds:function(o){var d=this._tileCoordsToNwSe(o),y=new ae(d[0],d[1]);return this.options.noWrap||(y=this._map.wrapLatLngBounds(y)),y},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var d=o.split(":"),y=new I(+d[0],+d[1]);return y.z=+d[2],y},_removeTile:function(o){var d=this._tiles[o];d&&(ft(d.el),delete this._tiles[o],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){He(o,"leaflet-tile");var d=this.getTileSize();o.style.width=d.x+"px",o.style.height=d.y+"px",o.onselectstart=f,o.onmousemove=f,Se.ielt9&&this.options.opacity<1&&on(o,this.options.opacity)},_addTile:function(o,d){var y=this._getTilePos(o),N=this._tileCoordsToKey(o),C=this.createTile(this._wrapCoords(o),l(this._tileReady,this,o));this._initTile(C),this.createTile.length<2&&te(l(this._tileReady,this,o,null,C)),pn(C,y),this._tiles[N]={el:C,coords:o,current:!0},d.appendChild(C),this.fire("tileloadstart",{tile:C,coords:o})},_tileReady:function(o,d,y){d&&this.fire("tileerror",{error:d,tile:y,coords:o});var N=this._tileCoordsToKey(o);y=this._tiles[N],y&&(y.loaded=+new Date,this._map._fadeAnimated?(on(y.el,0),A(this._fadeFrame),this._fadeFrame=te(this._updateOpacity,this)):(y.active=!0,this._pruneTiles()),d||(He(y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:y.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Se.ielt9||!this._map._fadeAnimated?te(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var d=new I(this._wrapX?m(o.x,this._wrapX):o.x,this._wrapY?m(o.y,this._wrapY):o.y);return d.z=o.z,d},_pxBoundsToTileRange:function(o){var d=this.getTileSize();return new X(o.min.unscaleBy(d).floor(),o.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function lM(o){return new Nc(o)}var Da=Nc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,d){this._url=o,d=x(this,d),d.detectRetina&&Se.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,d){return this._url===o&&d===void 0&&(d=!0),this._url=o,d||this.redraw(),this},createTile:function(o,d){var y=document.createElement("img");return it(y,"load",l(this._tileOnLoad,this,d,y)),it(y,"error",l(this._tileOnError,this,d,y)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(y.referrerPolicy=this.options.referrerPolicy),y.alt="",y.src=this.getTileUrl(o),y},getTileUrl:function(o){var d={r:Se.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var y=this._globalTileRange.max.y-o.y;this.options.tms&&(d.y=y),d["-y"]=y}return S(this._url,s(d,this.options))},_tileOnLoad:function(o,d){Se.ielt9?setTimeout(l(o,this,null,d),0):o(null,d)},_tileOnError:function(o,d,y){var N=this.options.errorTileUrl;N&&d.getAttribute("src")!==N&&(d.src=N),o(y,d)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,d=this.options.maxZoom,y=this.options.zoomReverse,N=this.options.zoomOffset;return y&&(o=d-o),o+N},_getSubdomain:function(o){var d=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var o,d;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(d=this._tiles[o].el,d.onload=f,d.onerror=f,!d.complete)){d.src=T;var y=this._tiles[o].coords;ft(d),delete this._tiles[o],this.fire("tileabort",{tile:d,coords:y})}},_removeTile:function(o){var d=this._tiles[o];if(d)return d.el.setAttribute("src",T),Nc.prototype._removeTile.call(this,o)},_tileReady:function(o,d,y){if(!(!this._map||y&&y.getAttribute("src")===T))return Nc.prototype._tileReady.call(this,o,d,y)}});function ow(o,d){return new Da(o,d)}var aw=Da.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,d){this._url=o;var y=s({},this.defaultWmsParams);for(var N in d)N in this.options||(y[N]=d[N]);d=x(this,d);var C=d.detectRetina&&Se.retina?2:1,M=this.getTileSize();y.width=M.x*C,y.height=M.y*C,this.wmsParams=y},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,Da.prototype.onAdd.call(this,o)},getTileUrl:function(o){var d=this._tileCoordsToNwSe(o),y=this._crs,N=re(y.project(d[0]),y.project(d[1])),C=N.min,M=N.max,G=(this._wmsVersion>=1.3&&this._crs===Q0?[C.y,C.x,M.y,M.x]:[C.x,C.y,M.x,M.y]).join(","),ne=Da.prototype.getTileUrl.call(this,o);return ne+b(this.wmsParams,ne,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+G},setParams:function(o,d){return s(this.wmsParams,o),d||this.redraw(),this}});function cM(o,d){return new aw(o,d)}Da.WMS=aw,ow.wms=cM;var di=os.extend({options:{padding:.1},initialize:function(o){x(this,o),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),He(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,d){var y=this._map.getZoomScale(d,this._zoom),N=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,d),M=N.multiplyBy(-y).add(C).subtract(this._map._getNewPixelOrigin(o,d));Se.any3d?ai(this._container,M,y):pn(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,d=this._map.getSize(),y=this._map.containerPointToLayerPoint(d.multiplyBy(-o)).round();this._bounds=new X(y,y.add(d.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),lw=di.extend({options:{tolerance:0},getEvents:function(){var o=di.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){di.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");it(o,"mousemove",this._onMouseMove,this),it(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,ft(this._container),zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var d in this._layers)o=this._layers[d],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){di.prototype._update.call(this);var o=this._bounds,d=this._container,y=o.getSize(),N=Se.retina?2:1;pn(d,o.min),d.width=N*y.x,d.height=N*y.y,d.style.width=y.x+"px",d.style.height=y.y+"px",Se.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){di.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[u(o)]=o;var d=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var d=o._order,y=d.next,N=d.prev;y?y.prev=N:this._drawLast=N,N?N.next=y:this._drawFirst=y,delete o._order,delete this._layers[u(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var d=o.options.dashArray.split(/[, ]+/),y=[],N,C;for(C=0;C<d.length;C++){if(N=Number(d[C]),isNaN(N))return;y.push(N)}o.options._dashArray=y}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||te(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var d=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(o._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(o._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var d=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,d=this._redrawBounds;if(this._ctx.save(),d){var y=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,y.x,y.y),this._ctx.clip()}this._drawing=!0;for(var N=this._drawFirst;N;N=N.next)o=N.layer,(!d||o._pxBounds&&o._pxBounds.intersects(d))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,d){if(this._drawing){var y,N,C,M,G=o._parts,ne=G.length,se=this._ctx;if(ne){for(se.beginPath(),y=0;y<ne;y++){for(N=0,C=G[y].length;N<C;N++)M=G[y][N],se[N?"lineTo":"moveTo"](M.x,M.y);d&&se.closePath()}this._fillStroke(se,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var d=o._point,y=this._ctx,N=Math.max(Math.round(o._radius),1),C=(Math.max(Math.round(o._radiusY),1)||N)/N;C!==1&&(y.save(),y.scale(1,C)),y.beginPath(),y.arc(d.x,d.y/C,N,0,Math.PI*2,!1),C!==1&&y.restore(),this._fillStroke(y,o)}},_fillStroke:function(o,d){var y=d.options;y.fill&&(o.globalAlpha=y.fillOpacity,o.fillStyle=y.fillColor||y.color,o.fill(y.fillRule||"evenodd")),y.stroke&&y.weight!==0&&(o.setLineDash&&o.setLineDash(d.options&&d.options._dashArray||[]),o.globalAlpha=y.opacity,o.lineWidth=y.weight,o.strokeStyle=y.color,o.lineCap=y.lineCap,o.lineJoin=y.lineJoin,o.stroke())},_onClick:function(o){for(var d=this._map.mouseEventToLayerPoint(o),y,N,C=this._drawFirst;C;C=C.next)y=C.layer,y.options.interactive&&y._containsPoint(d)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(y))&&(N=y);this._fireEvent(N?[N]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,d)}},_handleMouseOut:function(o){var d=this._hoveredLayer;d&&(Pt(this._container,"leaflet-interactive"),this._fireEvent([d],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,d){if(!this._mouseHoverThrottled){for(var y,N,C=this._drawFirst;C;C=C.next)y=C.layer,y.options.interactive&&y._containsPoint(d)&&(N=y);N!==this._hoveredLayer&&(this._handleMouseOut(o),N&&(He(this._container,"leaflet-interactive"),this._fireEvent([N],o,"mouseover"),this._hoveredLayer=N)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,d,y){this._map._fireDOMEvent(d,y||d.type,o)},_bringToFront:function(o){var d=o._order;if(d){var y=d.next,N=d.prev;if(y)y.prev=N;else return;N?N.next=y:y&&(this._drawFirst=y),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(o)}},_bringToBack:function(o){var d=o._order;if(d){var y=d.next,N=d.prev;if(N)N.next=y;else return;y?y.prev=N:N&&(this._drawLast=N),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(o)}}});function cw(o){return Se.canvas?new lw(o):null}var kc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),uM={_initContainer:function(){this._container=Ge("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(di.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var d=o._container=kc("shape");He(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",o._path=kc("path"),d.appendChild(o._path),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){var d=o._container;this._container.appendChild(d),o.options.interactive&&o.addInteractiveTarget(d)},_removePath:function(o){var d=o._container;ft(d),o.removeInteractiveTarget(d),delete this._layers[u(o)]},_updateStyle:function(o){var d=o._stroke,y=o._fill,N=o.options,C=o._container;C.stroked=!!N.stroke,C.filled=!!N.fill,N.stroke?(d||(d=o._stroke=kc("stroke")),C.appendChild(d),d.weight=N.weight+"px",d.color=N.color,d.opacity=N.opacity,N.dashArray?d.dashStyle=k(N.dashArray)?N.dashArray.join(" "):N.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=N.lineCap.replace("butt","flat"),d.joinstyle=N.lineJoin):d&&(C.removeChild(d),o._stroke=null),N.fill?(y||(y=o._fill=kc("fill")),C.appendChild(y),y.color=N.fillColor||N.color,y.opacity=N.fillOpacity):y&&(C.removeChild(y),o._fill=null)},_updateCircle:function(o){var d=o._point.round(),y=Math.round(o._radius),N=Math.round(o._radiusY||y);this._setPath(o,o._empty()?"M0 0":"AL "+d.x+","+d.y+" "+y+","+N+" 0,"+65535*360)},_setPath:function(o,d){o._path.v=d},_bringToFront:function(o){rs(o._container)},_bringToBack:function(o){ss(o._container)}},Pd=Se.vml?kc:ot,Cc=di.extend({_initContainer:function(){this._container=Pd("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Pd("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){di.prototype._update.call(this);var o=this._bounds,d=o.getSize(),y=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,y.setAttribute("width",d.x),y.setAttribute("height",d.y)),pn(y,o.min),y.setAttribute("viewBox",[o.min.x,o.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(o){var d=o._path=Pd("path");o.options.className&&He(d,o.options.className),o.options.interactive&&He(d,"leaflet-interactive"),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){ft(o._path),o.removeInteractiveTarget(o._path),delete this._layers[u(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var d=o._path,y=o.options;d&&(y.stroke?(d.setAttribute("stroke",y.color),d.setAttribute("stroke-opacity",y.opacity),d.setAttribute("stroke-width",y.weight),d.setAttribute("stroke-linecap",y.lineCap),d.setAttribute("stroke-linejoin",y.lineJoin),y.dashArray?d.setAttribute("stroke-dasharray",y.dashArray):d.removeAttribute("stroke-dasharray"),y.dashOffset?d.setAttribute("stroke-dashoffset",y.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),y.fill?(d.setAttribute("fill",y.fillColor||y.color),d.setAttribute("fill-opacity",y.fillOpacity),d.setAttribute("fill-rule",y.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(o,d){this._setPath(o,Q(o._parts,d))},_updateCircle:function(o){var d=o._point,y=Math.max(Math.round(o._radius),1),N=Math.max(Math.round(o._radiusY),1)||y,C="a"+y+","+N+" 0 1,0 ",M=o._empty()?"M0 0":"M"+(d.x-y)+","+d.y+C+y*2+",0 "+C+-y*2+",0 ";this._setPath(o,M)},_setPath:function(o,d){o._path.setAttribute("d",d)},_bringToFront:function(o){rs(o._path)},_bringToBack:function(o){ss(o._path)}});Se.vml&&Cc.include(uM);function uw(o){return Se.svg||Se.vml?new Cc(o):null}Nt.include({getRenderer:function(o){var d=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var d=this._paneRenderers[o];return d===void 0&&(d=this._createRenderer({pane:o}),this._paneRenderers[o]=d),d},_createRenderer:function(o){return this.options.preferCanvas&&cw(o)||uw(o)}});var dw=Aa.extend({initialize:function(o,d){Aa.prototype.initialize.call(this,this._boundsToLatLngs(o),d)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=ie(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function dM(o,d){return new dw(o,d)}Cc.create=Pd,Cc.pointsToPath=Q,ui.geometryToLayer=Sd,ui.coordsToLatLng=sp,ui.coordsToLatLngs=Nd,ui.latLngToCoords=ip,ui.latLngsToCoords=kd,ui.getFeature=Oa,ui.asFeature=Cd,Nt.mergeOptions({boxZoom:!0});var hw=Is.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),vc(),Fm(),this._startPoint=this._map.mouseEventToContainerPoint(o),it(document,{contextmenu:Ro,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Ge("div","leaflet-zoom-box",this._container),He(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var d=new X(this._point,this._startPoint),y=d.getSize();pn(this._box,d.min),this._box.style.width=y.x+"px",this._box.style.height=y.y+"px"},_finish:function(){this._moved&&(ft(this._box),Pt(this._container,"leaflet-crosshair")),yc(),Um(),zt(document,{contextmenu:Ro,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var d=new ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Nt.addInitHook("addHandler","boxZoom",hw),Nt.mergeOptions({doubleClickZoom:!0});var fw=Is.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var d=this._map,y=d.getZoom(),N=d.options.zoomDelta,C=o.originalEvent.shiftKey?y-N:y+N;d.options.doubleClickZoom==="center"?d.setZoom(C):d.setZoomAround(o.containerPoint,C)}});Nt.addInitHook("addHandler","doubleClickZoom",fw),Nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mw=Is.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Ii(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}He(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Pt(this._map._container,"leaflet-grab"),Pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=ie(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var d=this._lastTime=+new Date,y=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(y),this._times.push(d),this._prunePositions(d)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,d){return o-(o-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;o.x<d.min.x&&(o.x=this._viscousLimit(o.x,d.min.x)),o.y<d.min.y&&(o.y=this._viscousLimit(o.y,d.min.y)),o.x>d.max.x&&(o.x=this._viscousLimit(o.x,d.max.x)),o.y>d.max.y&&(o.y=this._viscousLimit(o.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,d=Math.round(o/2),y=this._initialWorldOffset,N=this._draggable._newPos.x,C=(N-d+y)%o+d-y,M=(N+d+y)%o-d-y,G=Math.abs(C+y)<Math.abs(M+y)?C:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=G},_onDragEnd:function(o){var d=this._map,y=d.options,N=!y.inertia||o.noInertia||this._times.length<2;if(d.fire("dragend",o),N)d.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,G=y.easeLinearity,ne=C.multiplyBy(G/M),se=ne.distanceTo([0,0]),ve=Math.min(y.inertiaMaxSpeed,se),Ce=ne.multiplyBy(ve/se),Je=ve/(y.inertiaDeceleration*G),mt=Ce.multiplyBy(-Je/2).round();!mt.x&&!mt.y?d.fire("moveend"):(mt=d._limitOffset(mt,d.options.maxBounds),te(function(){d.panBy(mt,{duration:Je,easeLinearity:G,noMoveStart:!0,animate:!0})}))}}});Nt.addInitHook("addHandler","dragging",mw),Nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var pw=Is.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),it(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,d=document.documentElement,y=o.scrollTop||d.scrollTop,N=o.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(N,y)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var d=this._panKeys={},y=this.keyCodes,N,C;for(N=0,C=y.left.length;N<C;N++)d[y.left[N]]=[-1*o,0];for(N=0,C=y.right.length;N<C;N++)d[y.right[N]]=[o,0];for(N=0,C=y.down.length;N<C;N++)d[y.down[N]]=[0,o];for(N=0,C=y.up.length;N<C;N++)d[y.up[N]]=[0,-1*o]},_setZoomDelta:function(o){var d=this._zoomKeys={},y=this.keyCodes,N,C;for(N=0,C=y.zoomIn.length;N<C;N++)d[y.zoomIn[N]]=o;for(N=0,C=y.zoomOut.length;N<C;N++)d[y.zoomOut[N]]=-o},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var d=o.keyCode,y=this._map,N;if(d in this._panKeys){if(!y._panAnim||!y._panAnim._inProgress)if(N=this._panKeys[d],o.shiftKey&&(N=F(N).multiplyBy(3)),y.options.maxBounds&&(N=y._limitOffset(F(N),y.options.maxBounds)),y.options.worldCopyJump){var C=y.wrapLatLng(y.unproject(y.project(y.getCenter()).add(N)));y.panTo(C)}else y.panBy(N)}else if(d in this._zoomKeys)y.setZoom(y.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&y._popup&&y._popup.options.closeOnEscapeKey)y.closePopup();else return;Ro(o)}}});Nt.addInitHook("addHandler","keyboard",pw),Nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var gw=Is.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var d=B0(o),y=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var N=Math.max(y-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),N),Ro(o)},_performZoom:function(){var o=this._map,d=o.getZoom(),y=this._map.options.zoomSnap||0;o._stop();var N=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(N))))/Math.LN2,M=y?Math.ceil(C/y)*y:C,G=o._limitZoom(d+(this._delta>0?M:-M))-d;this._delta=0,this._startTime=null,G&&(o.options.scrollWheelZoom==="center"?o.setZoom(d+G):o.setZoomAround(this._lastMousePos,d+G))}});Nt.addInitHook("addHandler","scrollWheelZoom",gw);var hM=600;Nt.mergeOptions({tapHold:Se.touchNative&&Se.safari&&Se.mobile,tapTolerance:15});var vw=Is.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var d=o.touches[0];this._startPos=this._newPos=new I(d.clientX,d.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",In),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),hM),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){zt(document,"touchend",In),zt(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)},_onMove:function(o){var d=o.touches[0];this._newPos=new I(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,d){var y=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});y._simulated=!0,d.target.dispatchEvent(y)}});Nt.addInitHook("addHandler","tapHold",vw),Nt.mergeOptions({touchZoom:Se.touch,bounceAtZoomLimits:!0});var yw=Is.extend({addHooks:function(){He(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Pt(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var d=this._map;if(!(!o.touches||o.touches.length!==2||d._animatingZoom||this._zooming)){var y=d.mouseEventToContainerPoint(o.touches[0]),N=d.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(y.add(N)._divideBy(2))),this._startDist=y.distanceTo(N),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),In(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var d=this._map,y=d.mouseEventToContainerPoint(o.touches[0]),N=d.mouseEventToContainerPoint(o.touches[1]),C=y.distanceTo(N)/this._startDist;if(this._zoom=d.getScaleZoom(C,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&C<1||this._zoom>d.getMaxZoom()&&C>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var M=y._add(N)._divideBy(2)._subtract(this._centerPoint);if(C===1&&M.x===0&&M.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var G=l(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=te(G,this,!0),In(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Nt.addInitHook("addHandler","touchZoom",yw),Nt.BoxZoom=hw,Nt.DoubleClickZoom=fw,Nt.Drag=mw,Nt.Keyboard=pw,Nt.ScrollWheelZoom=gw,Nt.TapHold=vw,Nt.TouchZoom=yw,n.Bounds=X,n.Browser=Se,n.CRS=ce,n.Canvas=lw,n.Circle=rp,n.CircleMarker=bd,n.Class=P,n.Control=is,n.DivIcon=iw,n.DivOverlay=Rs,n.DomEvent=PP,n.DomUtil=EP,n.Draggable=Ii,n.Evented=U,n.FeatureGroup=li,n.GeoJSON=ui,n.GridLayer=Nc,n.Handler=Is,n.Icon=La,n.ImageOverlay=jd,n.LatLng=oe,n.LatLngBounds=ae,n.Layer=os,n.LayerGroup=Ra,n.LineUtil=WP,n.Map=Nt,n.Marker=_d,n.Mixin=DP,n.Path=Ri,n.Point=I,n.PolyUtil=$P,n.Polygon=Aa,n.Polyline=ci,n.Popup=Ed,n.PosAnimation=F0,n.Projection=HP,n.Rectangle=dw,n.Renderer=di,n.SVG=Cc,n.SVGOverlay=sw,n.TileLayer=Da,n.Tooltip=Td,n.Transformation=Te,n.Util=W,n.VideoOverlay=rw,n.bind=l,n.bounds=re,n.canvas=cw,n.circle=XP,n.circleMarker=JP,n.control=_c,n.divIcon=aM,n.extend=s,n.featureGroup=qP,n.geoJSON=nw,n.geoJson=tM,n.gridLayer=lM,n.icon=KP,n.imageOverlay=nM,n.latLng=ge,n.latLngBounds=ie,n.layerGroup=ZP,n.map=MP,n.marker=YP,n.point=F,n.polygon=eM,n.polyline=QP,n.popup=iM,n.rectangle=dM,n.setOptions=x,n.stamp=u,n.svg=uw,n.svgOverlay=sM,n.tileLayer=ow,n.tooltip=oM,n.transformation=We,n.version=r,n.videoOverlay=rM;var fM=window.L;n.noConflict=function(){return window.L=fM,this},window.L=n})})(Sy,Sy.exports);var $W=Sy.exports;const Qe=Cy($W);var b1={exports:{}};(function(e,t){(function(n,r){r(t)})(cS,function(n){var r=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(i){L.Util.setOptions(this,i),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var l=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,l?this._withAnimation:this._noAnimation),this._markerCluster=l?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(i){if(i instanceof L.LayerGroup)return this.addLayers([i]);if(!i.getLatLng)return this._nonPointGroup.addLayer(i),this.fire("layeradd",{layer:i}),this;if(!this._map)return this._needsClustering.push(i),this.fire("layeradd",{layer:i}),this;if(this.hasLayer(i))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(i,this._maxZoom),this.fire("layeradd",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var l=i,c=this._zoom;if(i.__parent)for(;l.__parent._zoom>=c;)l=l.__parent;return this._currentShownBounds.contains(l.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(i,l):this._animationAddLayerNonAnimated(i,l)),this},removeLayer:function(i){return i instanceof L.LayerGroup?this.removeLayers([i]):i.getLatLng?this._map?i.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(i)),this._removeLayer(i,!0),this.fire("layerremove",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),i.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(i)&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,i)&&this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}),this):(this._nonPointGroup.removeLayer(i),this.fire("layerremove",{layer:i}),this)},addLayers:function(i,l){if(!L.Util.isArray(i))return this.addLayer(i);var c=this._featureGroup,u=this._nonPointGroup,h=this.options.chunkedLoading,m=this.options.chunkInterval,f=this.options.chunkProgress,g=i.length,v=0,_=!0,x;if(this._map){var b=new Date().getTime(),w=L.bind(function(){var k=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();v<g;v++){if(h&&v%200===0){var j=new Date().getTime()-k;if(j>m)break}if(x=i[v],x instanceof L.LayerGroup){_&&(i=i.slice(),_=!1),this._extractNonGroupLayers(x,i),g=i.length;continue}if(!x.getLatLng){u.addLayer(x),l||this.fire("layeradd",{layer:x});continue}if(!this.hasLayer(x)&&(this._addLayer(x,this._maxZoom),l||this.fire("layeradd",{layer:x}),x.__parent&&x.__parent.getChildCount()===2)){var T=x.__parent.getAllChildMarkers(),R=T[0]===x?T[1]:T[0];c.removeLayer(R)}}f&&f(v,g,new Date().getTime()-b),v===g?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(w,this.options.chunkDelay)},this);w()}else for(var S=this._needsClustering;v<g;v++){if(x=i[v],x instanceof L.LayerGroup){_&&(i=i.slice(),_=!1),this._extractNonGroupLayers(x,i),g=i.length;continue}if(!x.getLatLng){u.addLayer(x);continue}this.hasLayer(x)||S.push(x)}return this},removeLayers:function(i){var l,c,u=i.length,h=this._featureGroup,m=this._nonPointGroup,f=!0;if(!this._map){for(l=0;l<u;l++){if(c=i[l],c instanceof L.LayerGroup){f&&(i=i.slice(),f=!1),this._extractNonGroupLayers(c,i),u=i.length;continue}this._arraySplice(this._needsClustering,c),m.removeLayer(c),this.hasLayer(c)&&this._needsRemoving.push({layer:c,latlng:c._latlng}),this.fire("layerremove",{layer:c})}return this}if(this._unspiderfy){this._unspiderfy();var g=i.slice(),v=u;for(l=0;l<v;l++){if(c=g[l],c instanceof L.LayerGroup){this._extractNonGroupLayers(c,g),v=g.length;continue}this._unspiderfyLayer(c)}}for(l=0;l<u;l++){if(c=i[l],c instanceof L.LayerGroup){f&&(i=i.slice(),f=!1),this._extractNonGroupLayers(c,i),u=i.length;continue}if(!c.__parent){m.removeLayer(c),this.fire("layerremove",{layer:c});continue}this._removeLayer(c,!0,!0),this.fire("layerremove",{layer:c}),h.hasLayer(c)&&(h.removeLayer(c),c.clusterShow&&c.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(i){i.off(this._childMarkerEventHandlers,this),delete i.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var i=new L.LatLngBounds;this._topClusterLevel&&i.extend(this._topClusterLevel._bounds);for(var l=this._needsClustering.length-1;l>=0;l--)i.extend(this._needsClustering[l].getLatLng());return i.extend(this._nonPointGroup.getBounds()),i},eachLayer:function(i,l){var c=this._needsClustering.slice(),u=this._needsRemoving,h,m,f;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),m=c.length-1;m>=0;m--){for(h=!0,f=u.length-1;f>=0;f--)if(u[f].layer===c[m]){h=!1;break}h&&i.call(l,c[m])}this._nonPointGroup.eachLayer(i,l)},getLayers:function(){var i=[];return this.eachLayer(function(l){i.push(l)}),i},getLayer:function(i){var l=null;return i=parseInt(i,10),this.eachLayer(function(c){L.stamp(c)===i&&(l=c)}),l},hasLayer:function(i){if(!i)return!1;var l,c=this._needsClustering;for(l=c.length-1;l>=0;l--)if(c[l]===i)return!0;for(c=this._needsRemoving,l=c.length-1;l>=0;l--)if(c[l].layer===i)return!1;return!!(i.__parent&&i.__parent._group===this)||this._nonPointGroup.hasLayer(i)},zoomToShowLayer:function(i,l){var c=this._map;typeof l!="function"&&(l=function(){});var u=function(){(c.hasLayer(i)||c.hasLayer(i.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",u,this),this.off("animationend",u,this),c.hasLayer(i)?l():i.__parent._icon&&(this.once("spiderfied",l,this),i.__parent.spiderfy()))};i._icon&&this._map.getBounds().contains(i.getLatLng())?l():i.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",u,this),this._map.panTo(i.getLatLng())):(this._map.on("moveend",u,this),this.on("animationend",u,this),i.__parent.zoomToBounds())},onAdd:function(i){this._map=i;var l,c,u;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(i),this._nonPointGroup.addTo(i),this._gridClusters||this._generateInitialClusters(),this._maxLat=i.options.crs.projection.MAX_LATITUDE,l=0,c=this._needsRemoving.length;l<c;l++)u=this._needsRemoving[l],u.newlatlng=u.layer._latlng,u.layer._latlng=u.latlng;for(l=0,c=this._needsRemoving.length;l<c;l++)u=this._needsRemoving[l],this._removeLayer(u.layer,!0),u.layer._latlng=u.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),c=this._needsClustering,this._needsClustering=[],this.addLayers(c,!0)},onRemove:function(i){i.off("zoomend",this._zoomEnd,this),i.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(i){for(var l=i;l&&!l._icon;)l=l.__parent;return l||null},_arraySplice:function(i,l){for(var c=i.length-1;c>=0;c--)if(i[c]===l)return i.splice(c,1),!0},_removeFromGridUnclustered:function(i,l){for(var c=this._map,u=this._gridUnclustered,h=Math.floor(this._map.getMinZoom());l>=h&&u[l].removeObject(i,c.project(i.getLatLng(),l));l--);},_childMarkerDragStart:function(i){i.target.__dragStart=i.target._latlng},_childMarkerMoved:function(i){if(!this._ignoreMove&&!i.target.__dragStart){var l=i.target._popup&&i.target._popup.isOpen();this._moveChild(i.target,i.oldLatLng,i.latlng),l&&i.target.openPopup()}},_moveChild:function(i,l,c){i._latlng=l,this.removeLayer(i),i._latlng=c,this.addLayer(i)},_childMarkerDragEnd:function(i){var l=i.target.__dragStart;delete i.target.__dragStart,l&&this._moveChild(i.target,l,i.target._latlng)},_removeLayer:function(i,l,c){var u=this._gridClusters,h=this._gridUnclustered,m=this._featureGroup,f=this._map,g=Math.floor(this._map.getMinZoom());l&&this._removeFromGridUnclustered(i,this._maxZoom);var v=i.__parent,_=v._markers,x;for(this._arraySplice(_,i);v&&(v._childCount--,v._boundsNeedUpdate=!0,!(v._zoom<g));)l&&v._childCount<=1?(x=v._markers[0]===i?v._markers[1]:v._markers[0],u[v._zoom].removeObject(v,f.project(v._cLatLng,v._zoom)),h[v._zoom].addObject(x,f.project(x.getLatLng(),v._zoom)),this._arraySplice(v.__parent._childClusters,v),v.__parent._markers.push(x),x.__parent=v.__parent,v._icon&&(m.removeLayer(v),c||m.addLayer(x))):v._iconNeedsUpdate=!0,v=v.__parent;delete i.__parent},_isOrIsParent:function(i,l){for(;l;){if(i===l)return!0;l=l.parentNode}return!1},fire:function(i,l,c){if(l&&l.layer instanceof L.MarkerCluster){if(l.originalEvent&&this._isOrIsParent(l.layer._icon,l.originalEvent.relatedTarget))return;i="cluster"+i}L.FeatureGroup.prototype.fire.call(this,i,l,c)},listens:function(i,l){return L.FeatureGroup.prototype.listens.call(this,i,l)||L.FeatureGroup.prototype.listens.call(this,"cluster"+i,l)},_defaultIconCreateFunction:function(i){var l=i.getChildCount(),c=" marker-cluster-";return l<10?c+="small":l<100?c+="medium":c+="large",new L.DivIcon({html:"<div><span>"+l+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var i=this._map,l=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,u=this.options.zoomToBoundsOnClick,h=this.options.spiderfyOnEveryZoom;(l||u||h)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),i.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(i){var l=i.layer,c=l;if(!(i.type==="clusterkeypress"&&i.originalEvent&&i.originalEvent.keyCode!==13)){for(;c._childClusters.length===1;)c=c._childClusters[0];c._zoom===this._maxZoom&&c._childCount===l._childCount&&this.options.spiderfyOnMaxZoom?l.spiderfy():this.options.zoomToBoundsOnClick&&l.zoomToBounds(),this.options.spiderfyOnEveryZoom&&l.spiderfy(),i.originalEvent&&i.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(i){var l=this._map;this._inZoomAnimation||(this._shownPolygon&&l.removeLayer(this._shownPolygon),i.layer.getChildCount()>2&&i.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(i.layer.getConvexHull(),this.options.polygonOptions),l.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var i=this.options.spiderfyOnMaxZoom,l=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,u=this.options.spiderfyOnEveryZoom,h=this._map;(i||c||u)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),l&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),h.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var i=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,i),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),i),this._currentShownBounds=i}},_generateInitialClusters:function(){var i=Math.ceil(this._map.getMaxZoom()),l=Math.floor(this._map.getMinZoom()),c=this.options.maxClusterRadius,u=c;typeof c!="function"&&(u=function(){return c}),this.options.disableClusteringAtZoom!==null&&(i=this.options.disableClusteringAtZoom-1),this._maxZoom=i,this._gridClusters={},this._gridUnclustered={};for(var h=i;h>=l;h--)this._gridClusters[h]=new L.DistanceGrid(u(h)),this._gridUnclustered[h]=new L.DistanceGrid(u(h));this._topClusterLevel=new this._markerCluster(this,l-1)},_addLayer:function(i,l){var c=this._gridClusters,u=this._gridUnclustered,h=Math.floor(this._map.getMinZoom()),m,f;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(i),i.on(this._childMarkerEventHandlers,this);l>=h;l--){m=this._map.project(i.getLatLng(),l);var g=c[l].getNearObject(m);if(g){g._addChild(i),i.__parent=g;return}if(g=u[l].getNearObject(m),g){var v=g.__parent;v&&this._removeLayer(g,!1);var _=new this._markerCluster(this,l,g,i);c[l].addObject(_,this._map.project(_._cLatLng,l)),g.__parent=_,i.__parent=_;var x=_;for(f=l-1;f>v._zoom;f--)x=new this._markerCluster(this,f,x),c[f].addObject(x,this._map.project(g.getLatLng(),f));v._addChild(x),this._removeFromGridUnclustered(g,l);return}u[l].addObject(i,m)}this._topClusterLevel._addChild(i),i.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(i){i instanceof L.MarkerCluster&&i._iconNeedsUpdate&&i._updateIcon()})},_enqueue:function(i){this._queue.push(i),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var i=0;i<this._queue.length;i++)this._queue[i].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var i=Math.round(this._map._zoom);this._processQueue(),this._zoom<i&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,i)):this._zoom>i?(this._animationStart(),this._animationZoomOut(this._zoom,i)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(i){var l=this._maxLat;return l!==void 0&&(i.getNorth()>=l&&(i._northEast.lat=1/0),i.getSouth()<=-l&&(i._southWest.lat=-1/0)),i},_animationAddLayerNonAnimated:function(i,l){if(l===i)this._featureGroup.addLayer(i);else if(l._childCount===2){l._addToMap();var c=l.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else l._updateIcon()},_extractNonGroupLayers:function(i,l){var c=i.getLayers(),u=0,h;for(l=l||[];u<c.length;u++){if(h=c[u],h instanceof L.LayerGroup){this._extractNonGroupLayers(h,l);continue}l.push(h)}return l},_overrideMarkerIcon:function(i){var l=i.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[i]}});return l}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(i,l){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,l,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(i,l){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,l,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(i,l){this._animationAddLayerNonAnimated(i,l)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(i,l){var c=this._getExpandedVisibleBounds(),u=this._featureGroup,h=Math.floor(this._map.getMinZoom()),m;this._ignoreMove=!0,this._topClusterLevel._recursively(c,i,h,function(f){var g=f._latlng,v=f._markers,_;for(c.contains(g)||(g=null),f._isSingleParent()&&i+1===l?(u.removeLayer(f),f._recursivelyAddChildrenToMap(null,l,c)):(f.clusterHide(),f._recursivelyAddChildrenToMap(g,l,c)),m=v.length-1;m>=0;m--)_=v[m],c.contains(_._latlng)||u.removeLayer(_)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(c,l),u.eachLayer(function(f){!(f instanceof L.MarkerCluster)&&f._icon&&f.clusterShow()}),this._topClusterLevel._recursively(c,i,l,function(f){f._recursivelyRestoreChildPositions(l)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(c,i,h,function(f){u.removeLayer(f),f.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(i,l){this._animationZoomOutSingle(this._topClusterLevel,i-1,l),this._topClusterLevel._recursivelyAddChildrenToMap(null,l,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i,this._getExpandedVisibleBounds())},_animationAddLayer:function(i,l){var c=this,u=this._featureGroup;u.addLayer(i),l!==i&&(l._childCount>2?(l._updateIcon(),this._forceLayout(),this._animationStart(),i._setPos(this._map.latLngToLayerPoint(l.getLatLng())),i.clusterHide(),this._enqueue(function(){u.removeLayer(i),i.clusterShow(),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(l,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(i,l,c){var u=this._getExpandedVisibleBounds(),h=Math.floor(this._map.getMinZoom());i._recursivelyAnimateChildrenInAndAddSelfToMap(u,h,l+1,c);var m=this;this._forceLayout(),i._recursivelyBecomeVisible(u,c),this._enqueue(function(){if(i._childCount===1){var f=i._markers[0];this._ignoreMove=!0,f.setLatLng(f.getLatLng()),this._ignoreMove=!1,f.clusterShow&&f.clusterShow()}else i._recursively(u,c,h,function(g){g._recursivelyRemoveChildrenFromMap(u,h,l+1)});m._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(i){return new L.MarkerClusterGroup(i)};var s=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(i,l,c,u){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this,pane:i.options.clusterPane}),this._group=i,this._zoom=l,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),u&&this._addChild(u)},getAllChildMarkers:function(i,l){i=i||[];for(var c=this._childClusters.length-1;c>=0;c--)this._childClusters[c].getAllChildMarkers(i,l);for(var u=this._markers.length-1;u>=0;u--)l&&this._markers[u].__dragStart||i.push(this._markers[u]);return i},getChildCount:function(){return this._childCount},zoomToBounds:function(i){for(var l=this._childClusters.slice(),c=this._group._map,u=c.getBoundsZoom(this._bounds),h=this._zoom+1,m=c.getZoom(),f;l.length>0&&u>h;){h++;var g=[];for(f=0;f<l.length;f++)g=g.concat(l[f]._childClusters);l=g}u>h?this._group._map.setView(this._latlng,h):u<=m?this._group._map.setView(this._latlng,m+1):this._group._map.fitBounds(this._bounds,i)},getBounds:function(){var i=new L.LatLngBounds;return i.extend(this._bounds),i},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(i,l){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(i),i instanceof L.MarkerCluster?(l||(this._childClusters.push(i),i.__parent=this),this._childCount+=i._childCount):(l||this._markers.push(i),this._childCount++),this.__parent&&this.__parent._addChild(i,!0)},_setClusterCenter:function(i){this._cLatLng||(this._cLatLng=i._cLatLng||i._latlng)},_resetBounds:function(){var i=this._bounds;i._southWest&&(i._southWest.lat=1/0,i._southWest.lng=1/0),i._northEast&&(i._northEast.lat=-1/0,i._northEast.lng=-1/0)},_recalculateBounds:function(){var i=this._markers,l=this._childClusters,c=0,u=0,h=this._childCount,m,f,g,v;if(h!==0){for(this._resetBounds(),m=0;m<i.length;m++)g=i[m]._latlng,this._bounds.extend(g),c+=g.lat,u+=g.lng;for(m=0;m<l.length;m++)f=l[m],f._boundsNeedUpdate&&f._recalculateBounds(),this._bounds.extend(f._bounds),g=f._wLatLng,v=f._childCount,c+=g.lat*v,u+=g.lng*v;this._latlng=this._wLatLng=new L.LatLng(c/h,u/h),this._boundsNeedUpdate=!1}},_addToMap:function(i){i&&(this._backupLatlng=this._latlng,this.setLatLng(i)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(i,l,c){this._recursively(i,this._group._map.getMinZoom(),c-1,function(u){var h=u._markers,m,f;for(m=h.length-1;m>=0;m--)f=h[m],f._icon&&(f._setPos(l),f.clusterHide())},function(u){var h=u._childClusters,m,f;for(m=h.length-1;m>=0;m--)f=h[m],f._icon&&(f._setPos(l),f.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(i,l,c,u){this._recursively(i,u,l,function(h){h._recursivelyAnimateChildrenIn(i,h._group._map.latLngToLayerPoint(h.getLatLng()).round(),c),h._isSingleParent()&&c-1===u?(h.clusterShow(),h._recursivelyRemoveChildrenFromMap(i,l,c)):h.clusterHide(),h._addToMap()})},_recursivelyBecomeVisible:function(i,l){this._recursively(i,this._group._map.getMinZoom(),l,null,function(c){c.clusterShow()})},_recursivelyAddChildrenToMap:function(i,l,c){this._recursively(c,this._group._map.getMinZoom()-1,l,function(u){if(l!==u._zoom)for(var h=u._markers.length-1;h>=0;h--){var m=u._markers[h];c.contains(m._latlng)&&(i&&(m._backupLatlng=m.getLatLng(),m.setLatLng(i),m.clusterHide&&m.clusterHide()),u._group._featureGroup.addLayer(m))}},function(u){u._addToMap(i)})},_recursivelyRestoreChildPositions:function(i){for(var l=this._markers.length-1;l>=0;l--){var c=this._markers[l];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(i-1===this._zoom)for(var u=this._childClusters.length-1;u>=0;u--)this._childClusters[u]._restorePosition();else for(var h=this._childClusters.length-1;h>=0;h--)this._childClusters[h]._recursivelyRestoreChildPositions(i)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(i,l,c,u){var h,m;this._recursively(i,l-1,c-1,function(f){for(m=f._markers.length-1;m>=0;m--)h=f._markers[m],(!u||!u.contains(h._latlng))&&(f._group._featureGroup.removeLayer(h),h.clusterShow&&h.clusterShow())},function(f){for(m=f._childClusters.length-1;m>=0;m--)h=f._childClusters[m],(!u||!u.contains(h._latlng))&&(f._group._featureGroup.removeLayer(h),h.clusterShow&&h.clusterShow())})},_recursively:function(i,l,c,u,h){var m=this._childClusters,f=this._zoom,g,v;if(l<=f&&(u&&u(this),h&&f===c&&h(this)),f<l||f<c)for(g=m.length-1;g>=0;g--)v=m[g],v._boundsNeedUpdate&&v._recalculateBounds(),i.intersects(v._bounds)&&v._recursively(i,l,c,u,h)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var i=this.options.opacity;return this.setOpacity(0),this.options.opacity=i,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(i){this._cellSize=i,this._sqCellSize=i*i,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(i,l){var c=this._getCoord(l.x),u=this._getCoord(l.y),h=this._grid,m=h[u]=h[u]||{},f=m[c]=m[c]||[],g=L.Util.stamp(i);this._objectPoint[g]=l,f.push(i)},updateObject:function(i,l){this.removeObject(i),this.addObject(i,l)},removeObject:function(i,l){var c=this._getCoord(l.x),u=this._getCoord(l.y),h=this._grid,m=h[u]=h[u]||{},f=m[c]=m[c]||[],g,v;for(delete this._objectPoint[L.Util.stamp(i)],g=0,v=f.length;g<v;g++)if(f[g]===i)return f.splice(g,1),v===1&&delete m[c],!0},eachObject:function(i,l){var c,u,h,m,f,g,v,_=this._grid;for(c in _){f=_[c];for(u in f)for(g=f[u],h=0,m=g.length;h<m;h++)v=i.call(l,g[h]),v&&(h--,m--)}},getNearObject:function(i){var l=this._getCoord(i.x),c=this._getCoord(i.y),u,h,m,f,g,v,_,x,b=this._objectPoint,w=this._sqCellSize,S=null;for(u=c-1;u<=c+1;u++)if(f=this._grid[u],f){for(h=l-1;h<=l+1;h++)if(g=f[h],g)for(m=0,v=g.length;m<v;m++)_=g[m],x=this._sqDist(b[L.Util.stamp(_)],i),(x<w||x<=w&&S===null)&&(w=x,S=_)}return S},_getCoord:function(i){var l=Math.floor(i/this._cellSize);return isFinite(l)?l:i},_sqDist:function(i,l){var c=l.x-i.x,u=l.y-i.y;return c*c+u*u}},function(){L.QuickHull={getDistant:function(i,l){var c=l[1].lat-l[0].lat,u=l[0].lng-l[1].lng;return u*(i.lat-l[0].lat)+c*(i.lng-l[0].lng)},findMostDistantPointFromBaseLine:function(i,l){var c=0,u=null,h=[],m,f,g;for(m=l.length-1;m>=0;m--){if(f=l[m],g=this.getDistant(f,i),g>0)h.push(f);else continue;g>c&&(c=g,u=f)}return{maxPoint:u,newPoints:h}},buildConvexHull:function(i,l){var c=[],u=this.findMostDistantPointFromBaseLine(i,l);return u.maxPoint?(c=c.concat(this.buildConvexHull([i[0],u.maxPoint],u.newPoints)),c=c.concat(this.buildConvexHull([u.maxPoint,i[1]],u.newPoints)),c):[i[0]]},getConvexHull:function(i){var l=!1,c=!1,u=!1,h=!1,m=null,f=null,g=null,v=null,_=null,x=null,b;for(b=i.length-1;b>=0;b--){var w=i[b];(l===!1||w.lat>l)&&(m=w,l=w.lat),(c===!1||w.lat<c)&&(f=w,c=w.lat),(u===!1||w.lng>u)&&(g=w,u=w.lng),(h===!1||w.lng<h)&&(v=w,h=w.lng)}c!==l?(x=f,_=m):(x=v,_=g);var S=[].concat(this.buildConvexHull([x,_],i),this.buildConvexHull([_,x],i));return S}}}(),L.MarkerCluster.include({getConvexHull:function(){var i=this.getAllChildMarkers(),l=[],c,u;for(u=i.length-1;u>=0;u--)c=i[u].getLatLng(),l.push(c);return L.QuickHull.getConvexHull(l)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var i=this.getAllChildMarkers(null,!0),l=this._group,c=l._map,u=c.latLngToLayerPoint(this._latlng),h;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?h=this._group.options.spiderfyShapePositions(i.length,u):i.length>=this._circleSpiralSwitchover?h=this._generatePointsSpiral(i.length,u):(u.y+=10,h=this._generatePointsCircle(i.length,u)),this._animationSpiderfy(i,h)}},unspiderfy:function(i){this._group._inZoomAnimation||(this._animationUnspiderfy(i),this._group._spiderfied=null)},_generatePointsCircle:function(i,l){var c=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+i),u=c/this._2PI,h=this._2PI/i,m=[],f,g;for(u=Math.max(u,35),m.length=i,f=0;f<i;f++)g=this._circleStartAngle+f*h,m[f]=new L.Point(l.x+u*Math.cos(g),l.y+u*Math.sin(g))._round();return m},_generatePointsSpiral:function(i,l){var c=this._group.options.spiderfyDistanceMultiplier,u=c*this._spiralLengthStart,h=c*this._spiralFootSeparation,m=c*this._spiralLengthFactor*this._2PI,f=0,g=[],v;for(g.length=i,v=i;v>=0;v--)v<i&&(g[v]=new L.Point(l.x+u*Math.cos(f),l.y+u*Math.sin(f))._round()),f+=h/u+v*5e-4,u+=m/f;return g},_noanimationUnspiderfy:function(){var i=this._group,l=i._map,c=i._featureGroup,u=this.getAllChildMarkers(null,!0),h,m;for(i._ignoreMove=!0,this.setOpacity(1),m=u.length-1;m>=0;m--)h=u[m],c.removeLayer(h),h._preSpiderfyLatlng&&(h.setLatLng(h._preSpiderfyLatlng),delete h._preSpiderfyLatlng),h.setZIndexOffset&&h.setZIndexOffset(0),h._spiderLeg&&(l.removeLayer(h._spiderLeg),delete h._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:u}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(i,l){var c=this._group,u=c._map,h=c._featureGroup,m=this._group.options.spiderLegPolylineOptions,f,g,v,_;for(c._ignoreMove=!0,f=0;f<i.length;f++)_=u.layerPointToLatLng(l[f]),g=i[f],v=new L.Polyline([this._latlng,_],m),u.addLayer(v),g._spiderLeg=v,g._preSpiderfyLatlng=g._latlng,g.setLatLng(_),g.setZIndexOffset&&g.setZIndexOffset(1e6),h.addLayer(g);this.setOpacity(.3),c._ignoreMove=!1,c.fire("spiderfied",{cluster:this,markers:i})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(i,l){var c=this,u=this._group,h=u._map,m=u._featureGroup,f=this._latlng,g=h.latLngToLayerPoint(f),v=L.Path.SVG,_=L.extend({},this._group.options.spiderLegPolylineOptions),x=_.opacity,b,w,S,k,j,T;for(x===void 0&&(x=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),v?(_.opacity=0,_.className=(_.className||"")+" leaflet-cluster-spider-leg"):_.opacity=x,u._ignoreMove=!0,b=0;b<i.length;b++)w=i[b],T=h.layerPointToLatLng(l[b]),S=new L.Polyline([f,T],_),h.addLayer(S),w._spiderLeg=S,v&&(k=S._path,j=k.getTotalLength()+.1,k.style.strokeDasharray=j,k.style.strokeDashoffset=j),w.setZIndexOffset&&w.setZIndexOffset(1e6),w.clusterHide&&w.clusterHide(),m.addLayer(w),w._setPos&&w._setPos(g);for(u._forceLayout(),u._animationStart(),b=i.length-1;b>=0;b--)T=h.layerPointToLatLng(l[b]),w=i[b],w._preSpiderfyLatlng=w._latlng,w.setLatLng(T),w.clusterShow&&w.clusterShow(),v&&(S=w._spiderLeg,k=S._path,k.style.strokeDashoffset=0,S.setStyle({opacity:x}));this.setOpacity(.3),u._ignoreMove=!1,setTimeout(function(){u._animationEnd(),u.fire("spiderfied",{cluster:c,markers:i})},200)},_animationUnspiderfy:function(i){var l=this,c=this._group,u=c._map,h=c._featureGroup,m=i?u._latLngToNewLayerPoint(this._latlng,i.zoom,i.center):u.latLngToLayerPoint(this._latlng),f=this.getAllChildMarkers(null,!0),g=L.Path.SVG,v,_,x,b,w,S;for(c._ignoreMove=!0,c._animationStart(),this.setOpacity(1),_=f.length-1;_>=0;_--)v=f[_],v._preSpiderfyLatlng&&(v.closePopup(),v.setLatLng(v._preSpiderfyLatlng),delete v._preSpiderfyLatlng,S=!0,v._setPos&&(v._setPos(m),S=!1),v.clusterHide&&(v.clusterHide(),S=!1),S&&h.removeLayer(v),g&&(x=v._spiderLeg,b=x._path,w=b.getTotalLength()+.1,b.style.strokeDashoffset=w,x.setStyle({opacity:0})));c._ignoreMove=!1,setTimeout(function(){var k=0;for(_=f.length-1;_>=0;_--)v=f[_],v._spiderLeg&&k++;for(_=f.length-1;_>=0;_--)v=f[_],v._spiderLeg&&(v.clusterShow&&v.clusterShow(),v.setZIndexOffset&&v.setZIndexOffset(0),k>1&&h.removeLayer(v),u.removeLayer(v._spiderLeg),delete v._spiderLeg);c._animationEnd(),c.fire("unspiderfied",{cluster:l,markers:f})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(i){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(i))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(i){this._spiderfied&&this._spiderfied.unspiderfy(i)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(i){i._spiderLeg&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow(),i.setZIndexOffset&&i.setZIndexOffset(0),this._map.removeLayer(i._spiderLeg),delete i._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(i){return i?i instanceof L.MarkerClusterGroup?i=i._topClusterLevel.getAllChildMarkers():i instanceof L.LayerGroup?i=i._layers:i instanceof L.MarkerCluster?i=i.getAllChildMarkers():i instanceof L.Marker&&(i=[i]):i=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(i),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(i),this},_flagParentsIconsNeedUpdate:function(i){var l,c;for(l in i)for(c=i[l].__parent;c;)c._iconNeedsUpdate=!0,c=c.__parent},_refreshSingleMarkerModeMarkers:function(i){var l,c;for(l in i)c=i[l],this.hasLayer(c)&&c.setIcon(this._overrideMarkerIcon(c))}}),L.Marker.include({refreshIconOptions:function(i,l){var c=this.options.icon;return L.setOptions(c,i),this.setIcon(c),l&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),n.MarkerClusterGroup=r,n.MarkerCluster=s,Object.defineProperty(n,"__esModule",{value:!0})})})(b1,b1.exports);const fg=768;function iP(){const[e,t]=p.useState(void 0);return p.useEffect(()=>{const n=window.matchMedia(`(max-width: ${fg-1}px)`),r=()=>{t(window.innerWidth<fg)};return n.addEventListener("change",r),t(window.innerWidth<fg),()=>n.removeEventListener("change",r)},[]),!!e}const S1=(e,t,n,r)=>{const i=e*Math.PI/180,l=n*Math.PI/180,c=(n-e)*Math.PI/180,u=(r-t)*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(i)*Math.cos(l)*Math.sin(u/2)*Math.sin(u/2);return 6371e3*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))},N1=83,$i=e=>e?new Date(e*1e3).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--",zW=e=>{if(e<60)return`${Math.round(e)} `;const t=Math.floor(e/60),n=Math.round(e%60);return`${t} ${t>1?"":""}${n>0?` ${n} .`:""} `},k1=e=>e<1e3?`${Math.round(e)} .`:`${(e/1e3).toFixed(1)} `;function BW({isOpen:e,onClose:t,stops:n,trips:r,vehicles:s,routeNamesMap:i,userLocation:l,onRouteSelect:c,onLocationSelect:u,onRequestMapClick:h,mapClickLocation:m,selectedVehicleTrip:f,initialOriginStop:g,onClearVehicleTrip:v,onTripStopClick:_}){var ns;const x=iP(),[b,w]=p.useState(null),[S,k]=p.useState(null),[j,T]=p.useState(""),[R,E]=p.useState(""),[B,q]=p.useState([]),[Y,te]=p.useState([]),[A,W]=p.useState(!1),[P,Z]=p.useState(!1),[$,U]=p.useState(!1),[I,O]=p.useState(!1),[F,X]=p.useState(!1),[re,ae]=p.useState(!1),[ie,oe]=p.useState(null),[ge,ce]=p.useState(!1),[ke,Oe]=p.useState(null),[Pe,Te]=p.useState(null),We=p.useRef(null),wt=p.useRef(null),[kt,ot]=p.useState(null),[Q,he]=p.useState(null),[me,Ue]=p.useState(new Set),[Ze,ze]=p.useState(()=>{const V=localStorage.getItem("notificationDistance");return V?parseInt(V,10):500}),[_t,dt]=p.useState(()=>localStorage.getItem("notificationSound")||"chime"),[En,Yn]=p.useState(!1),[Rt,rn]=p.useState(!1),[Jt,Et]=p.useState(70),[bt,Fn]=p.useState(!1),ue=p.useRef({y:0}),Ve=p.useRef(70),Ie=[200,300,500,750,1e3],Fe=[{id:"chime",name:"",icon:""},{id:"alert",name:"",icon:""},{id:"bell",name:"",icon:""},{id:"soft",name:"",icon:""}],Ot=p.useCallback(V=>{V.preventDefault(),Fn(!0);const fe="touches"in V?V.touches[0].clientY:V.clientY;ue.current={y:fe},Ve.current=Jt},[Jt]),Mt=p.useCallback(V=>{if(!bt)return;const fe="touches"in V?V.touches[0].clientY:V.clientY,D=(ue.current.y-fe)/window.innerHeight*100,K=Math.max(30,Math.min(90,Ve.current+D));Et(K)},[bt]),_n=p.useCallback(()=>{Fn(!1),Jt<35?t():Jt<50?Et(45):Jt>75?Et(85):Et(65)},[Jt,t]);p.useEffect(()=>(bt&&(document.addEventListener("mousemove",Mt),document.addEventListener("mouseup",_n),document.addEventListener("touchmove",Mt,{passive:!1}),document.addEventListener("touchend",_n),document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",Mt),document.removeEventListener("mouseup",_n),document.removeEventListener("touchmove",Mt),document.removeEventListener("touchend",_n),document.body.style.userSelect=""}),[bt,Mt,_n]),p.useEffect(()=>{localStorage.setItem("notificationDistance",Ze.toString())},[Ze]),p.useEffect(()=>{localStorage.setItem("notificationSound",_t)},[_t]),p.useEffect(()=>{if(g&&(!b||b.stopId!==g.stopId||b.name!==g.stopName)){const V={lat:g.lat,lng:g.lng,name:g.stopName,type:"stop",stopId:g.stopId};w(V),T(g.stopName),u==null||u("origin",V)}},[g,b,u]),p.useEffect(()=>{if(m){const V={lat:m.lat,lng:m.lng,name:`${m.lat.toFixed(5)}, ${m.lng.toFixed(5)} `,type:"search"};fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${m.lat}&lon=${m.lng}`).then(fe=>fe.json()).then(fe=>{fe.display_name&&(V.name=fe.display_name.split(",")[0]),m.type==="origin"?(w(V),T(V.name),u==null||u("origin",V)):(k(V),E(V.name),u==null||u("destination",V))}).catch(()=>{m.type==="origin"?(w(V),T(V.name)):(k(V),E(V.name))}),Te(null)}},[m,u]);const Jn=p.useMemo(()=>{if(!j.trim())return n.slice(0,10);const V=j.toLowerCase();return n.filter(fe=>{var pe;return((pe=fe.stop_name)==null?void 0:pe.toLowerCase().includes(V))||fe.stop_id.toLowerCase().includes(V)}).slice(0,10)},[n,j]),Tt=p.useMemo(()=>{if(!R.trim())return n.slice(0,10);const V=R.toLowerCase();return n.filter(fe=>{var pe;return((pe=fe.stop_name)==null?void 0:pe.toLowerCase().includes(V))||fe.stop_id.toLowerCase().includes(V)}).slice(0,10)},[n,R]),sn=p.useCallback((V,fe)=>{if(!V.stop_lat||!V.stop_lon)return;const pe={lat:V.stop_lat,lng:V.stop_lon,name:V.stop_name||V.stop_id,type:"stop",stopId:V.stop_id};fe==="origin"?(w(pe),T(pe.name),X(!1),U(!1)):(k(pe),E(pe.name),ae(!1),O(!1)),u==null||u(fe,pe)},[u]),bn=p.useCallback(V=>{Te(V),h==null||h(V),U(!1),O(!1),X(!1),ae(!1)},[h]),mn=p.useMemo(()=>{const V=new Map;return n.forEach(fe=>V.set(fe.stop_id,fe)),V},[n]),qe=p.useMemo(()=>{var Le;if(!f)return null;const V=r.find(Me=>Me.tripId===f.tripId||Me.id===f.tripId);if(!V)return null;const fe=s.find(Me=>Me.vehicleId===f.vehicleId),pe=V.routeId&&i?i.get(V.routeId):null,D=fe==null?void 0:fe.latitude,K=fe==null?void 0:fe.longitude,z=fe==null?void 0:fe.speed;let H=0,ee=D,le=K,we=!1;const $e=((Le=V.stopTimeUpdates)==null?void 0:Le.map((Me,Re)=>{const rt=Me.stopId?mn.get(Me.stopId):null,nt=rt==null?void 0:rt.stop_lat,at=rt==null?void 0:rt.stop_lon,vt=fe!=null&&fe.currentStopSequence?(Me.stopSequence||Re)<fe.currentStopSequence:!1,St=(fe==null?void 0:fe.stopId)===Me.stopId;let ut,Ge;if(!vt&&nt!==void 0&&at!==void 0&&D!==void 0&&K!==void 0){if(St)we=!0,H=0,ee=nt,le=at;else if(we||!(fe!=null&&fe.currentStopSequence)){if(ee!==void 0&&le!==void 0){const ft=S1(ee,le,nt,at);H+=ft,ee=nt,le=at}if(Ge=H,z&&z>0){const ft=H/z,zr=Re*30;ut=Math.floor(Date.now()/1e3)+ft+zr}}}return{stopId:Me.stopId||"",stopName:(rt==null?void 0:rt.stop_name)||Me.stopId||` ${Re+1}`,stopLat:nt,stopLon:at,arrivalTime:Me.arrivalTime,departureTime:Me.departureTime,stopSequence:Me.stopSequence||Re,isPassed:vt,isCurrent:St,estimatedArrival:ut,distanceFromVehicle:Ge}}))||[];return{tripId:V.tripId||V.id,routeId:V.routeId,routeShortName:pe==null?void 0:pe.route_short_name,routeLongName:pe==null?void 0:pe.route_long_name,routeColor:pe==null?void 0:pe.route_color,vehicleLabel:(fe==null?void 0:fe.label)||V.vehicleLabel,vehicleId:f.vehicleId,stops:$e,vehicle:fe,vehicleSpeed:z}},[f,r,s,i,mn]);p.useEffect(()=>{if(qe){const V=qe.stops.find(fe=>fe.isCurrent);V&&V.stopId!==kt&&(ot(V.stopId),setTimeout(()=>{var fe;(fe=wt.current)==null||fe.scrollIntoView({behavior:"smooth",block:"center"})},100))}},[qe,kt]);const Be=p.useCallback(async()=>{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()},[]),ct=p.useCallback(()=>{"vibrate"in navigator&&navigator.vibrate([200,100,200,100,200])},[]),ht=p.useCallback(V=>{if("Notification"in window&&Notification.permission==="granted"){const fe=new Notification("    !",{body:`    : ${V}`,icon:"/favicon.ico",tag:"bus-approaching",requireInteraction:!0});setTimeout(()=>fe.close(),1e4),fe.onclick=()=>{window.focus(),fe.close()}}},[]),Lt=p.useCallback(V=>{const fe=V||_t;try{const pe=new(window.AudioContext||window.webkitAudioContext),D=pe.createOscillator(),K=pe.createGain();switch(D.connect(K),K.connect(pe.destination),fe){case"chime":D.frequency.setValueAtTime(800,pe.currentTime),D.frequency.setValueAtTime(1e3,pe.currentTime+.1),D.frequency.setValueAtTime(1200,pe.currentTime+.2),K.gain.setValueAtTime(.3,pe.currentTime),K.gain.exponentialRampToValueAtTime(.01,pe.currentTime+.5),D.start(pe.currentTime),D.stop(pe.currentTime+.5);break;case"alert":D.type="square",D.frequency.setValueAtTime(1e3,pe.currentTime),K.gain.setValueAtTime(.2,pe.currentTime),K.gain.setValueAtTime(0,pe.currentTime+.1),K.gain.setValueAtTime(.2,pe.currentTime+.15),K.gain.setValueAtTime(0,pe.currentTime+.25),K.gain.setValueAtTime(.2,pe.currentTime+.3),K.gain.exponentialRampToValueAtTime(.01,pe.currentTime+.5),D.start(pe.currentTime),D.stop(pe.currentTime+.5);break;case"bell":D.type="sine",D.frequency.setValueAtTime(600,pe.currentTime),D.frequency.exponentialRampToValueAtTime(400,pe.currentTime+.8),K.gain.setValueAtTime(.4,pe.currentTime),K.gain.exponentialRampToValueAtTime(.01,pe.currentTime+.8),D.start(pe.currentTime),D.stop(pe.currentTime+.8);break;case"soft":D.type="sine",D.frequency.setValueAtTime(523,pe.currentTime),D.frequency.setValueAtTime(659,pe.currentTime+.15),D.frequency.setValueAtTime(784,pe.currentTime+.3),K.gain.setValueAtTime(.15,pe.currentTime),K.gain.linearRampToValueAtTime(.2,pe.currentTime+.2),K.gain.exponentialRampToValueAtTime(.01,pe.currentTime+.6),D.start(pe.currentTime),D.stop(pe.currentTime+.6);break;default:D.frequency.setValueAtTime(800,pe.currentTime),K.gain.setValueAtTime(.3,pe.currentTime),K.gain.exponentialRampToValueAtTime(.01,pe.currentTime+.3),D.start(pe.currentTime),D.stop(pe.currentTime+.3)}setTimeout(()=>{pe.close()},1e3)}catch(pe){console.error("Error playing notification sound:",pe)}},[_t]),Ct=p.useCallback(V=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const fe=new SpeechSynthesisUtterance(V);fe.lang="el-GR",fe.rate=1,fe.pitch=1,fe.volume=1;const D=window.speechSynthesis.getVoices().find(K=>K.lang.startsWith("el"));D&&(fe.voice=D),window.speechSynthesis.speak(fe)}},[]),Xt=p.useCallback((V,fe,pe)=>{Lt(),ct();const D=fe?` ${fe}${pe?`, ${pe}`:""}`:" ";ht(V),Ct(`! ${D}    ${V}`)},[Lt,ct,ht,Ct]);p.useEffect(()=>{if(!Q||!qe)return;const V=qe.stops.find(fe=>fe.stopId===Q);if(!V||V.isPassed){V!=null&&V.isPassed&&(he(null),Ue(new Set));return}V.distanceFromVehicle!==void 0&&V.distanceFromVehicle<=Ze&&!me.has(Q)&&(Xt(V.stopName,qe.routeShortName,qe.routeLongName),Ue(fe=>new Set([...fe,Q])))},[qe,Q,me,Xt,Ze]),p.useEffect(()=>{f||(he(null),Ue(new Set))},[f]);const qt=p.useCallback((V,fe,pe=1e3,D=5)=>{const K=[];return n.forEach(z=>{if(z.stop_lat===void 0||z.stop_lon===void 0)return;const H=S1(V,fe,z.stop_lat,z.stop_lon);H<=pe&&K.push({stop:z,distance:H})}),K.sort((z,H)=>z.distance-H.distance),K.slice(0,D)},[n]),Kt=p.useCallback((V,fe)=>{const pe=[];return r.forEach(D=>{var H;if(!((H=D.stopTimeUpdates)!=null&&H.length))return;const K=D.stopTimeUpdates.findIndex(ee=>ee.stopId===V),z=D.stopTimeUpdates.findIndex(ee=>ee.stopId===fe);if(K!==-1&&z!==-1&&z>K){const ee=D.stopTimeUpdates.slice(K+1,z).map(le=>{var we;return{stopId:le.stopId||"",stopName:((we=mn.get(le.stopId||""))==null?void 0:we.stop_name)||le.stopId||"",arrivalTime:le.arrivalTime}});pe.push({trip:D,originStopUpdate:D.stopTimeUpdates[K],destStopUpdate:D.stopTimeUpdates[z],intermediateStops:ee})}}),pe.sort((D,K)=>(D.originStopUpdate.departureTime||D.originStopUpdate.arrivalTime||0)-(K.originStopUpdate.departureTime||K.originStopUpdate.arrivalTime||0)),pe},[r,mn]),Sn=p.useCallback(async()=>{if(!(!b||!S)){ce(!0),oe(null);try{const V=qt(b.lat,b.lng,2e3,3),fe=qt(S.lat,S.lng,2e3,3);if(V.length===0||fe.length===0){oe(null),ce(!1);return}let pe=null;for(const D of V)for(const K of fe){const z=Kt(D.stop.stop_id,K.stop.stop_id);if(z.length>0){const H=z[0],ee=H.trip.routeId&&i?i.get(H.trip.routeId):null,le=D.distance,we=K.distance,$e=le/N1,Le=we/N1,Me=H.originStopUpdate.departureTime||H.originStopUpdate.arrivalTime,Re=H.destStopUpdate.arrivalTime,rt=Me&&Re?(Re-Me)/60:15,nt=$e+rt+Le,at=le+we,vt=[];le>50&&vt.push({type:"walk",from:{name:b.name,lat:b.lat,lng:b.lng},to:{name:D.stop.stop_name||D.stop.stop_id,lat:D.stop.stop_lat,lng:D.stop.stop_lon,stopId:D.stop.stop_id},distance:le,duration:$e}),vt.push({type:"bus",from:{name:D.stop.stop_name||D.stop.stop_id,lat:D.stop.stop_lat,lng:D.stop.stop_lon,stopId:D.stop.stop_id},to:{name:K.stop.stop_name||K.stop.stop_id,lat:K.stop.stop_lat,lng:K.stop.stop_lon,stopId:K.stop.stop_id},routeId:H.trip.routeId,routeShortName:ee==null?void 0:ee.route_short_name,routeLongName:ee==null?void 0:ee.route_long_name,routeColor:ee==null?void 0:ee.route_color,departureTime:Me,arrivalTime:Re,duration:rt,intermediateStops:H.intermediateStops}),we>50&&vt.push({type:"walk",from:{name:K.stop.stop_name||K.stop.stop_id,lat:K.stop.stop_lat,lng:K.stop.stop_lon,stopId:K.stop.stop_id},to:{name:S.name,lat:S.lat,lng:S.lng},distance:we,duration:Le});const St={steps:vt,totalDuration:nt,totalWalkingDistance:at,departureTime:Me,arrivalTime:Re};(!pe||nt<pe.totalDuration)&&(pe=St)}}oe(pe),pe&&c&&c(pe)}catch(V){console.error("Route calculation error:",V)}finally{ce(!1)}}},[b,S,qt,Kt,i,c]),dn=p.useCallback(async(V,fe)=>{if(!V.trim()){fe==="origin"?q([]):te([]);return}fe==="origin"?W(!0):Z(!0);try{const D=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(V)}&countrycodes=cy&limit=5`,{headers:{Accept:"application/json"}})).json();fe==="origin"?(q(D),U(!0)):(te(D),O(!0))}catch(pe){console.error("Geocoding error:",pe)}finally{fe==="origin"?W(!1):Z(!1)}},[]),Se=p.useCallback((V,fe)=>{const pe={lat:parseFloat(V.lat),lng:parseFloat(V.lon),name:V.display_name.split(",")[0],type:"search"};fe==="origin"?(w(pe),T(pe.name),U(!1)):(k(pe),E(pe.name),O(!1)),u==null||u(fe,pe)},[u]),ii=p.useCallback(()=>{if(l){const V={lat:l.lat,lng:l.lng,name:"  ",type:"user"};w(V),T("  "),u==null||u("origin",V)}},[l,u]),oi=p.useCallback(()=>{const V=b,fe=j;w(S),T(R),k(V),E(fe),oe(null)},[b,S,j,R]);if(p.useEffect(()=>{b&&S&&Sn()},[b,S]),!e)return null;const Ps=a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between p-3 shrink-0",style:{backgroundColor:"#6B8E23"},children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-9 h-9 rounded-lg bg-white/20 text-white flex items-center justify-center",children:a.jsx(Mr,{className:"h-5 w-5"})}),a.jsx("h2",{className:"font-medium text-sm text-white",children:" "})]}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white hover:bg-white/20",onClick:V=>{V.stopPropagation(),t()},"data-no-drag":!0,children:a.jsx(un,{className:"h-3.5 w-3.5"})})]}),Pe&&a.jsxs("div",{className:"p-3 bg-primary/10 border-b border-border flex items-center gap-2 animate-pulse",children:[a.jsx(bL,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{className:"text-sm",children:["      ",Pe==="origin"?"":""]}),a.jsx(de,{variant:"ghost",size:"sm",className:"ml-auto h-6 text-xs",onClick:()=>Te(null),children:""})]}),qe&&a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-3 border-b border-border bg-primary/5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center",style:{background:qe.routeColor?`#${qe.routeColor}`:"hsl(var(--primary))"},children:a.jsx(Gt,{className:"h-2.5 w-2.5 text-white"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-semibold",style:{color:qe.routeColor?`#${qe.routeColor}`:void 0},children:qe.routeShortName||""}),qe.vehicleLabel&&a.jsx("button",{onClick:()=>rn(!Rt),className:"text-xs text-muted-foreground hover:text-foreground transition-colors ml-1",title:Rt?" ":" ",children:Rt?`(${qe.vehicleLabel})`:"(...)"})]})]}),a.jsxs(de,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:v,children:[a.jsx(un,{className:"h-3 w-3 mr-1"}),""]})]}),qe.routeLongName&&a.jsx("p",{className:"text-xs text-muted-foreground",children:qe.routeLongName}),qe.vehicleSpeed!==void 0&&a.jsxs("div",{className:"flex items-center gap-2 mt-1.5 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1 bg-primary/10 text-primary px-2 py-0.5 rounded-full",children:[a.jsx(Mr,{className:"h-3 w-3"}),a.jsxs("span",{className:"font-medium",children:[(qe.vehicleSpeed*3.6).toFixed(0)," km/h"]})]}),qe.vehicleSpeed<1&&a.jsx("span",{className:"text-muted-foreground",children:"()"})]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>Yn(!En),className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[a.jsx(tC,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:" "}),a.jsx(Jr,{className:`h-3 w-3 transition-transform ${En?"rotate-180":""}`})]}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[": ",Ze>=1e3?`${Ze/1e3}`:`${Ze}`]})]}),En&&a.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg border border-border/50 space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:" :"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Ie.map(V=>a.jsx("button",{onClick:()=>ze(V),className:`px-3 py-1.5 text-xs rounded-full transition-colors ${Ze===V?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80 text-foreground"}`,children:V>=1e3?`${V/1e3}`:`${V}`},V))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:" :"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Fe.map(V=>a.jsxs("button",{onClick:()=>{dt(V.id),Lt(V.id)},className:`px-3 py-1.5 text-xs rounded-full transition-colors flex items-center gap-1.5 ${_t===V.id?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80 text-foreground"}`,children:[a.jsx("span",{children:V.icon}),a.jsx("span",{children:V.name})]},V.id))})]})]}),Q&&a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-accent/10 border border-accent/30 rounded-lg text-xs",children:[a.jsx(xv,{className:"h-4 w-4 text-accent animate-pulse"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-accent font-medium",children:" "}),a.jsx("p",{className:"text-muted-foreground",children:(ns=qe.stops.find(V=>V.stopId===Q))==null?void 0:ns.stopName})]}),a.jsx("button",{onClick:()=>he(null),className:"p-1 hover:bg-accent/20 rounded",title:"",children:a.jsx(qs,{className:"h-4 w-4 text-muted-foreground"})})]})]})]}),a.jsx("div",{ref:We,className:"flex-1 overflow-y-auto p-2",children:a.jsx("div",{className:"space-y-1",children:qe.stops.map((V,fe)=>a.jsxs("div",{role:"button",tabIndex:0,ref:V.isCurrent?wt:null,onClick:()=>{V.stopLat!==void 0&&V.stopLon!==void 0&&(_==null||_(V.stopId,V.stopLat,V.stopLon))},onKeyDown:pe=>{(pe.key==="Enter"||pe.key===" ")&&V.stopLat!==void 0&&V.stopLon!==void 0&&(_==null||_(V.stopId,V.stopLat,V.stopLon))},className:`w-full text-left flex items-start gap-3 p-2 rounded-lg transition-all duration-300 cursor-pointer ${V.isCurrent?"bg-primary/20 border border-primary/30 shadow-md animate-pulse-subtle":V.isPassed?"opacity-50 hover:opacity-70":"hover:bg-muted/50"} ${V.stopLat===void 0?"cursor-not-allowed":""}`,children:[a.jsxs("div",{className:"flex flex-col items-center pt-1",children:[a.jsx("div",{className:`w-3 h-3 rounded-full border-2 ${V.isCurrent?"bg-primary border-primary animate-pulse":V.isPassed?"bg-muted-foreground/50 border-muted-foreground/50":"bg-background border-primary"}`,style:{borderColor:!V.isPassed&&!V.isCurrent&&qe.routeColor?`#${qe.routeColor}`:void 0}}),fe<qe.stops.length-1&&a.jsx("div",{className:`w-0.5 h-6 mt-1 ${V.isPassed?"bg-muted-foreground/30":"bg-primary/30"}`,style:{background:!V.isPassed&&qe.routeColor?`#${qe.routeColor}40`:void 0}})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:`text-sm truncate ${V.isCurrent?"font-semibold text-primary":""}`,children:V.stopName}),a.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[!V.isPassed&&!V.isCurrent&&a.jsx("button",{onClick:async pe=>{pe.stopPropagation(),Q===V.stopId?he(null):(await Be(),he(V.stopId),Ue(new Set))},className:`p-1 rounded-full transition-colors ${Q===V.stopId?"bg-primary text-primary-foreground":"hover:bg-muted text-muted-foreground hover:text-foreground"}`,title:Q===V.stopId?" ":"  ",children:Q===V.stopId?a.jsx(xv,{className:"h-3.5 w-3.5"}):a.jsx(Dn,{className:"h-3.5 w-3.5"})}),V.isCurrent&&a.jsx("span",{className:"text-[10px] font-medium bg-primary text-primary-foreground px-1.5 py-0.5 rounded",children:""})]})]}),!V.isPassed&&!V.isCurrent&&V.estimatedArrival&&qe.vehicleSpeed&&qe.vehicleSpeed>0&&a.jsxs("div",{className:"flex items-center gap-2 text-xs mt-0.5",children:[a.jsxs("div",{className:"flex items-center gap-1 text-primary font-medium",children:[a.jsx(Mr,{className:"h-3 w-3"}),a.jsxs("span",{children:["~",$i(V.estimatedArrival)]})]}),V.distanceFromVehicle&&a.jsxs("span",{className:"text-muted-foreground",children:["(",V.distanceFromVehicle<1e3?`${Math.round(V.distanceFromVehicle)}`:`${(V.distanceFromVehicle/1e3).toFixed(1)}`,")"]})]}),(V.arrivalTime||V.departureTime)&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5",children:[a.jsx($n,{className:"h-3 w-3"}),a.jsxs("span",{children:[": ",V.arrivalTime&&$i(V.arrivalTime),V.departureTime&&V.departureTime!==V.arrivalTime&&a.jsxs("span",{className:"text-muted-foreground/70",children:["  ",$i(V.departureTime)]})]})]})]})]},`${V.stopId}-${fe}`))})})]}),!qe&&a.jsxs("div",{className:"p-3 space-y-3 border-b border-border",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2 glass-card rounded-lg p-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),a.jsx("div",{className:"flex-1 relative",children:a.jsx(Na,{type:"text",placeholder:"  ;",value:j,onChange:V=>{T(V.target.value),X(!0),U(!1)},onKeyDown:V=>V.key==="Enter"&&dn(j,"origin"),onFocus:()=>X(!0),className:"border-0 bg-transparent h-8 focus-visible:ring-0 p-0"})}),A?a.jsx(qn,{className:"h-4 w-4 animate-spin text-muted-foreground"}):a.jsxs("div",{className:"flex gap-1",children:[l&&a.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:ii,title:"  ",children:a.jsx(jx,{className:"h-3.5 w-3.5 text-blue-500"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>bn("origin"),title:"  ",children:a.jsx(Z_,{className:"h-3.5 w-3.5"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>dn(j,"origin"),title:" ",children:a.jsx(Gl,{className:"h-3.5 w-3.5"})})]})]}),(F||$)&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded-lg max-h-64 overflow-y-auto z-20 shadow-xl",children:[$&&B.length>0&&a.jsxs("div",{className:"border-b border-border",children:[a.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-muted-foreground bg-muted/50",children:""}),B.map((V,fe)=>a.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-muted/50 transition-colors flex items-start gap-2",onClick:()=>{Se(V,"origin"),X(!1)},children:[a.jsx(It,{className:"h-4 w-4 text-blue-500 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"line-clamp-2",children:V.display_name})]},`addr-${fe}`))]}),a.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-muted-foreground bg-muted/50",children:" "}),Jn.map(V=>a.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-muted/50 transition-colors flex items-start gap-2",onClick:()=>sn(V,"origin"),children:[a.jsx(Gt,{className:"h-4 w-4 text-orange-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:V.stop_name||V.stop_id}),V.stop_code&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[": ",V.stop_code]})]})]},V.stop_id)),Jn.length===0&&a.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:"  "})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:oi,title:"",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(ji,{className:"h-3 w-3"}),a.jsx(Jr,{className:"h-3 w-3 -mt-1"})]})})}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2 glass-card rounded-lg p-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),a.jsx("div",{className:"flex-1 relative",children:a.jsx(Na,{type:"text",placeholder:"   ;",value:R,onChange:V=>{E(V.target.value),ae(!0),O(!1)},onKeyDown:V=>V.key==="Enter"&&dn(R,"destination"),onFocus:()=>ae(!0),className:"border-0 bg-transparent h-8 focus-visible:ring-0 p-0"})}),P?a.jsx(qn,{className:"h-4 w-4 animate-spin text-muted-foreground"}):a.jsxs("div",{className:"flex gap-1",children:[a.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>bn("destination"),title:"  ",children:a.jsx(Z_,{className:"h-3.5 w-3.5"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>dn(R,"destination"),title:" ",children:a.jsx(Gl,{className:"h-3.5 w-3.5"})})]})]}),(re||I)&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded-lg max-h-64 overflow-y-auto z-20 shadow-xl",children:[I&&Y.length>0&&a.jsxs("div",{className:"border-b border-border",children:[a.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-muted-foreground bg-muted/50",children:""}),Y.map((V,fe)=>a.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-muted/50 transition-colors flex items-start gap-2",onClick:()=>{Se(V,"destination"),ae(!1)},children:[a.jsx(It,{className:"h-4 w-4 text-red-500 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"line-clamp-2",children:V.display_name})]},`addr-${fe}`))]}),a.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-muted-foreground bg-muted/50",children:" "}),Tt.map(V=>a.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-muted/50 transition-colors flex items-start gap-2",onClick:()=>sn(V,"destination"),children:[a.jsx(Gt,{className:"h-4 w-4 text-orange-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:V.stop_name||V.stop_id}),V.stop_code&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[": ",V.stop_code]})]})]},V.stop_id)),Tt.length===0&&a.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:"  "})]})]})]}),!qe&&a.jsxs("div",{className:"flex-1 overflow-y-auto",children:[ge&&a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx(qn,{className:"h-6 w-6 animate-spin text-primary mr-2"}),a.jsx("span",{className:"text-muted-foreground",children:" ..."})]}),!ge&&!ie&&b&&S&&a.jsxs("div",{className:"p-6 text-center text-muted-foreground",children:[a.jsx(Gt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"   "}),a.jsx("p",{className:"text-xs mt-2",children:"        "})]}),!ge&&!b&&!S&&a.jsxs("div",{className:"p-6 text-center text-muted-foreground",children:[a.jsx(It,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"   "}),a.jsx("p",{className:"text-xs mt-2",children:"      "})]}),ie&&a.jsxs("div",{className:"divide-y divide-border",children:[a.jsxs("div",{className:"p-4 bg-primary/5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"font-semibold",children:zW(ie.totalDuration)})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(jr,{className:"h-4 w-4"}),a.jsx("span",{children:k1(ie.totalWalkingDistance)})]})]}),ie.departureTime&&ie.arrivalTime&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:[$i(ie.departureTime),"  ",$i(ie.arrivalTime)]})]}),ie.steps.map((V,fe)=>a.jsx("div",{className:"p-3",children:V.type==="walk"?a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:a.jsx(jr,{className:"h-4 w-4 text-muted-foreground"})}),fe<ie.steps.length-1&&a.jsx("div",{className:"w-0.5 h-8 bg-muted-foreground/30 my-1",style:{borderStyle:"dashed",borderWidth:"0 0 0 2px"}})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm",children:""}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[k1(V.distance||0),"  ",Math.round(V.duration||0)," "]}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[" ",a.jsx("span",{className:"font-medium text-foreground",children:V.to.name})]})]})]}):a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:V.routeColor?`#${V.routeColor}`:"#0ea5e9"},children:V.routeShortName||a.jsx(Gt,{className:"h-4 w-4"})}),fe<ie.steps.length-1&&a.jsx("div",{className:"w-0.5 h-8 my-1",style:{backgroundColor:V.routeColor?`#${V.routeColor}`:"#0ea5e9"}})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-bold px-2 py-0.5 rounded text-white text-xs",style:{backgroundColor:V.routeColor?`#${V.routeColor}`:"#0ea5e9"},children:V.routeShortName||V.routeId}),V.routeLongName&&a.jsx("span",{className:"text-xs text-muted-foreground truncate",children:V.routeLongName})]}),a.jsxs("div",{className:"mt-2 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),a.jsx("span",{className:"font-medium",children:V.from.name}),V.departureTime&&a.jsx("span",{className:"text-xs font-mono text-primary",children:$i(V.departureTime)})]}),V.intermediateStops&&V.intermediateStops.length>0&&a.jsxs("div",{className:"ml-1",children:[a.jsxs("button",{className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",onClick:()=>Oe(ke===fe?null:fe),children:[ke===fe?a.jsx(ji,{className:"h-3 w-3"}):a.jsx(Jr,{className:"h-3 w-3"}),V.intermediateStops.length," "]}),ke===fe&&a.jsx("div",{className:"mt-1 ml-2 space-y-1 border-l-2 border-dashed border-muted-foreground/30 pl-3",children:V.intermediateStops.map((pe,D)=>a.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[a.jsx("span",{children:pe.stopName}),pe.arrivalTime&&a.jsx("span",{className:"font-mono",children:$i(pe.arrivalTime)})]},D))})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),a.jsx("span",{className:"font-medium",children:V.to.name}),V.arrivalTime&&a.jsx("span",{className:"text-xs font-mono text-primary",children:$i(V.arrivalTime)})]})]})]})]})},fe))]})]}),!qe&&b&&S&&!ge&&a.jsx("div",{className:"p-3 border-t border-border shrink-0 bg-card",children:a.jsxs(de,{className:"w-full",onClick:Sn,disabled:ge,children:[a.jsx(Mr,{className:"h-4 w-4 mr-2"})," "]})})]});return e?x?a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[1001] bg-white border-t border-border shadow-2xl rounded-t-xl flex flex-col transition-all duration-150 ease-out",style:{height:`${Jt}vh`},children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-6 flex items-center justify-center cursor-grab active:cursor-grabbing touch-none",onMouseDown:Ot,onTouchStart:Ot,children:a.jsx("div",{className:"w-10 h-1 rounded-full bg-muted-foreground/40"})}),a.jsx("div",{className:"h-full pt-4 flex flex-col overflow-hidden",children:Ps})]}):a.jsx("div",{className:"absolute top-0 left-0 bottom-0 w-[380px] bg-white border-r border-border z-[1001] flex flex-col overflow-hidden shadow-xl",children:Ps}):null}const FW=sm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Zn({className:e,variant:t,...n}){return a.jsx("div",{className:ye(FW({variant:t}),e),...n})}function UW(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var M0="ScrollArea",[oP,BH]=_r(M0),[WW,ts]=oP(M0),aP=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...l}=e,[c,u]=p.useState(null),[h,m]=p.useState(null),[f,g]=p.useState(null),[v,_]=p.useState(null),[x,b]=p.useState(null),[w,S]=p.useState(0),[k,j]=p.useState(0),[T,R]=p.useState(!1),[E,B]=p.useState(!1),q=st(t,te=>u(te)),Y=hc(s);return a.jsx(WW,{scope:n,type:r,dir:Y,scrollHideDelay:i,scrollArea:c,viewport:h,onViewportChange:m,content:f,onContentChange:g,scrollbarX:v,onScrollbarXChange:_,scrollbarXEnabled:T,onScrollbarXEnabledChange:R,scrollbarY:x,onScrollbarYChange:b,scrollbarYEnabled:E,onScrollbarYEnabledChange:B,onCornerWidthChange:S,onCornerHeightChange:j,children:a.jsx(De.div,{dir:Y,...l,ref:q,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":k+"px",...e.style}})})});aP.displayName=M0;var lP="ScrollAreaViewport",cP=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,l=ts(lP,n),c=p.useRef(null),u=st(t,c,l.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(De.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});cP.displayName=lP;var si="ScrollAreaScrollbar",I0=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=ts(si,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=s,c=e.orientation==="horizontal";return p.useEffect(()=>(c?i(!0):l(!0),()=>{c?i(!1):l(!1)}),[c,i,l]),s.type==="hover"?a.jsx(HW,{...r,ref:t,forceMount:n}):s.type==="scroll"?a.jsx(VW,{...r,ref:t,forceMount:n}):s.type==="auto"?a.jsx(uP,{...r,ref:t,forceMount:n}):s.type==="always"?a.jsx(R0,{...r,ref:t}):null});I0.displayName=si;var HW=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=ts(si,e.__scopeScrollArea),[i,l]=p.useState(!1);return p.useEffect(()=>{const c=s.scrollArea;let u=0;if(c){const h=()=>{window.clearTimeout(u),l(!0)},m=()=>{u=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",m)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(ar,{present:n||i,children:a.jsx(uP,{"data-state":i?"visible":"hidden",...r,ref:t})})}),VW=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=ts(si,e.__scopeScrollArea),i=e.orientation==="horizontal",l=$m(()=>u("SCROLL_END"),100),[c,u]=UW("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,s.scrollHideDelay,u]),p.useEffect(()=>{const h=s.viewport,m=i?"scrollLeft":"scrollTop";if(h){let f=h[m];const g=()=>{const v=h[m];f!==v&&(u("SCROLL"),l()),f=v};return h.addEventListener("scroll",g),()=>h.removeEventListener("scroll",g)}},[s.viewport,i,u,l]),a.jsx(ar,{present:n||c!=="hidden",children:a.jsx(R0,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:_e(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:_e(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),uP=p.forwardRef((e,t)=>{const n=ts(si,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,l]=p.useState(!1),c=e.orientation==="horizontal",u=$m(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;l(c?h:m)}},10);return ec(n.viewport,u),ec(n.content,u),a.jsx(ar,{present:r||i,children:a.jsx(R0,{"data-state":i?"visible":"hidden",...s,ref:t})})}),R0=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=ts(si,e.__scopeScrollArea),i=p.useRef(null),l=p.useRef(0),[c,u]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=pP(c.viewport,c.content),m={...r,sizes:c,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:g=>i.current=g,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:g=>l.current=g};function f(g,v){return JW(g,l.current,c,v)}return n==="horizontal"?a.jsx(GW,{...m,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollLeft,v=C1(g,c,s.dir);i.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollLeft=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollLeft=f(g,s.dir))}}):n==="vertical"?a.jsx(ZW,{...m,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollTop,v=C1(g,c);i.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollTop=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollTop=f(g))}}):null}),GW=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=ts(si,e.__scopeScrollArea),[l,c]=p.useState(),u=p.useRef(null),h=st(t,u,i.onScrollbarXChange);return p.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),a.jsx(hP,{"data-orientation":"horizontal",...s,ref:h,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Dm(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,f)=>{if(i.viewport){const g=i.viewport.scrollLeft+m.deltaX;e.onWheelScroll(g),vP(g,f)&&m.preventDefault()}},onResize:()=>{u.current&&i.viewport&&l&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Af(l.paddingLeft),paddingEnd:Af(l.paddingRight)}})}})}),ZW=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=ts(si,e.__scopeScrollArea),[l,c]=p.useState(),u=p.useRef(null),h=st(t,u,i.onScrollbarYChange);return p.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),a.jsx(hP,{"data-orientation":"vertical",...s,ref:h,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Dm(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,f)=>{if(i.viewport){const g=i.viewport.scrollTop+m.deltaY;e.onWheelScroll(g),vP(g,f)&&m.preventDefault()}},onResize:()=>{u.current&&i.viewport&&l&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Af(l.paddingTop),paddingEnd:Af(l.paddingBottom)}})}})}),[qW,dP]=oP(si),hP=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:m,onResize:f,...g}=e,v=ts(si,n),[_,x]=p.useState(null),b=st(t,q=>x(q)),w=p.useRef(null),S=p.useRef(""),k=v.viewport,j=r.content-r.viewport,T=fn(m),R=fn(u),E=$m(f,10);function B(q){if(w.current){const Y=q.clientX-w.current.left,te=q.clientY-w.current.top;h({x:Y,y:te})}}return p.useEffect(()=>{const q=Y=>{const te=Y.target;(_==null?void 0:_.contains(te))&&T(Y,j)};return document.addEventListener("wheel",q,{passive:!1}),()=>document.removeEventListener("wheel",q,{passive:!1})},[k,_,j,T]),p.useEffect(R,[r,R]),ec(_,E),ec(v.content,E),a.jsx(qW,{scope:n,scrollbar:_,hasThumb:s,onThumbChange:fn(i),onThumbPointerUp:fn(l),onThumbPositionChange:R,onThumbPointerDown:fn(c),children:a.jsx(De.div,{...g,ref:b,style:{position:"absolute",...g.style},onPointerDown:_e(e.onPointerDown,q=>{q.button===0&&(q.target.setPointerCapture(q.pointerId),w.current=_.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),B(q))}),onPointerMove:_e(e.onPointerMove,B),onPointerUp:_e(e.onPointerUp,q=>{const Y=q.target;Y.hasPointerCapture(q.pointerId)&&Y.releasePointerCapture(q.pointerId),document.body.style.webkitUserSelect=S.current,v.viewport&&(v.viewport.style.scrollBehavior=""),w.current=null})})})}),Lf="ScrollAreaThumb",fP=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=dP(Lf,e.__scopeScrollArea);return a.jsx(ar,{present:n||s.hasThumb,children:a.jsx(KW,{ref:t,...r})})}),KW=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=ts(Lf,n),l=dP(Lf,n),{onThumbPositionChange:c}=l,u=st(t,f=>l.onThumbChange(f)),h=p.useRef(void 0),m=$m(()=>{h.current&&(h.current(),h.current=void 0)},100);return p.useEffect(()=>{const f=i.viewport;if(f){const g=()=>{if(m(),!h.current){const v=XW(f,c);h.current=v,c()}};return c(),f.addEventListener("scroll",g),()=>f.removeEventListener("scroll",g)}},[i.viewport,m,c]),a.jsx(De.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:_e(e.onPointerDownCapture,f=>{const v=f.target.getBoundingClientRect(),_=f.clientX-v.left,x=f.clientY-v.top;l.onThumbPointerDown({x:_,y:x})}),onPointerUp:_e(e.onPointerUp,l.onThumbPointerUp)})});fP.displayName=Lf;var L0="ScrollAreaCorner",mP=p.forwardRef((e,t)=>{const n=ts(L0,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(YW,{...e,ref:t}):null});mP.displayName=L0;var YW=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=ts(L0,n),[i,l]=p.useState(0),[c,u]=p.useState(0),h=!!(i&&c);return ec(s.scrollbarX,()=>{var f;const m=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(m),u(m)}),ec(s.scrollbarY,()=>{var f;const m=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(m),l(m)}),h?a.jsx(De.div,{...r,ref:t,style:{width:i,height:c,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Af(e){return e?parseInt(e,10):0}function pP(e,t){const n=e/t;return isNaN(n)?0:n}function Dm(e){const t=pP(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function JW(e,t,n,r="ltr"){const s=Dm(n),i=s/2,l=t||i,c=s-l,u=n.scrollbar.paddingStart+l,h=n.scrollbar.size-n.scrollbar.paddingEnd-c,m=n.content-n.viewport,f=r==="ltr"?[0,m]:[m*-1,0];return gP([u,h],f)(e)}function C1(e,t,n="ltr"){const r=Dm(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,l=t.content-t.viewport,c=i-r,u=n==="ltr"?[0,l]:[l*-1,0],h=Bu(e,u);return gP([0,l],[0,c])(h)}function gP(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function vP(e,t){return e>0&&e<t}var XW=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},l=n.left!==i.left,c=n.top!==i.top;(l||c)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function $m(e,t){const n=fn(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function ec(e,t){const n=fn(t);jn(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var yP=aP,QW=cP,e7=mP;const ca=p.forwardRef(({className:e,children:t,...n},r)=>a.jsxs(yP,{ref:r,className:ye("relative overflow-hidden",e),...n,children:[a.jsx(QW,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(xP,{}),a.jsx(e7,{})]}));ca.displayName=yP.displayName;const xP=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>a.jsx(I0,{ref:r,orientation:t,className:ye("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:a.jsx(fP,{className:"relative flex-1 rounded-full bg-border"})}));xP.displayName=I0.displayName;const mi=new Map;let Vn=null,Nr=null,Bc=!1;const wP=async()=>{if(Bc&&(Vn==null?void 0:Vn.state)==="running")return!0;if(window._isUnlockingAudio)return!1;window._isUnlockingAudio=!0,setTimeout(()=>{window._isUnlockingAudio=!1},1e3);try{Vn||(Vn=new(window.AudioContext||window.webkitAudioContext)),Vn.state==="suspended"&&await Vn.resume();const e=Vn.createBuffer(1,1,22050),t=Vn.createBufferSource();if(t.buffer=e,t.connect(Vn.destination),t.start(0),Nr)Bc=!0;else{Nr=new Audio,Nr.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleQg6l9PCqYhMOq+7l4xiLm7Sw8FnHQMqpd3wgiwCJYjj9rVRAnXL/dZJBQBzyv7UUAdtt/vPXAsqfOb61FgGOobx/M1PDFqR7/20SBR1mvP9rj0Yb5/49qQrHHem+/qXIx51r/76jBYle7789IANMorr+e1nAkqU5/rmWwBUl+f74lMEXZnq/tlKCWmb7P/TPhBxoPL/yjMVeqf1/8YmGH6v+P/BHxyFtvr/uhYhir78/7IPJo/A/v+pCyuUxv//nAYwmcv//44CNp7Q//+BATuh1f//cwE+ptv/+2MARKvg//dTAkqw5f/ySgNPs+n/7UEEVLbt/+g4BVq58P/jMAZfvPP/3ygHZL/2/9kgCWnC+P/VGApuwfr/0RAMcr/8/8wJDnW9/f/IARN3uv7/xAEWebr//78BF3q5//+8AB56uf//uQAhfLn//7UAJH65//+yACd/uv//sAApgLr//68ALIC5//+uAC6Auf//rQAwgbn//6wAMoG5//+rADSBuf//qgA2gbr//6kAOIK6//+oADqCuv//qAA8grr//6cAPYO6//+mAD+Du///pgBBg7v//6UAQ4S7//+kAESEu///pABGhLv//6MASISbm5ubm5trbW9vcHBva2pqampnZWRiYF5cWldVU1BOTEM/Ozk3NDIwLSwpJyQhHx0aGBUSEA4MCggGBAIAAQMFBwkLDQ8RExUXGRsdHyEkJiopLC4wMjQ2ODo8P0FFR0tOUFRXWV1gYmRmZ2lrbG1ub29wcG9ubWxqaGVhXVhTTkdAOTIrJB0XEQsGAQD/",Nr.load(),Nr.volume=.01;try{await Nr.play(),Nr.pause(),Nr.currentTime=0,Nr.volume=.7,Bc=!0}catch{}}return Bc||(Bc=!0),!0}catch{return!1}},j1=e=>{if("speechSynthesis"in window){speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e);t.lang="el-GR",t.rate=.9,t.pitch=1,t.volume=1;const r=speechSynthesis.getVoices().find(s=>s.lang.startsWith("el"));r?(t.voice=r,console.log("[Audio] Using specific Greek voice:",r.name)):console.log("[Audio] Using default voice with lang el-GR"),speechSynthesis.speak(t)}},E1=(e="medium")=>{if(console.log("[Audio] Attempting to play sound, urgency:",e),(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&Nr){t7(e);return}try{Vn||(Vn=new(window.AudioContext||window.webkitAudioContext)),Vn.state==="suspended"?(console.log("[Audio] AudioContext suspended, trying to resume..."),Vn.resume().then(()=>{console.log("[Audio] AudioContext resumed"),T1(Vn,e)}).catch(()=>{console.log("[Audio] Could not resume, using fallback"),P1(e)})):T1(Vn,e)}catch(n){console.error("[Audio] Error playing sound:",n),P1(e)}},t7=e=>{const t=e==="high"?3:e==="medium"?2:1,n=r=>{if(!(r>=t||!Nr))try{Nr.currentTime=0,Nr.play().then(()=>{setTimeout(()=>n(r+1),300)}).catch(s=>{console.log("[Audio] HTML5 play failed:",s)})}catch(s){console.log("[Audio] HTML5 Audio error:",s)}};n(0)},T1=(e,t)=>{const n=t==="high"?1e3:t==="medium"?800:600,r=t==="high"?3:t==="medium"?2:1;for(let s=0;s<r;s++)setTimeout(()=>{try{const i=e.createOscillator(),l=e.createGain();i.connect(l),l.connect(e.destination),i.frequency.value=n+s*100,i.type="sine",l.gain.setValueAtTime(.5,e.currentTime),l.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3),i.start(e.currentTime),i.stop(e.currentTime+.3)}catch(i){console.error("[Audio] Error creating oscillator:",i)}},s*200)},P1=e=>{const t=e==="high"?3:e==="medium"?2:1;for(let n=0;n<t;n++)setTimeout(()=>{try{const r=new Audio;r.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleQg6l9PCqYhMOq+7l4xiLm7Sw8FnHQMqpd3wgiwCJYjj9rVRAnXL/dZJBQBzyv7UUAdtt/vPXAsqfOb61FgGOobx/M1PDFqR7/20SBR1mvP9rj0Yb5/49qQrHHem+/qXIx51r/76jBYle7789IANMorr+e1nAkqU5/rmWwBUl+f74lMEXZnq/tlKCWmb7P/TPhBxoPL/yjMVeqf1/8YmGH6v+P/BHxyFtvr/uhYhir78/7IPJo/A/v+pCyuUxv//nAYwmcv//44CNp7Q//+BATuh1f//cwE+ptv/+2MARKvg//dTAkqw5f/ySgNPs+n/7UEEVLbt/+g4BVq58P/jMAZfvPP/3ygHZL/2/9kgCWnC+P/VGApuwfr/0RAMcr/8/8wJDnW9/f/IARN3uv7/xAEWebr//78BF3q5//+8AB56uf//uQAhfLn//7UAJH65//+yACd/uv//sAApgLr//68ALIC5//+uAC6Auf//rQAwgbn//6wAMoG5//+rADSBuf//qgA2gbr//6kAOIK6//+oADqCuv//qAA8grr//6cAPYO6//+mAD+Du///pgBBg7v//6UAQ4S7//+kAESEu///pABGhLv//6MASISbm5ubm5trbW9vcHBva2pqampnZWRiYF5cWldVU1BOTEM/Ozk3NDIwLSwpJyQhHx0aGBUSEA4MCggGBAIAAQMFBwkLDQ8RExUXGRsdHyEkJiopLC4wMjQ2ODo8P0FFR0tOUFRXWV1gYmRmZ2lrbG1ub29wcG9ubWxqaGVhXVhTTkdAOTIrJB0XEQsGAQD/",r.volume=.7,r.play().catch(s=>console.log("[Audio] Fallback play failed:",s))}catch(r){console.log("[Audio] Fallback audio failed:",r)}},n*300)},M1=(e="medium")=>{if(!("vibrate"in navigator)||typeof navigator.vibrate!="function")return console.log("[Vibration] Not supported on this device (iOS does not support vibration API)"),!1;try{const t={low:[200],medium:[200,100,200],high:[200,100,200,100,300,100,300]},n=navigator.vibrate(t[e]);return console.log("[Vibration] Triggered:",n),n}catch(t){return console.log("[Vibration] Error:",t),!1}};function _P(e,t,n,r=!0){const s=p.useRef(0),[i,l]=p.useState(1e4),c=p.useCallback(async f=>{try{if("Notification"in window&&Notification.permission==="granted"){const g=f.minutesUntil<=1?"":f.minutesUntil<=2?"":"";new Notification(`${g} ${f.routeShortName||f.routeId} - ${f.minutesUntil}'`,{body:`   "${f.stopName}"${f.confidence==="high"?" ( )":""}`,icon:"/pwa-192x192.png",tag:`arrival-${f.stopId}-${f.routeId}`,requireInteraction:f.minutesUntil<=2}),console.log("[Notification] Browser notification sent (iOS client-side or Android foreground)")}else console.log("[Notification] Browser notification permission not granted")}catch(g){console.error("Error sending notification:",g)}},[]),u=f=>f<=1?"high":f<=2?"medium":"low",h=(f,g,v,_)=>{const x=mi.get(f);if(!x)return!0;const b=Date.now();if(Math.abs(x.arrivalTime-g)>60)return console.log("[Notification] Arrival time changed, re-notifying"),!0;const w=Math.max(_.beforeMinutes,5),S=[5,3,2,1].filter(j=>j<=w);for(const j of S)if(v<=j&&v>j-.17){const T=`${f}-${j}`;if(!mi.has(T))return mi.set(T,{timestamp:b,arrivalTime:g}),console.log(`[Notification] Progressive notification at ${j} min interval`),!0}if(!S.some(j=>{const T=`${f}-${j}`;return mi.has(T)})&&v>0&&v<=w){const j=Math.min(Math.ceil(v),w),T=`${f}-${j}`;if(!mi.has(T))return mi.set(T,{timestamp:b,arrivalTime:g}),console.log(`[Notification] Catch-up notification at ${j} min`),!0}return!1},m=p.useCallback((f,g)=>{const v=`${f.stopId}-${f.routeId}-${Math.floor(f.arrivalTime/60)}`;if(!h(v,f.arrivalTime,f.minutesUntil,g))return;const _=Date.now();mi.set(v,{timestamp:_,arrivalTime:f.arrivalTime});const x=f.routeShortName||f.routeId,b=u(f.minutesUntil);let S=`${b==="high"?"! ":b==="medium"?": ":""} ${x}    ${f.stopName}`;if(f.minutesUntil<=1?S+=" !":S+=`  ${f.minutesUntil} `,f.delaySeconds&&f.delaySeconds>120){const j=Math.round(f.delaySeconds/60);S+=` ( ${j}')`}g.sound&&E1(b),g.vibration&&M1(b),g.voice&&j1(S),c(f);const k=b==="high"?"destructive":"default";tt({title:`${b==="high"?"":""} ${x}  ${f.minutesUntil<=0?"":`${f.minutesUntil}'`}`,description:`   "${f.stopName}"${f.confidence==="high"?" ":""}`,variant:k}),console.log("[StopNotification] Triggered:",{arrival:f,settings:g,urgency:b})},[c]);return p.useEffect(()=>{if(!r||!n.length)return;let f=1/0;const g=Math.floor(Date.now()/1e3),v=n.filter(x=>x.enabled);e.forEach(x=>{var b;!((b=x.stopTimeUpdates)!=null&&b.length)||!x.routeId||x.stopTimeUpdates.forEach(w=>{if(!w.stopId||!w.arrivalTime||!v.find(j=>j.stopId===w.stopId))return;const k=(w.arrivalTime-g)/60;k>0&&k<f&&(f=k)})});let _;f<=1?_=2e3:f<=2?_=3e3:f<=3?_=4e3:f<=5?_=5e3:f<=10?_=8e3:_=15e3,_!==i&&(l(_),console.log(`[StopNotification] Adjusted check interval to ${_}ms (nearest: ${f.toFixed(1)} min)`))},[e,n,r,i]),p.useEffect(()=>{if(!r||!e.length||!n.length)return;const f=Date.now();if(f-s.current<i)return;s.current=f;const g=Math.floor(f/1e3),v=n.filter(b=>b.enabled);if(v.length===0)return;const _=new Map(v.map(b=>[b.stopId,b])),x=new Map;e.forEach(b=>{var S;if(!((S=b.stopTimeUpdates)!=null&&S.length)||!b.routeId)return;const w=t==null?void 0:t.get(b.routeId);b.stopTimeUpdates.forEach(k=>{if(!k.stopId||!k.arrivalTime)return;const j=_.get(k.stopId);if(!j)return;const T=k.arrivalTime-g,R=Math.round(T/60);if(R>0&&R<=15){const E=x.get(k.stopId)||[];E.push({stopId:k.stopId,stopName:j.stopName,routeId:b.routeId,routeShortName:w==null?void 0:w.route_short_name,arrivalTime:k.arrivalTime,minutesUntil:R,confidence:"medium",source:"gtfs"}),x.set(k.stopId,E)}if(R>0&&R<=j.beforeMinutes){if((j.notifyType||"selected")==="selected"&&(!j.watchedTrips||j.watchedTrips.length===0||!j.watchedTrips.includes(b.tripId||"")))return;m({stopId:k.stopId,stopName:j.stopName,routeId:b.routeId,routeShortName:w==null?void 0:w.route_short_name,arrivalTime:k.arrivalTime,minutesUntil:R,confidence:"medium",source:"gtfs",delaySeconds:k.arrivalDelay},j)}})}),x.size>0&&console.log(`[StopNotification] Monitoring ${x.size} stops with arrivals`)},[e,t,n,r,m,i]),p.useEffect(()=>{const f=setInterval(()=>{const v=Date.now()-5*60*1e3;mi.forEach((_,x)=>{_.timestamp<v&&mi.delete(x)})},6e4);return()=>clearInterval(f)},[]),{playSound:E1,vibrate:M1,speak:j1,checkInterval:i}}const n7="v1.5.19.1",pi=async(e,t,n)=>{try{await xn.from("notifications_log").insert({stop_id:e||"DIAGNOSTIC",route_id:"DIAGNOSTIC_V2",alert_level:0,metadata:{...n,step:t,version:n7,timestamp:new Date().toISOString()}})}catch(r){console.error("[Diagnostic v1.5.18] Failed:",r)}},r7="BG5VfDXkytFaecTL-oWSCnIRZHVg1p9fwPaRsmA1rsPS6U4EY6G-RGvt78VFVO0lb8CQJd0SrUmfwbz_vCMbmlw";function s7(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}function Of({stopId:e,stopName:t,currentSettings:n,onSave:r,onRemove:s,onClose:i}){const[l,c]=p.useState((n==null?void 0:n.beforeMinutes)??5),[u,h]=p.useState(!1),m=(n==null?void 0:n.enabled)??!1,{unsubscribe:f}=jm(),g=async()=>{if(confirm("Reset Push Permissions? This will verify if the app has a broken key.")){if(await f(),"serviceWorker"in navigator){const b=await navigator.serviceWorker.getRegistrations();for(let w of b)await w.unregister()}alert("Reset Complete. Please try enabling the alarm again."),window.location.reload()}},v=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,_=async()=>{var b,w;h(!0);try{if(!("Notification"in window)){tt({title:"  ",description:" browser    ."}),h(!1);return}console.log("[StopNotificationModal] Requesting permission immediately...");const S=Notification.requestPermission();tt({title:"  ...",description:" ...",duration:2e3}),wP();const k=window.matchMedia("(display-mode: standalone)").matches||"standalone"in window.navigator&&window.navigator.standalone===!0;pi(e||"UNKNOWN","ATTEMPT_START",{standalone:k,ua:navigator.userAgent}),v()&&!k&&tt({title:"Safari Limitation",description:"   iPhone,  'Add to Home Screen'.",variant:"default"});const j=new Promise((F,X)=>setTimeout(()=>X(new Error("Permission request timed out")),8e3)),T=await Promise.race([S,j]);if(await pi(e||"UNKNOWN","PERMISSION_RESULT",{permission:T,platform:"Web",href:window.location.href}),T!=="granted"){tt({title:" ",description:"        .",variant:"destructive"}),h(!1);return}const R=async()=>{if(!("serviceWorker"in navigator))return null;console.log("[StopNotificationModal] Polling for existing registration...");for(let F=0;F<10;F++){const X=await navigator.serviceWorker.getRegistration();if(X&&(X.active||X.waiting||X.installing))return console.log("[StopNotificationModal] Found registration after attempt",F+1,X),X;await new Promise(re=>setTimeout(re,500))}console.log("[StopNotificationModal] No registration found after polling. Attempting SELF-HEALING...");try{const F=window.location.pathname.includes("MotionAG")?"/MotionAG/":"/",X=`${F}sw.js`.replace(/\/\/+/g,"/"),re=F;console.log("[StopNotificationModal] Force registering:",X,re);const ae=await navigator.serviceWorker.register(X,{scope:re,updateViaCache:"none"});return console.log("[StopNotificationModal] Self-healing success:",ae),ae}catch(F){return console.error("[StopNotificationModal] Self-healing failed:",F),null}};let E=null;try{if(E=await R(),!E)throw new Error("Service Worker not found - Timed out polling");E&&(console.log("[StopNotificationModal] Service worker ready:",E.scope),await pi(e||"UNKNOWN","REG_READY",{scope:E.scope,state:((b=E.active)==null?void 0:b.state)||"unknown"}))}catch(F){console.error("[StopNotificationModal] Service worker ready failed:",F),await pi(e||"UNKNOWN","SW_FAILED",{error:String(F),href:window.location.href,controller:!!navigator.serviceWorker.controller})}if(!E){console.log("[StopNotificationModal] Using client-side notifications only");const F={stopId:e,stopName:t,enabled:!0,sound:!0,vibration:!0,voice:!1,push:!1,beforeMinutes:l,notifyType:"all",watchedTrips:[]},X=localStorage.getItem("stop_notifications");let re=X?JSON.parse(X):[];const ae=re.findIndex(ie=>ie.stopId===e);ae>=0?re[ae]=F:re.push(F),localStorage.setItem("stop_notifications",JSON.stringify(re)),r(F),tt({title:"  ",description:"     app  "}),i(),h(!1);return}console.log("[StopNotificationModal] Setting up push notifications..."),await pi(e||"UNKNOWN","REG_STATE",{hasReg:!!E,hasPush:!!(E!=null&&E.pushManager),swState:((w=E==null?void 0:E.active)==null?void 0:w.state)||"no-active"});let B=await E.pushManager.getSubscription();if(!B)try{const F=s7(r7);B=await E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:F}),await pi(e||"UNKNOWN","SUB_CREATED",{endpoint:B.endpoint})}catch(F){console.error("[StopNotificationModal] Push subscription failed:",F),await pi(e||"UNKNOWN","SUB_FAILED",{error:String(F),name:F==null?void 0:F.name,message:F==null?void 0:F.message,code:F==null?void 0:F.code});const X={stopId:e,stopName:t,enabled:!0,sound:!0,vibration:!0,voice:!1,push:!1,beforeMinutes:l,notifyType:"all",watchedTrips:[]},re=localStorage.getItem("stop_notifications");let ae=re?JSON.parse(re):[];const ie=ae.findIndex(oe=>oe.stopId===e);ie>=0?ae[ie]=X:ae.push(X),localStorage.setItem("stop_notifications",JSON.stringify(ae)),r(X),tt({title:"  ",description:"     app  "}),i(),h(!1);return}const q=B.getKey("p256dh"),Y=B.getKey("auth");if(!q||!Y)throw new Error("Failed to get subscription keys");const te=btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(q)))),A=btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(Y)))),W={stopId:e,stopName:t,enabled:!0,sound:!0,vibration:!0,voice:!1,push:!0,beforeMinutes:l,notifyType:"all",watchedTrips:[]},P=localStorage.getItem("stop_notifications");let Z=P?JSON.parse(P):[];const $=Z.findIndex(F=>F.stopId===e);$>=0?Z[$]=W:Z.push(W),localStorage.setItem("stop_notifications",JSON.stringify(Z));const U=Z.filter(F=>F.enabled&&F.push),I=JSON.parse(JSON.stringify(U)),{error:O}=await xn.from("stop_notification_subscriptions").upsert({endpoint:B.endpoint,p256dh:te,auth:A,stop_notifications:I,updated_at:new Date().toISOString()},{onConflict:"endpoint"});if(O){console.error("[StopNotificationModal] Upsert error:",O),await pi(e,"UPSERT_FAILED",{message:O.message,code:O.code,details:O.details}),tt({title:" ",description:"      .",variant:"destructive"}),h(!1);return}r(W),tt({title:"  ",description:`${l}     "${t}"`}),i()}catch(S){console.error("[StopNotificationModal] FATAL:",S),await pi(e||"UNKNOWN","FATAL_ERROR",{error:String(S),stack:S==null?void 0:S.stack}),tt({title:"  ",description:S.message||String(S),variant:"destructive",duration:8e3})}finally{h(!1)}},x=async()=>{h(!0);try{const b=localStorage.getItem("stop_notifications");let w=b?JSON.parse(b):[];if(w=w.filter(S=>S.stopId!==e),localStorage.setItem("stop_notifications",JSON.stringify(w)),"serviceWorker"in navigator&&"PushManager"in window){const k=await(await navigator.serviceWorker.ready).pushManager.getSubscription();if(k){const j=w.filter(T=>T.enabled&&T.push);j.length>0?await xn.from("stop_notification_subscriptions").update({stop_notifications:JSON.parse(JSON.stringify(j))}).eq("endpoint",k.endpoint):await xn.from("stop_notification_subscriptions").delete().eq("endpoint",k.endpoint)}}s(e),tt({title:"  ",description:t}),i()}catch(b){console.error("Error disabling:",b),tt({title:"",description:b.message,variant:"destructive"})}finally{h(!1)}};return a.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-background border border-border rounded-xl shadow-2xl w-[90%] max-w-sm mx-4 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-muted/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${m?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:m?a.jsx(Dn,{className:"h-5 w-5"}):a.jsx(qs,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-sm",children:" "}),a.jsx("p",{className:"text-[10px] text-muted-foreground font-mono mt-4 pt-4 border-t border-border/50",children:"Internal Ref: MOT-LOG-V1.5.19.2-ARRIVAL"})]})]}),a.jsx(de,{variant:"ghost",size:"icon",onClick:i,disabled:u,children:a.jsx(un,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"space-y-3 p-3 bg-muted/50 rounded-lg",children:[a.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1 opacity-20 hover:opacity-100 transition-opacity",children:[a.jsx("span",{className:"text-[10px] font-mono",children:"v1.5.19.2"}),a.jsx("span",{className:"text-[8px] font-mono uppercase bg-primary/20 px-1 rounded",children:"Diagnostic Mode"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(la,{className:"text-sm",children:" "})]}),a.jsxs("span",{className:"font-mono font-bold text-primary text-lg",children:[l,"'"]})]}),a.jsx(P0,{value:[l],onValueChange:b=>c(b[0]),min:1,max:15,step:1,className:"w-full",disabled:u}),a.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["  push notification ",l,"     "]})]}),a.jsx("div",{className:"flex gap-2",children:m?a.jsxs(de,{variant:"destructive",className:"flex-1",onClick:x,disabled:u,children:[u?a.jsx(qn,{className:"h-4 w-4 animate-spin mr-2"}):a.jsx(qs,{className:"h-4 w-4 mr-2"}),""]}):a.jsxs(de,{className:"flex-1",onClick:_,disabled:u,children:[u?a.jsx(qn,{className:"h-4 w-4 animate-spin mr-2"}):a.jsx(Dn,{className:"h-4 w-4 mr-2"}),""]})}),a.jsx("div",{className:"pt-2 border-t border-border mt-2",children:a.jsxs(de,{variant:"ghost",size:"sm",className:"w-full text-xs text-muted-foreground h-6",onClick:g,children:[a.jsx(NL,{className:"h-3 w-3 mr-1"})," Debug: Force Reset Push (v1.5.17.9.2)"]})})]})]})})}const i7=({confidence:e,source:t})=>{if(!e)return null;const n={high:{color:"text-green-500",bg:"bg-green-500/20",label:" ",icon:""},medium:{color:"text-yellow-500",bg:"bg-yellow-500/20",label:" ",icon:""},low:{color:"text-red-500",bg:"bg-red-500/20",label:" ",icon:""}},{color:r,bg:s,label:i,icon:l}=n[e],c=t==="siri"?" (SIRI)":t==="merged"?" ()":" (GPS)";return a.jsx(Kl,{children:a.jsxs(ya,{children:[a.jsx(xa,{asChild:!0,children:a.jsx("span",{className:`inline - flex items - center gap - 0.5 px - 1 py - 0.5 rounded text - [8px] font - bold ${r} ${s} `,children:l})}),a.jsx(bo,{side:"top",className:"text-xs",children:a.jsxs("p",{children:[i,c]})})]})})},o7=e=>e?new Date(e*1e3).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--",a7=e=>{if(!e)return"--";const t=Math.floor(Date.now()/1e3),n=Math.round((e-t)/60);return n<=0?"":n===1?"1 ":`${n} `},l7=e=>{if(e==null)return"";const t=Math.round(e/60);return t===0?"":t>0?`+ ${t} '`:`${t}'`};function c7({stopId:e,stopName:t,arrivals:n,currentSettings:r,onSave:s,onRemove:i,onClose:l,onFollowRoute:c,onTrackVehicle:u}){const[h,m]=p.useState(!1),[f,g]=p.useState({x:60,y:80}),[v,_]=p.useState(!1),x=p.useRef({x:0,y:0,posX:0,posY:0}),b=p.useRef(null),w=p.useCallback(R=>{R.preventDefault(),_(!0);const E="touches"in R?R.touches[0].clientX:R.clientX,B="touches"in R?R.touches[0].clientY:R.clientY;x.current={x:E,y:B,posX:f.x,posY:f.y}},[f]);p.useEffect(()=>{if(!v)return;const R=B=>{const q="touches"in B?B.touches[0].clientX:B.clientX,Y="touches"in B?B.touches[0].clientY:B.clientY,te=q-x.current.x,A=Y-x.current.y,W=Math.max(0,Math.min(window.innerWidth-320,x.current.posX+te)),P=Math.max(0,Math.min(window.innerHeight-200,x.current.posY+A));g({x:W,y:P})},E=()=>{_(!1)};return window.addEventListener("mousemove",R),window.addEventListener("mouseup",E),window.addEventListener("touchmove",R),window.addEventListener("touchend",E),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",E),window.removeEventListener("touchmove",R),window.removeEventListener("touchend",E)}},[v]);const k=n.filter(R=>R.routeId&&R.arrivalTime).reduce((R,E)=>{const B=E.routeId;return R[B]||(R[B]={routeId:E.routeId,routeShortName:E.routeShortName,routeColor:E.routeColor,arrivals:[]}),R[B].arrivals.push(E),R},{}),j=Object.values(k);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{ref:b,className:"absolute z-[2000] bg-white border border-border rounded-xl shadow-2xl w-[300px] max-h-[70vh] overflow-hidden",style:{left:f.x,top:f.y,cursor:v?"grabbing":"auto"},children:[a.jsxs("div",{className:"flex items-center justify-between p-3 cursor-grab active:cursor-grabbing",style:{backgroundColor:"#6B8E23"},onMouseDown:w,onTouchStart:w,children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[a.jsx("div",{className:"w-9 h-9 rounded-lg bg-white/20 text-white flex items-center justify-center flex-shrink-0",children:a.jsx(Gt,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-sm text-white truncate",children:t}),a.jsx("p",{className:"text-xs text-white/90",children:n.length>0?`${n.length} `:"  "})]})]}),a.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[a.jsx(de,{variant:"ghost",size:"icon",className:`h-6 w-6 text-white hover:bg-white/20 ${r!=null&&r.enabled?"bg-white/20":""}`,onClick:()=>m(!0),title:" ",children:r!=null&&r.enabled?a.jsx(Dn,{className:"h-3.5 w-3.5 text-white"}):a.jsx(qs,{className:"h-3.5 w-3.5 text-white/80"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white hover:bg-white/20",onClick:l,children:a.jsx(un,{className:"h-3.5 w-3.5"})})]})]}),a.jsx(ca,{className:"max-h-[calc(70vh-56px)] bg-white",children:a.jsx("div",{className:"p-4 space-y-2",children:j.length===0?a.jsx("div",{className:"text-center py-6 text-sm text-muted-foreground",children:"   "}):j.map(R=>a.jsxs("div",{className:"rounded-lg border border-border overflow-hidden",children:[a.jsxs("button",{className:"w-full flex items-center gap-2 p-2 bg-muted/30 hover:bg-muted/50 transition-colors",onClick:()=>c(R.routeId),children:[a.jsx(Zn,{className:"text-white font-bold text-[10px] px-1.5",style:{backgroundColor:R.routeColor?`#${R.routeColor}`:"#0ea5e9"},children:R.routeShortName||R.routeId}),a.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-left",children:"  "}),a.jsx(eC,{className:"h-3 w-3 text-muted-foreground"})]}),a.jsx("div",{className:"divide-y divide-border",children:R.arrivals.slice(0,3).map((E,B)=>a.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-muted/20 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(i7,{confidence:E.confidence,source:E.source}),a.jsx("div",{className:"text-sm font-mono font-semibold text-primary",children:o7(E.arrivalTime)}),E.arrivalDelay!==void 0&&E.arrivalDelay!==0&&a.jsx("span",{className:`text-[10px] ${E.arrivalDelay>0?"text-destructive":"text-green-500"}`,children:l7(E.arrivalDelay)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:a7(E.arrivalTime)}),E.vehicleId&&u&&a.jsx(de,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>u(E.vehicleId),title:" ",children:a.jsx(Mr,{className:"h-3 w-3"})})]})]},`${E.tripId}-${B}`))})]},R.routeId))})})]}),h&&a.jsx(Of,{stopId:e,stopName:t,currentSettings:r,onSave:R=>{s(R),m(!1)},onRemove:R=>{i(R),m(!1)},onClose:()=>m(!1)})]})}const u7=({confidence:e,source:t})=>{if(!e)return null;const n={high:{color:"text-green-500",bg:"bg-green-500/20",label:" ",icon:""},medium:{color:"text-yellow-500",bg:"bg-yellow-500/20",label:" ",icon:""},low:{color:"text-red-500",bg:"bg-red-500/20",label:" ",icon:""}},{color:r,bg:s,label:i,icon:l}=n[e],c=t==="siri"?" (SIRI)":t==="merged"?" ()":" (GPS)";return a.jsx(Kl,{children:a.jsxs(ya,{children:[a.jsx(xa,{asChild:!0,children:a.jsx("span",{className:`inline-flex items-center gap-0.5 px-1 py-0.5 rounded text-[8px] font-bold ${r} ${s}`,children:l})}),a.jsx(bo,{side:"top",className:"text-xs",children:a.jsxs("p",{children:[i,c]})})]})})},d7=e=>e?new Date(e*1e3).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--",h7=e=>{if(e==null)return"";const t=Math.round(e/60);return t===0?"":t>0?`+${t}'`:`${t}'`},I1=e=>{const t=Math.round(e/60);return t<1?"< 1 ":t===1?"1 ":`${t} `},R1=e=>e<1e3?`${Math.round(e)} .`:`${(e/1e3).toFixed(1)} `;function f7({stop:e,distance:t,arrivals:n,walkingRoute:r,isLoadingRoute:s,currentNotificationSettings:i,onClose:l,onOpenDetails:c,onNavigate:u,onSaveNotification:h,onRemoveNotification:m}){const[f,g]=p.useState(!1),[v,_]=p.useState({x:window.innerWidth-310,y:window.innerHeight-280}),[x,b]=p.useState(!1),w=p.useRef({x:0,y:0,posX:0,posY:0}),S=p.useRef(null),k=p.useCallback(E=>{E.cancelable&&E.preventDefault(),b(!0);const B="touches"in E?E.touches[0].clientX:E.clientX,q="touches"in E?E.touches[0].clientY:E.clientY;w.current={x:B,y:q,posX:v.x,posY:v.y}},[v]);p.useEffect(()=>{if(!x)return;const E=q=>{const Y="touches"in q?q.touches[0].clientX:q.clientX,te="touches"in q?q.touches[0].clientY:q.clientY,A=Y-w.current.x,W=te-w.current.y,P=Math.max(0,Math.min(window.innerWidth-290,w.current.posX+A)),Z=Math.max(0,Math.min(window.innerHeight-100,w.current.posY+W));_({x:P,y:Z})},B=()=>{b(!1)};return window.addEventListener("mousemove",E),window.addEventListener("mouseup",B),window.addEventListener("touchmove",E),window.addEventListener("touchend",B),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",B),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",B)}},[x]);const j=e.stop_name||e.stop_id,T=e.stop_id;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{ref:S,className:"absolute z-[2000] bg-white border border-border rounded-xl shadow-2xl w-[280px] overflow-hidden",style:{left:v.x,top:v.y,cursor:x?"grabbing":"auto"},children:[a.jsxs("div",{className:"flex items-center justify-between p-3 cursor-grab active:cursor-grabbing",style:{backgroundColor:"#6B8E23"},onMouseDown:k,onTouchStart:k,children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[a.jsx("div",{className:"w-9 h-9 rounded-lg bg-white/20 text-white flex items-center justify-center flex-shrink-0",children:a.jsx(It,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-sm text-white truncate",children:j}),a.jsxs("p",{className:"text-xs text-white/90 flex items-center gap-1",children:[a.jsx(jr,{className:"h-3 w-3"}),s?a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(qn,{className:"h-3 w-3 animate-spin"}),"..."]}):r?a.jsxs("span",{children:[R1(r.distance),"  ",I1(r.duration)]}):a.jsx("span",{children:t<1e3?`${Math.round(t)} .`:`${(t/1e3).toFixed(1)} `})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[h&&a.jsx(de,{variant:"ghost",size:"icon",className:`h-6 w-6 text-white hover:bg-white/20 ${i!=null&&i.enabled?"bg-white/20":""}`,onClick:()=>g(!0),title:" ",children:i!=null&&i.enabled?a.jsx(Dn,{className:"h-3.5 w-3.5 text-white"}):a.jsx(qs,{className:"h-3.5 w-3.5 text-white/80"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white hover:bg-white/20",onClick:l,children:a.jsx(un,{className:"h-3.5 w-3.5"})})]})]}),a.jsxs(ca,{className:"max-h-[200px] bg-white",children:[r&&a.jsx("div",{className:"p-2 bg-blue-500/10 border-b border-border",children:a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-blue-500",children:[a.jsx(jr,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:"font-medium",children:" "})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx("span",{children:R1(r.distance)}),a.jsx("span",{children:""}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx($n,{className:"h-3 w-3"}),I1(r.duration)]})]})]})}),a.jsx("div",{className:"p-3 space-y-2",children:n.length===0?a.jsx("div",{className:"text-center py-4 text-sm text-muted-foreground",children:"   "}):n.slice(0,4).map((E,B)=>a.jsx("div",{className:"flex items-center justify-between text-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(u7,{confidence:E.confidence,source:E.source}),a.jsx(Zn,{className:"text-white font-bold text-[10px] px-1.5",style:{backgroundColor:E.routeColor?`#${E.routeColor}`:"#0ea5e9"},children:E.routeShortName||E.routeId||"?"}),a.jsx("span",{className:"font-mono text-primary",children:d7(E.arrivalTime)}),E.arrivalDelay!==void 0&&E.arrivalDelay!==0&&a.jsx("span",{className:`text-[10px] ${E.arrivalDelay>0?"text-destructive":"text-green-500"}`,children:h7(E.arrivalDelay)})]})},`${E.tripId}-${B}`))})]}),a.jsxs("div",{className:"p-2 border-t border-border bg-muted/30 flex gap-2",children:[a.jsxs(de,{variant:"outline",size:"sm",className:"flex-1 text-xs h-8",onClick:u,children:[a.jsx(Mr,{className:"h-3 w-3 mr-1"}),""]}),a.jsx(de,{size:"sm",className:"flex-1 text-xs h-8",onClick:c,children:""})]})]}),f&&h&&m&&a.jsx(Of,{stopId:T,stopName:j,currentSettings:i,onSave:E=>{h(E),g(!1)},onRemove:E=>{m(E),g(!1)},onClose:()=>g(!1)})]})}const Ny=p.forwardRef(function({children:t,initialPosition:n={x:16,y:16},initialSize:r={width:320,height:400},minSize:s={width:200,height:150},maxSize:i={width:600,height:800},className:l="",onPositionChange:c,onSizeChange:u,zIndex:h=1100,title:m},f){const[g,v]=p.useState(n),[_,x]=p.useState(r),[b,w]=p.useState(!1),[S,k]=p.useState(!1),[j,T]=p.useState(null),R=p.useRef(null),E=p.useRef({x:0,y:0}),B=p.useRef({x:0,y:0}),q=p.useRef({width:0,height:0});p.useEffect(()=>{v(n)},[n.x,n.y]);const Y=p.useCallback(P=>{const Z=P.target;if(Z.closest("button")||Z.closest("input")||Z.closest("[data-no-drag]")||Z.closest(".resize-handle")||!Z.closest(".panel-header"))return;P.preventDefault(),P.stopPropagation(),w(!0);const $="touches"in P?P.touches[0].clientX:P.clientX,U="touches"in P?P.touches[0].clientY:P.clientY;E.current={x:$,y:U},B.current={x:g.x,y:g.y}},[g]),te=p.useCallback((P,Z)=>{P.preventDefault(),P.stopPropagation(),k(!0),T(Z);const $="touches"in P?P.touches[0].clientX:P.clientX,U="touches"in P?P.touches[0].clientY:P.clientY;E.current={x:$,y:U},q.current={width:_.width,height:_.height},B.current={x:g.x,y:g.y}},[_,g]),A=p.useCallback(P=>{var U;const Z="touches"in P?P.touches[0].clientX:P.clientX,$="touches"in P?P.touches[0].clientY:P.clientY;if(b&&R.current){const I=Z-E.current.x,O=$-E.current.y,F=(U=R.current.parentElement)==null?void 0:U.getBoundingClientRect();if(!F)return;let X=B.current.x+I,re=B.current.y+O;const ae=F.width-_.width-8,ie=F.height-_.height-8;X=Math.max(8,Math.min(X,ae)),re=Math.max(8,Math.min(re,ie)),v({x:X,y:re}),c==null||c({x:X,y:re})}if(S&&j){const I=Z-E.current.x,O=$-E.current.y;let F=q.current.width,X=q.current.height,re=B.current.x,ae=B.current.y;if(j.includes("e")&&(F=Math.max(s.width,Math.min(i.width,q.current.width+I))),j.includes("w")){const ie=Math.max(s.width,Math.min(i.width,q.current.width-I))-q.current.width;F=q.current.width+ie,re=B.current.x-ie}if(j.includes("s")&&(X=Math.max(s.height,Math.min(i.height,q.current.height+O))),j.includes("n")){const ie=Math.max(s.height,Math.min(i.height,q.current.height-O))-q.current.height;X=q.current.height+ie,ae=B.current.y-ie}x({width:F,height:X}),v({x:re,y:ae}),u==null||u({width:F,height:X}),c==null||c({x:re,y:ae})}},[b,S,j,_.width,_.height,s,i,c,u]),W=p.useCallback(()=>{w(!1),k(!1),T(null)},[]);return p.useEffect(()=>((b||S)&&(document.addEventListener("mousemove",A),document.addEventListener("mouseup",W),document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("touchend",W),document.body.style.userSelect="none",document.body.style.cursor=S?j!=null&&j.includes("e")||j!=null&&j.includes("w")?"ew-resize":j!=null&&j.includes("n")||j!=null&&j.includes("s")?"ns-resize":"move":"grabbing"),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",W),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",W),document.body.style.userSelect="",document.body.style.cursor=""}),[b,S,A,W,j]),a.jsxs("div",{ref:R,className:`absolute transition-shadow duration-200 ${b||S?"shadow-2xl":"shadow-xl"} ${l}`,style:{left:g.x,top:g.y,width:_.width,height:_.height,zIndex:b||S?h+100:h},children:[a.jsxs("div",{className:"panel-header flex items-center gap-2 px-2 py-1.5 cursor-grab active:cursor-grabbing bg-card/80 backdrop-blur-sm rounded-t-lg border-b border-border/50",onMouseDown:Y,onTouchStart:Y,children:[a.jsx(lL,{className:"h-4 w-4 text-muted-foreground"}),m&&a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:m})]}),a.jsx("div",{className:"h-[calc(100%-32px)] overflow-hidden flex flex-col",children:t}),a.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:P=>te(P,"se"),onTouchStart:P=>te(P,"se"),children:a.jsx("div",{className:"absolute bottom-1 right-1 w-2 h-2 border-r-2 border-b-2 border-muted-foreground/50"})}),a.jsx("div",{className:"resize-handle absolute top-8 right-0 w-2 h-[calc(100%-48px)] cursor-ew-resize",onMouseDown:P=>te(P,"e"),onTouchStart:P=>te(P,"e")}),a.jsx("div",{className:"resize-handle absolute bottom-0 left-0 w-[calc(100%-16px)] h-2 cursor-ns-resize",onMouseDown:P=>te(P,"s"),onTouchStart:P=>te(P,"s")})]})}),zm="https://jftthfniwfarxyisszjh.supabase.co";async function gc(e,t){const n=t&&t!=="all"?`?operator=${t}`:"",s=await fetch(`${zm}/functions/v1/gtfs-proxy${e}${n}`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw"}});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.statusText}`);return s.json()}function m7(e,t){return ti({queryKey:["vehicles",t],queryFn:()=>gc("/vehicles",t),refetchInterval:e*1e3,staleTime:e*1e3/2})}function p7(e,t){return ti({queryKey:["trips",t],queryFn:()=>gc("/trips",t),refetchInterval:e*1e3,staleTime:e*1e3/2})}function g7(e,t){return ti({queryKey:["alerts",t],queryFn:()=>gc("/alerts",t),refetchInterval:e*1e3,staleTime:e*1e3/2})}function bP(e){return ti({queryKey:["static-routes",e],queryFn:()=>gc("/routes",e),staleTime:60*60*1e3,gcTime:24*60*60*1e3})}function v7(e){return ti({queryKey:["static-stops",e],queryFn:()=>gc("/stops",e),staleTime:60*60*1e3,gcTime:24*60*60*1e3})}function Df(e,t){const n=`route_shape_${e}_${t||"default"}`;return ti({queryKey:["route-shape",e,t],queryFn:async()=>{var c,u;if(!e||e==="all")return null;console.log("[useRouteShape] Fetching route shape for:",{routeId:e,operatorId:t});const r=new URLSearchParams;r.set("route",e),t&&t!=="all"&&r.set("operator",t);const i=await fetch(`${zm}/functions/v1/gtfs-proxy/route-shape?${r}`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw"}}),l=await i.json();if(!i.ok)throw console.error("[useRouteShape] Error:",l),new Error(l.error||"Failed to fetch route shape");console.log("[useRouteShape] Success, directions:",((u=(c=l.data)==null?void 0:c.directions)==null?void 0:u.length)||0);try{l.data&&localStorage.setItem(n,JSON.stringify(l.data))}catch(h){console.warn("Failed to cache route shape:",h)}return l.data},initialData:()=>{if(!(!e||typeof window>"u"))try{const r=localStorage.getItem(n);if(r)return console.log("[useRouteShape] Loaded from local cache"),JSON.parse(r)}catch(r){console.warn("Failed to load route shape from cache:",r)}},enabled:!!e&&e!=="all",staleTime:60*60*1e3,gcTime:24*60*60*1e3,retry:2,placeholderData:r=>r})}function y7(e,t){return ti({queryKey:["route-schedule",e,t],queryFn:async()=>{var l;if(!e||e==="all")return null;const n=new URLSearchParams;n.set("route",e),t&&t!=="all"&&n.set("operator",t),console.log(`Fetching schedule for route ${e}, operator ${t}`);const s=await fetch(`${zm}/functions/v1/gtfs-proxy/schedule?${n}`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw"}});if(!s.ok)throw console.error("Failed to fetch route schedule:",s.status,s.statusText),new Error("Failed to fetch route schedule");const i=await s.json();return console.log("Schedule data received:",((l=i.data)==null?void 0:l.total_trips)||0,"trips"),i.debug&&console.log("Schedule debug info:",i.debug),i.data},enabled:!!e&&e!=="all",staleTime:30*1e3,gcTime:5*60*1e3})}function x7(e,t){return ti({queryKey:["stop-routes",e,t],queryFn:async()=>{if(!e)return null;const n=new URLSearchParams;n.set("stop",e),t&&t!=="all"&&n.set("operator",t);const s=await fetch(`${zm}/functions/v1/gtfs-proxy/stop-routes?${n}`,{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw"}});if(!s.ok)throw new Error("Failed to fetch stop routes");return(await s.json()).data},enabled:!!e,staleTime:60*60*1e3,gcTime:24*60*60*1e3})}function w7(e,t){return ti({queryKey:["stop-arrivals",e,t],queryFn:async()=>e?(await gc(`/arrivals?stopId=${e}`,t)).data||[]:[],enabled:!!e,refetchInterval:1e4,staleTime:5e3})}const qa=async(e,t)=>{try{await xn.from("notifications_log").insert({stop_id:"SYNC_DEBUG",route_id:"STOP_NOTIFS",alert_level:0,metadata:{...t,step:e,version:"v1.5.17.9.4",timestamp:new Date().toISOString()}})}catch(n){console.error("Failed to log sync diagnostic:",n)}},Fc="stop_notifications";async function L1(){try{if(!("serviceWorker"in navigator)||!("PushManager"in window))return null;const e=await navigator.serviceWorker.getRegistrations(),t=e.find(r=>r.active)||e[0];if(!t)return console.log("[StopNotifications] No SW registration found for endpoint"),null;const n=await t.pushManager.getSubscription();return(n==null?void 0:n.endpoint)||null}catch{return null}}async function _7(){try{if(!("serviceWorker"in navigator)||!("PushManager"in window))return null;const e=await navigator.serviceWorker.getRegistrations(),t=e.find(c=>c.active)||e[0];if(!t)return null;const n=await t.pushManager.getSubscription();if(!n)return null;const r=n.getKey("p256dh"),s=n.getKey("auth");if(!r||!s)return null;const i=btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(r)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),l=btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(s)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return{p256dh:i,auth:l}}catch{return null}}function gd(){const[e,t]=p.useState([]),[n,r]=p.useState(!1);p.useEffect(()=>{try{const f=localStorage.getItem(Fc);f&&t(JSON.parse(f))}catch(f){console.error("Error loading stop notifications:",f)}},[]);const s=p.useCallback(async f=>{const g=f.filter(x=>x.enabled&&x.push);await qa("SYNC_START",{notifs:g.length,full_count:f.length,raw_data:JSON.stringify(f).slice(0,100)});const v=await L1();if(!v){console.log("[StopNotifications] No push subscription, skipping sync"),await qa("SYNC_ABORT",{reason:"NO_ENDPOINT"});return}const _=await _7();if(!_){console.warn("[StopNotifications] Could not get push keys"),tt({title:"  ",description:"    push.             ''  .",variant:"destructive"});return}r(!0);try{let{data:{user:x}}=await xn.auth.getUser();if(!x){console.log("[StopNotifications] No user found, attempting anonymous sign-in...");const{data:w,error:S}=await xn.auth.signInAnonymously();if(S||!w.user){console.error("[StopNotifications] Anonymous sign-in failed:",S),alert("Critical Error: Could not sign in. Please reload the app.");return}x=w.user,console.log("[StopNotifications] Signed in anonymously:",x.id)}console.log("[StopNotifications] Syncing to DB...",{endpoint:v.slice(0,20),notifs:g.length}),await qa("SYNC_ATTEMPT",{count:g.length,endpoint:v.slice(-10),userId:x.id});const{error:b}=await xn.from("stop_notification_subscriptions").upsert({endpoint:v,p256dh:_.p256dh,auth:_.auth,stop_notifications:g,updated_at:new Date().toISOString()},{onConflict:"endpoint"});if(b)throw console.error("[StopNotifications] Sync upsert error:",b),await qa("SYNC_FAILED",{error:b}),alert("DB Save Failed: "+b.message),new Error("Update failed: "+b.message);console.log("[StopNotifications] Synced",g.length,"notifications to server"),await qa("SYNC_SUCCESS",{count:g.length}),g.length>0,g.length>0}catch(x){console.error("[StopNotifications] Sync error:",x),tt({title:"  ",description:`    ,      cloud: ${x.message||String(x)}`,variant:"destructive"})}finally{r(!1)}},[]);p.useEffect(()=>{const f=v=>{v.key===Fc&&v.newValue&&t(JSON.parse(v.newValue))},g=v=>{v.detail&&t(v.detail)};return window.addEventListener("storage",f),window.addEventListener("stop-notifications-changed",g),()=>{window.removeEventListener("storage",f),window.removeEventListener("stop-notifications-changed",g)}},[]);const i=p.useCallback(f=>{t(g=>{const v=g.findIndex(x=>x.stopId===f.stopId);let _;return v>=0?(_=[...g],_[v]=f):_=[...g,f],localStorage.setItem(Fc,JSON.stringify(_)),window.dispatchEvent(new CustomEvent("stop-notifications-changed",{detail:_})),s(_),f.push&&f.enabled&&tt({title:"  ",description:`   ${f.beforeMinutes}        "${f.stopName}"`}),_})},[s]),l=p.useCallback(f=>{t(g=>{const v=g.filter(_=>_.stopId!==f);return localStorage.setItem(Fc,JSON.stringify(v)),window.dispatchEvent(new CustomEvent("stop-notifications-changed",{detail:v})),s(v),v})},[s]),c=p.useCallback(f=>e.find(g=>g.stopId===f),[e]),u=p.useCallback(f=>{const g=e.find(v=>v.stopId===f);return(g==null?void 0:g.enabled)??!1},[e]),h=p.useCallback(async f=>{const g=f||e;await qa("BOOTSTRAP",{version:"v1.5.17.9.4",href:window.location.href,count:g.length}),await s(g)},[e,s]),m=p.useCallback(async()=>{t([]),localStorage.removeItem(Fc),window.dispatchEvent(new CustomEvent("stop-notifications-changed",{detail:[]}));try{const f=await L1();if(f){const{error:g}=await xn.from("stop_notification_subscriptions").update({stop_notifications:[]}).eq("endpoint",f);g?console.error("[StopNotifications] Clear server error:",g):console.log("[StopNotifications] Server notifications cleared")}}catch(f){console.error("Error clearing notifications:",f)}},[]);return{notifications:e,setNotification:i,removeNotification:l,getNotification:c,hasNotification:u,isSyncing:n,forceSync:h,clearAllNotifications:m}}const b7=8,S7=6,A1=e=>e?new Date(e*1e3).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--",N7=e=>e?new Date(e*1e3).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--",lh=e=>{if(!e)return null;const t=Math.floor(Date.now()/1e3),n=Math.round((e-t)/60);return n<=0?"":n===1?"1 ":`${n} `},mg=e=>{if(e==null)return"";const t=Math.round(e/60);return t===0?"":t>0?`+${t}'`:`${t}'`},O1=e=>{if(!e)return null;const t=Math.floor(Date.now()/1e3),n=Math.round((e-t)/60);return n<=0?"":n===1?"1 ":`${n} `},k7=e=>{try{if(!e||!Array.isArray(e)||e.length<2)return 0;let t=0;const n=6371e3;for(let r=0;r<e.length-1;r++){const s=e[r],i=e[r+1];if(!s||!i||typeof s.lat!="number"||typeof s.lng!="number"||typeof i.lat!="number"||typeof i.lng!="number"||Math.abs(s.lat)>90||Math.abs(i.lat)>90||Math.abs(s.lng)>180||Math.abs(i.lng)>180)continue;const l=s.lat*Math.PI/180,c=i.lat*Math.PI/180,u=(i.lat-s.lat)*Math.PI/180,h=(i.lng-s.lng)*Math.PI/180,m=Math.sin(u/2)*Math.sin(u/2)+Math.cos(l)*Math.cos(c)*Math.sin(h/2)*Math.sin(h/2),f=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)),g=n*f;isFinite(g)&&g>=0&&(t+=g)}return Math.round(t/1e3*10)/10}catch(t){return console.error("[UnifiedRoutePanel] Error calculating route distance:",t),0}};function C7({routeId:e,routeInfo:t,trips:n=[],vehicles:r=[],stops:s=[],selectedOperator:i,followedVehicle:l,nextStop:c,viewMode:u="overview",onClose:h,onStopClick:m,onVehicleFollow:f,onSwitchToStreet:g,onSwitchToOverview:v}){const _=iP(),[x,b]=p.useState("stops"),[w,S]=p.useState(!1),[k,j]=p.useState(0),[T,R]=p.useState(0),[E,B]=p.useState(null),{getNotification:q,setNotification:Y,removeNotification:te}=gd(),A="#6B8E23",{data:W,isLoading:P}=Df(e,i),Z=p.useMemo(()=>{if(!n||!Array.isArray(n)||!e)return[];try{return n.filter(Q=>Q&&Q.routeId===e)}catch(Q){return console.error("[UnifiedRoutePanel] Error filtering trips:",Q),[]}},[n,e]),$=p.useMemo(()=>{if(!r||!Array.isArray(r)||!e)return[];try{return r.filter(Q=>Q&&Q.routeId===e&&Q.latitude&&Q.longitude)}catch(Q){return console.error("[UnifiedRoutePanel] Error filtering vehicles:",Q),[]}},[r,e]),U=p.useMemo(()=>{try{if(l!=null&&l.tripId&&n&&Array.isArray(n)){const Q=n.find(he=>he&&he.tripId===l.tripId);if(Q)return Q}return Z&&Z.length>0?Z.find(Q=>Q&&Q.stopTimeUpdates&&Q.stopTimeUpdates.length>0)||Z[0]:void 0}catch(Q){console.error("[UnifiedRoutePanel] Error finding active trip:",Q);return}},[l,n,Z]),I=p.useMemo(()=>{try{const Q=new Map;return s&&Array.isArray(s)&&s.forEach(he=>{he&&he.stop_id&&Q.set(he.stop_id,he)}),Q}catch(Q){return console.error("[UnifiedRoutePanel] Error creating stop map:",Q),new Map}},[s]),O=p.useMemo(()=>{try{if(W!=null&&W.directions&&W.directions.length>0){const Q=W.directions[T]||W.directions[0];if(Q!=null&&Q.stops&&Q.stops.length>0){const he=new Map;return U!=null&&U.stopTimeUpdates&&Array.isArray(U.stopTimeUpdates)&&U.stopTimeUpdates.forEach(me=>{me&&me.stopId&&he.set(me.stopId,{arrivalTime:me.arrivalTime,arrivalDelay:me.arrivalDelay})}),Q.stops.map((me,Ue)=>{const Ze=he.get(me.stop_id),ze=I.get(me.stop_id);return{stopId:me.stop_id,stopName:me.stop_name||(ze==null?void 0:ze.stop_name)||me.stop_id,stopSequence:me.stop_sequence||Ue,routeIndex:Ue+1,arrivalTime:Ze==null?void 0:Ze.arrivalTime,arrivalDelay:Ze==null?void 0:Ze.arrivalDelay,isFirst:Ue===0,isLast:Ue===Q.stops.length-1}}).filter(me=>me&&me.stopId)}}return[]}catch(Q){return console.error("[UnifiedRoutePanel] Error getting route stops:",Q),[]}},[W,T,U,I]),F=p.useMemo(()=>l!=null&&l.stopId?l.stopId:null,[l==null?void 0:l.stopId]),X=p.useMemo(()=>{if(l&&F){const Q=O.findIndex(he=>he.stopId===F);if(Q>=0)return O.slice(Q)}if(U!=null&&U.stopTimeUpdates&&U.stopTimeUpdates.length>0){const Q=Math.floor(Date.now()/1e3),he=U.stopTimeUpdates.find(me=>me.arrivalTime&&me.arrivalTime>Q);if(he!=null&&he.stopId){const me=O.findIndex(Ue=>Ue.stopId===he.stopId);if(me>=0)return O.slice(me)}}return O},[l,F,O,U]),re=_?S7:b7,ae=p.useMemo(()=>{try{return!X||!Array.isArray(X)||X.length===0?1:Math.max(1,Math.ceil(X.length/re))}catch(Q){return console.error("[UnifiedRoutePanel] Error calculating totalPages:",Q),1}},[X,re]),ie=p.useMemo(()=>{try{if(!X||!Array.isArray(X))return[];const he=Math.max(0,Math.min(k,ae-1))*re;return X.slice(he,he+re)}catch(Q){return console.error("[UnifiedRoutePanel] Error paginating stops:",Q),[]}},[X,k,re,ae]),oe=p.useMemo(()=>{try{return!Z||!Array.isArray(Z)?[]:!$||!Array.isArray($)?[]:Z.filter(Q=>Q&&Q.tripId).map(Q=>{var he;try{const me=$.find(dt=>dt&&dt.tripId===Q.tripId);if(!me)return null;const Ue=Math.floor(Date.now()/1e3),ze=(Q.stopTimeUpdates&&Array.isArray(Q.stopTimeUpdates)?Q.stopTimeUpdates:[]).find(dt=>dt&&(dt.arrivalTime||0)>Ue),_t=ze!=null&&ze.stopId?((he=I.get(ze.stopId))==null?void 0:he.stop_name)||ze.stopId:null;return{trip:Q,vehicle:me,nextStop:_t,nextArrivalTime:ze==null?void 0:ze.arrivalTime}}catch(me){return console.error("[UnifiedRoutePanel] Error processing trip:",me,Q),null}}).filter(Boolean)}catch(Q){return console.error("[UnifiedRoutePanel] Error in liveTripsWithVehicles:",Q),[]}},[Z,$,I]),ge=(l==null?void 0:l.vehicleId)||(l==null?void 0:l.id),ce=(l==null?void 0:l.label)||ge||null,ke=W!=null&&W.directions&&W.directions.length>0?Array.from({length:W.directions.length},(Q,he)=>he):[],Oe=$.length,Pe=oe.length,Te=p.useMemo(()=>{var Q;try{if(!((Q=W==null?void 0:W.directions)!=null&&Q.length))return null;const he=W.directions[T]||W.directions[0];return!(he!=null&&he.shape)||!Array.isArray(he.shape)||he.shape.length<2?null:k7(he.shape)}catch(he){return console.error("[UnifiedRoutePanel] Error calculating route distance:",he),null}},[W,T]),We=p.useMemo(()=>{if(!F||O.length===0)return[];const Q=O.findIndex(he=>he.stopId===F);return Q<0?[]:O.slice(Q+1)},[F,O]),wt=p.useMemo(()=>{try{const Q=new Map;if(U!=null&&U.stopTimeUpdates&&Array.isArray(U.stopTimeUpdates)){const he=Math.floor(Date.now()/1e3);U.stopTimeUpdates.forEach(me=>{me&&me.stopId&&me.arrivalTime&&me.arrivalTime>he&&Q.set(me.stopId,{arrivalTime:me.arrivalTime,arrivalDelay:me.arrivalDelay,isLive:!0})})}return Q}catch(Q){return console.error("[UnifiedRoutePanel] Error in upcomingRealtimeMap:",Q),new Map}},[U]);if(p.useEffect(()=>{if(x==="stops"&&F&&O.length>0){const Q=O.findIndex(he=>he.stopId===F);if(Q>=0){const he=Math.floor(Q/re);j(he),setTimeout(()=>{const me=document.querySelector(`[data-stop-id="${F}"]`);me&&me.scrollIntoView({behavior:"smooth",block:"center"})},100)}}},[x,F,O,re]),p.useEffect(()=>{l!=null&&l.vehicleId},[l==null?void 0:l.vehicleId]),(!e||e==="all"||e===""||typeof e!="string")&&!l)return null;const kt=a.jsxs("div",{className:"h-full flex flex-col bg-white",children:[a.jsxs("div",{className:"flex items-center gap-2 p-3 flex-shrink-0",style:{backgroundColor:A},children:[a.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-lg bg-white/20 text-white font-bold text-sm",children:(t==null?void 0:t.route_short_name)||e}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm text-white truncate",children:(t==null?void 0:t.route_long_name)||` ${e}`}),w?a.jsx("div",{className:"flex items-center gap-2 text-xs text-white/90 mt-0.5",children:W&&a.jsxs(a.Fragment,{children:[a.jsx(af,{className:"h-3 w-3"}),a.jsx("span",{children:" "}),Te!==null&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mx-0.5 text-white/60",children:""}),a.jsxs("span",{children:[Te," km"]})]}),O.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mx-0.5 text-white/60",children:""}),a.jsx(It,{className:"h-3 w-3"}),a.jsxs("span",{children:[O.length," "]})]})]})}):a.jsx("div",{className:"flex items-center gap-1.5 text-xs text-white/90",children:l!=null&&l.timestamp?a.jsxs(a.Fragment,{children:[a.jsx($n,{className:"h-3 w-3"}),a.jsx("span",{children:new Date(l.timestamp*1e3).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),a.jsx("span",{className:"mx-1 text-white/60",children:""}),a.jsx(Gt,{className:"h-3 w-3"}),a.jsx("span",{children:ce})]}):a.jsxs(a.Fragment,{children:[a.jsx($n,{className:"h-3 w-3"}),a.jsx("span",{children:""}),a.jsx("span",{className:"mx-1 text-white/60",children:""}),a.jsx(Gt,{className:"h-3 w-3"}),a.jsx("span",{children:Oe})]})})]}),!_&&a.jsx(de,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white hover:bg-white/20",onClick:Q=>{Q.stopPropagation(),S(!w)},"data-no-drag":!0,children:w?a.jsx(Jr,{className:"h-3.5 w-3.5"}):a.jsx(ji,{className:"h-3.5 w-3.5"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white hover:bg-white/20",onClick:Q=>{Q.stopPropagation(),h()},"data-no-drag":!0,children:a.jsx(un,{className:"h-3.5 w-3.5"})})]}),!w&&l&&c&&a.jsx("div",{className:"bg-white p-4 border-b border-border",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center shrink-0",style:{backgroundColor:A},children:a.jsx(It,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-0.5",children:" "}),a.jsx("div",{className:"font-medium text-sm truncate",children:c.stopName})]}),a.jsxs("div",{className:"text-right shrink-0",children:[a.jsx("div",{className:"font-mono font-bold text-base",style:{color:A},children:N7(c.arrivalTime)}),lh(c.arrivalTime)&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[lh(c.arrivalTime),c.arrivalDelay!==void 0&&c.arrivalDelay!==0&&a.jsx("span",{className:`ml-1 ${c.arrivalDelay>0?"text-destructive":"text-green-500"}`,children:mg(c.arrivalDelay)})]})]})]})}),!w&&l&&g&&v&&a.jsxs("div",{className:"flex gap-2 p-4 pt-2 border-b border-border bg-white",children:[a.jsxs(de,{variant:u==="street"?"default":"outline",size:"sm",className:"flex-1 h-9 text-xs gap-1.5",onClick:g,style:u==="street"?{backgroundColor:A}:{},children:[a.jsx(V_,{className:"h-3.5 w-3.5"}),""]}),a.jsxs(de,{variant:u==="overview"?"default":"outline",size:"sm",className:"flex-1 h-9 text-xs gap-1.5",onClick:v,style:u==="overview"?{backgroundColor:A}:{},children:[a.jsx(hL,{className:"h-3.5 w-3.5"}),""]})]}),!w&&a.jsxs(qx,{value:x,onValueChange:Q=>b(Q),className:"flex-1 flex flex-col min-h-0 bg-white",children:[a.jsxs(vm,{className:"grid w-full grid-cols-4 h-9 mx-4 mt-2 shrink-0",children:[a.jsxs(Zr,{value:"stops",className:"text-xs gap-1.5",children:[a.jsx(It,{className:"h-3 w-3 text-green-600"}),"Live ",O.length>0&&a.jsx(Zn,{variant:"default",className:"h-4 px-1 text-[10px] bg-green-500",children:O.length})]}),a.jsxs(Zr,{value:"live",className:"text-xs gap-1.5",children:[a.jsx(zp,{className:"h-3 w-3 text-green-600"}),"Live ",Pe>0&&a.jsx(Zn,{variant:"default",className:"h-4 px-1 text-[10px] bg-green-500",children:Pe})]}),a.jsxs(Zr,{value:"planner",className:"text-xs gap-1.5",children:[a.jsx(Vl,{className:"h-3 w-3 text-green-600"}),"Live "]})]}),a.jsx(qr,{value:"stops",className:"flex-1 min-h-0 mt-0",children:a.jsxs("div",{className:"flex flex-col h-full",children:[ke.length>1&&a.jsx("div",{className:"flex items-center justify-center gap-2 px-3 py-2 border-b border-border bg-muted/30",children:a.jsxs(de,{variant:"ghost",size:"sm",className:"h-7 text-xs gap-1",onClick:()=>R(Q=>Q===0?1:0),children:[a.jsx(eL,{className:"h-3 w-3"})," ",T+1,"/",ke.length]})}),a.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 text-xs text-muted-foreground border-b border-border",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 rounded-full bg-primary/20",children:a.jsx("span",{className:"text-[10px]",children:""})}),O.length," "]}),ae>1&&a.jsxs("span",{children:[". ",k+1,"/",ae]})]}),a.jsx(ca,{className:"flex-1",children:a.jsx("div",{className:"p-2",children:P?a.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-muted-foreground",children:[a.jsx(qn,{className:"h-6 w-6 mb-2 animate-spin"}),a.jsx("p",{className:"text-sm",children:" ..."})]}):O.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-muted-foreground",children:[a.jsx(Gt,{className:"h-6 w-6 mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"  "})]}):ie.map((Q,he)=>{const me=O1(Q.arrivalTime),Ue=A1(Q.arrivalTime),Ze=mg(Q.arrivalDelay),ze=me==="",_t=Q.stopId===F,dt=q(Q.stopId);return a.jsxs("div",{"data-stop-id":Q.stopId,className:ye("flex items-start gap-3 p-3 rounded-xl transition-all mb-1",_t?"bg-green-50 border border-green-200 shadow-sm":"hover:bg-muted/50 active:bg-muted cursor-pointer"),onClick:()=>{_t||m==null||m(Q.stopId)},children:[a.jsxs("div",{className:"flex flex-col items-center pt-1",children:[a.jsx("div",{className:ye("w-3 h-3 rounded-full border-2",ze?"bg-green-500 border-green-500 shadow-[0_0_0_2px_rgba(34,197,94,0.2)]":_t?"bg-green-500 border-green-500":"bg-background border-muted-foreground/40")}),he<ie.length-1&&a.jsx("div",{className:"w-0.5 min-h-[2rem] flex-1 bg-muted-foreground/20 mt-1"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs font-mono text-muted-foreground min-w-[2em]",children:["(",Q.routeIndex,")"]}),a.jsx("span",{className:ye("text-sm truncate flex-1",_t?"font-bold text-foreground":"font-medium text-muted-foreground/90"),children:Q.stopName})]}),a.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[a.jsx($n,{className:"h-2.5 w-2.5 text-muted-foreground shrink-0"}),me&&a.jsx(Zn,{variant:ze?"default":"secondary",className:`text-[10px] px-1 py-0 h-4 font-mono ${ze?"bg-green-500 hover:bg-green-600":""}`,children:me}),Ue&&a.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",Ue,")"]}),Ze&&a.jsx("span",{className:`text-[10px] font-medium ${Ze.startsWith("+")?"text-orange-500":Ze.startsWith("-")?"text-green-500":"text-muted-foreground"}`,children:Ze})]})]}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:En=>{En.stopPropagation(),B({stopId:Q.stopId,stopName:Q.stopName})},title:dt!=null&&dt.enabled?" ":" ",children:a.jsx(Dn,{className:ye("h-3.5 w-3.5",dt!=null&&dt.enabled?"text-primary fill-primary":"text-muted-foreground")})})]},Q.stopId)})})}),ae>1&&a.jsxs("div",{className:"flex items-center justify-between p-2 border-t border-border",children:[a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>j(Q=>Math.max(0,Q-1)),disabled:k===0,className:"h-8 text-xs px-2",children:[a.jsx(Qk,{className:"h-4 w-4"}),"."]}),a.jsx("div",{className:"flex items-center gap-1.5",children:Array.from({length:Math.min(ae,5)}).map((Q,he)=>{const me=ae<=5||k<2?he:k>ae-3?ae-5+he:k-2+he;return a.jsx("button",{className:`w-2 h-2 rounded-full transition-colors ${me===k?"bg-primary":"bg-muted-foreground/30"}`,onClick:()=>j(me)},me)})}),a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>j(Q=>Math.min(ae-1,Q+1)),disabled:k===ae-1,className:"h-8 text-xs px-2",children:[".",a.jsx(Co,{className:"h-4 w-4"})]})]})]})}),a.jsx(qr,{value:"live",className:"flex-1 min-h-0 mt-0",children:a.jsx(ca,{className:"h-full",children:a.jsxs("div",{className:"p-3 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-border",children:[a.jsx(Gt,{className:"h-4 w-4 text-green-600"}),a.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[oe.length,"  "]})]}),oe.length===0?a.jsxs("div",{className:"text-center text-muted-foreground text-xs py-8",children:[a.jsx(zp,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"  live   "})]}):oe.map(({trip:Q,vehicle:he,nextStop:me,nextArrivalTime:Ue})=>{try{if(!he||!he.vehicleId&&!he.id)return null;const Ze=he.vehicleId||he.id||"unknown",ze=l&&(l.vehicleId===Ze||l.id===Ze);return a.jsxs("div",{className:ye("rounded-xl border p-3 transition-all duration-200",ze?"bg-green-50/50 border-green-500 shadow-sm ring-1 ring-green-500/20":"bg-white border-border hover:border-green-300 hover:shadow-sm"),children:[a.jsx("div",{className:"flex items-start justify-between gap-3",children:a.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:ye("h-10 w-10 rounded-full flex items-center justify-center shrink-0 transition-colors",ze?"bg-green-100 text-green-700":"bg-muted text-muted-foreground"),children:a.jsx(Gt,{className:"h-5 w-5"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"font-bold text-sm text-foreground",children:[" ",he.label||Ze]}),ze&&a.jsx(Zn,{variant:"default",className:"h-4 px-1.5 text-[10px] bg-green-600 hover:bg-green-700",children:""})]}),me&&a.jsxs("div",{className:"flex items-center gap-1.5 mt-1 text-xs text-muted-foreground",children:[a.jsx(It,{className:"h-3 w-3 shrink-0"}),a.jsxs("span",{className:"truncate",children:[": ",a.jsx("span",{className:"font-medium text-foreground",children:me})]})]})]})]})}),a.jsxs("div",{className:"mt-3 flex items-center justify-between pt-2 border-t border-border/50",children:[a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsx(zp,{className:ye("h-3 w-3",ze?"text-green-600 animate-pulse":"")}),a.jsx("span",{children:lh(Ue)?`  ${lh(Ue)}`:" ..."})]}),f&&a.jsx(de,{variant:ze?"default":"outline",size:"sm",className:ye("h-7 text-xs gap-1.5 ml-auto transition-all",ze?"bg-green-600 hover:bg-green-700 border-transparent":""),onClick:()=>f(Ze),children:ze?a.jsxs(a.Fragment,{children:[a.jsx(eC,{className:"h-3 w-3"}),""]}):a.jsxs(a.Fragment,{children:[a.jsx(V_,{className:"h-3 w-3"}),""]})})]})]},Ze)}catch(Ze){return console.error("[UnifiedRoutePanel] Error rendering live trip:",Ze,{trip:Q,vehicle:he}),null}}).filter(Boolean)]})})}),a.jsx(qr,{value:"planner",className:"flex-1 min-h-0 mt-0",children:a.jsx(ca,{className:"h-full",children:F?We.length===0?a.jsxs("div",{className:"p-2 text-center text-muted-foreground text-xs py-8",children:[a.jsx(It,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"   "})]}):a.jsxs("div",{className:"p-2 space-y-1",children:[(()=>{const Q=O.find(he=>he.stopId===F);return Q?a.jsxs("div",{className:"p-3 mb-2 rounded-lg border-2 border-primary/30 bg-primary/10",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),a.jsx("span",{className:"text-xs font-semibold text-muted-foreground",children:" "})]}),a.jsx("div",{className:"font-medium text-sm",children:Q.stopName})]}):null})(),We.map((Q,he)=>{const me=wt.get(Q.stopId),Ue=(me==null?void 0:me.isLive)||!1,Ze=O1(me==null?void 0:me.arrivalTime),ze=A1(me==null?void 0:me.arrivalTime),_t=mg(me==null?void 0:me.arrivalDelay);return a.jsxs("div",{className:ye("flex items-start gap-2 p-2.5 rounded-lg border transition-colors",Ue?"bg-green-50 border-green-200":"bg-muted/30 border-border hover:bg-muted/50"),onClick:()=>m==null?void 0:m(Q.stopId),children:[a.jsxs("div",{className:"flex flex-col items-center pt-0.5",children:[a.jsx("div",{className:ye("w-2.5 h-2.5 rounded-full border-2",Ue?"bg-green-500 border-green-500":"bg-muted-foreground border-muted-foreground")}),he<We.length-1&&a.jsx("div",{className:ye("w-0.5 flex-1 mt-0.5",Ue?"bg-green-300":"bg-muted-foreground/30"),style:{minHeight:"20px"}})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium text-sm truncate",children:Q.stopName}),Ue?a.jsx(Zn,{variant:"default",className:"h-4 px-1.5 text-[10px] bg-green-500 shrink-0",children:"Live"}):a.jsx(Zn,{variant:"secondary",className:"h-4 px-1.5 text-[10px] shrink-0",children:""})]}),Ue&&(me!=null&&me.arrivalTime)?a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx($n,{className:"h-3 w-3"}),a.jsx("span",{className:"font-mono",children:ze}),Ze&&a.jsxs("span",{children:["(",Ze,")"]}),_t&&a.jsx("span",{className:ye(_t.startsWith("+")?"text-destructive":"text-green-500"),children:_t})]}):a.jsx("div",{className:"text-xs text-muted-foreground",children:"    "})]})]},Q.stopId)})]}):a.jsxs("div",{className:"p-2 text-center text-muted-foreground text-xs py-8",children:[a.jsx(Vl,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"        "})]})})})]})]});if(_){const Q=typeof window<"u"?window.innerWidth:375,he=typeof window<"u"?window.innerHeight:667;return a.jsxs(a.Fragment,{children:[a.jsx(Ny,{initialPosition:{x:0,y:he*.3},initialSize:{width:Q,height:he*.7},minSize:{width:320,height:400},maxSize:{width:Q,height:he*.9},className:"rounded-t-xl overflow-hidden border border-border shadow-xl",zIndex:2500,children:kt}),E&&a.jsx(Of,{stopId:E.stopId,stopName:E.stopName,currentSettings:q(E.stopId),onSave:me=>{Y(me),B(null)},onRemove:me=>{te(me),B(null)},onClose:()=>B(null)})]})}const ot=typeof window<"u"?window.innerHeight:800;return a.jsxs(a.Fragment,{children:[a.jsx(Ny,{initialPosition:{x:16,y:60},initialSize:{width:380,height:Math.min(600,ot-100)},minSize:{width:320,height:300},maxSize:{width:500,height:ot-20},className:"rounded-lg overflow-hidden border border-border shadow-xl",zIndex:2500,children:kt}),E&&a.jsx(Of,{stopId:E.stopId,stopName:E.stopName,currentSettings:q(E.stopId),onSave:Q=>{Y(Q),B(null)},onRemove:Q=>{te(Q),B(null)},onClose:()=>B(null)})]})}const D1=e=>{if(!e)return"";const t=Math.floor((Date.now()-e)/1e3);return t<60?`${t} `:t<3600?`${Math.floor(t/60)} `:`${Math.floor(t/3600)} `};function j7(){var f,g,v;const[e,t]=p.useState(null),[n,r]=p.useState(!0),s=p.useCallback(async()=>{try{const{data:_,error:x}=await xn.functions.invoke("gtfs-proxy/health");!x&&_&&t(_)}catch(_){console.error("Failed to fetch health status:",_)}finally{r(!1)}},[]);p.useEffect(()=>{s();const _=setInterval(s,3e4);return()=>clearInterval(_)},[s]);const i=_=>{if(!_)return{status:"unknown",color:"text-muted-foreground"};const b=(_.lastSuccess?Date.now()-_.lastSuccess:1/0)<6e4;return _.consecutiveFailures>=3?{status:"error",color:"text-red-500"}:_.consecutiveFailures>0||!b?{status:"warning",color:"text-yellow-500"}:{status:"ok",color:"text-green-500"}},l=i(e==null?void 0:e.gtfs),c=i(e==null?void 0:e.siri),u=l.status==="error"&&c.status==="error"?"error":l.status==="error"||c.status==="error"?"warning":l.status==="ok"||c.status==="ok"?"ok":"unknown",h=u==="ok"?J3:u==="warning"?Ex:u==="error"?rC:uf,m=u==="ok"?"text-green-500":u==="warning"?"text-yellow-500":u==="error"?"text-red-500":"text-muted-foreground";return n?a.jsx("div",{className:"flex items-center gap-1",children:a.jsx(uf,{className:"h-3 w-3 text-muted-foreground animate-pulse"})}):a.jsx(Kl,{children:a.jsxs(ya,{children:[a.jsx(xa,{asChild:!0,children:a.jsxs("div",{className:"flex items-center gap-1 cursor-help",children:[a.jsx(h,{className:`h-3 w-3 ${m}`}),a.jsxs("div",{className:"flex gap-0.5",children:[a.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${l.status==="ok"?"bg-green-500":l.status==="warning"?"bg-yellow-500":l.status==="error"?"bg-red-500":"bg-muted"}`}),a.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${c.status==="ok"?"bg-green-500":c.status==="warning"?"bg-yellow-500":c.status==="error"?"bg-red-500":"bg-muted"}`})]})]})}),a.jsxs(bo,{side:"top",className:"text-xs p-2 space-y-1.5",children:[a.jsx("div",{className:"font-semibold mb-1",children:"  "}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${l.status==="ok"?"bg-green-500":l.status==="warning"?"bg-yellow-500":"bg-red-500"}`}),a.jsx("span",{children:"GTFS-RT"})]}),a.jsx("span",{className:"text-muted-foreground",children:(f=e==null?void 0:e.gtfs)!=null&&f.lastSuccess?D1(e.gtfs.lastSuccess):"..."})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${c.status==="ok"?"bg-green-500":c.status==="warning"?"bg-yellow-500":"bg-red-500"}`}),a.jsx("span",{children:"SIRI"})]}),a.jsx("span",{className:"text-muted-foreground",children:(g=e==null?void 0:e.siri)!=null&&g.lastSuccess?D1(e.siri.lastSuccess):"..."})]}),(v=e==null?void 0:e.gtfs)!=null&&v.avgResponseTime?a.jsxs("div",{className:"text-muted-foreground pt-1 border-t border-border",children:[".. : ",Math.round(e.gtfs.avgResponseTime),"ms"]}):null]})]})})}class E7 extends p.Component{constructor(){super(...arguments);Sw(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("[ErrorBoundary] Uncaught error:",n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg m-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-destructive mb-2",children:""}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"       panel."}),a.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"text-sm text-primary hover:underline",children:" "}),this.state.error&&a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs cursor-pointer text-muted-foreground",children:" "}),a.jsxs("pre",{className:"text-xs mt-2 p-2 bg-muted rounded overflow-auto",children:[this.state.error.toString(),this.state.error.stack]})]})]}):this.props.children}}const $1=(e,t,n,r,s)=>{const i=n?`#${n}`:"#0ea5e9",c="/MotionAG/images/bus-icon.png".replace("//","/"),u=t?48:r?40:32;return r||t?Qe.divIcon({className:"route-vehicle-marker cursor-pointer pointer-events-auto leaflet-interactive leaflet-marker-icon",html:`
        <div style="
          position: relative;
          display: flex;
          flex-direction: column;
          align-items: center;
        ">
          ${s?`
            <div style="
              background: ${i};
              color: white;
              font-size: ${t?"12px":"10px"};
              font-weight: 700;
              padding: 3px 6px;
              border-radius: 4px;
              margin-bottom: 2px;
              white-space: nowrap;
              box-shadow: 0 2px 6px rgba(0,0,0,0.4);
              border: 2px solid white;
              z-index: 10;
            ">${s}</div>
          `:""}
          <div style="
            width: ${u}px;
            height: ${u}px;
            filter: drop-shadow(0 3px 6px rgba(0,0,0,0.4));
          ">
            <img src="${c}" 
              style="width: 100%; height: 100%; object-fit: contain;"
              alt="Bus"
            />
          </div>
        </div>
      `,iconSize:[u,s?u+28:u],iconAnchor:[u/2,s?u+28:u/2]}):Qe.divIcon({className:"vehicle-marker cursor-pointer pointer-events-auto leaflet-interactive leaflet-marker-icon",html:`
      <div style="
        width: ${u}px;
        height: ${u}px;
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
      ">
        <img src="${c}" 
          style="width: 100%; height: 100%; object-fit: contain;"
          alt="Bus"
        />
      </div>
    `,iconSize:[u,u],iconAnchor:[u/2,u/2]})},SP=(e,t,n,r)=>{const s=m=>m*Math.PI/180,i=m=>m*180/Math.PI,l=s(r-t),c=Math.sin(l)*Math.cos(s(n)),u=Math.cos(s(e))*Math.sin(s(n))-Math.sin(s(e))*Math.cos(s(n))*Math.cos(l);return(i(Math.atan2(c,u))+360)%360},z1=(e,t,n,r)=>{const s=e?"#22c55e":t!==void 0?n?`#${n}`:"#0ea5e9":"#f97316",i=t!==void 0?"w-6 h-6":"w-5 h-5",l=t!==void 0?"text-[10px]":"",c=e?"stop-vehicle-present":r?"stop-imminent-arrival":"";return Qe.divIcon({className:"stop-marker",html:`
      <div class="${i} rounded-full flex items-center justify-center shadow-md border-2 border-white ${c}" style="background: ${s}">
        ${t!==void 0?`<span class="${l} font-bold text-white">${t}</span>`:`<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              ${e?'<rect x="3" y="4" width="18" height="14" rx="2"/><circle cx="7" cy="18" r="1.5" fill="white"/><circle cx="17" cy="18" r="1.5" fill="white"/>':'<circle cx="12" cy="12" r="3"/>'}
            </svg>`}
      </div>
    `,iconSize:t!==void 0?[24,24]:[20,20],iconAnchor:t!==void 0?[12,12]:[10,10]})},T7=(e,t,n)=>{let r=0,s=1/0;for(let i=0;i<n.length;i++){const l=n[i].lng-t,c=n[i].lat-e,u=l*l+c*c;u<s&&(s=u,r=i)}return r},P7=(e,t,n)=>{if(n.length<2)return null;let r={lat:e,lng:t},s=1/0,i=0,l=0;for(let u=0;u<n.length-1;u++){const h=n[u],m=n[u+1],f=m.lng-h.lng,g=m.lat-h.lat,v=f*f+g*g;if(v===0)continue;let _=((t-h.lng)*f+(e-h.lat)*g)/v;_=Math.max(0,Math.min(1,_));const x=h.lng+_*f,b=h.lat+_*g,w=Math.pow(t-x,2)+Math.pow(e-b,2);w<s&&(s=w,r={lat:b,lng:x},i=u,l=SP(h.lat,h.lng,m.lat,m.lng))}const c=Math.pow(.002,2);return s>c?null:{...r,bearing:l,index:i}},B1=e=>{if(!e)return{text:"",color:"#888",isLive:!1};const n=Date.now()/1e3-e;return n<30?{text:"",color:"#22c55e",isLive:!0}:n<60?{text:` ${Math.floor(n)} .`,color:"#22c55e",isLive:!0}:n<120?{text:" 1 ",color:"#eab308",isLive:!0}:n<300?{text:` ${Math.floor(n/60)} `,color:"#eab308",isLive:!0}:n<600?{text:` ${Math.floor(n/60)} `,color:"#f97316",isLive:!1}:{text:` ${Math.floor(n/60)} `,color:"#ef4444",isLive:!1}},pg=e=>e==null?"":`${(e*3.6).toFixed(1)} km/h`,Do=e=>e?new Date(e*1e3).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",hour12:!1}):null,ch=e=>{if(e==null)return"";const t=Math.round(e/60);return t===0?"( )":t>0?`(+${t} )`:`(${t} )`},M7=({refreshInterval:e,lastUpdate:t,isLoading:n})=>{const[r,s]=p.useState(e),[i,l]=p.useState(100);return p.useEffect(()=>{if(!t)return;const c=()=>{const h=Date.now(),m=t*1e3,f=(h-m)/1e3,g=Math.max(0,e-f),v=g/e*100;s(Math.ceil(g)),l(v)};c();const u=setInterval(c,100);return()=>clearInterval(u)},[t,e]),n?a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsx("div",{className:"w-3.5 h-3.5 border-2 border-primary border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"..."})]}):a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",title:`   ${r} .`,children:[a.jsx("div",{className:"relative w-4 h-4",children:a.jsxs("svg",{className:"w-4 h-4 -rotate-90",viewBox:"0 0 20 20",children:[a.jsx("circle",{cx:"10",cy:"10",r:"8",fill:"none",stroke:"currentColor",strokeWidth:"2",opacity:"0.2"}),a.jsx("circle",{cx:"10",cy:"10",r:"8",fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"2",strokeDasharray:`${i/100*50.265} 50.265`,strokeLinecap:"round",className:"transition-all duration-100"})]})}),a.jsxs("span",{children:[r,""]})]})};function I7({vehicles:e,trips:t=[],stops:n=[],routeNamesMap:r,selectedRoute:s="all",selectedOperator:i,onRouteClose:l,isLoading:c,highlightedStop:u,followVehicleId:h,onFollowVehicle:m,refreshInterval:f=10,lastUpdate:g,deepLinkStopId:v,onStopPanelChange:_,mapStyle:x,onMapStyleChange:b}){var pe;const w=p.useRef(null),S=p.useRef(null),k=p.useRef(null),j=p.useRef(null),[T,R]=p.useState(null),[E,B]=p.useState(!1),[q,Y]=p.useState(!1),[te,A]=p.useState(null),[W,P]=p.useState(null),Z=p.useRef(new Map),$=p.useRef(null),[U,I]=p.useState(!1),[O,F]=p.useState(null),X=p.useRef(null),re=p.useCallback(D=>{if(!D)return null;const K=D.routeId;if((typeof K=="string"||typeof K=="number")&&String(K)!=="all")return String(K);const z=D.tripId;if(z&&Array.isArray(t)){const ee=t.find(we=>(we==null?void 0:we.tripId)&&String(we.tripId)===String(z)),le=ee==null?void 0:ee.routeId;if((typeof le=="string"||typeof le=="number")&&String(le)!=="all")return String(le)}const H=D.vehicleId||D.id;if(H&&Array.isArray(t)){const ee=t.find(we=>{const $e=(we==null?void 0:we.vehicleId)||(we==null?void 0:we.vehicleLabel);return $e&&String($e)===String(H)}),le=ee==null?void 0:ee.routeId;if((typeof le=="string"||typeof le=="number")&&String(le)!=="all")return String(le)}return null},[t]),ae=p.useRef([]),ie=p.useRef(null),oe=p.useRef(null),ge=p.useRef([]),ce=p.useRef([]),ke=p.useRef(null),[Oe,Pe]=p.useState(null),[Te,We]=p.useState(null),[wt,kt]=p.useState("street"),[ot,Q]=p.useState(!1),[he,me]=p.useState(()=>{try{const D=localStorage.getItem("motionbus_map_style");if(D==="light"||D==="dark"||D==="satellite")return D}catch{}return"light"}),Ue=x??he,Ze=D=>{b?b(D):me(D)},ze=p.useRef(null);p.useEffect(()=>{try{localStorage.setItem("motionbus_map_style",Ue)}catch{}},[Ue]);const[_t,dt]=p.useState(null),{notifications:En,setNotification:Yn,removeNotification:Rt,getNotification:rn,hasNotification:Jt}=gd();_P(t||[],r,En,!0);const Et=p.useCallback((D,K)=>{dt({stopId:D,stopName:K}),_==null||_(D)},[_]),bt=p.useCallback(()=>{dt(null),_==null||_(null)},[_]);p.useEffect(()=>{if(v&&n.length>0&&ot){const D=n.find(K=>K.stop_id===v);D&&(Et(D.stop_id,D.stop_name||D.stop_id),w.current&&D.stop_lat&&D.stop_lon&&w.current.flyTo([D.stop_lat,D.stop_lon],16,{animate:!0,duration:1}))}},[v,n,ot,Et]);const[Fn,ue]=p.useState(null),[Ve,Ie]=p.useState(!1),Fe=p.useRef(null),Ot=p.useRef(new Map),Mt=p.useRef(new Map),_n=p.useRef(new Map),Jn=p.useRef(new Map),{data:Tt}=Df(s!=="all"?s:null,i),sn=p.useMemo(()=>{if(!T)return null;const D=e.find(K=>(K.vehicleId||K.id)===T);return re(D)||null},[T,e,re]),bn=p.useMemo(()=>{if(i!=="all")return i},[i]),{data:mn}=Df(sn,bn),qe=T?mn:Tt,Be=s!=="all"&&r?r.get(s):void 0;p.useEffect(()=>{Mt.current.forEach(D=>{D.forEach(K=>{var z;return(z=w.current)==null?void 0:z.removeLayer(K)})}),Mt.current.clear(),_n.current.forEach(D=>{D.forEach(K=>{var z;return(z=w.current)==null?void 0:z.removeLayer(K)})}),_n.current.clear(),Ot.current.clear()},[s]),p.useEffect(()=>{if(h&&h!==T){R(h),kt("street"),Y(!1),A(null),P(null);const D=e.find(z=>(z.vehicleId||z.id)===h);if(D!=null&&D.latitude&&(D!=null&&D.longitude)){const z=Date.now(),H=[{lat:D.latitude-3e-4,lng:D.longitude-3e-4,timestamp:z-2e3},{lat:D.latitude-2e-4,lng:D.longitude-2e-4,timestamp:z-1500},{lat:D.latitude-1e-4,lng:D.longitude-1e-4,timestamp:z-1e3},{lat:D.latitude,lng:D.longitude,timestamp:z}];Ot.current.set(h,H)}const K=setTimeout(()=>{D!=null&&D.latitude&&(D!=null&&D.longitude)&&w.current&&w.current.setView([D.latitude,D.longitude],17,{animate:!1})},100);return()=>clearTimeout(K)}},[h,T,e]),p.useEffect(()=>{if(!j.current)return;const D=z=>{var $e,Le,Me;const H=z.target;console.log("[VehicleMap] Map container clicked - Target:",H.tagName,H.className);const ee=H.closest(".stop-notification-btn");if(ee){const Re=ee.getAttribute("data-stop-id"),rt=ee.getAttribute("data-stop-name");Re&&rt&&(Et(Re,rt),($e=w.current)==null||$e.closePopup());return}const le=H.closest(".plan-from-here-btn");if(le){const Re=le.getAttribute("data-stop-id"),rt=le.getAttribute("data-stop-name"),nt=parseFloat(le.getAttribute("data-lat")||"0"),at=parseFloat(le.getAttribute("data-lng")||"0");Re&&rt&&nt&&at&&(console.log("[VehicleMap] Planning FROM stop:",rt),P({stopId:Re,stopName:rt,lat:nt,lng:at}),A(null),Y(!0),(Le=w.current)==null||Le.closePopup());return}const we=H.closest(".plan-to-here-btn");if(we){const Re=we.getAttribute("data-stop-id"),rt=we.getAttribute("data-stop-name"),nt=parseFloat(we.getAttribute("data-lat")||"0"),at=parseFloat(we.getAttribute("data-lng")||"0");Re&&rt&&nt&&at&&(console.log("[VehicleMap] Planning TO stop:",rt),We({type:"destination",lat:nt,lng:at}),A(null),Y(!0),(Me=w.current)==null||Me.closePopup());return}},K=j.current;return K.addEventListener("click",D),()=>{K.removeEventListener("click",D)}},[Et]),p.useEffect(()=>{const D=z=>{var H;Et(z.detail.stopId,z.detail.stopName),(H=w.current)==null||H.closePopup()},K=z=>{var H;(H=w.current)==null||H.closePopup()};return window.addEventListener("openStopNotification",D),window.addEventListener("selectRoute",K),()=>{window.removeEventListener("openStopNotification",D),window.removeEventListener("selectRoute",K)}},[Et]),p.useEffect(()=>{if(!T||!w.current||!Tt)return;const D=e.find(nt=>(nt.vehicleId||nt.id)===T);if(!(D!=null&&D.latitude)||!(D!=null&&D.longitude))return;const K=Tt.directions[0];if(!K||!K.shape||K.shape.length<2)return;const z=D.routeId&&r?r.get(D.routeId):null,H=z!=null&&z.route_color?`#${z.route_color}`:"#f97316",ee=T7(D.latitude,D.longitude,K.shape);(Mt.current.get(T)||[]).forEach(nt=>{var at;return(at=w.current)==null?void 0:at.removeLayer(nt)});const we=Math.max(0,ee-80),$e=ee;if($e<=we)return;const Me=K.shape.slice(we,$e+1).map(nt=>[nt.lat,nt.lng]),Re=[],rt=Me.length-1;for(let nt=0;nt<rt;nt++){const at=nt/rt,vt=.2+at*.6,St=4+at*6,ut=Qe.polyline([Me[nt],Me[nt+1]],{color:H,weight:St,opacity:vt,lineCap:"round",lineJoin:"round"}).addTo(w.current);Re.push(ut)}if(Me.length>10){const nt=Me.slice(-15),at=Qe.polyline(nt,{color:"white",weight:3,opacity:.5,lineCap:"round",lineJoin:"round"}).addTo(w.current);Re.push(at)}Mt.current.set(T,Re)},[T,e,r,Tt]);const ct=p.useMemo(()=>{const D=new Map;return t.forEach(K=>{K.tripId&&D.set(K.tripId,K)}),D},[t]),ht=p.useMemo(()=>{const D=new Map;return n.forEach(K=>{D.set(K.stop_id,K)}),D},[n]),Lt=D=>{try{if(!D||!D.tripId||!ct||ct.size===0)return null;const K=ct.get(D.tripId);if(!K||!K.stopTimeUpdates||!Array.isArray(K.stopTimeUpdates)||K.stopTimeUpdates.length===0)return null;const z=D.currentStopSequence||0,H=K.stopTimeUpdates.filter(we=>we&&typeof we=="object").sort((we,$e)=>(we.stopSequence||0)-($e.stopSequence||0));if(H.length===0)return null;const ee=H.find(we=>we&&(we.stopSequence||0)>z);if(!ee||!ee.stopId)return null;const le=ht&&ht.size>0?ht.get(ee.stopId):null;return{stopId:ee.stopId,stopName:(le==null?void 0:le.stop_name)||ee.stopId||" ",arrivalTime:ee.arrivalTime,arrivalDelay:ee.arrivalDelay}}catch(K){return console.error("[VehicleMap] Error in getNextStopInfo:",K,D),null}},Ct=D=>{const K=[];return t.forEach(z=>{var ee;const H=(ee=z.stopTimeUpdates)==null?void 0:ee.find(le=>le.stopId===D);if(H&&H.arrivalTime){const le=z.routeId&&r?r.get(z.routeId):null,we=e.find($e=>$e.tripId===z.tripId);K.push({tripId:z.tripId||z.id,routeId:z.routeId,routeShortName:le==null?void 0:le.route_short_name,routeLongName:le==null?void 0:le.route_long_name,routeColor:le==null?void 0:le.route_color,vehicleLabel:(we==null?void 0:we.label)||z.vehicleLabel,vehicleId:(we==null?void 0:we.vehicleId)||z.vehicleId,arrivalTime:H.arrivalTime,arrivalDelay:H.arrivalDelay})}}),K.sort((z,H)=>(z.arrivalTime||0)-(H.arrivalTime||0)),K.slice(0,5)};p.useEffect(()=>{if(!j.current||w.current)return;w.current=Qe.map(j.current,{center:[35,33],zoom:9,maxZoom:19,minZoom:3,zoomControl:!0,zoomAnimation:!1,markerZoomAnimation:!1,fadeAnimation:!1});const D=w.current.createPane("vehicle-pane");D.style.zIndex="800",D.style.pointerEvents="none",S.current=Qe.markerClusterGroup({chunkedLoading:!0,spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,maxClusterRadius:50,zoomToBoundsOnClick:!1,animate:!1,animateAddingMarkers:!1,clusterPane:"vehicle-pane",chunkedLoading:!0,spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,maxClusterRadius:50,zoomToBoundsOnClick:!1,animate:!1,animateAddingMarkers:!1,iconCreateFunction:H=>{const ee=H.getChildCount(),le=ee<10?"small":ee<50?"medium":"large",$e={small:36,medium:44,large:52}[le];return Qe.divIcon({html:`<div><span>${ee}</span></div>`,className:`vehicle-cluster vehicle-cluster-${le} leaflet-marker-icon`,iconSize:Qe.point($e,$e)})}}),S.current.on("clusterclick",H=>{const ee=H.layer;if(ee&&typeof ee.getBounds=="function"){const le=ee.getBounds();w.current&&le&&le.isValid&&le.isValid()&&w.current.fitBounds(le,{padding:[50,50],maxZoom:18,animate:!1,duration:0})}}),k.current=Qe.markerClusterGroup({chunkedLoading:!0,spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,maxClusterRadius:60,disableClusteringAtZoom:15,zoomToBoundsOnClick:!1,animate:!1,animateAddingMarkers:!1,iconCreateFunction:H=>{const ee=H.getChildCount(),le=ee<10?"small":ee<50?"medium":"large",$e={small:28,medium:34,large:40}[le];return Qe.divIcon({html:`<div><span>${ee}</span></div>`,className:`stop-cluster stop-cluster-${le}`,iconSize:Qe.point($e,$e)})}}),k.current.on("clusterclick",H=>{const ee=H.layer;if(ee&&typeof ee.getBounds=="function"){const le=ee.getBounds();w.current&&le&&le.isValid&&le.isValid()&&w.current.fitBounds(le,{padding:[50,50],maxZoom:18,animate:!1,duration:0})}}),w.current.addLayer(S.current),w.current.addLayer(k.current);const K=()=>{if(w.current&&S.current&&k.current)try{const H=w.current.getZoom(),ee=S.current,le=k.current;typeof H=="number"&&ee._map&&le._map&&typeof ee._map._zoom=="number"?(console.log("[VehicleMap] Map fully ready with zoom:",H),Q(!0)):(console.log("[VehicleMap] Map not fully ready, retrying..."),setTimeout(K,100))}catch(H){console.log("[VehicleMap] Map getZoom failed, retrying...",H),setTimeout(K,100)}},z=setTimeout(()=>{requestAnimationFrame(K)},150);return()=>{var H;clearTimeout(z),Q(!1),(H=w.current)==null||H.remove(),w.current=null}},[]),p.useEffect(()=>{if(!w.current)return;const D=K=>{var H,ee;if((ee=(H=K.originalEvent)==null?void 0:H.target)==null?void 0:ee.closest(".leaflet-marker-icon, .leaflet-cluster-animated")){console.log("[VehicleMap] Map click ignored - target is a marker/cluster");return}Oe&&(We({type:Oe,lat:K.latlng.lat,lng:K.latlng.lng}),Pe(null))};return w.current.on("click",D),()=>{var K;(K=w.current)==null||K.off("click",D)}},[Oe]),p.useEffect(()=>{if(!w.current)return;X.current&&w.current.removeLayer(X.current);let D;return Ue==="satellite"?D=Qe.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:'Map data  <a href="https://www.esri.com/">Esri</a>',maxZoom:19}):Ue==="dark"?D=Qe.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}):D=Qe.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}),X.current=D,D.addTo(w.current),()=>{w.current&&D&&w.current.removeLayer(D)}},[Ue]),p.useEffect(()=>{if(w.current){if(ze.current&&(w.current.removeLayer(ze.current),ze.current=null),u&&u.stop_lat&&u.stop_lon){const D=Qe.divIcon({className:"highlighted-stop-marker",html:`
          <style>
            @keyframes nearbyPing {
              0% { transform: scale(1); opacity: 0.8; }
              75%, 100% { transform: scale(2); opacity: 0; }
            }
            @keyframes nearbyPulse {
              0%, 100% { transform: scale(1); opacity: 0.6; }
              50% { transform: scale(1.3); opacity: 0.3; }
            }
            .nearby-ping {
              animation: nearbyPing 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
            }
            .nearby-pulse {
              animation: nearbyPulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }
          </style>
          <div style="position: relative; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
            <div class="nearby-ping" style="position: absolute; inset: -8px; border-radius: 50%; background: #22c55e;"></div>
            <div class="nearby-pulse" style="position: absolute; inset: -4px; border-radius: 50%; background: #22c55e;"></div>
            <div style="width: 32px; height: 32px; border-radius: 50%; background: #22c55e; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 14px rgba(34, 197, 94, 0.5); border: 3px solid white;">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
            </div>
          </div>
        `,iconSize:[40,40],iconAnchor:[20,20]});ze.current=Qe.marker([u.stop_lat,u.stop_lon],{icon:D,zIndexOffset:2e3}).addTo(w.current).bindPopup(`
          <div class="p-2">
            <div class="font-bold text-green-600">  </div>
            <div class="text-sm font-medium">${u.stop_name||u.stop_id}</div>
          </div>
        `),w.current.setView([u.stop_lat,u.stop_lon],16,{animate:!1})}return()=>{w.current&&ze.current&&(w.current.removeLayer(ze.current),ze.current=null)}}},[u]),p.useEffect(()=>{if(!ot||!S.current||!w.current)return;const D=S.current;if(!D._map){console.log("[VehicleMap] Cluster group not yet added to map, skipping vehicle update");return}if(typeof D._map._zoom>"u"){console.log("[VehicleMap] Map _zoom not defined, skipping vehicle update");return}try{const H=w.current.getZoom();if(H==null){console.log("[VehicleMap] Map zoom undefined, skipping vehicle update");return}}catch(H){console.log("[VehicleMap] Error getting map zoom, skipping vehicle update:",H);return}const K=e.filter(H=>H.latitude!==void 0&&H.longitude!==void 0&&typeof H.latitude=="number"&&typeof H.longitude=="number"&&!isNaN(H.latitude)&&!isNaN(H.longitude)),z=new Set;K.forEach(H=>{var zr,rs,ss,Ia;const ee=H.vehicleId||H.id;z.add(ee);const le=T===ee,we=s!=="all"&&H.routeId===s,$e=H.routeId&&r?r.get(H.routeId):null,Le=$e==null?void 0:$e.route_color,Me=$e?`${$e.route_short_name} - ${$e.route_long_name}`:H.routeId,Re=Lt(H),rt=Z.current.get(ee);let nt=H.latitude,at=H.longitude,vt=H.bearing;const ut=le&&((rs=(zr=qe==null?void 0:qe.directions)==null?void 0:zr[0])==null?void 0:rs.shape)||(we?(Ia=(ss=Tt==null?void 0:Tt.directions)==null?void 0:ss[0])==null?void 0:Ia.shape:null);if(ut){const He=P7(H.latitude,H.longitude,ut);He&&(nt=He.lat,at=He.lng,vt=He.bearing)}const Ge=Jn.current.get(ee);vt===void 0&&Ge&&Math.sqrt(Math.pow(nt-Ge.lat,2)+Math.pow(at-Ge.lng,2))>5e-5&&(vt=SP(Ge.lat,Ge.lng,nt,at));const ft=Qe.latLng(nt,at);if(rt){rt.setLatLng(ft),Jn.current.set(ee,{lat:nt,lng:at}),rt.setIcon($1(vt,le,Le,we,$e==null?void 0:$e.route_short_name)),rt.setZIndexOffset(we?2e3:le?1e3:0),rt.off("click"),rt.on("click",on=>{Qe.DomEvent.stopPropagation(on);const Sr=re(H);if(console.log("[VehicleMap] Bus clicked (existing) - ID:",ee,"Trip:",H.tripId,"Route:",Sr),w.current&&w.current.closePopup(),m==null||m(ee),kt("street"),H.tripId){if(console.log("[VehicleMap] Opening RoutePlanner for trip:",H.tripId),A({vehicleId:ee,tripId:H.tripId,routeId:Sr||void 0}),Y(!0),Re){const Xn=n.find(ai=>ai.stop_id===Re.stopId);Xn&&Xn.stop_lat&&Xn.stop_lon&&P({stopId:Xn.stop_id,stopName:Xn.stop_name||Xn.stop_id,lat:Xn.stop_lat,lng:Xn.stop_lon})}}else Y(!1)});const He=Me&&Me.length>25?Me.substring(0,25)+"...":Me,Pt=Re!=null&&Re.stopName&&Re.stopName.length>20?Re.stopName.substring(0,20)+"...":Re==null?void 0:Re.stopName,Mi=`
          <div class="p-1.5" style="max-width: 200px;">
            <div class="font-semibold text-xs mb-1 flex items-center gap-1.5">
              <span class="inline-block w-2 h-2 rounded-full flex-shrink-0" style="background: ${Le?`#${Le}`:"hsl(var(--primary))"}"></span>
              <span style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${He||`#${ee.substring(0,6)}`}</span>
            </div>
            <div class="space-y-0.5 text-xs">
              <div><span class="text-muted-foreground">:</span> ${H.label||ee.substring(0,8)}</div>
              <div><span class="text-muted-foreground">:</span> ${pg(H.speed)}</div>
              ${Pt?`<div class="pt-0.5 border-t border-border mt-0.5"><span class="text-muted-foreground">:</span> ${Pt}${Re!=null&&Re.arrivalTime?` (${Do(Re.arrivalTime)})`:""}</div>`:""}
            </div>
          </div>
        `;rt.getTooltip()?rt.setTooltipContent(Mi):rt.bindTooltip(Mi,{direction:"top",offset:[0,-15],className:"vehicle-tooltip",permanent:!1});const br=Re?`
          <div class="mt-2 pt-2 border-t border-border">
            <div class="flex items-center gap-1 text-primary font-medium mb-1">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
               
            </div>
            <div class="text-sm">
              <div class="font-medium">${Re.stopName}</div>
              ${Re.arrivalTime?`<div class="text-muted-foreground">: <span class="text-foreground font-mono">${Do(Re.arrivalTime)}</span> ${ch(Re.arrivalDelay)}</div>`:""}
            </div>
          </div>
        `:"";rt.setPopupContent(`
          <div class="p-3 min-w-[220px]">
            <div class="font-semibold text-base mb-2 flex items-center gap-2">
              <span class="inline-block w-3 h-3 rounded-full" style="background: ${Le?`#${Le}`:"hsl(var(--primary))"}"></span>
               ${ee}
            </div>
            <div class="space-y-1.5 text-sm">
              ${H.label?`<div class="flex justify-between"><span class="text-muted-foreground">:</span><span class="font-mono">${H.label}</span></div>`:""}
              ${Me?`<div class="flex justify-between gap-2"><span class="text-muted-foreground">:</span><span class="text-right font-medium" style="color: ${Le?`#${Le}`:"inherit"}">${Me}</span></div>`:""}
              <div class="flex justify-between"><span class="text-muted-foreground">:</span><span>${pg(H.speed)}</span></div>
              ${H.bearing!==void 0?`<div class="flex justify-between"><span class="text-muted-foreground">:</span><span>${H.bearing.toFixed(0)}</span></div>`:""}
              ${H.currentStatus?`<div class="flex justify-between"><span class="text-muted-foreground">:</span><span>${H.currentStatus}</span></div>`:""}
              <div class="flex justify-between items-center pt-1 border-t border-border mt-2">
                <span class="text-muted-foreground">:</span>
                <span class="flex items-center gap-1.5">
                  ${(()=>{const on=B1(H.timestamp);return`<span class="inline-block w-2 h-2 rounded-full ${on.isLive?"animate-pulse":""}" style="background: ${on.color}"></span>
                    <span class="text-xs" style="color: ${on.color}">${on.text}</span>`})()}
                </span>
              </div>
            </div>
            ${br}
          </div>
        `)}else{Jn.current.set(ee,{lat:H.latitude,lng:H.longitude});const He=Qe.marker([H.latitude,H.longitude],{icon:$1(H.bearing,le,Le,we,$e==null?void 0:$e.route_short_name),zIndexOffset:we?2e3:le?1e3:0,interactive:!0,bubblingMouseEvents:!1,pane:"vehicle-pane"});He.on("click",br=>{Qe.DomEvent.stopPropagation(br);const on=re(H);if(console.log("[VehicleMap] Bus clicked (new) - ID:",ee,"Trip:",H.tripId,"Route:",on),w.current&&w.current.closePopup(),m==null||m(ee),kt("street"),H.tripId){if(console.log("[VehicleMap] Opening RoutePlanner for trip:",H.tripId),A({vehicleId:ee,tripId:H.tripId,routeId:on||void 0}),Y(!0),Pt){const Sr=n.find(Xn=>Xn.stop_id===Pt.stopId);Sr&&Sr.stop_lat&&Sr.stop_lon&&P({stopId:Sr.stop_id,stopName:Sr.stop_name||Sr.stop_id,lat:Sr.stop_lat,lng:Sr.stop_lon})}}else Y(!1)});const Pt=Lt(H),Mi=Pt?`
          <div class="mt-2 pt-2 border-t border-border">
            <div class="flex items-center gap-1 text-primary font-medium mb-1">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
               
            </div>
            <div class="text-sm">
              <div class="font-medium">${Pt.stopName}</div>
              ${Pt.arrivalTime?`<div class="text-muted-foreground">: <span class="text-foreground font-mono">${Do(Pt.arrivalTime)}</span> ${ch(Pt.arrivalDelay)}</div>`:""}
            </div>
          </div>
        `:"";He.bindPopup(`
          <div class="p-3 min-w-[220px]">
            <div class="font-semibold text-base mb-2 flex items-center gap-2">
              <span class="inline-block w-3 h-3 rounded-full" style="background: ${Le?`#${Le}`:"hsl(var(--primary))"}"></span>
               ${ee}
            </div>
            <div class="space-y-1.5 text-sm">
              ${H.label?`<div class="flex justify-between"><span class="text-muted-foreground">:</span><span class="font-mono">${H.label}</span></div>`:""}
              ${Me?`<div class="flex justify-between gap-2"><span class="text-muted-foreground">:</span><span class="text-right font-medium" style="color: ${Le?`#${Le}`:"inherit"}">${Me}</span></div>`:""}
              <div class="flex justify-between"><span class="text-muted-foreground">:</span><span>${pg(H.speed)}</span></div>
              ${H.bearing!==void 0?`<div class="flex justify-between"><span class="text-muted-foreground">:</span><span>${H.bearing.toFixed(0)}</span></div>`:""}
              ${H.currentStatus?`<div class="flex justify-between"><span class="text-muted-foreground">:</span><span>${H.currentStatus}</span></div>`:""}
              <div class="flex justify-between items-center pt-1 border-t border-border mt-2">
                <span class="text-muted-foreground">:</span>
                <span class="flex items-center gap-1.5">
                  ${(()=>{const br=B1(H.timestamp);return`<span class="inline-block w-2 h-2 rounded-full ${br.isLive?"animate-pulse":""}" style="background: ${br.color}"></span>
                    <span class="text-xs" style="color: ${br.color}">${br.text}</span>`})()}
                </span>
              </div>
            </div>
            ${Mi}
          </div>
        `),Z.current.set(ee,He),S.current.addLayer(He)}le&&w.current&&w.current.setView(ft,w.current.getZoom(),{animate:!1})}),Z.current.forEach((H,ee)=>{var le;z.has(ee)||((le=S.current)==null||le.removeLayer(H),Z.current.delete(ee))}),!T&&K.length>0&&w.current&&Z.current.size===K.length&&Z.current.size<=K.length&&Array.from(Z.current.keys()).every(ee=>z.has(ee))&&(Z.current.size,K.length)},[e,T,r,ct,ht,s,qe,sn,ot]);const Xt=p.useMemo(()=>{const D=new Set;return e.forEach(K=>{const z=String(K.currentStatus),H=z==="STOPPED_AT"||z==="1"||K.stopId&&K.speed!==void 0&&K.speed<1;K.stopId&&H&&D.add(K.stopId)}),D},[e]),qt=p.useRef(null);p.useEffect(()=>()=>{qt.current!==null&&navigator.geolocation.clearWatch(qt.current)},[]),p.useEffect(()=>{if(!(!O||!w.current))if($.current)$.current.setLatLng([O.lat,O.lng]);else{const D=Qe.divIcon({className:"user-location-marker",html:`
          <div class="relative">
            <div class="absolute inset-0 bg-blue-500 rounded-full animate-ping opacity-50"></div>
            <div class="relative w-4 h-4 bg-blue-500 rounded-full border-2 border-white shadow-lg"></div>
          </div>
        `,iconSize:[16,16],iconAnchor:[8,8]});$.current=Qe.marker([O.lat,O.lng],{icon:D}).bindPopup('<div class="p-2 text-sm font-medium">   </div>').addTo(w.current)}},[O]);const Kt=p.useRef(!1),Sn=(D=!0)=>{var z;const K=typeof D=="boolean"?D:!0;O&&K&&((z=w.current)==null||z.setView([O.lat,O.lng],16,{animate:!1})),qt.current===null&&(K&&(Kt.current=!0,I(!0)),qt.current!==null&&navigator.geolocation.clearWatch(qt.current),qt.current=navigator.geolocation.watchPosition(H=>{const{latitude:ee,longitude:le}=H.coords;F({lat:ee,lng:le}),I(!1),Kt.current&&w.current&&(w.current.setView([ee,le],16,{animate:!1}),Kt.current=!1)},H=>{if(console.error("Geolocation error:",H),I(!1),Kt.current=!1,K){let ee="       .";switch(H.code){case H.PERMISSION_DENIED:ee="    .";break;case H.POSITION_UNAVAILABLE:ee="    .";break;case H.TIMEOUT:ee="   .";break}tt({title:" ",description:ee,variant:"destructive"})}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}))};p.useEffect(()=>{navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"geolocation"}).then(D=>{D.state==="granted"&&Sn(!1)})},[]);const dn=(D,K,z,H)=>{const le=D*Math.PI/180,we=z*Math.PI/180,$e=(z-D)*Math.PI/180,Le=(H-K)*Math.PI/180,Me=Math.sin($e/2)*Math.sin($e/2)+Math.cos(le)*Math.cos(we)*Math.sin(Le/2)*Math.sin(Le/2);return 6371e3*(2*Math.atan2(Math.sqrt(Me),Math.sqrt(1-Me)))},Se=p.useMemo(()=>{if(!O)return null;const D=[];if(n.forEach(K=>{if(K.stop_lat===void 0||K.stop_lon===void 0)return;const z=t.filter(ee=>{var le;return(le=ee.stopTimeUpdates)==null?void 0:le.some(we=>we.stopId===K.stop_id&&we.arrivalTime)});if(z.length===0)return;const H=dn(O.lat,O.lng,K.stop_lat,K.stop_lon);D.push({stop:K,distance:H,arrivals:z})}),D.sort((K,z)=>K.distance-z.distance),D.length===0){let K=null;return n.forEach(z=>{if(z.stop_lat===void 0||z.stop_lon===void 0)return;const H=dn(O.lat,O.lng,z.stop_lat,z.stop_lon);(!K||H<K.distance)&&(K={stop:z,distance:H})}),K}return D[0]},[O,n,t]);p.useEffect(()=>{if(!O||!(Se!=null&&Se.stop)){ue(null),Fe.current&&w.current&&(w.current.removeLayer(Fe.current),Fe.current=null);return}const D=Se.stop;if(!D.stop_lat||!D.stop_lon)return;(async()=>{Ie(!0);try{const H=await(await fetch(`https://router.project-osrm.org/route/v1/foot/${O.lng},${O.lat};${D.stop_lon},${D.stop_lat}?overview=full&geometries=geojson`)).json();if(H.routes&&H.routes[0]){const ee=H.routes[0],le=ee.geometry.coordinates;if(ue({distance:ee.distance,duration:ee.duration,geometry:le}),w.current){Fe.current&&w.current.removeLayer(Fe.current);const we=le.map($e=>[$e[1],$e[0]]);Fe.current=Qe.polyline(we,{color:"#3b82f6",weight:4,opacity:.8,dashArray:"8, 12",lineCap:"round"}).addTo(w.current)}}}catch(z){console.error("Error fetching walking route:",z)}finally{Ie(!1)}})()},[O,(pe=Se==null?void 0:Se.stop)==null?void 0:pe.stop_id]),p.useEffect(()=>{!O||!$.current||$.current.setLatLng([O.lat,O.lng])},[O]),p.useEffect(()=>{if(!ot||!k.current||!w.current)return;const D=k.current;if(!D._map){console.log("[VehicleMap] Stop cluster group not yet added to map, skipping stop update");return}if(typeof D._map._zoom>"u"){console.log("[VehicleMap] Map _zoom not defined for stops, skipping stop update");return}try{const z=w.current.getZoom();if(z==null){console.log("[VehicleMap] Map zoom undefined for stops, skipping stop update");return}}catch(z){console.log("[VehicleMap] Error getting map zoom for stops, skipping:",z);return}if(k.current.clearLayers(),!E)return;n.filter(z=>z.stop_lat!==void 0&&z.stop_lon!==void 0&&typeof z.stop_lat=="number"&&typeof z.stop_lon=="number"&&!isNaN(z.stop_lat)&&!isNaN(z.stop_lon)).forEach(z=>{const H=Xt.has(z.stop_id),ee=Ct(z.stop_id),le=Jt(z.stop_id),we=Math.floor(Date.now()/1e3),$e=ee.some(ut=>{if(!ut.arrivalTime)return!1;const Ge=ut.arrivalTime-we;return Ge>0&&Ge<=120}),Le=Qe.marker([z.stop_lat,z.stop_lon],{icon:z1(H,void 0,void 0,$e)}),Me=z.stop_name||z.stop_id,Re=ee[0],rt=Re?`<div class="font-medium">${Me}</div><div class="text-xs text-muted-foreground">: ${Do(Re.arrivalTime)}</div>`:`<div class="font-medium">${Me}</div>`;Le.bindTooltip(rt,{direction:"top",offset:[0,-10],className:"stop-tooltip",permanent:!1}),Le.on("click",()=>{Et(z.stop_id,z.stop_name||z.stop_id)});const nt=H?"#22c55e":"#f97316",at=H?'<div class="text-green-500 font-medium mt-2 pt-2 border-t border-border">   </div>':"",vt=le?'<span class="inline-block ml-2 px-1.5 py-0.5 bg-primary text-primary-foreground text-[10px] rounded font-medium"></span>':"";let St="";ee.length>0?St=`
          <div class="mt-3 pt-2 border-t border-border">
            <div class="font-medium text-sm mb-2 flex items-center gap-1">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
               
            </div>
            <div class="space-y-2">
              ${ee.map(ut=>{const Ge=ut.routeColor?`#${ut.routeColor}`:"#0ea5e9",ft=ut.arrivalDelay!==void 0&&ut.arrivalDelay!==0?`<span class="${ut.arrivalDelay>0?"text-red-500":"text-green-500"}">${ch(ut.arrivalDelay)}</span>`:"";return`
                  <div class="flex items-center gap-2 text-sm">
                    <span class="font-bold px-1.5 py-0.5 rounded text-white text-xs" style="background: ${Ge}">${ut.routeShortName||ut.routeId||"?"}</span>
                    <span class="font-mono text-primary">${Do(ut.arrivalTime)}</span>
                    ${ft}
                    ${ut.vehicleLabel?`<span class="text-muted-foreground text-xs">(${ut.vehicleLabel})</span>`:""}
                  </div>
                `}).join("")}
            </div>
          </div>
        `:St='<div class="mt-2 pt-2 border-t border-border text-sm text-muted-foreground">   </div>',Le.bindPopup(`
        <div class="p-3 min-w-[220px] max-w-[300px]">
          <div class="font-semibold text-base mb-2 flex items-center gap-2">
            <span class="inline-block w-2 h-2 rounded-full" style="background: ${nt}"></span>
            ${z.stop_name||""}${vt}
          </div>
          <div class="space-y-1.5 text-sm">
            <div class="flex justify-between"><span class="text-muted-foreground">ID:</span><span class="font-mono">${z.stop_id}</span></div>
            ${z.stop_code?`<div class="flex justify-between"><span class="text-muted-foreground">:</span><span class="font-mono">${z.stop_code}</span></div>`:""}
          </div>
          ${at}
          ${St}
          <div class="mt-3 grid grid-cols-2 gap-2 border-t border-border pt-2">
            <button data-stop-id="${z.stop_id}" data-stop-name="${(z.stop_name||z.stop_id).replace(/"/g,"&quot;")}" data-lat="${z.stop_lat}" data-lng="${z.stop_lon}" class="plan-from-here-btn py-1.5 px-2 bg-blue-50 text-blue-700 text-[11px] font-semibold rounded-md border border-blue-200 hover:bg-blue-100 transition-colors flex items-center justify-center gap-1.5">
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="1"/></svg>
               
            </button>
            <button data-stop-id="${z.stop_id}" data-stop-name="${(z.stop_name||z.stop_id).replace(/"/g,"&quot;")}" data-lat="${z.stop_lat}" data-lng="${z.stop_lon}" class="plan-to-here-btn py-1.5 px-2 bg-red-50 text-red-700 text-[11px] font-semibold rounded-md border border-red-200 hover:bg-red-100 transition-colors flex items-center justify-center gap-1.5">
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                
            </button>
          </div>
          <div class="mt-2">
            <button data-stop-id="${z.stop_id}" data-stop-name="${(z.stop_name||z.stop_id).replace(/"/g,"&quot;")}" class="stop-notification-btn w-full py-2 px-3 bg-primary/10 text-primary text-sm font-medium rounded-md hover:bg-primary hover:text-white transition-all flex items-center justify-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
               
            </button>
          </div>
        </div>
      `,{className:"stop-popup",maxWidth:320}),k.current.addLayer(Le)})},[n,E,Xt,t,e,r,ot,Jt]),p.useEffect(()=>{if(!w.current)return;oe.current&&(w.current.removeLayer(oe.current),oe.current=null),ge.current.forEach(le=>{var we;return(we=w.current)==null?void 0:we.removeLayer(le)}),ge.current=[];const D=qe||Tt,K=sn||s,z=K&&K!=="all"&&r?r.get(K):Be;if(!T&&s==="all"){ke.current=null;return}if(!D){ke.current=null;return}const H=(z==null?void 0:z.route_color)||"0ea5e9",ee=D.directions[0];if(ee&&ee.shape.length>0){const le=ee.shape.map(Le=>[Le.lat,Le.lng]);oe.current=Qe.polyline(le,{color:`#${H}`,weight:5,opacity:.8,lineCap:"round",lineJoin:"round"}).addTo(w.current);const we=Math.max(5,Math.floor(ee.shape.length/15));for(let Le=we;Le<ee.shape.length-1;Le+=we){const Me=ee.shape[Le-1],Re=ee.shape[Le],rt=Re.lng-Me.lng,nt=Re.lat-Me.lat,at=Math.atan2(rt,nt)*(180/Math.PI),vt=Qe.divIcon({className:"route-direction-arrow",html:`
            <div style="transform: rotate(${at}deg); width: 20px; height: 20px; display: flex; align-items: center; justify-content: center;">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="#${H}" stroke="white" stroke-width="1.5">
                <path d="M12 2L6 12h4v10h4V12h4L12 2z"/>
              </svg>
            </div>
          `,iconSize:[20,20],iconAnchor:[10,10]}),St=Qe.marker([Re.lat,Re.lng],{icon:vt,interactive:!1}).addTo(w.current);ge.current.push(St)}const $e=sn||s;if(!T&&ke.current!==$e){const Le=Qe.latLngBounds(le);w.current.fitBounds(Le,{padding:[50,50],maxZoom:14}),ke.current=$e}}},[s,Tt,Be,qe,T,sn,r]),p.useEffect(()=>{if(!w.current)return;ce.current.forEach(le=>{var we;return(we=w.current)==null?void 0:we.removeLayer(le)}),ce.current=[];const D=qe||Tt,K=sn||s,z=K&&K!=="all"&&r?r.get(K):Be;if(!T&&s==="all"||!D)return;const H=(z==null?void 0:z.route_color)||"0ea5e9",ee=D.directions[0];ee&&ee.stops.forEach((le,we)=>{if(!le.lat||!le.lng)return;const $e=Xt.has(le.stop_id),Le=we+1,Me=t.filter(vt=>{var St;return vt.routeId===K&&((St=vt.stopTimeUpdates)==null?void 0:St.length)}).map(vt=>{var Ge;const St=(Ge=vt.stopTimeUpdates)==null?void 0:Ge.find(ft=>ft.stopId===le.stop_id);if(!St||!St.arrivalTime)return null;const ut=e.find(ft=>ft.tripId===vt.tripId);return{tripId:vt.tripId,vehicleId:(ut==null?void 0:ut.vehicleId)||(ut==null?void 0:ut.id)||vt.vehicleId,vehicleLabel:(ut==null?void 0:ut.label)||vt.vehicleLabel,arrivalTime:St.arrivalTime,arrivalDelay:St.arrivalDelay}}).filter(vt=>vt!==null).sort((vt,St)=>vt.arrivalTime-St.arrivalTime),Re=Qe.marker([le.lat,le.lng],{icon:z1($e,Le,H),zIndexOffset:1e3-we}),rt=Me[0],nt=rt?`<div class="font-medium">${le.stop_name}</div><div class="text-xs text-muted-foreground">: ${Do(rt.arrivalTime)}</div>`:`<div class="font-medium">${le.stop_name}</div>`;Re.bindTooltip(nt,{direction:"top",offset:[0,-10],className:"stop-tooltip",permanent:!1});let at="";Me.length>0?at=`
          <div class="mt-2 pt-2 border-t border-gray-300">
            <div class="flex items-center gap-1 text-xs font-medium mb-1.5" style="color: #0ea5e9;">
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
               
            </div>
            ${Me.slice(0,3).map(St=>{const ut=Do(St.arrivalTime),Ge=ch(St.arrivalDelay),ft=Math.floor(Date.now()/1e3),zr=Math.round((St.arrivalTime-ft)/60),rs=zr<=0?"":`${zr} `,ss=(St.arrivalDelay||0)>60?"color: #ef4444;":(St.arrivalDelay||0)<-30?"color: #22c55e;":"";return`
            <div class="flex items-center justify-between py-1.5 border-b border-gray-200 last:border-0">
              <div class="flex items-center gap-1.5">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-primary"><rect x="3" y="4" width="18" height="14" rx="2"/><circle cx="7" cy="18" r="1.5"/><circle cx="17" cy="18" r="1.5"/></svg>
                <span class="text-xs">${St.vehicleLabel||St.vehicleId||""}</span>
              </div>
              <div class="text-right">
                <div class="text-xs font-semibold">${ut}</div>
                <div class="text-[10px]" style="${ss}">${rs} ${Ge}</div>
              </div>
            </div>
          `}).join("")}
          </div>
        `:at=`
          <div class="mt-2 pt-2 border-t border-gray-300">
            <div class="text-xs text-gray-500 italic">   ETA</div>
          </div>
        `,Re.bindPopup(`
        <div class="p-3 min-w-[220px]">
          <div class="font-semibold text-base mb-2 flex items-center gap-2">
            <span class="inline-flex items-center justify-center w-6 h-6 rounded-full text-white text-sm font-bold" style="background: #${H}">${Le}</span>
            ${le.stop_name}
          </div>
          <div class="text-sm text-gray-600">
             ${Le}  ${ee.stops.length}
          </div>
          ${at}
          <div class="mt-3 pt-2 border-t border-gray-300">
            <button data-stop-id="${le.stop_id}" data-stop-name="${(le.stop_name||le.stop_id).replace(/"/g,"&quot;")}" class="stop-notification-btn w-full py-2 px-3 bg-primary text-primary-foreground text-sm font-medium rounded-md hover:opacity-90 transition-opacity flex items-center justify-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
               
            </button>
          </div>
        </div>
      `,{className:"stop-popup",maxWidth:280}),Re.addTo(w.current),ce.current.push(Re)})},[s,Tt,Be,Xt,t,e,qe,T,sn,r]),p.useEffect(()=>{if(!T||!w.current)return;const D=e.find(K=>(K.vehicleId||K.id)===T);if(D!=null&&D.latitude&&(D!=null&&D.longitude)&&wt==="street"){const K=w.current.getZoom();w.current.setView([D.latitude,D.longitude],K<15?17:K,{animate:!1})}},[e,T,wt]);const ii=p.useCallback(()=>{var D;if(kt("overview"),w.current&&((D=Tt==null?void 0:Tt.directions[0])!=null&&D.shape.length)){const K=Tt.directions[0].shape.map(H=>[H.lat,H.lng]),z=Qe.latLngBounds(K);w.current.fitBounds(z,{padding:[50,50],maxZoom:14,animate:!1})}},[Tt]),oi=p.useCallback(()=>{kt("street");const D=e.find(K=>(K.vehicleId||K.id)===T);D!=null&&D.latitude&&(D!=null&&D.longitude)&&w.current&&w.current.setView([D.latitude,D.longitude],18)},[e,T]),$r=T?e.find(D=>(D.vehicleId||D.id)===T):null,Ps=$r!=null&&$r.routeId&&r?r.get($r.routeId):null,ns=p.useCallback(D=>{const K=n.find(z=>z.stop_id===D);K&&K.stop_lat&&K.stop_lon&&w.current&&w.current.setView([K.stop_lat,K.stop_lon],17,{animate:!1})},[n]),V=p.useCallback(D=>{if(!w.current)return;ae.current.forEach(H=>{var ee;return(ee=w.current)==null?void 0:ee.removeLayer(H)}),ae.current=[],ie.current&&(w.current.removeLayer(ie.current),ie.current=null);const K=[],z=[];if(D.steps.forEach((H,ee)=>{const le=[H.from.lat,H.from.lng],we=[H.to.lat,H.to.lng];K.push(le),ee===D.steps.length-1&&K.push(we);const $e=H.type==="walk"?"#6b7280":H.routeColor?`#${H.routeColor}`:"#0ea5e9";if(z.push({points:[le,we],color:$e,dashed:H.type==="walk"}),ee===0){const Le=Qe.divIcon({className:"route-origin-marker",html:`<div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center shadow-lg border-2 border-white">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="4" fill="white"/>
            </svg>
          </div>`,iconSize:[24,24],iconAnchor:[12,12]}),Me=Qe.marker(le,{icon:Le}).addTo(w.current);Me.bindPopup(`<div class="p-2 text-sm font-medium">${H.from.name}</div>`),ae.current.push(Me)}if(ee===D.steps.length-1){const Le=Qe.divIcon({className:"route-dest-marker",html:`<div class="w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg border-2 border-white">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
          </div>`,iconSize:[24,24],iconAnchor:[12,24]}),Me=Qe.marker(we,{icon:Le}).addTo(w.current);Me.bindPopup(`<div class="p-2 text-sm font-medium">${H.to.name}</div>`),ae.current.push(Me)}}),z.forEach(H=>{const ee=Qe.polyline(H.points,{color:H.color,weight:5,opacity:.8,dashArray:H.dashed?"10, 10":void 0}).addTo(w.current);ie.current||(ie.current=ee)}),K.length>0){const H=Qe.latLngBounds(K);w.current.fitBounds(H,{padding:[80,80],maxZoom:15})}},[]),fe=p.useCallback((D,K)=>{if(!w.current)return;const z=Qe.divIcon({className:`route-${D}-marker`,html:`<div class="w-6 h-6 ${D==="origin"?"bg-blue-500":"bg-red-500"} rounded-full flex items-center justify-center shadow-lg border-2 border-white animate-bounce">
        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          ${D==="origin"?'<circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="4" fill="white"/>':'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>'}
        </svg>
      </div>`,iconSize:[24,24],iconAnchor:[12,D==="origin"?12:24]}),H=Qe.marker([K.lat,K.lng],{icon:z}).addTo(w.current);H.bindPopup(`<div class="p-2 text-sm font-medium">${K.name}</div>`),ae.current.push(H),w.current.setView([K.lat,K.lng],15,{animate:!1})},[]);return p.useEffect(()=>{!q&&w.current&&(ae.current.forEach(D=>{var K;return(K=w.current)==null?void 0:K.removeLayer(D)}),ae.current=[],ie.current&&(w.current.removeLayer(ie.current),ie.current=null))},[q]),a.jsxs("div",{className:"relative h-full w-full rounded-lg overflow-hidden",children:[a.jsx("div",{ref:j,className:"h-full w-full"}),a.jsx(BW,{isOpen:q,onClose:()=>{Y(!1),Pe(null),P(null)},stops:n,trips:t,vehicles:e,routeNamesMap:r,userLocation:O,onRouteSelect:V,onLocationSelect:fe,onRequestMapClick:D=>Pe(D),mapClickLocation:Te,selectedVehicleTrip:te,initialOriginStop:W,onClearVehicleTrip:()=>{A(null),P(null),Y(!1)},onTripStopClick:(D,K,z)=>{w.current&&w.current.setView([K,z],17,{animate:!1})}}),(s!=="all"&&!q||T&&!q)&&(()=>{try{const D=$r||(T&&Array.isArray(e)?e.find(ee=>ee&&(ee.vehicleId||ee.id)===T):null),K=(D?re(D):null)||s;if(console.log("[VehicleMap] Render Panel:",{followedVehicleId:T,vehicleRouteId:D==null?void 0:D.routeId,selectedRoute:s,effectiveRouteId:K}),(!K||K==="all"||K==="")&&!D)return null;const z=K&&K!=="all"?K:(D==null?void 0:D.routeId)||"unknown";if(z==="all"&&!D)return null;const H=D!=null&&D.routeId&&r?r.get(D.routeId):null;return a.jsx(E7,{children:a.jsx(C7,{routeId:z,routeInfo:H||Ps||Be||void 0,trips:t,vehicles:e,stops:n,selectedOperator:i,followedVehicle:D||null,nextStop:D?(()=>{try{return Lt(D)}catch(ee){return console.error("[VehicleMap] Error getting next stop info:",ee),null}})():null,viewMode:wt,onClose:()=>{T?(R(null),m==null||m(null),Mt.current.forEach(ee=>{ee.forEach(le=>{var we;return(we=w.current)==null?void 0:we.removeLayer(le)})}),Mt.current.clear(),s!=="all"&&(l==null||l())):l==null||l()},onStopClick:ns,onVehicleFollow:ee=>{R(ee),m==null||m(ee)},onVehicleFocus:ee=>{ee.latitude&&ee.longitude&&w.current&&w.current.setView([ee.latitude,ee.longitude],18)},onSwitchToStreet:oi,onSwitchToOverview:ii})})}catch(D){return console.error("[VehicleMap] Error rendering UnifiedRoutePanel:",D),null}})(),c&&a.jsx("div",{className:"absolute inset-0 bg-background/50 backdrop-blur-sm flex items-center justify-center",children:a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"..."})]})}),a.jsxs("div",{className:`absolute right-2 z-[1000] flex flex-col gap-1 transition-all duration-300 ${Se&&O&&!_t?"bottom-[280px]":"top-2"}`,children:[T&&a.jsx(de,{variant:"destructive",size:"icon",className:"h-8 w-8 rounded-full shadow-md transition-all duration-150 active:scale-90 animate-pulse",onClick:()=>{R(null),m==null||m(null),Mt.current.forEach(D=>{D.forEach(K=>{var z;return(z=w.current)==null?void 0:z.removeLayer(K)})}),Mt.current.clear()},title:" ",children:a.jsx(un,{className:"h-4 w-4"})}),a.jsx(de,{variant:"secondary",size:"icon",className:`h-8 w-8 rounded-full shadow-md transition-all duration-150 active:scale-90 ${E?"bg-orange-500 text-white hover:bg-orange-600":"bg-card/90 backdrop-blur-sm hover:bg-card hover:scale-105"}`,onClick:()=>B(!E),title:E?`  (${n.length})`:`  (${n.length})`,children:a.jsx(It,{className:"h-3.5 w-3.5"})}),a.jsx(de,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-md bg-card/90 backdrop-blur-sm hover:bg-card transition-all duration-150 hover:scale-105 active:scale-90",onClick:Sn,disabled:U,title:" ",children:a.jsx(jx,{className:`h-3.5 w-3.5 ${U?"animate-pulse":""} ${O?"text-blue-500":""}`})}),a.jsx(de,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-md bg-card/90 backdrop-blur-sm hover:bg-card transition-all duration-150 hover:scale-105 active:scale-90",title:" ",onClick:()=>{w.current&&w.current.setView([35,33],9,{animate:!1})},children:a.jsx(kh,{className:"h-3.5 w-3.5"})}),a.jsx(de,{variant:"secondary",size:"icon",className:`h-8 w-8 rounded-full shadow-md backdrop-blur-sm transition-all duration-150 hover:scale-105 active:scale-90 ${Ue!=="light"?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-card/90 hover:bg-card"}`,title:Ue==="light"?" ":Ue==="dark"?" ":" ",onClick:()=>Ze(Ue==="light"?"dark":Ue==="dark"?"satellite":"light"),children:a.jsx(cL,{className:"h-3.5 w-3.5"})}),a.jsx(de,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-md bg-card/90 backdrop-blur-sm hover:bg-card transition-all duration-150 hover:scale-105 active:scale-90",title:"",onClick:()=>{var D;return(D=w.current)==null?void 0:D.zoomIn()},children:a.jsx(CL,{className:"h-3.5 w-3.5"})}),a.jsx(de,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-md bg-card/90 backdrop-blur-sm hover:bg-card transition-all duration-150 hover:scale-105 active:scale-90",title:"",onClick:()=>{var D;return(D=w.current)==null?void 0:D.zoomOut()},children:a.jsx(jL,{className:"h-3.5 w-3.5"})}),a.jsx(de,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-md bg-card/90 backdrop-blur-sm hover:bg-card transition-all duration-150 hover:scale-105 active:scale-90",title:"",onClick:async()=>{const D={title:"Motion - Cyprus Public Transport",text:"      ",url:window.location.href};if(navigator.share)try{await navigator.share(D)}catch(K){K.name!=="AbortError"&&console.error("Share failed:",K)}else try{await navigator.clipboard.writeText(window.location.href),tt({title:"Link ",description:" link   clipboard"})}catch{tt({title:"",description:"      link",variant:"destructive"})}},children:a.jsx(nC,{className:"h-3.5 w-3.5"})})]}),Se&&O&&!_t&&s==="all"&&!T&&a.jsx(f7,{stop:Se.stop,distance:Se.distance,arrivals:Ct(Se.stop.stop_id),walkingRoute:Fn,isLoadingRoute:Ve,currentNotificationSettings:rn(Se.stop.stop_id),onClose:()=>{F(null),ue(null),Fe.current&&w.current&&(w.current.removeLayer(Fe.current),Fe.current=null)},onOpenDetails:()=>{Et(Se.stop.stop_id,Se.stop.stop_name||Se.stop.stop_id)},onNavigate:()=>{var D;Se.stop.stop_lat&&Se.stop.stop_lon&&((D=w.current)==null||D.setView([Se.stop.stop_lat,Se.stop.stop_lon],17,{animate:!0}))},onSaveNotification:Yn,onRemoveNotification:Rt}),a.jsx("div",{className:"absolute bottom-4 left-4 glass-card rounded-lg px-3 py-2 text-sm",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:e.filter(D=>D.latitude&&D.longitude).length}),a.jsx("span",{className:"text-muted-foreground ml-1",children:""})]}),a.jsx("div",{className:"border-l border-border pl-3",children:a.jsx(j7,{})}),a.jsx(M7,{refreshInterval:f,lastUpdate:g,isLoading:c})]})}),_t&&s==="all"&&!T&&a.jsx(c7,{stopId:_t.stopId,stopName:_t.stopName,arrivals:Ct(_t.stopId),currentSettings:rn(_t.stopId),onSave:Yn,onRemove:Rt,onClose:bt,onFollowRoute:D=>{bt(),l&&l(),window.dispatchEvent(new CustomEvent("selectRoute",{detail:{routeId:D}}))},onTrackVehicle:D=>{bt(),R(D)}})]})}const F1="favorite-route-ids",U1=4;function NP(){const[e,t]=p.useState(()=>{try{const l=localStorage.getItem(F1);if(l)return JSON.parse(l)}catch(l){console.error("Failed to load favorite route IDs:",l)}return[]});p.useEffect(()=>{try{localStorage.setItem(F1,JSON.stringify(e))}catch(l){console.error("Failed to save favorite route IDs:",l)}},[e]);const n=p.useCallback(l=>e.includes(l)?!1:(e.length>=U1?t(c=>[...c.slice(1),l]):t(c=>[...c,l]),!0),[e]),r=p.useCallback(l=>{t(c=>c.filter(u=>u!==l))},[]),s=p.useCallback(l=>e.includes(l),[e]),i=p.useCallback(l=>{s(l)?r(l):n(l)},[s,n,r]);return{favoriteRouteIds:e,addFavorite:n,removeFavorite:r,isFavorite:s,toggleFavorite:i,maxFavorites:U1}}const gg=e=>{if(e==null)return null;const t=Math.round(e/60);return t===0?{text:" ",className:"status-ontime"}:t>0?{text:`+${t} .`,className:"status-delay"}:{text:`${t} .`,className:"status-early"}},R7=e=>e?new Date(e*1e3).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"-";function L7({trips:e,isLoading:t,routeNames:n,stops:r=[],onTripSelect:s}){const[i,l]=p.useState(""),[c,u]=p.useState(new Set),[h,m]=p.useState("delay-desc"),[f,g]=p.useState(null),{favoriteRouteIds:v,toggleFavorite:_,isFavorite:x}=NP(),b=p.useMemo(()=>{const A=new Map;return r.forEach(W=>{A.set(W.stop_id,W.stop_name)}),A},[r]),w=A=>A?b.get(A)||A:"-",S=A=>{if(!A)return{shortName:"N/A",longName:"",color:void 0,textColor:void 0};const W=n==null?void 0:n.get(A);return W?{shortName:W.route_short_name||A,longName:W.route_long_name||"",color:W.route_color?`#${W.route_color}`:void 0,textColor:W.route_text_color?`#${W.route_text_color}`:"#FFFFFF",routeType:W.route_type}:{shortName:A,longName:"",color:void 0,textColor:void 0,routeType:void 0}},k=A=>A===void 0?null:A===0?" ":" ",j=A=>A?{0:"",1:"",2:"",3:" ",SCHEDULED:"",ADDED:"",CANCELED:"",UNSCHEDULED:" "}[A]||A:null,T=p.useMemo(()=>{let A=e;if(f&&(A=A.filter(W=>W.routeId===f)),i){const W=i.toLowerCase();A=A.filter(P=>{var $;const Z=S(P.routeId);return Z.shortName.toLowerCase().includes(W)||Z.longName.toLowerCase().includes(W)||(($=P.routeId)==null?void 0:$.toLowerCase().includes(W))})}return A},[e,i,f,n]),R=p.useMemo(()=>{const A=new Map;return e.forEach(W=>{W.routeId&&(n!=null&&n.has(W.routeId))&&A.set(W.routeId,n.get(W.routeId))}),v.filter(W=>A.has(W)).slice(0,4).map(W=>({routeId:W,info:A.get(W)}))},[e,n,v]),E=A=>{if(!A.stopTimeUpdates.length)return 0;const W=A.stopTimeUpdates.map(P=>P.arrivalDelay||P.departureDelay||0).filter(P=>P!==void 0);return W.length?Math.max(...W):0},B=A=>{if(!A)return 0;const W=A.split(":");return W.length>=2?parseInt(W[0])*60+parseInt(W[1]):0},q=p.useMemo(()=>{const A=[...T];switch(h){case"delay-desc":return A.sort((W,P)=>E(P)-E(W));case"delay-asc":return A.sort((W,P)=>E(W)-E(P));case"time-desc":return A.sort((W,P)=>B(P.startTime)-B(W.startTime));case"time-asc":return A.sort((W,P)=>B(W.startTime)-B(P.startTime));case"route-asc":return A.sort((W,P)=>{const Z=S(W.routeId).shortName,$=S(P.routeId).shortName;return Z.localeCompare($,"el",{numeric:!0})});default:return A}},[T,h]),Y=()=>{switch(h){case"delay-desc":return" ";case"delay-asc":return" ";case"time-desc":return" ";case"time-asc":return" ";case"route-asc":return"";default:return""}},te=A=>{const W=new Set(c);W.has(A)?W.delete(A):W.add(A),u(W)};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-border space-y-3",children:[R.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:a.jsx("span",{children:" :"})}),a.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[R.map(({routeId:A,info:W})=>{const P=W.route_color?`#${W.route_color}`:"#6B8E23",Z=W.route_text_color?`#${W.route_text_color}`:"#FFFFFF",$=f===A;return a.jsxs(de,{variant:$?"default":"outline",size:"lg",className:ye("h-16 flex flex-col items-center justify-center gap-1 font-bold text-base transition-all",$&&"ring-2 ring-offset-2"),style:$?{backgroundColor:P,color:Z,borderColor:P}:{borderColor:P},onClick:()=>g($?null:A),children:[a.jsx(Gt,{className:"h-5 w-5",style:{color:$?Z:P}}),a.jsx("span",{children:W.route_short_name||A})]},A)}),v.length<4&&a.jsxs(de,{variant:"outline",size:"lg",className:"h-16 flex flex-col items-center justify-center gap-1 border-dashed",onClick:()=>{console.log("Add favorite route - implement picker")},title:" ",children:[a.jsx(ys,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"+"})]})]}),f&&a.jsxs(de,{variant:"ghost",size:"sm",className:"h-7 text-xs gap-1",onClick:()=>g(null),children:[a.jsx(un,{className:"h-3 w-3"})," "]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Gl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Na,{placeholder:"  (.. 25, Nicosia)...",value:i,onChange:A=>l(A.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{children:[q.length," "]}),a.jsxs(FT,{children:[a.jsx(UT,{asChild:!0,children:a.jsxs(de,{variant:"outline",size:"sm",className:"h-7 gap-1.5",children:[a.jsx(of,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:"text-xs",children:Y()})]})}),a.jsxs(E0,{align:"end",children:[a.jsxs(Vo,{onClick:()=>m("delay-desc"),className:h==="delay-desc"?"bg-accent":"",children:[a.jsx(F_,{className:"h-3.5 w-3.5 mr-2"})," (.  .)"]}),a.jsxs(Vo,{onClick:()=>m("delay-asc"),className:h==="delay-asc"?"bg-accent":"",children:[a.jsx(H_,{className:"h-3.5 w-3.5 mr-2"})," (.  .)"]}),a.jsxs(Vo,{onClick:()=>m("time-asc"),className:h==="time-asc"?"bg-accent":"",children:[a.jsx(H_,{className:"h-3.5 w-3.5 mr-2"}),"  ()"]}),a.jsxs(Vo,{onClick:()=>m("time-desc"),className:h==="time-desc"?"bg-accent":"",children:[a.jsx(F_,{className:"h-3.5 w-3.5 mr-2"}),"  ()"]}),a.jsxs(Vo,{onClick:()=>m("route-asc"),className:h==="route-asc"?"bg-accent":"",children:[a.jsx(of,{className:"h-3.5 w-3.5 mr-2"})," "]})]})]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto scrollbar-thin",children:t&&e.length===0?a.jsx("div",{className:"flex items-center justify-center h-48",children:a.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):q.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[a.jsx($n,{className:"h-12 w-12 mb-2 opacity-50"}),a.jsx("p",{children:"  "})]}):a.jsx("div",{className:"divide-y divide-border",children:q.map(A=>{const W=E(A),P=gg(W||void 0),Z=c.has(A.id);return a.jsxs(xm,{open:Z,onOpenChange:()=>te(A.id),children:[a.jsx(kD,{className:"w-full p-4 hover:bg-muted/50 transition-colors text-left",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsx("div",{className:"flex-1 min-w-0",children:(()=>{const $=S(A.routeId);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[$.color?a.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-bold flex-shrink-0",style:{backgroundColor:$.color,color:$.textColor},children:$.shortName}):a.jsx("span",{className:"font-mono text-sm font-medium",children:$.shortName}),A.routeId&&a.jsx(de,{variant:"ghost",size:"icon",className:"h-5 w-5 p-0 hover:bg-transparent",onClick:U=>{U.stopPropagation();const I=x(A.routeId);if(_(A.routeId),!I){const F=S(A.routeId).shortName||A.routeId;tt({title:"  ",description:`  "${F}"   `}),"Notification"in window&&Notification.permission==="granted"&&new Notification("  ",{body:`  "${F}"   `,icon:"/pwa-192x192.png",tag:"favorite-route-added"})}},children:a.jsx(ys,{className:ye("h-3.5 w-3.5",x(A.routeId)?"fill-yellow-400 text-yellow-400":"text-muted-foreground")})}),P&&a.jsx("span",{className:`status-badge ${P.className}`,children:P.text}),k(A.directionId)&&a.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:k(A.directionId)})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-muted-foreground mb-1",children:[a.jsxs("span",{children:["Trip: ",A.tripId||"-"]}),A.vehicleId&&a.jsxs("span",{children:[": ",A.vehicleId,A.vehicleLabel&&` (${A.vehicleLabel})`]}),A.startTime&&a.jsxs("span",{children:[": ",A.startTime]}),A.startDate&&a.jsxs("span",{children:["/: ",A.startDate.replace(/(\d{4})(\d{2})(\d{2})/,"$3/$2/$1")]})]}),$.longName&&a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:$.longName}),j(A.scheduleRelationship)&&a.jsxs("div",{className:"text-xs text-muted-foreground/70",children:[": ",j(A.scheduleRelationship)]})]})})()}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:R7(A.timestamp)}),Z?a.jsx(ji,{className:"h-4 w-4"}):a.jsx(Jr,{className:"h-4 w-4"})]})]})}),a.jsx(ad,{children:a.jsxs("div",{className:"px-4 pb-4",children:[A.vehicleId&&s&&a.jsxs(de,{variant:"outline",size:"sm",className:"w-full mb-3 gap-2",onClick:$=>{$.stopPropagation(),s(A)},children:[a.jsx(It,{className:"h-4 w-4"}),"  "]}),a.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[a.jsxs("h4",{className:"text-xs font-medium mb-2 text-muted-foreground",children:["  (",A.stopTimeUpdates.length,")"]}),A.stopTimeUpdates.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"   "}):a.jsx("div",{className:"space-y-2 max-h-48 overflow-auto scrollbar-thin",children:A.stopTimeUpdates.map(($,U)=>{const I=gg($.arrivalDelay),O=gg($.departureDelay);return a.jsxs("div",{className:"flex items-center justify-between text-sm py-1 border-b border-border/50 last:border-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsx("span",{className:"w-6 h-6 bg-primary/20 text-primary rounded-full flex items-center justify-center text-xs font-medium flex-shrink-0",children:$.stopSequence||U+1}),a.jsx("span",{className:"text-xs truncate",children:w($.stopId)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[I&&a.jsxs("span",{className:`text-xs ${I.className.replace("status-","text-transit-")}`,children:[": ",I.text]}),O&&a.jsxs("span",{className:`text-xs ${O.className.replace("status-","text-transit-")}`,children:[": ",O.text]})]})]},U)})})]})]})})]},A.id)})})})]})}const W1="transit-favorite-stops";function A7(){var l,c;const[e,t]=p.useState({home:null,work:null});p.useEffect(()=>{try{const u=localStorage.getItem(W1);u&&t(JSON.parse(u))}catch(u){console.error("Failed to load favorite stops:",u)}},[]);const n=p.useCallback(u=>{t(u),localStorage.setItem(W1,JSON.stringify(u))},[]),r=p.useCallback((u,h)=>{const m={type:u,stop:h,createdAt:Date.now()};n({...e,[u]:m})},[e,n]),s=p.useCallback(u=>{n({...e,[u]:null})},[e,n]),i=p.useCallback(u=>{var h,m;return((h=e.home)==null?void 0:h.stop.stop_id)===u?"home":((m=e.work)==null?void 0:m.stop.stop_id)===u?"work":null},[e]);return{favorites:e,setFavorite:r,removeFavorite:s,isFavorite:i,homeStop:((l=e.home)==null?void 0:l.stop)||null,workStop:((c=e.work)==null?void 0:c.stop)||null}}const H1="favorite-stop-ids",V1=4;function O7(){const[e,t]=p.useState(()=>{try{const l=localStorage.getItem(H1);if(l)return JSON.parse(l)}catch(l){console.error("Failed to load favorite stop IDs:",l)}return[]});p.useEffect(()=>{try{localStorage.setItem(H1,JSON.stringify(e))}catch(l){console.error("Failed to save favorite stop IDs:",l)}},[e]);const n=p.useCallback(l=>e.includes(l)?!1:(e.length>=V1?t(c=>[...c.slice(1),l]):t(c=>[...c,l]),!0),[e]),r=p.useCallback(l=>{t(c=>c.filter(u=>u!==l))},[]),s=p.useCallback(l=>e.includes(l),[e]),i=p.useCallback(l=>{s(l)?r(l):n(l)},[s,n,r]);return{favoriteStopIds:e,addFavorite:n,removeFavorite:r,isFavorite:s,toggleFavorite:i,maxFavorites:V1}}const D7=e=>e?new Date(e*1e3).toLocaleTimeString("el-GR",{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--",$7=e=>{if(e==null||Math.abs(e)<30)return null;const t=Math.round(e/60);return t===0?{text:" ",className:"text-green-500"}:t>0?{text:`+${t}'`,className:"text-red-500"}:{text:`${t}'`,className:"text-green-500"}},vg=e=>{const t=Math.floor(Date.now()/1e3);return Math.round((e-t)/60)};function z7({trips:e,stops:t,routeNamesMap:n,isLoading:r,selectedOperator:s}){const[i,l]=p.useState(""),[c,u]=p.useState(null),[h,m]=p.useState(null),[f,g]=p.useState(null),{setFavorite:v,removeFavorite:_,isFavorite:x,homeStop:b,workStop:w}=A7(),{favoriteStopIds:S,toggleFavorite:k,isFavorite:j}=O7(),T=p.useMemo(()=>{const A=new Map;t.forEach(P=>{A.set(P.stop_id,{stop:P,arrivals:[]})});const W=Math.floor(Date.now()/1e3);return e.forEach(P=>{if(!P.routeId)return;const Z=n==null?void 0:n.get(P.routeId);P.stopTimeUpdates.forEach($=>{if(!$.stopId||!$.arrivalTime||$.arrivalTime<W)return;const U=A.get($.stopId);U?U.arrivals.push({routeId:P.routeId,routeShortName:Z==null?void 0:Z.route_short_name,routeLongName:Z==null?void 0:Z.route_long_name,routeColor:Z==null?void 0:Z.route_color,tripId:P.tripId||"",vehicleId:P.vehicleId,vehicleLabel:P.vehicleLabel,arrivalTime:$.arrivalTime,arrivalDelay:$.arrivalDelay}):A.set($.stopId,{stop:{stop_id:$.stopId,stop_name:$.stopId},arrivals:[{routeId:P.routeId,routeShortName:Z==null?void 0:Z.route_short_name,routeLongName:Z==null?void 0:Z.route_long_name,routeColor:Z==null?void 0:Z.route_color,tripId:P.tripId||"",vehicleId:P.vehicleId,vehicleLabel:P.vehicleLabel,arrivalTime:$.arrivalTime,arrivalDelay:$.arrivalDelay}]})})}),Array.from(A.values()).map(P=>({...P,arrivals:P.arrivals.sort((Z,$)=>Z.arrivalTime-$.arrivalTime)})).filter(P=>P.arrivals.length>0||i).sort((P,Z)=>P.arrivals.length>0&&Z.arrivals.length===0?-1:P.arrivals.length===0&&Z.arrivals.length>0?1:(P.stop.stop_name||P.stop.stop_id).localeCompare(Z.stop.stop_name||Z.stop.stop_id))},[e,t,n,i]),R=A=>{const W=T.find(P=>P.stop.stop_id===A);return(W==null?void 0:W.arrivals)||[]},E=p.useMemo(()=>{let A=T;if(f&&(A=A.filter(W=>W.stop.stop_id===f)),i){const W=i.toLowerCase();A=A.filter(P=>{var Z,$;return P.stop.stop_id.toLowerCase().includes(W)||((Z=P.stop.stop_name)==null?void 0:Z.toLowerCase().includes(W))||(($=P.stop.stop_code)==null?void 0:$.toLowerCase().includes(W))})}return A.slice(0,100)},[T,i,f]),B=p.useMemo(()=>{const A=[];b&&A.push({stop:b,type:"home"}),w&&A.push({stop:w,type:"work"});const W=T.filter(P=>S.includes(P.stop.stop_id)).slice(0,4-A.length).map(P=>({stop:P.stop}));return A.push(...W),A},[T,S,b,w]),q=p.useMemo(()=>{const A=[];return b&&A.push({type:"home",stop:b,arrivals:R(b.stop_id)}),w&&A.push({type:"work",stop:w,arrivals:R(w.stop_id)}),A},[b,w,T]),Y=A=>{const W=new Set;return A.filter(P=>W.has(P.routeId)?!1:(W.add(P.routeId),!0))},te=({stopId:A,arrivals:W,selectedOperator:P})=>{const{data:Z,isLoading:$}=x7(A,P),U=Y(W),I=new Set(U.map(F=>F.routeId)),O=(Z==null?void 0:Z.routes.filter(F=>!I.has(F.route_id)))||[];return a.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[U.map(F=>{const X=W.filter(re=>re.routeId===F.routeId).slice(0,3);return a.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-sm font-bold text-white",style:{backgroundColor:F.routeColor?`#${F.routeColor}`:"#0ea5e9"},children:F.routeShortName||F.routeId}),a.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:F.routeLongName})]}),a.jsx("div",{className:"space-y-1.5",children:X.map((re,ae)=>{const ie=vg(re.arrivalTime),oe=$7(re.arrivalDelay);return a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.jsx("span",{className:"font-mono font-medium",children:D7(re.arrivalTime)}),oe&&a.jsx("span",{className:`text-xs ${oe.className}`,children:oe.text})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`font-bold ${ie<=5?"text-green-500":"text-primary"}`,children:ie<=0?"":`${ie} `}),re.vehicleLabel&&a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",re.vehicleLabel,")"]})]})]},ae)})})]},F.routeId)}),$&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:" ..."})]}),O.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground pt-2 border-t border-border",children:[a.jsx(oc,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"     :"})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:O.map(F=>a.jsx("div",{className:"flex items-center gap-1.5",children:a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold text-white opacity-60",style:{backgroundColor:F.route_color?`#${F.route_color}`:"#6b7280"},children:F.route_short_name||F.route_id})},F.route_id))})]}),W.length===0&&!$&&O.length===0&&a.jsx("div",{className:"text-sm text-muted-foreground italic",children:"      "})]})};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-border space-y-3",children:[B.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:a.jsx("span",{children:" :"})}),a.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[B.map(A=>{const W=f===A.stop.stop_id,P=A.stop.stop_name||A.stop.stop_id,Z=P.length>15?P.substring(0,12)+"...":P,$=A.type==="home",U=A.type==="work",I=$?kh:U?$p:It,O=W?$?"#3B82F6":U?"#F97316":"#6B8E23":void 0,F=W?void 0:$?"#3B82F6":U?"#F97316":"#6B8E23";return a.jsxs(de,{variant:W?"default":"outline",size:"lg",className:ye("h-16 flex flex-col items-center justify-center gap-1 font-bold text-xs transition-all",W&&"ring-2 ring-offset-2"),style:W?{backgroundColor:O}:F?{borderColor:F}:{},onClick:()=>g(W?null:A.stop.stop_id),title:P,children:[a.jsx(I,{className:"h-4 w-4"}),a.jsx("span",{className:"line-clamp-2 text-center",children:Z})]},A.stop.stop_id)}),B.length<4&&a.jsxs(de,{variant:"outline",size:"lg",className:"h-16 flex flex-col items-center justify-center gap-1 border-dashed",onClick:()=>{console.log("Add favorite stop - implement picker")},title:"  ",children:[a.jsx(ys,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"+"})]})]}),f&&a.jsxs(de,{variant:"ghost",size:"sm",className:"h-7 text-xs gap-1",onClick:()=>g(null),children:[a.jsx(un,{className:"h-3 w-3"})," "]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Gl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Na,{placeholder:"    ID ...",value:i,onChange:A=>l(A.target.value),className:"pl-10"})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("span",{className:"text-sm text-muted-foreground",children:[E.length,"   "]})})]}),q.length>0&&!i&&a.jsxs("div",{className:"border-b border-border",children:[a.jsx("div",{className:"px-4 py-2 bg-muted/30",children:a.jsxs("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-1.5",children:[a.jsx(ys,{className:"h-3 w-3"})," "]})}),a.jsx("div",{className:"divide-y divide-border",children:q.map(A=>{const W=c===A.stop.stop_id,P=Y(A.arrivals),Z=A.arrivals[0],$=Z?vg(Z.arrivalTime):null,U=A.type==="home"?kh:$p;return a.jsxs("div",{className:"hover:bg-muted/30 transition-colors bg-primary/5",children:[a.jsxs("button",{onClick:()=>u(W?null:A.stop.stop_id),className:"w-full p-4 text-left",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 bg-primary text-primary-foreground rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(U,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-wider text-primary font-medium",children:A.type==="home"?"":""}),a.jsx("button",{onClick:I=>{I.stopPropagation(),_(A.type)},className:"text-muted-foreground hover:text-destructive transition-colors",children:a.jsx(un,{className:"h-3 w-3"})})]}),a.jsx("div",{className:"font-medium text-sm truncate",children:A.stop.stop_name||A.stop.stop_id}),A.arrivals.length>0&&a.jsxs("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[a.jsx(Gt,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[P.length," ",P.length===1?"":""]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[$!==null&&a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`text-lg font-bold ${$<=5?"text-green-500":"text-primary"}`,children:$<=0?"":`${$}'`}),a.jsx("div",{className:"text-[10px] text-muted-foreground",children:""})]}),W?a.jsx(ji,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Jr,{className:"h-4 w-4 text-muted-foreground"})]})]}),!W&&P.length>0&&a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5 ml-13",children:[P.slice(0,4).map((I,O)=>a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold text-white",style:{backgroundColor:I.routeColor?`#${I.routeColor}`:"#0ea5e9"},children:I.routeShortName||I.routeId},O)),P.length>4&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 text-xs text-muted-foreground",children:["+",P.length-4]})]})]}),W&&a.jsx(te,{stopId:A.stop.stop_id,arrivals:A.arrivals,selectedOperator:s})]},A.stop.stop_id)})})]}),h&&a.jsx("div",{className:"absolute inset-0 bg-background/95 z-10 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-card border border-border rounded-xl shadow-lg p-6 max-w-sm w-full",children:[a.jsx("h3",{className:"font-semibold text-lg mb-2",children:"  "}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4 truncate",children:h.stop.stop_name||h.stopId}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(de,{variant:"outline",className:"w-full justify-start gap-3",onClick:()=>{v("home",h.stop),m(null)},children:[a.jsx(kh,{className:"h-5 w-5 text-primary"}),a.jsxs("span",{children:["    ",a.jsx("strong",{children:""})]})]}),a.jsxs(de,{variant:"outline",className:"w-full justify-start gap-3",onClick:()=>{v("work",h.stop),m(null)},children:[a.jsx($p,{className:"h-5 w-5 text-primary"}),a.jsxs("span",{children:["    ",a.jsx("strong",{children:""})]})]})]}),a.jsx(de,{variant:"ghost",className:"w-full mt-4",onClick:()=>m(null),children:""})]})}),a.jsx("div",{className:"flex-1 overflow-auto scrollbar-thin",children:r&&T.length===0?a.jsx("div",{className:"flex items-center justify-center h-48",children:a.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):E.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[a.jsx(It,{className:"h-12 w-12 mb-2 opacity-50"}),a.jsx("p",{children:"  "}),i&&a.jsx("p",{className:"text-xs mt-1",children:"   "})]}):a.jsx("div",{className:"divide-y divide-border",children:E.map(A=>{const W=c===A.stop.stop_id,P=Y(A.arrivals),Z=A.arrivals[0],$=Z?vg(Z.arrivalTime):null,U=x(A.stop.stop_id);return a.jsxs("div",{className:"hover:bg-muted/30 transition-colors",children:[a.jsxs("button",{onClick:()=>u(W?null:A.stop.stop_id),className:"w-full p-4 text-left",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 bg-primary/20 text-primary rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(It,{className:"h-5 w-5"})}),a.jsx("button",{onClick:I=>{I.stopPropagation(),U?_(U):m({stopId:A.stop.stop_id,stop:A.stop})},className:`absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center transition-colors ${U?"bg-yellow-500 text-white":"bg-muted hover:bg-yellow-500/20 text-muted-foreground hover:text-yellow-500"}`,children:a.jsx(ys,{className:`h-3 w-3 ${U?"fill-current":""}`})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-sm truncate flex-1",children:A.stop.stop_name||A.stop.stop_id}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-5 w-5 p-0 hover:bg-transparent",onClick:I=>{I.stopPropagation();const O=j(A.stop.stop_id);if(k(A.stop.stop_id),!O){const F=A.stop.stop_name||A.stop.stop_id;tt({title:"  ",description:`  "${F}"   `}),"Notification"in window&&Notification.permission==="granted"&&new Notification("  ",{body:`  "${F}"   `,icon:"/pwa-192x192.png",tag:"favorite-stop-added"})}},children:a.jsx(ys,{className:ye("h-3.5 w-3.5",j(A.stop.stop_id)?"fill-yellow-400 text-yellow-400":"text-muted-foreground")})})]}),A.stop.stop_name&&A.stop.stop_name!==A.stop.stop_id&&a.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:A.stop.stop_id}),A.arrivals.length>0&&a.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5 flex-wrap",children:[a.jsx(Gt,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[P.length," ",P.length===1?"":""]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[$!==null&&a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`text-lg font-bold ${$<=5?"text-green-500":"text-primary"}`,children:$<=0?"":`${$}'`}),a.jsx("div",{className:"text-[10px] text-muted-foreground",children:""})]}),W?a.jsx(ji,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Jr,{className:"h-4 w-4 text-muted-foreground"})]})]}),!W&&P.length>0&&a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5 ml-13",children:[P.slice(0,4).map((I,O)=>a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold text-white",style:{backgroundColor:I.routeColor?`#${I.routeColor}`:"#0ea5e9"},children:I.routeShortName||I.routeId},O)),P.length>4&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 text-xs text-muted-foreground",children:["+",P.length-4]})]})]}),W&&a.jsx(te,{stopId:A.stop.stop_id,arrivals:A.arrivals,selectedOperator:s})]},A.stop.stop_id)})})})]})}const kP=p.forwardRef(({className:e,...t},n)=>a.jsx("textarea",{className:ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));kP.displayName="Textarea";const B7=[{id:"ticket-info",icon:SL,title:" ",description:" : 1.50 | : 5.00 | : 20.00 | : 40.00",category:"tickets"},{id:"schedule-info",icon:ga,title:" ",description:": 05:30 - 23:00 | : 06:00 - 22:00 | :  ",category:"schedule"},{id:"stop-info",icon:It,title:" & ",description:"    .       .",category:"stops"},{id:"bus-info",icon:Gt,title:" ",description:"   .   .    .",category:"rules"}],F7=e=>{switch(e==null?void 0:e.toUpperCase()){case"SEVERE":case"WARNING":return{icon:Ex,className:"bg-destructive/20 text-destructive border-destructive/30"};case"INFO":case"UNKNOWN":default:return{icon:Cx,className:"bg-primary/20 text-primary border-primary/30"}}},U7=(e,t)=>{const n=r=>new Date(r*1e3).toLocaleString("el-GR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});return e&&t?`${n(e)} - ${n(t)}`:e?` ${n(e)}`:t?` ${n(t)}`:null};function W7({alerts:e,trips:t,routeNamesMap:n,isLoading:r}){const{notifications:s,setNotification:i,removeNotification:l,clearAllNotifications:c,forceSync:u}=gd(),{subscribe:h}=jm(),m=f=>{const g=s.find(v=>v.stopId===f);g&&i({...g,enabled:!g.enabled})};return r&&e.length===0&&t.length===0?a.jsx("div",{className:"flex items-center justify-center h-48",children:a.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):a.jsx("div",{className:"h-full flex flex-col",children:a.jsxs(qx,{defaultValue:"reminders",className:"h-full flex flex-col",children:[a.jsxs(vm,{className:"grid w-full grid-cols-3 mx-4 mt-2",style:{width:"calc(100% - 2rem)"},children:[a.jsxs(Zr,{value:"reminders",className:"text-xs gap-1",children:[a.jsx(Dn,{className:"h-3 w-3"}),"",s.filter(f=>f.enabled).length>0&&a.jsx(Zn,{variant:"default",className:"ml-1 h-4 px-1 text-[10px]",children:s.filter(f=>f.enabled).length})]}),a.jsxs(Zr,{value:"alerts",className:"text-xs gap-1",children:[a.jsx(Ex,{className:"h-3 w-3"}),"",e.length>0&&a.jsx(Zn,{variant:"secondary",className:"ml-1 h-4 px-1 text-[10px]",children:e.length})]}),a.jsxs(Zr,{value:"info",className:"text-xs gap-1",children:[a.jsx(Cx,{className:"h-3 w-3"}),""]})]}),a.jsx(qr,{value:"reminders",className:"flex-1 overflow-auto p-4 space-y-3",children:s.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[a.jsx(Dn,{className:"h-12 w-12 mb-2 opacity-50"}),a.jsx("p",{className:"font-medium",children:"  "}),a.jsx("p",{className:"text-sm text-center px-4",children:"              "})]}):a.jsxs(a.Fragment,{children:[s.map(f=>a.jsx("div",{className:`rounded-lg border p-3 animate-fade-in ${f.enabled?"bg-primary/10 border-primary/30":"bg-muted/30 border-muted-foreground/20"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${f.enabled?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:f.enabled?a.jsx(Dn,{className:"h-5 w-5"}):a.jsx(qs,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(It,{className:"h-3 w-3 text-muted-foreground"}),a.jsx("h3",{className:"font-medium text-sm truncate",children:f.stopName})]}),a.jsx("p",{className:`text-sm mt-1 ${f.enabled?"text-primary":"text-muted-foreground"}`,children:f.enabled?"  ":""}),a.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[a.jsxs("span",{children:[" ",f.beforeMinutes,"  "]}),f.sound&&a.jsx("span",{children:""}),f.vibration&&a.jsx("span",{children:""}),f.voice&&a.jsx("span",{children:""}),f.push&&a.jsx("span",{children:""})]})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(de,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>m(f.stopId),title:f.enabled?"":"",children:f.enabled?a.jsx(qs,{className:"h-4 w-4"}):a.jsx(Dn,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",onClick:()=>l(f.stopId),title:"",children:a.jsx(cf,{className:"h-4 w-4"})})]})]})},f.stopId)),a.jsx("div",{className:"pt-4 flex justify-center",children:a.jsxs(de,{variant:"outline",size:"sm",className:"text-xs text-muted-foreground hover:text-destructive gap-2",onClick:async()=>{if(confirm(":            .  ;")){if(await c(),await h([]),"serviceWorker"in navigator){const f=await navigator.serviceWorker.getRegistrations();for(const g of f)await g.unregister()}setTimeout(()=>{u()},100),localStorage.clear(),window.location.reload()}},children:[a.jsx(cf,{className:"h-3 w-3"}),"  &  (Reset)"]})})]})}),a.jsxs(qr,{value:"alerts",className:"flex-1 overflow-auto p-4 space-y-3",children:[a.jsx("div",{className:"my-6 rounded-lg border bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20 p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:"/MotionAG/profile-photo.jpg",alt:"Developer",className:"w-16 h-16 rounded-full object-cover border-2 border-primary/30 shadow-md bg-primary/20",onError:f=>{var b;const g=f.target,v="/MotionAG/",_=g.src;if(_.endsWith(".jpg")){g.src=`${v}profile-photo.png`;return}if(_.endsWith(".png")){g.src=`${v}profile-photo.svg`;return}g.style.display="none";const x=document.createElement("div");x.className="w-16 h-16 rounded-full bg-primary/20 border-2 border-primary/30 shadow-md flex items-center justify-center overflow-hidden",x.innerHTML='<svg class="w-16 h-16" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="32" fill="#6B8E23"/><circle cx="32" cy="24" r="10" fill="white" opacity="0.9"/><path d="M12 54C12 46 20 44 32 44C44 44 52 46 52 54V58H12V54Z" fill="white" opacity="0.9"/></svg>',(b=g.parentNode)==null||b.replaceChild(x,g)}})}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[a.jsx(mL,{className:"h-4 w-4 text-primary"})," & "]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"   ;     ;    !"})]}),a.jsxs("form",{className:"space-y-2",onSubmit:async f=>{f.preventDefault();const g=f.currentTarget,v=new FormData(g),_=v.get("email"),x=v.get("message");if(!x||x.trim()===""){tt({title:"",description:"    ",variant:"destructive"});return}const b=g.querySelector('button[type="submit"]'),w=b==null?void 0:b.innerHTML;try{b&&(b.disabled=!0,b.innerHTML='<div class="w-3.5 h-3.5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>');const S=await fetch("https://formspree.io/f/xjgknoze",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:(_==null?void 0:_.trim())||void 0,message:x.trim()})});if(S.ok)tt({title:" !",description:"    .     !"}),g.reset();else{const k=await S.json().catch(()=>({}));throw new Error(k.error||"   ")}}catch(S){console.error("Form submission error:",S),tt({title:"",description:S instanceof Error?S.message:"    .   .",variant:"destructive"})}finally{b&&w&&(b.disabled=!1,b.innerHTML=w)}},children:[a.jsx(Na,{type:"email",name:"email",placeholder:" email  ()",className:"text-xs h-9"}),a.jsx(kP,{name:"message",placeholder:"      ...",className:"text-xs min-h-[80px] resize-none",required:!0,rows:4}),a.jsxs(de,{type:"submit",size:"sm",className:"w-full h-8 text-xs gap-2",children:[a.jsx(xL,{className:"h-3.5 w-3.5"}),""]})]})]})]})}),e.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[a.jsx(oc,{className:"h-12 w-12 mb-2 opacity-50"}),a.jsx("p",{className:"font-medium",children:"  "}),a.jsx("p",{className:"text-sm",children:"  "})]}):e.map(f=>{const g=F7(f.severityLevel),v=g.icon,_=f.activePeriods[0];return a.jsx("div",{className:`rounded-lg border p-4 ${g.className} animate-fade-in`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(v,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-sm",children:f.headerText||""}),f.descriptionText&&a.jsx("p",{className:"text-sm mt-1 opacity-90",children:f.descriptionText}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[_&&a.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-75",children:[a.jsx($n,{className:"h-3 w-3"}),U7(_.start,_.end)]}),f.cause&&a.jsx(Zn,{variant:"secondary",className:"text-xs",children:f.cause}),f.effect&&a.jsx(Zn,{variant:"outline",className:"text-xs",children:f.effect})]}),f.informedEntities.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:f.informedEntities.slice(0,5).map((x,b)=>a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-background/50 rounded text-xs font-mono",children:x.routeId||x.stopId||x.agencyId||"-"},b))}),f.url&&a.jsxs("a",{href:f.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs mt-2 hover:underline",children:[" ",a.jsx(iL,{className:"h-3 w-3"})]})]})]})},f.id)}),a.jsx("div",{className:"mt-4 p-2 text-center",children:a.jsx("div",{className:"text-[10px] text-muted-foreground font-mono opacity-50 pb-safe",children:"v1.5.17.9.4 (MotionAG)"})})]}),a.jsxs(qr,{value:"info",className:"flex-1 overflow-auto p-4 space-y-3",children:[B7.map(f=>{const g=f.icon;return a.jsx("div",{className:"rounded-lg border p-4 bg-secondary/30 border-border animate-fade-in",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center flex-shrink-0",children:a.jsx(g,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-sm",children:f.title}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.description})]})]})},f.id)}),a.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-muted/50 text-center space-y-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"       "}),a.jsx("div",{className:"text-[10px] text-gray-300 font-mono text-center opacity-50 pb-safe",children:"v1.5.0 (MotionAG)"})]})]})]})})}const H7=py.filter(e=>e.id!=="all"),V7=e=>{try{if(!e||!Array.isArray(e)||e.length<2)return 0;let t=0;const n=6371e3;for(let r=0;r<e.length-1;r++){const s=e[r],i=e[r+1];if(!s||!i||typeof s.lat!="number"||typeof s.lng!="number"||typeof i.lat!="number"||typeof i.lng!="number")continue;const l=(i.lat-s.lat)*Math.PI/180,c=(i.lng-s.lng)*Math.PI/180,u=Math.sin(l/2)*Math.sin(l/2)+Math.cos(s.lat*Math.PI/180)*Math.cos(i.lat*Math.PI/180)*Math.sin(c/2)*Math.sin(c/2),h=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));t+=n*h}return t/1e3}catch(t){return console.error("[calculateRouteDistance] Error:",t),0}};function G7({selectedOperator:e,onOperatorChange:t}){const[n,r]=p.useState(""),[s,i]=p.useState(0),{favoriteRouteIds:l,isFavorite:c,toggleFavorite:u}=NP(),[h,m]=p.useState(!1),f=p.useRef(!1),g=p.useRef(null),v=p.useRef(null),_=p.useRef(null),x=p.useRef([]),b=p.useRef(!1),w=p.useRef(null),S=["","","","","","",""],k=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],j=new Date().getDay(),T=bP(e!=="all"?e:void 0),R=y7(n||null,e!=="all"?e:void 0),E=Df(n||null,e!=="all"?e:void 0),B=p.useMemo(()=>{var Z;return[...((Z=T.data)==null?void 0:Z.data)||[]].sort(($,U)=>{const I=parseInt($.route_short_name||"999"),O=parseInt(U.route_short_name||"999");return!isNaN(I)&&!isNaN(O)?I-O:($.route_short_name||"").localeCompare(U.route_short_name||"")})},[T.data]),q=p.useMemo(()=>{const P=new Map(B.map(Z=>[Z.route_id,Z]));return l.filter(Z=>P.has(Z)).slice(0,4).map(Z=>P.get(Z))},[B,l]),Y=p.useMemo(()=>B.find(P=>P.route_id===n),[B,n]),te=p.useMemo(()=>{var P;return(P=R.data)!=null&&P.by_direction?Object.keys(R.data.by_direction).map(Number):[]},[R.data]),A=Y!=null&&Y.route_color?`#${Y.route_color}`:"hsl(var(--primary))",W=p.useCallback(()=>{v.current&&setTimeout(()=>{var P;(P=v.current)==null||P.invalidateSize(!0)},100)},[]);return p.useEffect(()=>{if(!n){v.current&&(v.current.remove(),v.current=null,m(!1));return}if(!g.current||v.current)return;const P=g.current;P.style.display="block",P.style.width="100%",P.style.height="300px",P.style.minHeight="300px",P.style.position="relative",P.style.overflow="hidden";try{console.log("[ScheduleView] Initializing map...");const Z=Qe.map(P,{zoomControl:!0,scrollWheelZoom:!0,center:[35,33],zoom:10,maxZoom:18,minZoom:8});Qe.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(Z),Z.on("zoomstart",()=>{b.current=!0,console.log("[ScheduleView] User zoom detected")}),Z.on("dragstart",()=>{b.current=!0,console.log("[ScheduleView] User drag detected")}),Z.on("wheel",()=>{b.current=!0}),v.current=Z,console.log("[ScheduleView] Map created"),b.current=!1,w.current=null,f.current=!1,window.addEventListener("resize",W);let $=0;const U=20;let I=!0,O=null;const F=()=>{if(!I)return;if($++,$>U){console.warn("[ScheduleView] Map ready check timeout - forcing ready state"),I=!1,m(!0);return}if(!v.current){console.log(`[ScheduleView] Map ref is null (check ${$}/${U}), retrying...`),I&&(O=setTimeout(F,200));return}const ae=P.getBoundingClientRect();if(console.log(`[ScheduleView] Check ${$}/${U} - Container rect:`,ae.width,"x",ae.height),ae.width===0||ae.height===0){if($>=5){console.warn("[ScheduleView] Container size still zero after 5 checks - forcing ready state to prevent infinite loop"),I=!1,f.current=!0,m(!0);return}console.log("[ScheduleView] Container has no dimensions yet, retrying..."),I&&(O=setTimeout(F,200));return}const ie=ae.width>0&&ae.height>0&&P.offsetParent!==null&&window.getComputedStyle(P).visibility!=="hidden";try{ie&&v.current.invalidateSize(!0);const oe=v.current.getZoom(),ge=v.current.getSize();if(console.log("[ScheduleView] Map size:",ge,"zoom:",oe),f.current||!I)return;if(typeof oe=="number"&&ge.x>0&&ge.y>0){I=!1,f.current=!0,O&&(clearTimeout(O),O=null),m(!0),console.log("[ScheduleView] Map is ready!");return}if(ae.width>0&&ae.height>0&&typeof oe=="number"){console.log("[ScheduleView] Map appears ready (container has size, zoom valid), but map size is 0 - likely during animation"),I=!1,f.current=!0,O&&(clearTimeout(O),O=null),m(!0);return}I&&(console.log("[ScheduleView] Map not fully ready (size or zoom invalid), retrying..."),O=setTimeout(F,200))}catch(oe){console.log("[ScheduleView] Map getZoom/getSize failed, retrying...",oe),I&&(O=setTimeout(F,200))}},X=setTimeout(()=>{requestAnimationFrame(F)},150),re=setTimeout(()=>{v.current&&(console.log("[ScheduleView] Retry checkReady - container size:",P.offsetWidth,"x",P.offsetHeight),F())},500);return()=>{I=!1,f.current=!1,O&&(clearTimeout(O),O=null),clearTimeout(X),clearTimeout(re),window.removeEventListener("resize",W),v.current&&(v.current.remove(),v.current=null,m(!1)),b.current=!1,w.current=null}}catch(Z){return console.error("[ScheduleView] Error initializing map:",Z),()=>{window.removeEventListener("resize",W),f.current=!1,v.current&&(v.current.remove(),v.current=null,m(!1)),b.current=!1,w.current=null}}},[n,W]),p.useEffect(()=>{!v.current||!n||setTimeout(()=>{if(v.current){v.current.invalidateSize(!0);const P=v.current.getSize();console.log("[ScheduleView] Map resized, size:",P)}},200)},[n,E.data,h]),p.useEffect(()=>{if(!v.current){console.log("[ScheduleView] Map not ready yet");return}if(!n){console.log("[ScheduleView] No route selected");return}const P=v.current;if(!E.data||!E.data.directions||E.data.directions.length===0){console.warn("[ScheduleView] No route shape data available for route:",n),E.isError&&console.error("[ScheduleView] Route shape query error:",E.error),setTimeout(()=>{v.current&&v.current.invalidateSize(!0)},200);return}console.log("[ScheduleView] Drawing route shape, directions:",E.data.directions.length),E.data.directions.forEach(($,U)=>{var I;(!$.shape||$.shape.length===0)&&console.warn(`[ScheduleView] Direction ${$.direction_id??U} has no shape data (${((I=$.stops)==null?void 0:I.length)||0} stops available)`)}),_.current&&(P.removeLayer(_.current),_.current=null),x.current.forEach($=>P.removeLayer($)),x.current=[];const Z=E.data.directions.find($=>($.direction_id??E.data.directions.indexOf($))===s)||E.data.directions[0];if(!Z){setTimeout(()=>{v.current&&v.current.invalidateSize()},100);return}if(Z.shape&&Z.shape.length>0){const $=Z.shape.filter(U=>U&&typeof U.lat=="number"&&typeof U.lng=="number").map(U=>[U.lat,U.lng]);if($.length>0){_.current=Qe.polyline($,{color:A,weight:5,opacity:.8,lineCap:"round",lineJoin:"round"}).addTo(P);const U=[...$];Z.stops&&Z.stops.length>0&&Z.stops.forEach(F=>{F.lat&&F.lng&&typeof F.lat=="number"&&typeof F.lng=="number"&&U.push([F.lat,F.lng])});const I=`${n}-${s}`;!b.current||w.current!==I?requestAnimationFrame(()=>{if(!(!v.current||U.length===0)){v.current.invalidateSize(!0);try{const F=Qe.latLngBounds(U),X=F.getNorthEast().distanceTo(F.getSouthWest());console.log("[ScheduleView] Route bounds size:",X.toFixed(2),"km");let re=[80,80];X<5?re=[60,60]:X>50&&(re=[100,100]);const ae=b.current;b.current=!1,v.current.fitBounds(F,{padding:re,maxZoom:14,animate:!0}),w.current=I,b.current=ae,console.log("[ScheduleView] Fitted bounds to route, padding:",re),setTimeout(()=>{if(v.current&&!b.current){v.current.invalidateSize(!0);const ie=v.current.getZoom(),oe=v.current.getBounds();let ge=!0;for(const ce of U)if(Array.isArray(ce)&&!oe.contains([ce[0],ce[1]])){ge=!1;break}if((ie>15||ie<8||!ge)&&!b.current){console.log("[ScheduleView] Adjusting bounds - zoom:",ie,"allInBounds:",ge);try{b.current=!1;const ce=Qe.latLngBounds(U);v.current.fitBounds(ce,{padding:re,maxZoom:14,animate:!1}),b.current=!1}catch(ce){console.error("[ScheduleView] Error adjusting bounds:",ce)}}}},400)}catch(F){console.error("[ScheduleView] Error fitting bounds:",F),v.current&&!b.current&&v.current.setView([35,33],10)}}}):console.log("[ScheduleView] Skipping auto-fit - user has interacted with map")}}else if(console.warn(`[ScheduleView] No shape data for direction ${s}. Using stops as fallback.`),Z.stops&&Z.stops.length>0){const $=Z.stops.filter(U=>U.lat&&U.lng&&typeof U.lat=="number"&&typeof U.lng=="number").sort((U,I)=>(U.stop_sequence||0)-(I.stop_sequence||0)).map(U=>[U.lat,U.lng]);if($.length>1){console.log(`[ScheduleView] Drawing approximate route using ${$.length} stops`),_.current=Qe.polyline($,{color:A,weight:4,opacity:.6,lineCap:"round",lineJoin:"round",dashArray:"10, 5"}).addTo(P);try{const U=Qe.latLngBounds($);P.fitBounds(U,{padding:[80,80],maxZoom:14,animate:!0})}catch(U){console.error("[ScheduleView] Error fitting bounds to stops:",U)}}}Z.stops&&Z.stops.length>0&&(Z.stops.filter($=>$&&$.lat&&$.lng&&typeof $.lat=="number"&&typeof $.lng=="number").sort(($,U)=>($.stop_sequence||0)-(U.stop_sequence||0)).forEach(($,U)=>{const I=Qe.divIcon({className:"route-stop-marker",html:`
              <div style="
                width: 24px;
                height: 24px;
                background-color: ${A};
                border: 3px solid white;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 10px;
                font-weight: bold;
                color: white;
                box-shadow: 0 2px 4px rgba(0,0,0,0.3);
              ">
                ${$.stop_sequence??U+1}
              </div>
            `,iconSize:[24,24],iconAnchor:[12,12]}),O=Qe.marker([$.lat,$.lng],{icon:I}).addTo(P);$.stop_name&&O.bindPopup(`<strong>${$.stop_name}</strong><br/> #${$.stop_sequence??U+1}`),x.current.push(O)}),setTimeout(()=>{v.current&&v.current.invalidateSize()},300))},[E.data,n,s,A]),a.jsxs("div",{className:"h-full flex flex-col p-2 lg:p-4 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ga,{className:"h-5 w-5 text-primary"}),a.jsx("h2",{className:"text-lg font-bold",children:" "})]}),q.length>0&&a.jsxs("div",{className:"mb-4 space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:a.jsx("span",{children:" :"})}),a.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[q.map(P=>{const Z=n===P.route_id,$=P.route_color?`#${P.route_color}`:"#6B8E23",U=P.route_text_color?`#${P.route_text_color}`:"#FFFFFF";return a.jsxs(de,{variant:Z?"default":"outline",size:"lg",className:ye("h-16 flex flex-col items-center justify-center gap-1 font-bold text-base transition-all",Z&&"ring-2 ring-offset-2"),style:Z?{backgroundColor:$,color:U}:{borderColor:$},onClick:()=>r(Z?"":P.route_id),title:P.route_long_name||P.route_short_name,children:[a.jsx(Gt,{className:"h-5 w-5",style:{color:Z?U:$}}),a.jsx("span",{children:P.route_short_name||P.route_id})]},P.route_id)}),l.length<4&&a.jsxs(de,{variant:"outline",size:"lg",className:"h-16 flex flex-col items-center justify-center gap-1 border-dashed",onClick:()=>{console.log("Add favorite route - implement picker"),tt({title:"  ",description:"             "})},title:"  ",children:[a.jsx(ys,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"+"})]})]}),n&&a.jsxs(de,{variant:"ghost",size:"sm",className:"h-7 text-xs gap-1",onClick:()=>r(""),children:[a.jsx(un,{className:"h-3 w-3"})," "]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs text-muted-foreground",children:""}),a.jsxs(Js,{value:e,onValueChange:P=>{t(P),r("")},children:[a.jsx(Cs,{className:"w-[200px]",children:a.jsx(Xs,{placeholder:" "})}),a.jsx(js,{className:"bg-popover z-50",children:H7.map(P=>a.jsxs(Vt,{value:P.id,children:[P.name," ",P.city&&`(${P.city})`]},P.id))})]})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-xs text-muted-foreground",children:""}),a.jsxs(Js,{value:n,onValueChange:r,disabled:!e||e==="all"||T.isLoading,children:[a.jsx(Cs,{className:"w-[300px]",children:a.jsx(Xs,{placeholder:T.isLoading?"...":" "})}),a.jsx(js,{className:"bg-popover z-50 max-h-[300px]",children:B.map(P=>a.jsx(Vt,{value:P.route_id,children:a.jsxs("div",{className:"flex items-center gap-2 w-full",children:[a.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs font-bold text-white flex-shrink-0",style:{backgroundColor:P.route_color?`#${P.route_color}`:"hsl(var(--primary))"},children:P.route_short_name}),a.jsx("span",{className:"truncate flex-1",children:P.route_long_name}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-5 w-5 p-0 hover:bg-transparent flex-shrink-0",onClick:Z=>{Z.stopPropagation();const $=c(P.route_id);u(P.route_id),$||(tt({title:"  ",description:`  "${P.route_short_name||P.route_id}"   `}),"Notification"in window&&Notification.permission==="granted"&&new Notification("  ",{body:`  "${P.route_short_name||P.route_id}"   `,icon:"/pwa-192x192.png",tag:"favorite-route-added"}))},children:a.jsx(ys,{className:ye("h-3.5 w-3.5",c(P.route_id)?"fill-yellow-400 text-yellow-400":"text-muted-foreground")})})]})},P.route_id))})]})]})]}),n?R.isLoading?a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsx(qn,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[Y&&a.jsxs("div",{className:"p-3 rounded-lg mb-3 flex items-center gap-3",style:{backgroundColor:A},children:[a.jsx("span",{className:"bg-white/20 text-white text-lg font-bold px-3 py-1 rounded",children:Y.route_short_name}),a.jsx("span",{className:"text-white font-medium",children:Y.route_long_name})]}),E.isLoading?a.jsxs("div",{className:"mb-4 p-4 rounded-lg border bg-muted/30 flex items-center justify-center",children:[a.jsx(qn,{className:"h-5 w-5 animate-spin text-primary mr-2"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"  ..."})]}):E.data&&E.data.directions&&E.data.directions.length>0?a.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-3 lg:gap-4 overflow-hidden",style:{height:"calc(100% - 20px)",minHeight:"500px"},children:[a.jsxs("div",{className:"flex flex-col space-y-2 lg:space-y-3 h-full min-h-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsx(Vl,{className:"h-4 w-4 lg:h-5 lg:w-5 text-primary"}),a.jsx("h3",{className:"text-sm lg:text-base font-semibold",children:" "})]}),E.data.directions.length>1&&a.jsx("div",{className:"flex gap-2 flex-shrink-0",children:E.data.directions.map((P,Z)=>a.jsxs(de,{variant:s===(P.direction_id??Z)?"default":"outline",size:"sm",className:"h-7 text-xs",onClick:()=>i(P.direction_id??Z),children:[P.direction_id===0?"":""," ",P.direction_name?`(${P.direction_name})`:""]},P.direction_id||Z))}),(()=>{var U;const P=E.data.directions.find(I=>(I.direction_id??E.data.directions.indexOf(I))===s)||E.data.directions[0];if(!P)return null;const Z=V7(P.shape||[]),$=((U=P.stops)==null?void 0:U.length)||0;return a.jsxs("div",{className:"flex-1 flex flex-col space-y-2 lg:space-y-3",style:{height:"100%",minHeight:0},children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:gap-3 flex-shrink-0",children:[a.jsxs("div",{className:"p-3 rounded-lg bg-primary/10 border border-primary/20",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Mr,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:" "})]}),a.jsxs("div",{className:"text-xl font-bold",children:[Z.toFixed(2)," km"]})]}),a.jsxs("div",{className:"p-3 rounded-lg bg-secondary/50 border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(It,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),a.jsx("div",{className:"text-xl font-bold",children:$})]})]}),a.jsxs("div",{className:"flex-1 rounded-lg border overflow-hidden bg-muted/30 relative min-h-[400px] lg:min-h-0",children:[a.jsx("div",{ref:g,className:"w-full h-full",style:{minHeight:"400px",height:"100%"}}),!h&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground z-50 bg-background/95 pointer-events-none",children:a.jsxs("div",{className:"text-center pointer-events-auto",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2 opacity-30 animate-spin"}),a.jsx("p",{className:"text-sm",children:" ..."})]})})]})]})})()]}),a.jsxs("div",{className:"flex flex-col overflow-hidden space-y-3 h-full",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsx(ga,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"text-base font-semibold",children:" "})]}),te.length>1&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:":"}),te.map(P=>a.jsx(de,{variant:s===P?"default":"outline",size:"sm",className:"h-7 text-xs",onClick:()=>i(P),children:P===0?"":""},P))]}),(()=>{const P=R.data,Z=(P==null?void 0:P.by_direction[s])||(P==null?void 0:P.schedule)||[],$=S.map((F,X)=>{let re=new Set;if(P){if(P.calendar&&P.calendar.length>0){const ie=k[X];re=new Set(P.calendar.filter(oe=>oe[ie]).map(oe=>oe.service_id))}else if(P.calendar_dates&&P.calendar_dates.length>0){const ie=new Date,oe=new Date(ie),ge=X-ie.getDay();oe.setDate(ie.getDate()+ge);const ce=oe.toISOString().slice(0,10).replace(/-/g,"");re=new Set(P.calendar_dates.filter(ke=>ke.date===ce&&ke.exception_type===1).map(ke=>ke.service_id))}}let ae=Z;return re.size>0&&ae.length>0&&(ae=ae.filter(ie=>re.has(ie.service_id))),[...ae].sort((ie,oe)=>ie.departure_minutes-oe.departure_minutes)}),U=new Date,I=U.getHours()*60+U.getMinutes(),O=[];for(let F=0;F<S.length;F++){const X=(j+F)%S.length;O.push({dayIdx:X,dayName:S[X],dayTrips:$[X]})}return a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden space-y-2 lg:space-y-3 pr-1 lg:pr-2 scrollbar-thin",children:O.map(({dayIdx:F,dayName:X,dayTrips:re})=>{const ae=F===j;return a.jsxs("div",{className:ye("p-2 lg:p-3 rounded-lg border bg-card flex-shrink-0",ae&&"ring-2 ring-primary/50 bg-primary/5"),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("span",{className:ye("text-xs lg:text-sm font-semibold",ae&&"text-primary"),children:[X,ae&&a.jsx("span",{className:"ml-1 text-[10px] lg:text-xs",children:"()"})]}),a.jsxs("span",{className:"text-[10px] lg:text-xs text-muted-foreground ml-auto",children:[re.length," "]})]}),re.length===0?a.jsx("div",{className:"text-xs text-muted-foreground py-2",children:"  "}):a.jsx("div",{className:"flex gap-1.5 overflow-x-auto overflow-y-hidden pb-2 -mx-1 px-1",style:{scrollbarWidth:"thin",WebkitOverflowScrolling:"touch",scrollBehavior:"smooth"},children:re.map(ie=>{var ce;const oe=ae&&ie.departure_minutes<I,ge=ae&&!oe&&ie.departure_minutes>=I&&(re.findIndex(ke=>ke.trip_id===ie.trip_id)===0||((ce=re[re.findIndex(ke=>ke.trip_id===ie.trip_id)-1])==null?void 0:ce.departure_minutes)<I);return a.jsx("span",{className:ye("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-xs font-mono transition-all flex-shrink-0","select-none touch-none",oe&&"bg-muted/50 text-muted-foreground/50",ge&&"bg-primary text-white shadow-md scale-105 ring-2 ring-primary/30",!oe&&!ge&&"bg-primary/20 border border-primary/30"),style:!oe&&!ge?{color:A,borderColor:A}:void 0,children:ie.departure_time},ie.trip_id)})})]},F)})})})()]})]}):null]}):a.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Gt,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"        "})]})})]})}const Z7=[{value:"recommended",label:" (Smart)"},{value:"fastest",label:""},{value:"least_walking",label:" "},{value:"least_transfers",label:" "}],q7=[{value:-1,label:""},{value:0,label:""},{value:1,label:" 1"},{value:2,label:" 2"}];function CP(e){return e<1e3?`${Math.round(e)} `:`${(e/1e3).toFixed(1)} `}function K7(e,t,n,r){return`https://www.google.com/maps/dir/?api=1&origin=${e},${t}&destination=${n},${r}&travelmode=walking`}function yg(e,t){return`https://www.google.com/maps/dir/?api=1&origin=${e.stop_lat},${e.stop_lon}&destination=${t.stop_lat},${t.stop_lon}&travelmode=transit`}function Y7({leg:e,isLast:t}){var s,i,l,c,u,h,m,f,g,v;if(e.type==="walk"){const _=(e.walkingMeters||0)>2e3;return a.jsxs("div",{className:"flex items-start gap-4 py-4 relative",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:ye("z-10 w-10 h-10 rounded-full flex items-center justify-center border-2",_?"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-900":"bg-amber-50 dark:bg-amber-950/20 border-amber-200 dark:border-amber-900"),children:_?a.jsx(oc,{className:"h-5 w-5 text-red-600 dark:text-red-400"}):a.jsx(jr,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),!t&&a.jsx("div",{className:ye("absolute top-10 left-5 w-0.5 h-full opacity-30",_?"bg-red-300 dark:bg-red-700":"bg-amber-300 dark:bg-amber-700")})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:ye("font-semibold text-base",_?"text-red-700 dark:text-red-400":"text-amber-700 dark:text-amber-400"),children:[" ",e.walkingMinutes," "]}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-0.5 flex items-center gap-2 flex-wrap",children:[((s=e.fromLocation)==null?void 0:s.name)&&a.jsx("span",{children:e.fromLocation.name}),a.jsx(Co,{className:"h-3 w-3"}),((i=e.toLocation)==null?void 0:i.name)&&a.jsx("span",{children:e.toLocation.name}),e.walkingMeters&&a.jsx("span",{className:ye("px-1.5 py-0.5 rounded-full text-xs font-medium",_?"bg-red-100 dark:bg-red-900/40":"bg-amber-100 dark:bg-amber-900/40"),children:CP(e.walkingMeters)})]}),e.fromLocation&&e.toLocation&&a.jsxs(de,{variant:"outline",size:"sm",className:"mt-2 h-7 rounded-full text-[10px] px-3 border-amber-200 dark:border-amber-900/50",onClick:()=>window.open(K7(e.fromLocation.lat,e.fromLocation.lon,e.toLocation.lat,e.toLocation.lon),"_blank"),children:[a.jsx(Mr,{className:"h-3 w-3 mr-1.5"}),""]})]})]})}const n=(l=e.route)!=null&&l.route_color?`#${e.route.route_color}`:"hsl(var(--primary))",r=(c=e.route)!=null&&c.route_text_color?`#${e.route.route_text_color}`:"white";return a.jsxs("div",{className:"flex items-start gap-4 py-4 relative",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"z-10 w-10 h-10 rounded-xl flex items-center justify-center text-sm font-black shadow-lg shadow-black/10 transition-transform hover:scale-110 cursor-default",style:{"--route-color":n,"--text-color":r},children:((h=(u=e.route)==null?void 0:u.route_short_name)==null?void 0:h.substring(0,3))||a.jsx(Gt,{className:"h-5 w-5"})}),!t&&a.jsx("div",{className:"absolute top-10 left-5 w-0.5 h-full opacity-30",style:{"--route-color":n}})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[a.jsx("span",{className:"text-xs font-heavy px-2 py-0.5 rounded shadow-sm",style:{"--route-color":n,"--text-color":r},children:(m=e.route)==null?void 0:m.route_short_name}),a.jsx("span",{className:"text-base font-bold truncate",children:(f=e.route)==null?void 0:f.route_long_name})]}),a.jsxs("div",{className:"mt-3 p-3 rounded-xl bg-secondary/30 border border-border/40 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2.5 h-2.5 rounded-full ring-4 ring-green-500/10 bg-green-500 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] text-muted-foreground uppercase font-black tracking-tighter",children:""}),a.jsx("div",{className:"text-sm font-bold truncate leading-tight",children:(g=e.fromStop)==null?void 0:g.stop_name})]}),e.departureTime&&a.jsxs("div",{className:"text-right flex flex-col items-end",children:[a.jsx("div",{className:"text-[10px] text-muted-foreground uppercase font-black",children:""}),a.jsx("div",{className:"text-lg font-black text-primary font-mono tabular-nums leading-none",children:e.departureTime.substring(0,5)})]})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-1 border-t border-border/20",children:[a.jsx("div",{className:"w-2.5 h-2.5 rounded-full ring-4 ring-red-500/10 bg-red-500 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] text-muted-foreground uppercase font-black tracking-tighter",children:""}),a.jsx("div",{className:"text-sm font-bold truncate leading-tight",children:(v=e.toStop)==null?void 0:v.stop_name})]}),e.arrivalTime&&a.jsxs("div",{className:"text-right flex flex-col items-end",children:[a.jsx("div",{className:"text-[10px] text-muted-foreground uppercase font-black font-mono",children:""}),a.jsx("div",{className:"text-sm font-black text-muted-foreground font-mono tabular-nums leading-none",children:e.arrivalTime.substring(0,5)})]})]}),e.stopCount&&e.stopCount>0&&a.jsxs("div",{className:"text-[10px] text-muted-foreground/60 italic px-1",children:["  ",e.stopCount," "]})]})]})]})}function J7({journey:e,index:t,onSave:n,onAddToCalendar:r}){const s=e.legs.filter(c=>c.type==="bus"),i=e.legs.filter(c=>c.type==="walk").reduce((c,u)=>c+(u.walkingMeters||0),0),l=i>2e3;return a.jsxs("div",{className:"rounded-2xl border border-border bg-card/60 backdrop-blur-md shadow-sm hover:shadow-xl hover:border-primary/30 transition-all duration-300 group",children:[a.jsxs("div",{className:"bg-gradient-to-r from-primary/[0.08] to-transparent p-4 border-b border-border/50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 text-primary flex items-center justify-center text-sm font-black ring-2 ring-primary/10",children:t+1}),a.jsx("div",{className:"flex items-center gap-1.5 overflow-hidden",children:s.map((c,u)=>{var h,m;return a.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[a.jsx("div",{className:"h-6 px-2 rounded-md flex items-center justify-center text-[11px] font-black text-white shadow-sm",style:{"--route-color":(h=c.route)!=null&&h.route_color?`#${c.route.route_color}`:"hsl(var(--primary))"},children:(m=c.route)==null?void 0:m.route_short_name}),u<s.length-1&&a.jsx(Co,{className:"h-3 w-3 text-muted-foreground/40"})]},u)})})]}),a.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx(Kl,{children:a.jsxs(ya,{children:[a.jsx(xa,{asChild:!0,children:a.jsx(de,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",onClick:n,children:a.jsx(vv,{className:"h-4 w-4"})})}),a.jsx(bo,{children:""})]})}),a.jsx(Kl,{children:a.jsxs(ya,{children:[a.jsx(xa,{asChild:!0,children:a.jsx(de,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",onClick:r,children:a.jsx(Jk,{className:"h-4 w-4"})})}),a.jsx(bo,{children:" "})]})})]})]}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] text-muted-foreground uppercase font-black/60 tracking-widest mb-0.5",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl font-black text-foreground font-mono tabular-nums leading-none",children:e.departureTime.substring(0,5)}),a.jsx("span",{className:"text-muted-foreground/30 font-light",children:""}),a.jsx("span",{className:"text-lg font-black text-muted-foreground/60 font-mono tabular-nums leading-none",children:e.arrivalTime.substring(0,5)})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1.5",children:[a.jsxs("div",{className:"flex items-center gap-1.5 bg-primary/10 text-primary px-2.5 py-1 rounded-full text-xs font-black ring-1 ring-primary/20",children:[a.jsx($n,{className:"h-3.5 w-3.5"}),e.totalDurationMinutes," "]}),a.jsxs("div",{className:"flex gap-2 text-[10px] font-bold text-muted-foreground/80 px-1",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(of,{className:"h-2.5 w-2.5"}),e.transferCount===0?"":`${e.transferCount} `]}),a.jsxs("span",{className:ye("flex items-center gap-1",l&&"text-amber-600 dark:text-amber-500"),children:[a.jsx(jr,{className:"h-2.5 w-2.5"}),CP(i)]})]})]})]})]}),a.jsx("div",{className:"px-5 py-2 divide-y divide-border/30 overflow-hidden",children:e.legs.map((c,u)=>a.jsx(Y7,{leg:c,isLast:u===e.legs.length-1},u))})]})}function X7({origin:e,destination:t,departureTime:n,departureDate:r,data:s,isLoading:i,error:l,onClose:c,isFavorite:u,onToggleFavorite:h,maxWalkingDistance:m=1e3,onWalkingDistanceChange:f}){const[g,v]=p.useState("recommended"),[_,x]=p.useState(-1),{saveTrip:b}=i0(),w=r?r.toDateString()===new Date().toDateString():!0,S=r||new Date,k=p.useMemo(()=>{if(!(s!=null&&s.journeyOptions))return[];let R=[...s.journeyOptions];switch(_>=0&&(R=R.filter(E=>E.transferCount<=_)),g){case"fastest":R.sort((E,B)=>E.totalDurationMinutes-B.totalDurationMinutes);break;case"least_walking":R.sort((E,B)=>E.totalWalkingMinutes-B.totalWalkingMinutes);break;case"least_transfers":R.sort((E,B)=>E.transferCount-B.transferCount);break}return R},[s==null?void 0:s.journeyOptions,g,_]);if(!e||!t)return null;const j=R=>{b(e,t,R,S,15),Gr.success("  !",{description:"   15    "})},T=R=>{const E={id:Math.random().toString(36).substring(7),origin:e,destination:t,journey:R,departureDate:S.toISOString(),savedAt:new Date().toISOString()},B=ly(E);window.open(B,"_blank"),Gr.success("  Google Calendar")};return a.jsx("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center p-2 sm:p-4 bg-background/80 backdrop-blur-xl transition-all duration-500 animate-in fade-in",children:a.jsxs("div",{className:"bg-card/90 border border-border/80 shadow-[0_0_50px_-12px_rgba(0,0,0,0.3)] w-full max-w-2xl h-full max-h-[95vh] flex flex-col rounded-3xl overflow-hidden animate-in zoom-in-95 duration-300",children:[a.jsxs("div",{className:"p-4 sm:p-6 pb-2 sm:pb-4 space-y-4 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-2xl bg-primary flex items-center justify-center shadow-lg shadow-primary/20",children:a.jsx(Mr,{className:"h-5 w-5 text-primary-foreground"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h2",{className:"text-xl font-black uppercase tracking-tight leading-none",children:" "}),a.jsx("span",{className:"text-[10px] text-muted-foreground uppercase font-black tracking-widest mt-0.5",children:"Island-wide Router"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(de,{variant:"secondary",size:"sm",onClick:h,className:ye("h-9 gap-2 rounded-xl text-xs font-bold transition-all",u&&"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/40 dark:text-yellow-400"),children:[a.jsx(ys,{className:ye("h-4 w-4",u&&"fill-current")}),a.jsx("span",{className:"hidden sm:inline",children:u?"":""})]}),a.jsx(de,{variant:"ghost",size:"icon",onClick:c,className:"rounded-full hover:bg-destructive/10 hover:text-destructive h-9 w-9",children:a.jsx(un,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"relative p-4 rounded-2xl bg-secondary/20 border border-border/50 overflow-hidden group",children:[a.jsx("div",{className:"absolute right-0 top-0 h-full aspect-square bg-primary/5 opacity-50 blur-3xl rounded-full -translate-y-1/2 translate-x-1/2 group-hover:bg-primary/10 transition-colors"}),a.jsxs("div",{className:"flex flex-col gap-3 relative z-10",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(It,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] text-muted-foreground uppercase font-black tracking-widest mb-0.5 opacity-60",children:" "}),a.jsx("div",{className:"text-sm font-bold truncate",children:e.stop_name})]})]}),a.jsx("div",{className:"absolute left-[23px] top-6 bottom-6 w-0.5 border-l-2 border-dashed border-border/60"}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(It,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-[10px] text-muted-foreground uppercase font-black tracking-widest mb-0.5 opacity-60",children:" "}),a.jsx("div",{className:"text-sm font-bold truncate",children:t.stop_name})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1",children:[a.jsxs("div",{className:"flex items-center gap-1.5 bg-secondary/40 px-3 py-1.5 rounded-xl text-[11px] font-black whitespace-nowrap",children:[a.jsx(ga,{className:"h-3.5 w-3.5 text-primary"}),w?"":ri(S,"EEEE, d MMM",{locale:f0})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[a.jsxs(Js,{value:g,onValueChange:v,children:[a.jsx(Cs,{className:"h-8 w-[140px] text-[10px] font-black uppercase tracking-tight rounded-xl bg-secondary/20 border-border/40",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(of,{className:"h-3 w-3"}),a.jsx(Xs,{})]})}),a.jsx(js,{className:"z-[3000]",children:Z7.map(R=>a.jsx(Vt,{value:R.value,className:"text-xs",children:R.label},R.value))})]}),a.jsxs(Js,{value:_.toString(),onValueChange:R=>x(parseInt(R)),children:[a.jsx(Cs,{className:"h-8 w-[100px] text-[10px] font-black uppercase tracking-tight rounded-xl bg-secondary/20 border-border/40",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"h-3 w-3"}),a.jsx(Xs,{})]})}),a.jsx(js,{className:"z-[3000]",children:q7.map(R=>a.jsx(Vt,{value:R.value.toString(),className:"text-xs",children:R.label},R.value))})]})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-2 space-y-6 scroll-smooth custom-scrollbar",children:i?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 space-y-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-20 w-20 rounded-3xl bg-primary/10 flex items-center justify-center animate-pulse",children:a.jsx("div",{className:"h-12 w-12 rounded-2xl bg-primary animate-bounce flex items-center justify-center",children:a.jsx(Mr,{className:"h-6 w-6 text-primary-foreground"})})}),a.jsxs("div",{className:"absolute inset-x-0 -bottom-8 flex justify-center space-x-1",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary animate-bounce [animation-delay:-0.3s]"}),a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary animate-bounce [animation-delay:-0.15s]"}),a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary animate-bounce"})]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-lg font-black tracking-tight text-foreground uppercase",children:" "}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-bold",children:" RAPTOR   GTFS..."})]})]}):l?a.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-3xl p-10 text-center space-y-4",children:[a.jsx("div",{className:"h-16 w-16 bg-destructive/20 rounded-full flex items-center justify-center mx-auto",children:a.jsx(oc,{className:"h-8 w-8 text-destructive"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-black uppercase text-destructive",children:" "}),a.jsx("p",{className:"text-sm font-medium text-muted-foreground/80",children:l.message||"    "})]}),a.jsx(de,{variant:"outline",onClick:c,className:"rounded-xl border-destructive/30",children:""})]}):s!=null&&s.noRouteFound?a.jsxs("div",{className:"py-16 text-center space-y-6",children:[a.jsxs("div",{className:"h-24 w-24 bg-secondary/30 rounded-full flex items-center justify-center mx-auto opacity-50 relative",children:[a.jsx(Gt,{className:"h-12 w-12 text-muted-foreground"}),a.jsx(un,{className:"h-8 w-8 text-destructive absolute -right-2 top-0"})]}),a.jsxs("div",{className:"space-y-1 px-10",children:[a.jsx("p",{className:"text-xl font-black uppercase",children:"  "}),a.jsx("p",{className:"text-xs text-muted-foreground font-bold",children:s.message||"         ."})]}),a.jsxs("div",{className:"pt-4 flex flex-col items-center gap-3",children:[a.jsxs(de,{variant:"default",className:"rounded-2xl h-12 px-8 font-black gap-2 shadow-xl shadow-primary/20",onClick:()=>window.open(yg(e,t),"_blank"),children:[a.jsx(af,{className:"h-5 w-5"}),"  Google Maps"]}),a.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest font-black opacity-30",children:"Alternative Routing"})]})]}):k.length===0?a.jsxs("div",{className:"py-20 text-center",children:[a.jsx(oL,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-20"}),a.jsx("p",{className:"font-black uppercase text-muted-foreground",children:" "}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"        ."}),a.jsx(de,{variant:"link",onClick:()=>x(-1),className:"mt-4 font-black uppercase text-[10px] tracking-widest",children:" "})]}):a.jsxs("div",{className:"space-y-6 pb-6 animate-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cx,{className:"h-3.5 w-3.5 text-primary opacity-50"}),a.jsxs("span",{className:"text-[11px] font-black uppercase text-muted-foreground/60 tracking-wider",children:[k.length,"  "]})]}),(s==null?void 0:s.searchedStops)&&a.jsx("span",{className:"text-[9px] font-mono text-muted-foreground/40",children:"Ranked in 42ms"})]}),k.map((R,E)=>a.jsx(J7,{journey:R,index:E,onSave:()=>j(R),onAddToCalendar:()=>T(R)},E))]})}),a.jsxs("div",{className:"p-4 sm:p-6 bg-gradient-to-t from-background to-background/50 border-t border-border/80 flex shrink-0 flex-col sm:flex-row gap-3",children:[a.jsxs(de,{variant:"default",className:"flex-1 h-12 rounded-2xl gap-2 font-black uppercase tracking-tight text-sm shadow-xl shadow-primary/25 active:scale-95 transition-transform",onClick:()=>window.open(yg(e,t),"_blank"),children:[a.jsx(af,{className:"h-5 w-5"})," Google Maps"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",className:"px-6 h-12 rounded-2xl border-border/60 hover:bg-secondary/40 font-black uppercase text-[10px] tracking-widest active:scale-95 transition-transform",onClick:async()=>{const R=yg(e,t),E=` MotionBus: ${e.stop_name}  ${t.stop_name}`;if(navigator.share)try{await navigator.share({title:"MotionBus Router",text:E,url:R});return}catch{}try{await navigator.clipboard.writeText(R),Gr.success("!",{description:" link    "})}catch{Gr.error(" ")}},children:[a.jsx(nC,{className:"h-5 w-5 mr-2"}),"Share"]}),a.jsx(de,{variant:"ghost",onClick:c,className:"h-12 w-12 rounded-2xl border border-border/40 hover:bg-destructive/10 hover:text-destructive",children:a.jsx(un,{className:"h-5 w-5"})})]})]})]})})}const qi=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));qi.displayName="Card";const Rh=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:ye("flex flex-col space-y-1.5 p-6",e),...t}));Rh.displayName="CardHeader";const Lh=p.forwardRef(({className:e,...t},n)=>a.jsx("h3",{ref:n,className:ye("text-2xl font-semibold leading-none tracking-tight",e),...t}));Lh.displayName="CardTitle";const ky=p.forwardRef(({className:e,...t},n)=>a.jsx("p",{ref:n,className:ye("text-sm text-muted-foreground",e),...t}));ky.displayName="CardDescription";const Ki=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:ye("p-6 pt-0",e),...t}));Ki.displayName="CardContent";const Q7=p.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:ye("flex items-center p-6 pt-0",e),...t}));Q7.displayName="CardFooter";const G1=(e,t,n,r)=>{const i=e*Math.PI/180,l=n*Math.PI/180,c=(n-e)*Math.PI/180,u=(r-t)*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(i)*Math.cos(l)*Math.sin(u/2)*Math.sin(u/2);return 6371e3*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))};function eH(e,t,n,r,s,i=500,l=5){return p.useMemo(()=>{if(!e)return[];const c=Math.floor(Date.now()/1e3),u=t.filter(m=>m.stop_lat&&m.stop_lon).map(m=>({stop:m,distance:G1(e.lat,e.lng,m.stop_lat,m.stop_lon)})).filter(m=>m.distance<=i).sort((m,f)=>m.distance-f.distance).slice(0,l),h=new Map;return r.forEach(m=>{m.tripId&&h.set(m.tripId,m)}),u.map(({stop:m,distance:f})=>{const g=[];return n.forEach(v=>{if(!v.stopTimeUpdates)return;const _=v.stopTimeUpdates.find(k=>k.stopId===m.stop_id);if(!_)return;const x=v.tripId?h.get(v.tripId):null;if(x!=null&&x.currentStopSequence&&_.stopSequence&&_.stopSequence<x.currentStopSequence)return;const b=v.routeId?s.get(v.routeId):null;let w=_.arrivalTime,S;if(w)S=Math.max(0,Math.round((w-c)/60));else if(x!=null&&x.latitude&&(x!=null&&x.longitude)&&(x!=null&&x.speed)&&x.speed>0){const j=G1(x.latitude,x.longitude,m.stop_lat,m.stop_lon)/x.speed/60;S=Math.round(j)}S!==void 0&&S>120||w&&w<c-60||g.push({tripId:v.tripId||v.id,routeId:v.routeId||"",routeShortName:b==null?void 0:b.route_short_name,routeLongName:b==null?void 0:b.route_long_name,routeColor:b==null?void 0:b.route_color,vehicleId:x==null?void 0:x.vehicleId,vehicleLabel:(x==null?void 0:x.label)||v.vehicleLabel,arrivalTime:_.arrivalTime,departureTime:_.departureTime,delay:_.arrivalDelay,stopSequence:_.stopSequence,estimatedMinutes:S})}),g.sort((v,_)=>v.estimatedMinutes===void 0?1:_.estimatedMinutes===void 0?-1:v.estimatedMinutes-_.estimatedMinutes),{stop:m,distance:f,arrivals:g.slice(0,10)}})},[e,t,n,r,s,i,l])}const tH=e=>e<1e3?`${Math.round(e)} .`:`${(e/1e3).toFixed(1)} `,nH=e=>{if(e===void 0)return"";if(e===0)return"";if(e===1)return"1 ";if(e<60)return`${e} `;const t=Math.floor(e/60),n=e%60;return`${t} ${n} `};function rH({stops:e,trips:t,vehicles:n,routeNamesMap:r,onSelectVehicle:s,onStopSelect:i,onHighlightStop:l}){var bt,Fn;const[c,u]=p.useState(null),[h,m]=p.useState(!1),[f,g]=p.useState(null),[v,_]=p.useState(null),[x,b]=p.useState(()=>{const ue=localStorage.getItem("nearbyNotificationDistance");return ue?parseInt(ue,10):500}),{setNotification:w,getNotification:S,removeNotification:k,clearAllNotifications:j,forceSync:T}=gd(),{subscribe:R}=jm(),[E,B]=p.useState(()=>{const ue=localStorage.getItem("nearbyNotificationSettings");return ue?JSON.parse(ue):{sound:!0,vibration:!0,voice:!0,push:!0}}),[q,Y]=p.useState(!1),[te,A]=p.useState(!1),[W,P]=p.useState("fixed"),[Z,$]=p.useState(null),[U,I]=p.useState(!1),[O,F]=p.useState(70),[X,re]=p.useState({x:0,y:0}),[ae,ie]=p.useState(!1),[oe,ge]=p.useState("resize"),ce=p.useRef({x:0,y:0}),ke=p.useRef(70),Oe=p.useRef({x:0,y:0}),Pe=p.useRef(null),Te=eH(c,e,t,n,r,1e3,10),{data:We}=w7((v==null?void 0:v.stop_id)||null),wt=p.useMemo(()=>{if(!We)return[];const ue=Math.floor(Date.now()/1e3);return We.map(Ve=>{const Ie=r.get(Ve.routeId),Fe=Math.max(0,Math.round((Ve.bestArrivalTime-ue)/60));return{tripId:Ve.tripId||`siri-${Ve.routeId}-${Ve.bestArrivalTime}`,routeId:Ve.routeId,routeShortName:(Ie==null?void 0:Ie.route_short_name)||Ve.routeId,routeLongName:Ie==null?void 0:Ie.route_long_name,routeColor:Ie==null?void 0:Ie.route_color,vehicleId:Ve.vehicleId,vehicleLabel:Ve.vehicleId,arrivalTime:Ve.bestArrivalTime,estimatedMinutes:Fe,source:Ve.source,confidence:Ve.confidence}})},[We,r]),kt=Te.length>0?Te[0].stop:null,ot=Z?{stop_id:Z.stopId,stop_name:Z.stopName}:v?{stop_id:v.stop_id,stop_name:v.stop_name}:null;p.useEffect(()=>(te&&kt&&l&&l(kt),()=>{}),[te,kt,l]),p.useEffect(()=>{localStorage.setItem("nearbyNotificationDistance",x.toString())},[x]),p.useEffect(()=>{localStorage.setItem("nearbyNotificationSettings",JSON.stringify(E))},[E]),p.useEffect(()=>{localStorage.setItem("stopTrackingMode",W)},[W]);const Q=p.useCallback(ue=>{$({stopId:ue.stop_id,stopName:ue.stop_name}),P("fixed"),tt({title:"   ",description:ue.stop_name})},[]),he=p.useCallback(ue=>{B(Ve=>{const Ie={...Ve,[ue]:!Ve[ue]};return ue==="push"&&Ie.push&&R().then(Fe=>{Fe||B(Ot=>({...Ot,push:!1}))}),Ie})},[R]),me=p.useCallback(()=>{if(!navigator.geolocation){g("   ");return}m(!0),g(null);const ue=(Ve,Ie=0)=>{navigator.geolocation.getCurrentPosition(Fe=>{u({lat:Fe.coords.latitude,lng:Fe.coords.longitude}),m(!1),g(null)},Fe=>{if(Ve&&Ie===0){console.log("High accuracy failed, trying low accuracy..."),ue(!1,1);return}if(!Ve&&Ie===1){console.log("Low accuracy failed, final retry..."),ue(!1,2);return}switch(m(!1),Fe.code){case Fe.PERMISSION_DENIED:g("     ");break;case Fe.POSITION_UNAVAILABLE:g("    ");break;case Fe.TIMEOUT:g("   .   .");break}},{enableHighAccuracy:Ve,timeout:Ve?15e3:3e4,maximumAge:6e4})};ue(!0,0)},[]),Ue=p.useCallback(()=>{navigator.geolocation&&(Pe.current!==null&&navigator.geolocation.clearWatch(Pe.current),Pe.current=navigator.geolocation.watchPosition(ue=>{u({lat:ue.coords.latitude,lng:ue.coords.longitude}),g(null)},()=>{},{enableHighAccuracy:!0,maximumAge:1e4}))},[]);p.useEffect(()=>()=>{Pe.current!==null&&navigator.geolocation.clearWatch(Pe.current)},[]);const Ze=p.useCallback(async ue=>{if(!await R([])||!ot)return;const Ie=S(ot.stop_id),Fe=(Ie==null?void 0:Ie.watchedTrips)||[];let Ot;const Mt=Fe.includes(ue.tripId);Mt?Ot=Fe.filter(_n=>_n!==ue.tripId):(Ot=[...Fe,ue.tripId],E.push||tt({title:" Push  ",description:"  ,   push       .",variant:"destructive"})),w({stopId:ot.stop_id,stopName:ot.stop_name,enabled:!0,sound:E.sound,vibration:E.vibration,voice:E.voice,push:E.push,beforeMinutes:Math.round(x/100),watchedTrips:Ot,notifyType:"selected"}),tt({title:Mt?" ":" ",description:`  : ${ue.routeShortName||ue.routeId}`})},[R,ot,S,w,E,x,T]),ze=p.useCallback(ue=>{_(ue),i==null||i(ue),l&&l(ue),Ue()},[i,l,Ue]),_t=p.useCallback(ue=>{ue.vehicleId&&s&&(A(!1),I(!1),_(null),l&&l(null),s(ue.vehicleId,ue.tripId,ue.routeId))},[s,l]),dt=p.useCallback(()=>{A(!0),I(!1),me()},[me]),En=p.useCallback(()=>{A(!1),_(null),F(70),l&&l(null)},[l]),Yn=p.useCallback(ue=>{ue.preventDefault(),ie(!0),ge("resize");const Ve="touches"in ue?ue.touches[0].clientY:ue.clientY;ce.current={x:0,y:Ve},ke.current=O},[O]),Rt=p.useCallback(ue=>{const Ve=ue.target;if(Ve.closest("button")||Ve.closest("input")||Ve.closest("[data-no-drag]"))return;ue.preventDefault(),ie(!0),ge("move");const Ie="touches"in ue?ue.touches[0].clientX:ue.clientX,Fe="touches"in ue?ue.touches[0].clientY:ue.clientY;ce.current={x:Ie,y:Fe},Oe.current={x:X.x,y:X.y}},[X]),rn=p.useCallback(ue=>{if(!ae)return;const Ve="touches"in ue?ue.touches[0].clientX:ue.clientX,Ie="touches"in ue?ue.touches[0].clientY:ue.clientY;if(oe==="resize"){const Ot=(ce.current.y-Ie)/window.innerHeight*100,Mt=Math.max(30,Math.min(90,ke.current+Ot));F(Mt)}else{const Fe=Ve-ce.current.x,Ot=Ie-ce.current.y,Mt=window.innerWidth-320,_n=window.innerHeight-200,Jn=Math.max(-20,Math.min(Mt,Oe.current.x+Fe)),Tt=Math.max(60,Math.min(_n,Oe.current.y+Ot));re({x:Jn,y:Tt})}},[ae,oe]),Jt=p.useCallback(ue=>{if(ie(!1),oe==="resize"){const Ie=(ue&&"changedTouches"in ue?ue.changedTouches[0].clientY:(ue==null?void 0:ue.clientY)||0)-ce.current.y,Fe=Ie/200;if(Ie>150||O<20||Fe>1.5){En();return}O<40?F(30):O>75?F(85):F(60)}else X.y>window.innerHeight-100&&En()},[O,oe,X.y,En]);if(p.useEffect(()=>(ae&&(document.addEventListener("mousemove",rn),document.addEventListener("mouseup",Jt),document.addEventListener("touchmove",rn,{passive:!1}),document.addEventListener("touchend",Jt),document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",rn),document.removeEventListener("mouseup",Jt),document.removeEventListener("touchmove",rn),document.removeEventListener("touchend",Jt),document.body.style.userSelect=""}),[ae,rn,Jt]),!te)return a.jsx(de,{variant:"default",size:"lg",className:"fixed bottom-24 sm:bottom-20 right-4 z-40 h-12 w-12 sm:h-14 sm:w-14 rounded-full shadow-lg hover:scale-105 transition-transform",onClick:dt,title:"  ",children:a.jsx(It,{className:"h-5 w-5 sm:h-6 sm:w-6"})});if(U)return a.jsx("div",{className:"fixed bottom-24 sm:bottom-20 right-4 z-40 md:hidden",children:a.jsxs(de,{variant:"default",size:"lg",className:"h-12 sm:h-14 px-3 sm:px-4 rounded-full shadow-lg flex items-center gap-2 hover:scale-105 transition-transform",onClick:()=>I(!1),children:[a.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("span",{className:"text-xs sm:text-sm max-w-[100px] sm:max-w-[120px] truncate",children:"  "})]})});const Et=a.jsxs("div",{className:"flex flex-col h-full bg-card rounded-lg border border-border overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",style:{backgroundColor:"#6B8E23"},children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(It,{className:"h-5 w-5 text-white"}),a.jsx("span",{className:"font-semibold text-sm text-white",children:"  "})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>Y(!q),className:"h-7 w-7 text-white hover:bg-white/20",children:a.jsx(tC,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:me,disabled:h,className:"h-7 w-7 text-white hover:bg-white/20",children:h?a.jsx(qn,{className:"h-4 w-4 animate-spin"}):a.jsx(Mr,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>{X.x===0&&X.y===0?re({x:16,y:100}):re({x:0,y:0})},className:"h-7 w-7 md:hidden text-white hover:bg-white/20",title:X.x===0?"Floating mode":"Docked mode",children:a.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:X.x===0&&X.y===0?a.jsxs(a.Fragment,{children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M9 3v18M3 9h6"})]}):a.jsxs(a.Fragment,{children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M3 15h18"})]})})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>I(!0),className:"h-7 w-7 text-white hover:bg-white/20",children:a.jsx(vL,{className:"h-4 w-4"})}),a.jsx(de,{variant:"ghost",size:"icon",onClick:En,className:"h-7 w-7 text-white hover:bg-white/20",children:a.jsx(un,{className:"h-4 w-4"})})]})]}),a.jsx(xm,{open:q,onOpenChange:Y,children:a.jsx(ad,{className:"p-3 border-b border-border bg-muted/50",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dn,{className:`h-4 w-4 ${E.push?"text-green-500":"text-muted-foreground"}`}),a.jsx("span",{className:"text-sm font-medium",children:"Push "})]}),a.jsx("button",{className:`relative w-12 h-6 rounded-full transition-colors ${E.push?"bg-green-500":"bg-muted-foreground/30"}`,onClick:()=>he("push"),children:a.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white shadow transition-transform ${E.push?"translate-x-7":"translate-x-1"}`})})]}),E.push&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{className:`flex-1 h-9 text-xs flex items-center justify-center gap-1.5 rounded-md border transition-all ${E.sound?"bg-green-500/20 border-green-500 text-green-400":"bg-muted/30 border-muted-foreground/20 text-muted-foreground"}`,onClick:()=>he("sound"),children:[a.jsx(xv,{className:"h-3.5 w-3.5"}),""]}),a.jsxs("button",{className:`flex-1 h-9 text-xs flex items-center justify-center gap-1.5 rounded-md border transition-all ${E.vibration?"bg-green-500/20 border-green-500 text-green-400":"bg-muted/30 border-muted-foreground/20 text-muted-foreground"}`,onClick:()=>he("vibration"),children:[a.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2"}),a.jsx("path",{d:"M2 8v8M22 8v8",strokeLinecap:"round"})]}),""]}),a.jsxs("button",{className:`flex-1 h-9 text-xs flex items-center justify-center gap-1.5 rounded-md border transition-all ${E.voice?"bg-green-500/20 border-green-500 text-green-400":"bg-muted/30 border-muted-foreground/20 text-muted-foreground"}`,onClick:()=>he("voice"),children:[a.jsxs("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),a.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8"})]}),""]})]}),E.push&&a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted/40",children:[a.jsx("span",{className:"text-xs font-medium",children:"    ;"}),a.jsx("button",{className:`relative w-10 h-5 rounded-full transition-colors ${((bt=S((ot==null?void 0:ot.stop_id)||""))==null?void 0:bt.notifyType)==="all"?"bg-blue-500":"bg-muted-foreground/30"}`,onClick:()=>{const ue=S((ot==null?void 0:ot.stop_id)||"");ue&&ot&&(w({...ue,notifyType:ue.notifyType==="all"?"selected":"all"}),tt({title:ue.notifyType==="all"?": ":": ",description:ue.notifyType==="all"?"         ().":"          ."}))},children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white shadow transition-transform ${((Fn=S((ot==null?void 0:ot.stop_id)||""))==null?void 0:Fn.notifyType)==="all"?"translate-x-6":"translate-x-1"}`})})]}),E.push&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"     :"}),a.jsx("span",{className:"text-sm font-bold text-primary",children:x<1e3?`${x} `:`${x/1e3} `})]}),a.jsx("div",{className:"flex gap-1",children:[200,500,1e3,2e3].map(ue=>a.jsx(de,{variant:x===ue?"default":"outline",size:"sm",className:"flex-1 h-8 text-xs",onClick:()=>b(ue),children:ue<1e3?`${ue} `:`${ue/1e3} `},ue))})]})]})})}),f&&a.jsxs("div",{className:"flex items-center gap-2 text-destructive text-xs p-2 bg-destructive/10",children:[a.jsx(oc,{className:"h-3 w-3"}),f]}),a.jsx(ca,{className:"flex-1",children:a.jsx("div",{className:"p-2 space-y-2",children:v?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-sm",children:v.stop_name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:v.stop_id})]}),a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>{_(null),l&&l(null)},children:a.jsx(un,{className:"h-4 w-4"})})]}),wt.length===0?a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(Gt,{className:"h-10 w-10 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"   "})]}):a.jsx("div",{className:"space-y-2",children:wt.map(ue=>{var Fe;const Ve=S(v.stop_id),Ie=(Fe=Ve==null?void 0:Ve.watchedTrips)==null?void 0:Fe.includes(ue.tripId);return a.jsx(qi,{className:`${Ie?"ring-2 ring-primary bg-primary/5":""}`,children:a.jsxs(Ki,{className:"p-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsx(Zn,{variant:"secondary",className:"shrink-0 text-xs",style:{backgroundColor:ue.routeColor?`#${ue.routeColor}`:void 0,color:ue.routeColor?"#fff":void 0},children:ue.routeShortName||ue.routeId}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs font-medium truncate",children:ue.routeLongName||ue.routeId}),ue.vehicleLabel&&a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[": ",ue.vehicleLabel]})]})]}),a.jsx("div",{className:"text-right shrink-0 ml-2",children:a.jsx("p",{className:`text-sm font-bold ${ue.estimatedMinutes!==void 0&&ue.estimatedMinutes<=2?"text-green-500":ue.estimatedMinutes!==void 0&&ue.estimatedMinutes<=5?"text-yellow-500":""}`,children:nH(ue.estimatedMinutes)})})]}),a.jsxs("div",{className:"flex gap-1 mt-2",children:[a.jsx(de,{variant:Ie?"default":"outline",size:"sm",className:"flex-1 h-7 text-xs",onClick:()=>Ze(ue),children:Ie?a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"h-3 w-3 mr-1"}),""]}):a.jsxs(a.Fragment,{children:[a.jsx(Dn,{className:"h-3 w-3 mr-1"}),""]})}),ue.vehicleId&&a.jsxs(de,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",onClick:()=>_t(ue),children:[a.jsx(Gt,{className:"h-3 w-3 mr-1"}),"."]})]})]})},ue.tripId)})})]}):a.jsxs(a.Fragment,{children:[!c&&!h&&!f&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Mr,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"  "}),a.jsxs(de,{size:"sm",onClick:me,children:[a.jsx(jx,{className:"h-4 w-4 mr-1"}),""]})]}),h&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qn,{className:"h-10 w-10 mx-auto mb-3 animate-spin text-primary"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"..."})]}),c&&Te.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(It,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"  "})]}),Te.map((ue,Ve)=>{const Ie=W==="fixed"&&(Z==null?void 0:Z.stopId)===ue.stop.stop_id;return a.jsx(qi,{className:`cursor-pointer hover:bg-accent/50 transition-colors ${Ie?"ring-2 ring-primary bg-primary/10":Ve===0&&W==="auto"?"ring-2 ring-green-500 bg-green-500/10":""}`,onClick:()=>ze(ue.stop),children:a.jsxs(Ki,{className:"p-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(It,{className:`h-4 w-4 shrink-0 mt-0.5 ${Ie?"text-primary":Ve===0&&W==="auto"?"text-green-500":"text-muted-foreground"}`}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-medium text-sm leading-tight",children:ue.stop.stop_name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:tH(ue.distance)}),Ie&&a.jsx("span",{className:"text-[10px] text-primary font-medium",children:" "}),Ve===0&&W==="auto"&&a.jsx("span",{className:"text-[10px] text-green-500 font-medium",children:" "})]})]})]})}),a.jsxs("div",{className:"flex items-center gap-1",children:[E.push&&!Ie&&a.jsx(de,{variant:"ghost",size:"sm",className:"h-6 px-1.5 text-[10px]",onClick:Fe=>{Fe.stopPropagation(),Q(ue.stop)},children:a.jsx(It,{className:"h-3 w-3"})}),ue.arrivals.length>0&&a.jsx(Zn,{variant:"secondary",className:"text-xs",children:ue.arrivals.length}),a.jsx(Co,{className:"h-4 w-4 text-muted-foreground"})]})]}),ue.arrivals.length>0&&a.jsxs("div",{className:"mt-1 ml-6 flex flex-wrap gap-1",children:[ue.arrivals.slice(0,3).map(Fe=>a.jsxs(Zn,{variant:"outline",className:"text-[10px] py-0",style:{borderColor:Fe.routeColor?`#${Fe.routeColor}`:void 0},children:[Fe.routeShortName||Fe.routeId,Fe.estimatedMinutes!==void 0&&a.jsxs("span",{className:"ml-1 opacity-70",children:[Fe.estimatedMinutes,""]})]},Fe.tripId)),ue.arrivals.length>3&&a.jsxs(Zn,{variant:"outline",className:"text-[10px] py-0",children:["+",ue.arrivals.length-3]})]})]})},ue.stop.stop_id)})]})})})]});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"fixed z-50 md:hidden transition-all duration-150 ease-out shadow-2xl",style:{left:X.x===0?0:X.x,right:X.x===0?0:"auto",bottom:X.y===0?0:"auto",top:X.y!==0?X.y:"auto",height:X.y===0?`${O}vh`:"60vh",width:X.x===0?"auto":"min(90vw, 360px)"},children:[X.x===0&&X.y===0&&a.jsx("div",{className:"absolute top-0 left-0 right-0 h-6 flex items-center justify-center cursor-grab active:cursor-grabbing bg-card rounded-t-xl border-t border-x border-border touch-none",onMouseDown:Yn,onTouchStart:Yn,children:a.jsx("div",{className:"w-10 h-1 rounded-full bg-muted-foreground/40"})}),(X.x!==0||X.y!==0)&&a.jsxs("div",{className:"absolute top-0 left-0 right-0 h-8 flex items-center justify-center gap-2 cursor-grab active:cursor-grabbing bg-card rounded-t-xl border border-border touch-none",onMouseDown:Rt,onTouchStart:Rt,children:[a.jsx(aL,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"  "})]}),a.jsx("div",{className:`h-full ${X.x===0&&X.y===0?"pt-6":"pt-8 rounded-xl border border-border overflow-hidden"}`,onMouseDown:X.x!==0||X.y!==0?Rt:void 0,onTouchStart:X.x!==0||X.y!==0?Rt:void 0,children:Et})]}),a.jsx("div",{className:"hidden md:block fixed inset-0 pointer-events-none z-50",children:a.jsx("div",{className:"relative w-full h-full pointer-events-none",children:a.jsx(Ny,{initialPosition:{x:window.innerWidth-360,y:100},initialSize:{width:340,height:450},minSize:{width:280,height:300},maxSize:{width:500,height:700},className:"pointer-events-auto",title:" ",zIndex:1100,children:Et})})})]})}/*! Capacitor: https://capacitorjs.com/ - MIT License */var tc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(tc||(tc={}));class xg extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const sH=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},iH=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>t!==null?t.name:sH(e),i=()=>s()!=="web",l=f=>{const g=h.get(f);return!!(g!=null&&g.platforms.has(s())||c(f))},c=f=>{var g;return(g=n.PluginHeaders)===null||g===void 0?void 0:g.find(v=>v.name===f)},u=f=>e.console.error(f),h=new Map,m=(f,g={})=>{const v=h.get(f);if(v)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),v.proxy;const _=s(),x=c(f);let b;const w=async()=>(!b&&_ in g?b=typeof g[_]=="function"?b=await g[_]():b=g[_]:t!==null&&!b&&"web"in g&&(b=typeof g.web=="function"?b=await g.web():b=g.web),b),S=(B,q)=>{var Y,te;if(x){const A=x==null?void 0:x.methods.find(W=>q===W.name);if(A)return A.rtype==="promise"?W=>n.nativePromise(f,q.toString(),W):(W,P)=>n.nativeCallback(f,q.toString(),W,P);if(B)return(Y=B[q])===null||Y===void 0?void 0:Y.bind(B)}else{if(B)return(te=B[q])===null||te===void 0?void 0:te.bind(B);throw new xg(`"${f}" plugin is not implemented on ${_}`,tc.Unimplemented)}},k=B=>{let q;const Y=(...te)=>{const A=w().then(W=>{const P=S(W,B);if(P){const Z=P(...te);return q=Z==null?void 0:Z.remove,Z}else throw new xg(`"${f}.${B}()" is not implemented on ${_}`,tc.Unimplemented)});return B==="addListener"&&(A.remove=async()=>q()),A};return Y.toString=()=>`${B.toString()}() { [capacitor code] }`,Object.defineProperty(Y,"name",{value:B,writable:!1,configurable:!1}),Y},j=k("addListener"),T=k("removeListener"),R=(B,q)=>{const Y=j({eventName:B},q),te=async()=>{const W=await Y;T({eventName:B,callbackId:W},q)},A=new Promise(W=>Y.then(()=>W({remove:te})));return A.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await te()},A},E=new Proxy({},{get(B,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?R:j;case"removeListener":return T;default:return k(q)}}});return r[f]=E,h.set(f,{name:f,proxy:E,platforms:new Set([...Object.keys(g),...x?[_]:[]])}),E};return n.convertFileSrc||(n.convertFileSrc=f=>f),n.getPlatform=s,n.handleError=u,n.isNativePlatform=i,n.isPluginAvailable=l,n.registerPlugin=m,n.Exception=xg,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},oH=e=>e.Capacitor=iH(e),$f=oH(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),vd=$f.registerPlugin;class A0{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(t);const l=async()=>this.removeListener(t,n);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const s=this.listeners[t];if(!s){if(r){let i=this.retainedEventArguments[t];i||(i=[]),i.push(n),this.retainedEventArguments[t]=i}return}s.forEach(i=>i(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new $f.Exception(t,tc.Unimplemented)}unavailable(t="not available"){return new $f.Exception(t,tc.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const s=r.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const Z1=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),q1=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class aH extends A0{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=q1(s).trim(),i=q1(i).trim(),n[s]=i}),n}async setCookie(t){try{const n=Z1(t.key),r=Z1(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),l=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${l};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}vd("CapacitorCookies",{web:()=>new aH});const lH=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(e)}),cH=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,i,l)=>(s[i]=e[t[l]],s),{})},uH=(e,t=!0)=>e?Object.entries(e).reduce((r,s)=>{const[i,l]=s;let c,u;return Array.isArray(l)?(u="",l.forEach(h=>{c=t?encodeURIComponent(h):h,u+=`${i}=${c}&`}),u.slice(0,-1)):(c=t?encodeURIComponent(l):l,u=`${i}=${c}`),`${r}&${u}`},"").substr(1):null,dH=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=cH(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[l,c]of Object.entries(e.data||{}))i.set(l,c);n.body=i.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((c,u)=>{i.append(u,c)});else for(const c of Object.keys(e.data))i.append(c,e.data[c]);n.body=i;const l=new Headers(n.headers);l.delete("content-type"),n.headers=l}else(s.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class hH extends A0{async request(t){const n=dH(t,t.webFetchExtra),r=uH(t.params,t.shouldEncodeUrlParams),s=r?`${t.url}?${r}`:t.url,i=await fetch(s,n),l=i.headers.get("content-type")||"";let{responseType:c="text"}=i.ok?t:{};l.includes("application/json")&&(c="json");let u,h;switch(c){case"arraybuffer":case"blob":h=await i.blob(),u=await lH(h);break;case"json":u=await i.json();break;case"document":case"text":default:u=await i.text()}const m={};return i.headers.forEach((f,g)=>{m[g]=f}),{data:u,headers:m,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}vd("CapacitorHttp",{web:()=>new hH});var K1;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(K1||(K1={}));var Y1;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(Y1||(Y1={}));class fH extends A0{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}vd("SystemBars",{web:()=>new fH});const Ka=vd("PushNotifications",{});var J1;(function(e){e[e.Sunday=1]="Sunday",e[e.Monday=2]="Monday",e[e.Tuesday=3]="Tuesday",e[e.Wednesday=4]="Wednesday",e[e.Thursday=5]="Thursday",e[e.Friday=6]="Friday",e[e.Saturday=7]="Saturday"})(J1||(J1={}));const uh=vd("LocalNotifications",{web:()=>lu(()=>import("./web-C6yNE48i.js"),[]).then(e=>new e.LocalNotificationsWeb)});function jP(){const[e,t]=p.useState({isNative:!1,isSupported:!1,isRegistered:!1,pushToken:null}),n=$f.isNativePlatform();p.useEffect(()=>{if(!n){t(m=>({...m,isNative:!1,isSupported:!1}));return}t(m=>({...m,isNative:!0,isSupported:!0})),uh.requestPermissions().then(m=>{console.log("Local notification permissions:",m)})},[n]);const r=p.useCallback(async()=>{if(!n)return console.log("Not running in native app, skipping push registration"),null;try{return(await Ka.requestPermissions()).receive!=="granted"?(tt({title:" ",description:"      ",variant:"destructive"}),null):(await Ka.register(),Ka.addListener("registration",f=>{console.log("Push registration success, token:",f.value),t(g=>({...g,isRegistered:!0,pushToken:f.value})),localStorage.setItem("native_push_token",f.value)}),Ka.addListener("registrationError",f=>{console.error("Push registration error:",f),tt({title:" ",description:"   push notifications",variant:"destructive"})}),Ka.addListener("pushNotificationReceived",f=>{console.log("Push notification received:",f),s({title:f.title||"Motion Bus",body:f.body||"",id:Date.now()})}),Ka.addListener("pushNotificationActionPerformed",f=>{console.log("Push notification action:",f);const g=f.notification.data;g!=null&&g.url&&(window.location.href=g.url)}),!0)}catch(m){return console.error("Error registering push notifications:",m),null}},[n]),s=p.useCallback(async m=>{if(!n){"Notification"in window&&Notification.permission==="granted"&&new Notification(m.title,{body:m.body});return}try{const f={notifications:[{id:m.id||Date.now(),title:m.title,body:m.body,schedule:m.scheduleAt?{at:m.scheduleAt}:void 0,extra:m.extra,sound:"default",smallIcon:"ic_stat_icon_config_sample",iconColor:"#3b82f6"}]};await uh.schedule(f),console.log("Local notification scheduled:",m)}catch(f){console.error("Error scheduling local notification:",f)}},[n]),i=p.useCallback(async(m,f=15)=>{const g=new Date(m.departureTime.getTime()-f*60*1e3);if(g<=new Date){console.log("Reminder time is in the past, skipping");return}const v=m.routeNames.join("  ");await s({id:parseInt(m.id.replace(/\D/g,"").slice(0,9))||Date.now(),title:`   ${f} !`,body:`${m.origin}  ${m.destination}
: ${v}`,scheduleAt:g,extra:{tripId:m.id,type:"trip_reminder"}}),tt({title:" ",description:`  ${f}    `})},[s]),l=p.useCallback(async m=>{if(n)try{await uh.cancel({notifications:[{id:m}]}),console.log("Notification cancelled:",m)}catch(f){console.error("Error cancelling notification:",f)}},[n]),c=p.useCallback(async()=>{if(!n)return[];try{return(await uh.getPending()).notifications}catch(m){return console.error("Error getting pending notifications:",m),[]}},[n]),u=p.useCallback((m="medium")=>{try{const f=new(window.AudioContext||window.webkitAudioContext),g=f.createOscillator(),v=f.createGain();g.connect(v),v.connect(f.destination);const _={low:440,medium:660,high:880};g.frequency.value=_[m],g.type="sine",v.gain.setValueAtTime(.3,f.currentTime),v.gain.exponentialRampToValueAtTime(.01,f.currentTime+.5),g.start(f.currentTime),g.stop(f.currentTime+.5)}catch(f){console.error("Error playing sound:",f)}},[]),h=p.useCallback((m=[200,100,200])=>{"vibrate"in navigator&&navigator.vibrate(m)},[]);return{...e,registerPush:r,scheduleLocalNotification:s,scheduleTripReminder:i,cancelNotification:l,getPendingNotifications:c,playSound:u,vibrate:h}}function mH(e){const t=new Date;if(e<t)return{text:"",isUrgent:!1,isPast:!0};const n=jE(e,t),r=V8(e,t),s=H8(e,t);if(n<15)return{text:` ${n} !`,isUrgent:!0,isPast:!1};if(n<60)return{text:` ${n} `,isUrgent:n<30,isPast:!1};if(r<24){const i=n%60;return{text:` ${r} ${i>0?i+"'":""}`,isUrgent:!1,isPast:!1}}else return{text:` ${s} `,isUrgent:!1,isPast:!1}}function X1({trip:e,onDelete:t,onAddToCalendar:n,onScheduleReminder:r}){const{isNative:s,scheduleLocalNotification:i,playSound:l,vibrate:c}=jP(),[u,h]=p.useState({text:"",isUrgent:!1,isPast:!1}),m=p.useMemo(()=>{const v=new Date(e.departureDate),[_,x]=e.journey.departureTime.split(":").map(Number);return v.setHours(_,x,0,0),v},[e.departureDate,e.journey.departureTime]);p.useEffect(()=>{const v=()=>h(mH(m));v();const _=setInterval(v,6e4);return()=>clearInterval(_)},[m]),p.useEffect(()=>{if(!e.reminderMinutes)return;const v=e.reminderMinutes,_=()=>{var S,k;const w=jE(m,new Date);if(w>0&&w<=v){const T=e.journey.legs.filter(E=>E.type==="bus")[0],R=`   ${(S=T==null?void 0:T.route)==null?void 0:S.route_short_name}  ${w}   ${(k=T==null?void 0:T.fromStop)==null?void 0:k.stop_name}`;l(w<=5?"high":w<=10?"medium":"low"),c(w<=5?[300,100,300,100,300]:[200,100,200]),s?i({title:"   !",body:R,id:parseInt(e.id.replace(/\D/g,"").slice(0,9))||Date.now()}):"Notification"in window&&Notification.permission==="granted"&&new Notification("   !",{body:R,icon:"/pwa-192x192.png",tag:`trip-${e.id}`}),Gr.info(`  ${w} !`,{description:`    ${e.origin.stop_name}`})}};_();const x=setInterval(_,6e4);return()=>clearInterval(x)},[e,m,s,i,l,c]);const g=e.journey.legs.filter(v=>v.type==="bus").map(v=>{var _;return(_=v.route)==null?void 0:_.route_short_name}).join("  ");return a.jsxs("div",{className:ye("rounded-xl border bg-card overflow-hidden transition-all",u.isUrgent&&"border-amber-500 ring-2 ring-amber-500/20 animate-pulse",u.isPast&&"opacity-50"),children:[a.jsxs("div",{className:ye("p-3 border-b",u.isUrgent?"bg-gradient-to-r from-amber-500/20 to-orange-500/10 border-amber-500/30":"bg-gradient-to-r from-primary/10 to-primary/5 border-border"),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"font-bold text-lg",children:g})}),a.jsx("div",{className:ye("text-sm font-bold px-2 py-1 rounded",u.isUrgent?"bg-amber-500 text-white":u.isPast?"bg-muted text-muted-foreground":"bg-primary/10 text-primary"),children:u.text})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[a.jsx(It,{className:"h-3 w-3"}),a.jsx("span",{className:"truncate",children:e.origin.stop_name}),a.jsx(Co,{className:"h-3 w-3"}),a.jsx("span",{className:"truncate",children:e.destination.stop_name})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm",children:[a.jsx($n,{className:"h-3 w-3 text-muted-foreground"}),a.jsx("span",{className:"font-mono font-bold text-primary",children:e.journey.departureTime.substring(0,5)}),a.jsx("span",{className:"text-muted-foreground",children:""}),a.jsx("span",{className:"font-mono text-muted-foreground",children:e.journey.arrivalTime.substring(0,5)}),a.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:ri(new Date(e.departureDate),"dd/MM",{locale:f0})})]})]}),a.jsx("div",{className:"p-3 space-y-2",children:e.journey.legs.map((v,_)=>{var x,b,w,S,k,j;return a.jsx("div",{className:"flex items-center gap-2 text-sm",children:v.type==="walk"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-100 dark:bg-amber-900/40 flex items-center justify-center",children:a.jsx(jr,{className:"h-3 w-3 text-amber-600 dark:text-amber-400"})}),a.jsxs("span",{className:"text-muted-foreground",children:[" ",v.walkingMinutes,"'"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:(x=v.route)!=null&&x.route_color?`#${v.route.route_color}`:"hsl(var(--primary))"},children:(w=(b=v.route)==null?void 0:b.route_short_name)==null?void 0:w.substring(0,2)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"font-medium",children:(S=v.fromStop)==null?void 0:S.stop_name}),a.jsx("span",{className:"text-muted-foreground mx-1",children:""}),a.jsx("span",{className:"text-muted-foreground",children:(k=v.toStop)==null?void 0:k.stop_name})]}),a.jsx("span",{className:"font-mono text-xs text-primary",children:(j=v.departureTime)==null?void 0:j.substring(0,5)})]})},_)})}),a.jsxs("div",{className:"p-2 border-t border-border bg-muted/30 flex gap-1",children:[a.jsxs(de,{variant:"ghost",size:"sm",className:"flex-1 text-xs gap-1",onClick:r,children:[a.jsx(Dn,{className:"h-3 w-3"}),""]}),a.jsxs(de,{variant:"ghost",size:"sm",className:"flex-1 text-xs gap-1",onClick:n,children:[a.jsx(Jk,{className:"h-3 w-3"}),""]}),a.jsx(de,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:t,children:a.jsx(cf,{className:"h-4 w-4"})})]})]})}function pH({isOpen:e,onClose:t}){const{savedTrips:n,deleteTrip:r,getUpcomingTrips:s}=i0(),{scheduleTripReminder:i,isNative:l,registerPush:c}=jP();p.useEffect(()=>{l?c():"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[l,c]);const u=g=>{const v=new Date(g.departureDate),[_,x]=g.journey.departureTime.split(":").map(Number);v.setHours(_,x,0,0);const w=g.journey.legs.filter(S=>S.type==="bus").map(S=>{var k;return((k=S.route)==null?void 0:k.route_short_name)||""}).filter(Boolean);i({id:g.id,departureTime:v,origin:g.origin.stop_name,destination:g.destination.stop_name,routeNames:w},15)},h=s(),m=n.filter(g=>!h.includes(g));return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col overflow-hidden border border-border",children:[a.jsxs("div",{className:"p-4 flex-shrink-0",style:{backgroundColor:"#6B8E23"},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-9 h-9 rounded-lg bg-white/20 text-white flex items-center justify-center",children:a.jsx(Gt,{className:"h-5 w-5"})}),a.jsx("h2",{className:"text-lg font-medium text-white",children:"  "})]}),a.jsx(de,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white hover:bg-white/20",onClick:t,children:a.jsx(un,{className:"h-4 w-4"})})]}),n.length>0&&a.jsxs("p",{className:"text-sm text-white/90 mt-1",children:[h.length,"  "]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-4 bg-white",children:n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Gt,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-30"}),a.jsx("p",{className:"font-medium",children:"   "}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"      "})]}):a.jsxs(a.Fragment,{children:[h.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:""}),a.jsx("div",{className:"space-y-3",children:h.map(g=>a.jsx(X1,{trip:g,onDelete:()=>{r(g.id),Gr.success("  ")},onAddToCalendar:()=>{window.open(ly(g),"_blank")},onScheduleReminder:()=>u(g)},g.id))})]}),m.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:""}),a.jsx("div",{className:"space-y-3",children:m.slice(0,5).map(g=>a.jsx(X1,{trip:g,onDelete:()=>{r(g.id),Gr.success("  ")},onAddToCalendar:()=>{window.open(ly(g),"_blank")},onScheduleReminder:()=>u(g)},g.id))})]})]})}),a.jsx("div",{className:"p-4 border-t border-border bg-muted/30 flex-shrink-0",children:a.jsx(de,{variant:"outline",className:"w-full",onClick:t,children:""})})]})}):null}function gH(){const[e,t]=p.useState(null),[n,r]=p.useState(!1),[s,i]=p.useState(!1),[l,c]=p.useState(!1),[u,h]=p.useState(!1);p.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const g=localStorage.getItem("pwa_banner_dismissed");if(g){const b=parseInt(g,10);if((Date.now()-b)/(1e3*60*60)<24)return}const v=navigator.userAgent,_=/iPad|iPhone|iPod/.test(v)&&!window.MSStream;if(c(_),_){const b=setTimeout(()=>r(!0),3e3);return()=>clearTimeout(b)}const x=b=>{b.preventDefault(),t(b),setTimeout(()=>r(!0),2e3)};return window.addEventListener("beforeinstallprompt",x),window.addEventListener("appinstalled",()=>{i(!0),r(!1),t(null)}),()=>{window.removeEventListener("beforeinstallprompt",x)}},[]);const m=async()=>{if(!e)return;await e.prompt();const{outcome:g}=await e.userChoice;g==="accepted"&&i(!0),t(null),r(!1)},f=()=>{r(!1),localStorage.setItem("pwa_banner_dismissed",Date.now().toString())};return s||!n?null:l?a.jsx("div",{className:ye("fixed bottom-0 left-0 right-0 z-30 p-3 sm:p-4 safe-area-bottom","animate-in slide-in-from-bottom duration-500"),children:a.jsxs("div",{className:"bg-card border border-border rounded-2xl shadow-2xl overflow-hidden max-w-md mx-auto",children:[a.jsxs("div",{className:"bg-gradient-to-r from-primary/20 to-primary/5 p-4 flex items-start gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center flex-shrink-0",children:a.jsx(yv,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-bold text-lg",children:"  Motion Bus"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"       "})]}),a.jsx(de,{variant:"ghost",size:"icon",className:"flex-shrink-0 -mt-1 -mr-1",onClick:f,children:a.jsx(un,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Dn,{className:"h-4 w-4 text-primary"}),a.jsx("span",{children:"  "})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(kL,{className:"h-4 w-4 text-amber-500"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(uf,{className:"h-4 w-4 text-emerald-500"}),a.jsx("span",{children:" offline"})]})]}),u?a.jsx("div",{className:"p-4 pt-0 space-y-3",children:a.jsxs("div",{className:"bg-muted/50 rounded-xl p-3 space-y-2",children:[a.jsxs("p",{className:"font-medium text-sm",children:["1.    ",a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-background rounded text-primary",children:"Share "})]}),a.jsxs("p",{className:"font-medium text-sm",children:["2.  ",a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-background rounded text-primary",children:"Add to Home Screen"})]})]})}):a.jsx("div",{className:"p-4 pt-0",children:a.jsxs(de,{className:"w-full gap-2",onClick:()=>h(!0),children:[a.jsx(Hl,{className:"h-4 w-4"}),"  "]})})]})}):a.jsx("div",{className:ye("fixed bottom-0 left-0 right-0 z-30 p-3 sm:p-4 safe-area-bottom","animate-in slide-in-from-bottom duration-500"),children:a.jsxs("div",{className:"bg-card border border-border rounded-2xl shadow-2xl overflow-hidden max-w-md mx-auto",children:[a.jsxs("div",{className:"bg-gradient-to-r from-primary/20 to-primary/5 p-4 flex items-start gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/20 flex items-center justify-center flex-shrink-0",children:a.jsx(yv,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-bold text-lg",children:"  Motion Bus"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:" ,  & offline "})]}),a.jsx(de,{variant:"ghost",size:"icon",className:"flex-shrink-0 -mt-1 -mr-1",onClick:f,children:a.jsx(un,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4 pt-2 flex gap-2",children:[a.jsx(de,{variant:"outline",className:"flex-1",onClick:f,children:" "}),a.jsxs(de,{className:"flex-1 gap-2",onClick:m,children:[a.jsx(Hl,{className:"h-4 w-4"}),""]})]})]})})}function wg({onRefresh:e,children:t,className:n,disabled:r=!1,threshold:s=80}){const[i,l]=p.useState(!1),[c,u]=p.useState(0),[h,m]=p.useState(!1),f=p.useRef(null),g=p.useRef(0),v=p.useRef(0),_=p.useCallback(()=>{if(r||h)return!1;const j=f.current;return j?j.scrollTop<=0:!1},[r,h]),x=p.useCallback(j=>{_()&&(g.current=j.touches[0].clientY,v.current=g.current)},[_]),b=p.useCallback(j=>{if(!_())return;v.current=j.touches[0].clientY;const T=v.current-g.current;if(T>0){const E=T*.4;l(!0),u(Math.min(E,s*1.5)),E>10&&j.preventDefault()}},[_,s]),w=p.useCallback(async()=>{if(i){if(c>=s){m(!0),u(s*.6);try{await e()}catch(j){console.error("Refresh failed:",j)}finally{m(!1)}}l(!1),u(0)}},[i,c,s,e]);p.useEffect(()=>{const j=f.current;if(j)return j.addEventListener("touchstart",x,{passive:!0}),j.addEventListener("touchmove",b,{passive:!1}),j.addEventListener("touchend",w),()=>{j.removeEventListener("touchstart",x),j.removeEventListener("touchmove",b),j.removeEventListener("touchend",w)}},[x,b,w]);const S=Math.min(c/s,1),k=i||h;return a.jsxs("div",{ref:f,className:ye("relative overflow-auto",n),style:{touchAction:i?"none":"auto"},children:[a.jsx("div",{className:ye("absolute left-0 right-0 flex items-center justify-center z-10 pointer-events-none transition-opacity duration-200",k?"opacity-100":"opacity-0"),style:{top:0,height:c,transform:`translateY(${Math.max(0,c-40)}px)`},children:a.jsx("div",{className:ye("flex items-center justify-center w-10 h-10 rounded-full bg-primary/10 backdrop-blur-sm border border-primary/20",h&&"animate-pulse"),children:a.jsx(lf,{className:ye("h-5 w-5 text-primary transition-transform duration-200",h&&"animate-spin"),style:{transform:h?void 0:`rotate(${S*180}deg)`}})})}),a.jsx("div",{style:{transform:k?`translateY(${c}px)`:void 0,transition:i?"none":"transform 0.2s ease-out"},children:t}),i&&!h&&a.jsx("div",{className:"absolute top-2 left-0 right-0 text-center text-xs text-muted-foreground pointer-events-none transition-opacity",style:{opacity:S>.3?1:0,transform:`translateY(${c-20}px)`},children:S>=1?"  ":"  "})]})}const vH="https://jftthfniwfarxyisszjh.supabase.co",yH=()=>"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw";function xH(e,t,n={}){const{departureTime:r="now",departureDate:s=new Date,maxWalkingDistance:i=1e3,maxTransfers:l=2,preference:c="fastest",includeNightBuses:u=!0}=n;return ti({queryKey:["smart-trip-plan",e==null?void 0:e.stop_id,t==null?void 0:t.stop_id,r,s.toDateString(),i,l,c,u],queryFn:async()=>{if(!e||!t)return{journeyOptions:[],noRouteFound:!0};console.log(`Searching journeys via backend: ${e.stop_name}  ${t.stop_name}`);const h=yH(),m=new URLSearchParams({originLat:(e.stop_lat??0).toString(),originLon:(e.stop_lon??0).toString(),destLat:(t.stop_lat??0).toString(),destLon:(t.stop_lon??0).toString(),departureTime:r==="now"?new Date().toLocaleTimeString("en-GB",{hour12:!1}):r==="all_day"?"00:00:00":`${r}:00`,maxTransfers:l.toString(),walkDistance:i.toString(),preference:c,includeNightBuses:u.toString()}),f=await fetch(`${vH}/functions/v1/route-planner?${m}`,{headers:{Authorization:`Bearer ${h}`,apikey:h}});if(!f.ok)throw new Error("Failed to fetch routes from backend");const v=(await f.json()).data||[];return{journeyOptions:v,noRouteFound:v.length===0,message:v.length===0?"  .         .":void 0}},enabled:!!e&&!!t,staleTime:2*60*1e3,retry:1})}const Q1="transit-favorite-routes";function wH(){const[e,t]=p.useState([]);p.useEffect(()=>{try{const l=localStorage.getItem(Q1);l&&t(JSON.parse(l))}catch(l){console.error("Failed to load favorites:",l)}},[]);const n=p.useCallback(l=>{t(l),localStorage.setItem(Q1,JSON.stringify(l))},[]),r=p.useCallback((l,c)=>{const u=`${l.stop_id}-${c.stop_id}`;if(e.some(m=>m.id===u))return!1;const h={id:u,origin:l,destination:c,createdAt:Date.now()};return n([h,...e]),!0},[e,n]),s=p.useCallback(l=>{n(e.filter(c=>c.id!==l))},[e,n]),i=p.useCallback((l,c)=>e.some(u=>u.id===`${l}-${c}`),[e]);return{favorites:e,addFavorite:r,removeFavorite:s,isFavorite:i}}const _H=()=>{var Sn,dn,Se,ii,oi,$r,Ps,ns,V,fe,pe,D,K;const[e,t]=oD(),[n,r]=p.useState(()=>{try{const z=localStorage.getItem("motionbus_theme");if(z!==null)return z==="dark";const H=localStorage.getItem("motionbus_map_style");return H==="dark"||H==="satellite"}catch{}return!1}),[s,i]=p.useState(()=>{try{const z=localStorage.getItem("motionbus_map_style");if(z==="light"||z==="dark"||z==="satellite")return z}catch{}return"light"}),[l,c]=p.useState(5),[u,h]=p.useState("map"),[m,f]=p.useState("all"),[g,v]=p.useState("all"),[_,x]=p.useState(!1),[b,w]=p.useState(null),[S,k]=p.useState(null),[j,T]=p.useState(null),[R,E]=p.useState("now"),[B,q]=p.useState(new Date),[Y,te]=p.useState(!1),[A,W]=p.useState(()=>{const z=localStorage.getItem("maxWalkingDistance");return z?parseInt(z,10):1e3}),[P,Z]=p.useState(2),[$,U]=p.useState("balanced"),[I,O]=p.useState(!0),[F,X]=p.useState(null),[re,ae]=p.useState(null),[ie,oe]=p.useState(()=>{const z=localStorage.getItem("delayNotificationsEnabled");return z!==null?JSON.parse(z):!0});p.useEffect(()=>{n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]),p.useEffect(()=>{const z=async()=>{await wP()&&(document.removeEventListener("touchstart",z),document.removeEventListener("click",z))};return document.addEventListener("touchstart",z,{passive:!0}),document.addEventListener("click",z,{passive:!0}),()=>{document.removeEventListener("touchstart",z),document.removeEventListener("click",z)}},[]),p.useEffect(()=>{if(Y){window.history.pushState({modal:"tripResults"},"");const z=H=>{te(!1)};return window.addEventListener("popstate",z),()=>{window.removeEventListener("popstate",z)}}},[Y]);const ge=p.useCallback(()=>{const z=!n;r(z),localStorage.setItem("motionbus_theme",z?"dark":"light"),z&&s==="light"?(i("dark"),localStorage.setItem("motionbus_map_style","dark")):!z&&s==="dark"&&(i("light"),localStorage.setItem("motionbus_map_style","light"))},[n,s]),ce=p.useCallback(z=>{i(z),localStorage.setItem("motionbus_map_style",z),r(z==="dark"||z==="satellite")},[]),ke=()=>{const z=!ie;oe(z),localStorage.setItem("delayNotificationsEnabled",JSON.stringify(z))},{getUpcomingTrips:Oe}=i0(),[Pe,Te]=p.useState(!1),{favorites:We,addFavorite:wt,removeFavorite:kt,isFavorite:ot}=wH(),Q=m7(l,m),he=p7(l,m),me=g7(l,m),Ue=bP(m),Ze=v7(m),[ze,_t]=p.useState(()=>{try{const z=localStorage.getItem("gtfs_cached_vehicles");return z?JSON.parse(z):null}catch{return null}}),[dt,En]=p.useState(()=>{try{const z=localStorage.getItem("gtfs_cached_trips");return z?JSON.parse(z):null}catch{return null}}),[Yn,Rt]=p.useState(()=>{try{const z=localStorage.getItem("gtfs_cached_alerts");return z?JSON.parse(z):null}catch{return null}}),[rn,Jt]=p.useState(!1);p.useEffect(()=>{var z;if((z=Q.data)!=null&&z.data&&Q.data.data.length>0){_t(Q.data);try{localStorage.setItem("gtfs_cached_vehicles",JSON.stringify(Q.data)),localStorage.setItem("gtfs_cache_timestamp",Date.now().toString())}catch(H){console.warn("Failed to persist vehicle cache:",H)}}},[Q.data]),p.useEffect(()=>{var z;if((z=he.data)!=null&&z.data&&he.data.data.length>0){En(he.data);try{localStorage.setItem("gtfs_cached_trips",JSON.stringify(he.data))}catch(H){console.warn("Failed to persist trips cache:",H)}}},[he.data]),p.useEffect(()=>{var z;if((z=me.data)!=null&&z.data){Rt(me.data);try{localStorage.setItem("gtfs_cached_alerts",JSON.stringify(me.data))}catch(H){console.warn("Failed to persist alerts cache:",H)}}},[me.data]),p.useEffect(()=>{var le,we,$e,Le,Me,Re;const z=Q.isError||he.isError,H=!((we=(le=Q.data)==null?void 0:le.data)!=null&&we.length)&&!((Le=($e=he.data)==null?void 0:$e.data)!=null&&Le.length),ee=(((Me=ze==null?void 0:ze.data)==null?void 0:Me.length)??0)>0||(((Re=dt==null?void 0:dt.data)==null?void 0:Re.length)??0)>0;Jt(z&&H&&ee)},[Q.isError,he.isError,Q.data,he.data,ze,dt]);const Et=p.useMemo(()=>{var z;return(z=Q.data)!=null&&z.data&&Q.data.data.length>0?Q.data:Q.isError&&ze?ze:Q.data},[Q.data,Q.isError,ze]),bt=p.useMemo(()=>{var z;return(z=he.data)!=null&&z.data&&he.data.data.length>0?he.data:he.isError&&dt?dt:he.data},[he.data,he.isError,dt]),Fn=p.useMemo(()=>{var z;return(z=me.data)!=null&&z.data?me.data:me.isError&&Yn?Yn:me.data},[me.data,me.isError,Yn]),ue=xH(S,j,{departureTime:R,departureDate:B,maxWalkingDistance:A,maxTransfers:P,preference:$,includeNightBuses:I}),Ve=p.useCallback(z=>{W(z),localStorage.setItem("maxWalkingDistance",z.toString())},[]),Ie=p.useMemo(()=>{var H,ee;const z=new Map;return(ee=(H=Ue.data)==null?void 0:H.data)==null||ee.forEach(le=>{z.set(le.route_id,le)}),z},[Ue.data]),{notifications:Fe}=gd();_P((bt==null?void 0:bt.data)||[],Ie,Fe,!0);const Ot=p.useMemo(()=>{var H,ee;const z=new Set;return(H=Et==null?void 0:Et.data)==null||H.forEach(le=>{le.routeId&&z.add(le.routeId)}),(ee=bt==null?void 0:bt.data)==null||ee.forEach(le=>{le.routeId&&z.add(le.routeId)}),z},[Et,bt]),Mt=p.useMemo(()=>{var H,ee;if(_)return Array.from(Ot);const z=((ee=(H=Ue.data)==null?void 0:H.data)==null?void 0:ee.map(le=>le.route_id))||[];return z.length>0?z:Array.from(Ot)},[Ue.data,Ot,_]);p.useEffect(()=>{v("all"),Ze.refetch()},[m]),p.useEffect(()=>{const z=e.get("route"),H=e.get("stop");z&&(v(z),h("map")),H&&(w(H),h("map"))},[e]);const _n=p.useCallback(z=>{const H=new URLSearchParams(e);z.route!==void 0&&(z.route&&z.route!=="all"?H.set("route",z.route):H.delete("route")),z.stop!==void 0&&(z.stop?H.set("stop",z.stop):H.delete("stop"));const ee=z.route||z.stop;t(H,{replace:!ee})},[e,t]);p.useEffect(()=>{_n({route:g})},[g]);const Jn=p.useMemo(()=>{const z=(Et==null?void 0:Et.data)||[];return g==="all"?z:z.filter(H=>H.routeId===g)},[Et,g]),Tt=p.useMemo(()=>{const z=(bt==null?void 0:bt.data)||[];return g==="all"?z:z.filter(H=>H.routeId===g)},[bt,g]);p.useEffect(()=>{document.documentElement.classList.toggle("dark",n)},[n]);const sn=Q.isLoading||he.isLoading||me.isLoading,bn=Q.isError||he.isError||me.isError,mn=((Sn=Q.error)==null?void 0:Sn.message)||((dn=he.error)==null?void 0:dn.message)||((Se=me.error)==null?void 0:Se.message),qe=p.useRef(!1);p.useEffect(()=>{qe.current&&!bn&&!sn?(Gr.success(" ",{description:" live    ",duration:4e3}),qe.current=!1):bn&&!sn&&(qe.current=!0)},[bn,sn]);const Be=Math.max(((ii=Q.data)==null?void 0:ii.timestamp)||0,((oi=he.data)==null?void 0:oi.timestamp)||0,(($r=me.data)==null?void 0:$r.timestamp)||0),[ct,ht]=p.useState(0),Lt=p.useRef(null),Ct=p.useRef(null),Xt=p.useCallback(()=>{Q.refetch(),he.refetch(),me.refetch()},[Q,he,me]),qt=p.useCallback(async()=>{Gr.info(" ..."),await Promise.all([Q.refetch(),he.refetch(),me.refetch()]),Gr.success("  ")},[Q,he,me]);p.useEffect(()=>{if(bn&&!sn){Lt.current&&clearTimeout(Lt.current),Ct.current&&clearInterval(Ct.current);const z=30;ht(z),Ct.current=setInterval(()=>{ht(H=>H<=1?(Ct.current&&clearInterval(Ct.current),0):H-1)},1e3),Lt.current=setTimeout(()=>{Xt()},z*1e3)}else Lt.current&&(clearTimeout(Lt.current),Lt.current=null),Ct.current&&(clearInterval(Ct.current),Ct.current=null),ht(0);return()=>{Lt.current&&clearTimeout(Lt.current),Ct.current&&clearInterval(Ct.current)}},[bn,sn,Xt]);const Kt=((ns=(Ps=me.data)==null?void 0:Ps.data)==null?void 0:ns.length)||0;return a.jsxs("div",{className:"h-[100dvh] flex flex-col bg-background overflow-hidden",children:[a.jsx(OW,{isDark:n,onToggleTheme:ge,refreshInterval:l,onRefreshIntervalChange:c,lastUpdate:Be||null,isLoading:sn,selectedOperator:m,onOperatorChange:f,selectedRoute:g,onRouteChange:v,availableRoutes:Mt,routeNamesMap:Ie,isRoutesLoading:Ue.isLoading,showLiveOnly:_,onShowLiveOnlyChange:x,liveRoutesCount:Ot.size,stops:((V=Ze.data)==null?void 0:V.data)||[],stopsLoading:Ze.isLoading,onTripSearch:(z,H,ee,le,we,$e,Le)=>{k(z),T(H),E(ee),q(le),Le&&(W(Le.maxWalkingDistance),Z(Le.maxTransfers),U(Le.preference),O(Le.includeNightBuses)),te(!0)},favorites:We,onRemoveFavorite:kt,delayNotificationsEnabled:ie,onToggleDelayNotifications:ke,hasApiError:bn,apiErrorMessage:mn,onApiRetry:Xt,retryCountdown:ct,isUsingCachedData:rn,onOpenSavedTrips:()=>Te(!0),savedTripsCount:Oe().length}),a.jsx(pH,{isOpen:Pe,onClose:()=>Te(!1)}),Y&&a.jsx(X7,{origin:S,destination:j,departureTime:R,departureDate:B,data:ue.data,isLoading:ue.isLoading,error:ue.error,onClose:()=>window.history.back(),isFavorite:S&&j?ot(S.stop_id,j.stop_id):!1,onToggleFavorite:()=>{S&&j&&(ot(S.stop_id,j.stop_id)?(kt(`${S.stop_id}-${j.stop_id}`),Gr.success("   ")):(wt(S,j),Gr.success("  ")))},maxWalkingDistance:A,onWalkingDistanceChange:Ve}),bn&&a.jsx(DW,{message:mn||" ",onRetry:Xt}),a.jsx("main",{className:"flex-1 min-h-0 container mx-auto px-1 sm:px-4 py-1 sm:py-2 flex flex-col",children:a.jsxs(qx,{value:u,onValueChange:h,className:"h-full flex flex-col",children:[a.jsxs(vm,{className:"grid w-full grid-cols-5 mb-1 sm:mb-2 h-auto flex-shrink-0",children:[a.jsxs(Zr,{value:"map",className:"flex flex-col sm:flex-row items-center gap-0.5 sm:gap-1 py-1.5 sm:py-2 px-0.5 sm:px-3",children:[a.jsx(af,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-[9px] sm:text-sm leading-tight",children:"Live "})]}),a.jsxs(Zr,{value:"trips",className:"flex flex-col sm:flex-row items-center gap-0.5 sm:gap-1 py-1.5 sm:py-2 px-0.5 sm:px-3",children:[a.jsx(Vl,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-[9px] sm:text-sm leading-tight",children:"Live "})]}),a.jsxs(Zr,{value:"stops",className:"flex flex-col sm:flex-row items-center gap-0.5 sm:gap-1 py-1.5 sm:py-2 px-0.5 sm:px-3",children:[a.jsx(It,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-[9px] sm:text-sm leading-tight",children:"Live "})]}),a.jsxs(Zr,{value:"schedule",className:"flex flex-col sm:flex-row items-center gap-0.5 sm:gap-1 py-1.5 sm:py-2 px-0.5 sm:px-3",children:[a.jsx(ga,{className:"h-4 w-4"}),a.jsx("span",{className:"text-[9px] sm:text-sm leading-tight",children:""})]}),a.jsxs(Zr,{value:"alerts",className:"flex flex-col sm:flex-row items-center gap-0.5 sm:gap-1 py-1.5 sm:py-2 px-0.5 sm:px-3 relative",children:[a.jsx(Dn,{className:"h-4 w-4"}),a.jsx("span",{className:"text-[9px] sm:text-sm leading-tight",children:""}),Kt>0&&a.jsx("span",{className:"absolute top-0 right-0 w-4 h-4 bg-destructive text-destructive-foreground text-[9px] rounded-full flex items-center justify-center",children:Kt})]})]}),a.jsxs("div",{className:"flex-1 min-h-0 glass-card rounded-lg overflow-hidden",children:[a.jsx(qr,{value:"map",className:"h-full m-0",children:a.jsx(I7,{vehicles:Jn,trips:Tt,stops:((fe=Ze.data)==null?void 0:fe.data)||[],routeNamesMap:Ie,selectedRoute:g,selectedOperator:m,onRouteClose:()=>v("all"),isLoading:Q.isLoading,highlightedStop:F,followVehicleId:re,onFollowVehicle:ae,refreshInterval:l,lastUpdate:Be,deepLinkStopId:b,onStopPanelChange:z=>{_n({stop:z}),z||w(null)},mapStyle:s,onMapStyleChange:ce})}),a.jsx(qr,{value:"trips",className:"h-full m-0",children:a.jsx(wg,{onRefresh:qt,className:"h-full",children:a.jsx(L7,{trips:Tt,isLoading:he.isLoading,routeNames:Ie,stops:((pe=Ze.data)==null?void 0:pe.data)||[],onTripSelect:z=>{z.routeId&&v(z.routeId),z.vehicleId&&ae(z.vehicleId),h("map")}})})}),a.jsx(qr,{value:"stops",className:"h-full m-0",children:a.jsx(wg,{onRefresh:qt,className:"h-full",children:a.jsx(z7,{trips:Tt,stops:((D=Ze.data)==null?void 0:D.data)||[],routeNamesMap:Ie,isLoading:he.isLoading,selectedOperator:m})})}),a.jsx(qr,{value:"schedule",className:"h-full m-0 overflow-auto",children:a.jsx(G7,{selectedOperator:m,onOperatorChange:f})}),a.jsx(qr,{value:"alerts",className:"h-full m-0",children:a.jsx(wg,{onRefresh:qt,className:"h-full",children:a.jsx(W7,{alerts:(Fn==null?void 0:Fn.data)||[],trips:Tt,routeNamesMap:Ie,isLoading:me.isLoading})})})]})]})}),u==="map"&&a.jsx(rH,{stops:((K=Ze.data)==null?void 0:K.data)||[],trips:(bt==null?void 0:bt.data)||[],vehicles:(Et==null?void 0:Et.data)||[],routeNamesMap:Ie,onSelectVehicle:(z,H,ee)=>{ee&&v(ee),ae(z),h("map")},onStopSelect:z=>{h("map")},onHighlightStop:z=>{X(z)}}),a.jsx(gH,{})]})},bH="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjAgMzUiPg0KICA8ZGVmcz4NCiAgICA8bGluZWFyR3JhZGllbnQgaWQ9Im1vdGlvbkdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMDBBMEUzIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6IzhEQzYzRiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkRCOTEzIi8+DQogICAgPC9saW5lYXJHcmFkaWVudD4NCiAgPC9kZWZzPg0KICA8dGV4dCB4PSIyIiB5PSIyNiIgZm9udC1mYW1pbHk9IkFyaWFsIEJsYWNrLCBBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjkwMCIgZm9udC1zaXplPSIyOCIgZmlsbD0idXJsKCNtb3Rpb25HcmFkaWVudCkiPg0KICAgIG1vdGlvbg0KICA8L3RleHQ+DQo8L3N2Zz4=";function SH(){const[e,t]=p.useState(null),[n,r]=p.useState(!1),[s,i]=p.useState(!1),[l,c]=p.useState(!1);p.useEffect(()=>{const h=navigator.userAgent;i(/iPad|iPhone|iPod/.test(h)),c(/Android/.test(h)),window.matchMedia("(display-mode: standalone)").matches&&r(!0);const m=f=>{f.preventDefault(),t(f)};return window.addEventListener("beforeinstallprompt",m),()=>{window.removeEventListener("beforeinstallprompt",m)}},[]);const u=async()=>{if(!e)return;await e.prompt();const{outcome:h}=await e.userChoice;h==="accepted"&&r(!0),t(null)};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("header",{className:"glass-card border-b sticky top-0 z-50",children:a.jsx("div",{className:"container mx-auto px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(yf,{to:"/",children:a.jsx(de,{variant:"ghost",size:"icon",className:"h-9 w-9",children:a.jsx(U_,{className:"h-5 w-5"})})}),a.jsx("img",{src:bH,alt:"Motion Logo",className:"h-6"}),a.jsx("h1",{className:"text-lg font-bold",children:""})]})})}),a.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-lg space-y-6",children:[a.jsxs("div",{className:"text-center space-y-4 py-6",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-primary/10 rounded-2xl flex items-center justify-center",children:a.jsx(yv,{className:"w-10 h-10 text-primary"})}),a.jsx("h2",{className:"text-2xl font-bold",children:" Motion Bus"}),a.jsx("p",{className:"text-muted-foreground",children:"          offline ."})]}),n&&a.jsx(qi,{className:"border-success/50 bg-success/5",children:a.jsx(Ki,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ac,{className:"h-8 w-8 text-success"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-success",children:"   !"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"       ."})]})]})})}),e&&!n&&a.jsx(qi,{className:"border-primary/50",children:a.jsx(Ki,{className:"pt-6",children:a.jsxs(de,{onClick:u,className:"w-full h-14 text-lg gap-3",size:"lg",children:[a.jsx(Hl,{className:"h-6 w-6"})," "]})})}),s&&!n&&a.jsxs(qi,{children:[a.jsxs(Rh,{children:[a.jsxs(Lh,{className:"flex items-center gap-2",children:[a.jsx(X3,{className:"h-5 w-5"}),"  iPhone/iPad"]}),a.jsx(ky,{children:"     Safari"})]}),a.jsxs(Ki,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-sm font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:"   Share"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"     Safari"}),a.jsxs("div",{className:"mt-2 p-3 bg-muted/50 rounded-lg inline-flex items-center gap-2",children:[a.jsx(_L,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"text-sm",children:"Share"})]})]})]}),a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-sm font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:' "Add to Home Screen"'}),a.jsx("p",{className:"text-sm text-muted-foreground",children:" scroll      "}),a.jsxs("div",{className:"mt-2 p-3 bg-muted/50 rounded-lg inline-flex items-center gap-2",children:[a.jsx(yL,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"text-sm",children:"Add to Home Screen"})]})]})]}),a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-sm font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:' "Add"  '}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"      "})]})]})]})]}),l&&!e&&!n&&a.jsxs(qi,{children:[a.jsxs(Rh,{children:[a.jsxs(Lh,{className:"flex items-center gap-2",children:[a.jsx(nL,{className:"h-5 w-5"}),"  Android"]}),a.jsx(ky,{children:"     Chrome"})]}),a.jsxs(Ki,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-sm font-bold text-primary",children:"1"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:"  "}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"   "}),a.jsxs("div",{className:"mt-2 p-3 bg-muted/50 rounded-lg inline-flex items-center gap-2",children:[a.jsx(sL,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"text-sm",children:"Menu"})]})]})]}),a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-sm font-bold text-primary",children:"2"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:' "Install app"  "Add to Home screen"'}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"     "}),a.jsxs("div",{className:"mt-2 p-3 bg-muted/50 rounded-lg inline-flex items-center gap-2",children:[a.jsx(Hl,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"text-sm",children:"Install app"})]})]})]}),a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-sm font-bold text-primary",children:"3"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:"  "}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"      "})]})]})]})]}),a.jsxs(qi,{children:[a.jsx(Rh,{children:a.jsx(Lh,{children:""})}),a.jsxs(Ki,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ac,{className:"h-5 w-5 text-success flex-shrink-0"}),a.jsx("span",{children:"     "})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ac,{className:"h-5 w-5 text-success flex-shrink-0"}),a.jsx("span",{children:"  address bar"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ac,{className:"h-5 w-5 text-success flex-shrink-0"}),a.jsx("span",{children:"   "})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ac,{className:"h-5 w-5 text-success flex-shrink-0"}),a.jsx("span",{children:"  "})]})]})]}),a.jsx("div",{className:"text-center pt-4",children:a.jsx(yf,{to:"/",children:a.jsxs(de,{variant:"outline",className:"gap-2",children:[a.jsx(U_,{className:"h-4 w-4"}),"  "]})})})]})]})}const NH=()=>{const e=dc();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},kH=new W5,CH=()=>{if(typeof window<"u"){const e=window.location.pathname;if(e.startsWith("/MotionAG"))return"/MotionAG";if(e.startsWith("/MotionBus_AI"))return"/MotionBus_AI"}return"/MotionAG/"},jH=()=>a.jsx(q5,{client:kH,children:a.jsxs(Kl,{children:[a.jsx(cA,{}),a.jsx(eb,{}),a.jsx(eb,{}),a.jsx(nD,{basename:CH(),children:a.jsxs(q4,{children:[a.jsx(jh,{path:"/",element:a.jsx(_H,{})}),a.jsx(jh,{path:"/install",element:a.jsx(SH,{})}),a.jsx(jh,{path:"*",element:a.jsx(NH,{})})]})})]})});window.location.pathname==="/MotionAG"&&(console.log("[main.tsx]  Force redirecting to trailing slash for SW scope..."),window.location.replace(window.location.href+"/"));typeof window<"u"&&(window.onerror=async function(e,t,n,r,s){try{const{createClient:i}=await lu(async()=>{const{createClient:h}=await Promise.resolve().then(()=>jf);return{createClient:h}},void 0);await i("https://jftthfniwfarxyisszjh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw").from("notifications_log").insert({stop_id:"RUNTIME_ERROR",route_id:"RUNTIME_CRASH",alert_level:0,metadata:{message:e,source:t,lineno:n,colno:r,error:String(s),version:"v1.5.17.9.4",timestamp:new Date().toISOString()}})}catch{}},(async()=>{try{const{createClient:e}=await lu(async()=>{const{createClient:l}=await Promise.resolve().then(()=>jf);return{createClient:l}},void 0),r=e("https://jftthfniwfarxyisszjh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw");let s=!1,i=0;if(typeof navigator<"u"&&"serviceWorker"in navigator){s=!0;try{i=(await navigator.serviceWorker.getRegistrations()).length}catch{}}await r.from("notifications_log").insert({stop_id:"BOOTSTRAP",route_id:"APP_BOOT",alert_level:0,metadata:{step:"BOOTSTRAP",version:"v1.5.17.9.4",href:window.location.href,sw_supported:s,reg_count:i,timestamp:new Date().toISOString()}})}catch{}})());if("serviceWorker"in navigator){const e=window.location.pathname.includes("MotionAG"),t=e?"/MotionAG/":"/",n=e?"/MotionAG/":"/",r=`${t}sw.js`.replace(/\/\/+/g,"/");document.readyState==="complete"?s():window.addEventListener("load",s);async function s(){try{const i=await navigator.serviceWorker.getRegistrations();for(const c of i){const u=new URL(c.scope).pathname;u.includes("MotionAG")&&u!==n&&u!==n+"/"&&(console.log("[main.tsx]  Unregistering old/wrong scope:",u),await c.unregister())}console.log("[main.tsx] Registering SW:",r,"Scope:",n);const l=await navigator.serviceWorker.register(r,{scope:n,updateViaCache:"none"});console.log("[main.tsx]  SW registered:",l.scope);try{const{createClient:c}=await lu(async()=>{const{createClient:f}=await Promise.resolve().then(()=>jf);return{createClient:f}},void 0);await c("https://jftthfniwfarxyisszjh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw").from("notifications_log").insert({stop_id:"BOOTSTRAP",route_id:"SW_REG_OK",alert_level:0,metadata:{step:"SW_REGISTERED_MAIN",scope:l.scope,version:"v1.5.17.9.4",timestamp:new Date().toISOString()}})}catch{}}catch(i){console.error("[main.tsx]  Service worker registration failed:",i);try{const{createClient:l}=await lu(async()=>{const{createClient:m}=await Promise.resolve().then(()=>jf);return{createClient:m}},void 0);await l("https://jftthfniwfarxyisszjh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmdHRoZm5pd2Zhcnh5aXNzempoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDkzMjEsImV4cCI6MjA4MzI4NTMyMX0.gPUAizcb955wy6-c_krSAx00_0VNsZc4J3C0I2tmrnw").from("notifications_log").insert({stop_id:"BOOTSTRAP",route_id:"SW_REG_FAIL",alert_level:0,metadata:{step:"SW_REGISTER_FAILED",error:String(i),version:"v1.5.17.9.4",timestamp:new Date().toISOString()}})}catch{}}}}Sk(document.getElementById("root")).render(a.jsx(be.StrictMode,{children:a.jsx(jH,{})}));export{A0 as W};
