<!DOCTYPE html>
<html>
<head>
    <title>Cleaning Motion...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
        async function nuke() {
            const log = (msg) => {
                document.body.innerHTML += `<div>${msg}</div>`;
                console.log(msg);
            };

            log("ðŸ§¹ Starting Deep Clean...");

            // 1. Unregister Service Workers
            if ('serviceWorker' in navigator) {
                try {
                    const regs = await navigator.serviceWorker.getRegistrations();
                    for (const reg of regs) {
                        await reg.unregister();
                        log(`ðŸ—‘ï¸ Unregistered SW: ${reg.scope}`);
                    }
                } catch (e) {
                    log(`âŒ SW Error: ${e.message}`);
                }
            }

            // 2. Clear Caches
            if ('caches' in window) {
                try {
                    const keys = await caches.keys();
                    for (const key of keys) {
                        await caches.delete(key);
                        log(`ðŸ—‘ï¸ Deleted Cache: ${key}`);
                    }
                } catch (e) {
                    log(`âŒ Cache Error: ${e.message}`);
                }
            }

            // 3. Clear Storage
            localStorage.clear();
            sessionStorage.clear();
            log("ðŸ—‘ï¸ Cleared Local/Session Storage");

            log("âœ… DONE! Redirecting in 3 seconds...");
            
            setTimeout(() => {
                window.location.replace('/MotionAG/?t=' + Date.now());
            }, 3000);
        }

        window.onload = nuke;
    </script>
    <style>
        body { font-family: system-ui, sans-serif; padding: 20px; background: #000; color: #0f0; }
        div { margin-bottom: 10px; }
    </style>
</head>
<body>
    <h1>Resetting App...</h1>
</body>
</html>
